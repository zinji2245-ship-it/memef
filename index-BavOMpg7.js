(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function zT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rh={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function iI(){if(F_)return pl;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return pl.Fragment=e,pl.jsx=n,pl.jsxs=n,pl}var G_;function oI(){return G_||(G_=1,Rh.exports=iI()),Rh.exports}var j=oI(),wh={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function sI(){if(B_)return Ie;B_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,k={};function Q(O,te,le){this.props=O,this.context=te,this.refs=k,this.updater=le||U}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=Q.prototype;function Z(O,te,le){this.props=O,this.context=te,this.refs=k,this.updater=le||U}var se=Z.prototype=new ie;se.constructor=Z,G(se,Q.prototype),se.isPureReactComponent=!0;var fe=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(O,te,le){var pe=le.ref;return{$$typeof:t,type:O,key:te,ref:pe!==void 0?pe:null,props:le}}function P(O,te){return M(O.type,te,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function q(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return te[le]})}var b=/\/+/g;function ke(O,te){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):te.toString(36)}function dt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,te,le,pe,Se){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var qe=!1;if(O===null)qe=!0;else switch(Ne){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(O.$$typeof){case t:case e:qe=!0;break;case v:return qe=O._init,$(qe(O._payload),te,le,pe,Se)}}if(qe)return Se=Se(O),qe=pe===""?"."+ke(O,0):pe,fe(Se)?(le="",qe!=null&&(le=qe.replace(b,"$&/")+"/"),$(Se,te,le,"",function(is){return is})):Se!=null&&(V(Se)&&(Se=P(Se,le+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(b,"$&/")+"/")+qe)),te.push(Se)),1;qe=0;var xt=pe===""?".":pe+":";if(fe(O))for(var lt=0;lt<O.length;lt++)pe=O[lt],Ne=xt+ke(pe,lt),qe+=$(pe,te,le,Ne,Se);else if(lt=R(O),typeof lt=="function")for(O=lt.call(O),lt=0;!(pe=O.next()).done;)pe=pe.value,Ne=xt+ke(pe,lt++),qe+=$(pe,te,le,Ne,Se);else if(Ne==="object"){if(typeof O.then=="function")return $(dt(O),te,le,pe,Se);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return qe}function re(O,te,le){if(O==null)return O;var pe=[],Se=0;return $(O,pe,"","",function(Ne){return te.call(le,Ne,Se++)}),pe}function ye(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var Be=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},$e={map:re,forEach:function(O,te,le){re(O,function(){te.apply(this,arguments)},le)},count:function(O){var te=0;return re(O,function(){te++}),te},toArray:function(O){return re(O,function(te){return te})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=E,Ie.Children=$e,Ie.Component=Q,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=Z,Ie.StrictMode=o,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,te,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=G({},O.props),Se=O.key;if(te!=null)for(Ne in te.key!==void 0&&(Se=""+te.key),te)!N.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(pe[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)pe.children=le;else if(1<Ne){for(var qe=Array(Ne),xt=0;xt<Ne;xt++)qe[xt]=arguments[xt+2];pe.children=qe}return M(O.type,Se,pe)},Ie.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ie.createElement=function(O,te,le){var pe,Se={},Ne=null;if(te!=null)for(pe in te.key!==void 0&&(Ne=""+te.key),te)N.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Se[pe]=te[pe]);var qe=arguments.length-2;if(qe===1)Se.children=le;else if(1<qe){for(var xt=Array(qe),lt=0;lt<qe;lt++)xt[lt]=arguments[lt+2];Se.children=xt}if(O&&O.defaultProps)for(pe in qe=O.defaultProps,qe)Se[pe]===void 0&&(Se[pe]=qe[pe]);return M(O,Ne,Se)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:h,render:O}},Ie.isValidElement=V,Ie.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ye}},Ie.memo=function(O,te){return{$$typeof:m,type:O,compare:te===void 0?null:te}},Ie.startTransition=function(O){var te=D.T,le={};D.T=le;try{var pe=O(),Se=D.S;Se!==null&&Se(le,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ue,Be)}catch(Ne){Be(Ne)}finally{te!==null&&le.types!==null&&(te.types=le.types),D.T=te}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(O){return D.H.use(O)},Ie.useActionState=function(O,te,le){return D.H.useActionState(O,te,le)},Ie.useCallback=function(O,te){return D.H.useCallback(O,te)},Ie.useContext=function(O){return D.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,te){return D.H.useDeferredValue(O,te)},Ie.useEffect=function(O,te){return D.H.useEffect(O,te)},Ie.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(O,te,le){return D.H.useImperativeHandle(O,te,le)},Ie.useInsertionEffect=function(O,te){return D.H.useInsertionEffect(O,te)},Ie.useLayoutEffect=function(O,te){return D.H.useLayoutEffect(O,te)},Ie.useMemo=function(O,te){return D.H.useMemo(O,te)},Ie.useOptimistic=function(O,te){return D.H.useOptimistic(O,te)},Ie.useReducer=function(O,te,le){return D.H.useReducer(O,te,le)},Ie.useRef=function(O){return D.H.useRef(O)},Ie.useState=function(O){return D.H.useState(O)},Ie.useSyncExternalStore=function(O,te,le){return D.H.useSyncExternalStore(O,te,le)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.4",Ie}var H_;function Rp(){return H_||(H_=1,wh.exports=sI()),wh.exports}var qt=Rp();const rI=zT(qt);var Mh={exports:{}},ml={},Nh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function aI(){return z_||(z_=1,(function(t){function e($,re){var ye=$.length;$.push(re);e:for(;0<ye;){var Be=ye-1>>>1,$e=$[Be];if(0<r($e,re))$[Be]=re,$[ye]=$e,ye=Be;else break e}}function n($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var re=$[0],ye=$.pop();if(ye!==re){$[0]=ye;e:for(var Be=0,$e=$.length,O=$e>>>1;Be<O;){var te=2*(Be+1)-1,le=$[te],pe=te+1,Se=$[pe];if(0>r(le,ye))pe<$e&&0>r(Se,le)?($[Be]=Se,$[pe]=ye,Be=pe):($[Be]=le,$[te]=ye,Be=te);else if(pe<$e&&0>r(Se,ye))$[Be]=Se,$[pe]=ye,Be=pe;else break e}}return re}function r($,re){var ye=$.sortIndex-re.sortIndex;return ye!==0?ye:$.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var y=[],m=[],v=1,E=null,S=3,R=!1,U=!1,G=!1,k=!1,Q=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function se($){for(var re=n(m);re!==null;){if(re.callback===null)o(m);else if(re.startTime<=$)o(m),re.sortIndex=re.expirationTime,e(y,re);else break;re=n(m)}}function fe($){if(G=!1,se($),!U)if(n(y)!==null)U=!0,ue||(ue=!0,q());else{var re=n(m);re!==null&&dt(fe,re.startTime-$)}}var ue=!1,D=-1,N=5,M=-1;function P(){return k?!0:!(t.unstable_now()-M<N)}function V(){if(k=!1,ue){var $=t.unstable_now();M=$;var re=!0;try{e:{U=!1,G&&(G=!1,ie(D),D=-1),R=!0;var ye=S;try{t:{for(se($),E=n(y);E!==null&&!(E.expirationTime>$&&P());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,S=E.priorityLevel;var $e=Be(E.expirationTime<=$);if($=t.unstable_now(),typeof $e=="function"){E.callback=$e,se($),re=!0;break t}E===n(y)&&o(y),se($)}else o(y);E=n(y)}if(E!==null)re=!0;else{var O=n(m);O!==null&&dt(fe,O.startTime-$),re=!1}}break e}finally{E=null,S=ye,R=!1}re=void 0}}finally{re?q():ue=!1}}}var q;if(typeof Z=="function")q=function(){Z(V)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,ke=b.port2;b.port1.onmessage=V,q=function(){ke.postMessage(null)}}else q=function(){Q(V,0)};function dt($,re){D=Q(function(){$(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function($){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var ye=S;S=re;try{return $()}finally{S=ye}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ye=S;S=$;try{return re()}finally{S=ye}},t.unstable_scheduleCallback=function($,re,ye){var Be=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Be+ye:Be):ye=Be,$){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ye+$e,$={id:v++,callback:re,priorityLevel:$,startTime:ye,expirationTime:$e,sortIndex:-1},ye>Be?($.sortIndex=ye,e(m,$),n(y)===null&&$===n(m)&&(G?(ie(D),D=-1):G=!0,dt(fe,ye-Be))):($.sortIndex=$e,e(y,$),U||R||(U=!0,ue||(ue=!0,q()))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var re=S;return function(){var ye=S;S=re;try{return $.apply(this,arguments)}finally{S=ye}}}})(Dh)),Dh}var Y_;function lI(){return Y_||(Y_=1,Nh.exports=aI()),Nh.exports}var bh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function uI(){if(J_)return Zt;J_=1;var t=Rp();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:m,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Zt.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(y,m,null,v)},Zt.flushSync=function(y){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=v,o.d.f()}},Zt.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},Zt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Zt.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,E=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):v==="script"&&o.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Zt.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},Zt.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=h(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Zt.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=h(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},Zt.requestFormReset=function(y){o.d.r(y)},Zt.unstable_batchedUpdates=function(y,m){return y(m)},Zt.useFormState=function(y,m,v){return c.H.useFormState(y,m,v)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.4",Zt}var K_;function cI(){if(K_)return bh.exports;K_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bh.exports=uI(),bh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function fI(){if(Q_)return ml;Q_=1;var t=lI(),e=Rp(),n=cI();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,u=s;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),s;_=_.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,I=g.child;I;){if(I===a){A=!0,a=g,u=_;break}if(I===u){A=!0,u=g,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,u=g;break}if(I===u){A=!0,u=_,a=g;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function ke(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case Q:return"Profiler";case k:return"StrictMode";case fe:return"Suspense";case ue:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case Z:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case se:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:ke(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return ke(i(s))}catch{}}return null}var dt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Be=[],$e=-1;function O(i){return{current:i}}function te(i){0>$e||(i.current=Be[$e],Be[$e]=null,$e--)}function le(i,s){$e++,Be[$e]=i.current,i.current=s}var pe=O(null),Se=O(null),Ne=O(null),qe=O(null);function xt(i,s){switch(le(Ne,s),le(Se,i),le(pe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?u_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=u_(s),i=c_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(pe),le(pe,i)}function lt(){te(pe),te(Se),te(Ne)}function is(i){i.memoizedState!==null&&le(qe,i);var s=pe.current,a=c_(s,i.type);s!==a&&(le(Se,i),le(pe,a))}function zs(i){Se.current===i&&(te(pe),te(Se)),qe.current===i&&(te(qe),cl._currentValue=ye)}var Ys,Js;function li(i){if(Ys===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ys=s&&s[1]||"",Js=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ys+i+Js}var ca=!1;function os(i,s){if(!i||ca)return"";ca=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Y=K}Reflect.construct(i,[],ee)}else{try{ee.call()}catch(K){Y=K}i.call(ee.prototype)}}else{try{throw Error()}catch(K){Y=K}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var x=A.split(`
`),z=I.split(`
`);for(g=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===x.length||g===z.length)for(u=x.length-1,g=z.length-1;1<=u&&0<=g&&x[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(x[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||x[u]!==z[g]){var X=`
`+x[u].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=u&&0<=g);break}}}finally{ca=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?li(a):""}function fa(i,s){switch(i.tag){case 26:case 27:case 5:return li(i.type);case 16:return li("Lazy");case 13:return i.child!==s&&s!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return os(i.type,!1);case 11:return os(i.type.render,!1);case 1:return os(i.type,!0);case 31:return li("Activity");default:return""}}function da(i){try{var s="",a=null;do s+=fa(i,a),a=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=t.unstable_scheduleCallback,lo=t.unstable_cancelCallback,Mf=t.unstable_shouldYield,Yl=t.unstable_requestPaint,on=t.unstable_now,ss=t.unstable_getCurrentPriorityLevel,ha=t.unstable_ImmediatePriority,pa=t.unstable_UserBlockingPriority,uo=t.unstable_NormalPriority,Nf=t.unstable_LowPriority,Jl=t.unstable_IdlePriority,Kl=t.log,Ql=t.unstable_setDisableYieldValue,zn=null,Ht=null;function wn(i){if(typeof Kl=="function"&&Ql(i),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(zn,i)}catch{}}var mt=Math.clz32?Math.clz32:Xl,$l=Math.log,Ks=Math.LN2;function Xl(i){return i>>>=0,i===0?32:31-($l(i)/Ks|0)|0}var ui=256,rs=262144,Et=4194304;function ci(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?g=ci(u):(A&=I,A!==0?g=ci(A):a||(a=I&~i,a!==0&&(g=ci(a))))):(I=u&~_,I!==0?g=ci(I):A!==0?g=ci(A):a||(a=u&~i,a!==0&&(g=ci(a)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:g}function Yn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Df(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wl(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function di(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function as(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function bf(i,s,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,x=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var X=31-mt(a),ee=1<<X;I[X]=0,x[X]=-1;var Y=z[X];if(Y!==null)for(z[X]=null,X=0;X<Y.length;X++){var K=Y[X];K!==null&&(K.lane&=-536870913)}a&=~ee}u!==0&&ls(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~s))}function ls(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-mt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function ma(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-mt(a),g=1<<u;g&s|i[u]&s&&(i[u]|=s),a&=~g}}function ga(i,s){var a=s&-s;return a=(a&42)!==0?1:us(a),(a&(i.suspendedLanes|s))!==0?0:a}function us(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ui(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Zl(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:V_(i.type))}function Jn(i,s){var a=re.p;try{return re.p=i,s()}finally{re.p=a}}var Kn=Math.random().toString(36).slice(2),St="__reactFiber$"+Kn,Lt="__reactProps$"+Kn,hi="__reactContainer$"+Kn,Qs="__reactEvents$"+Kn,xf="__reactListeners$"+Kn,jl="__reactHandles$"+Kn,eu="__reactResources$"+Kn,pi="__reactMarker$"+Kn;function $s(i){delete i[St],delete i[Lt],delete i[Qs],delete i[xf],delete i[jl]}function mi(i){var s=i[St];if(s)return s;for(var a=i.parentNode;a;){if(s=a[hi]||a[St]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=y_(i);i!==null;){if(a=i[St])return a;i=y_(i)}return s}i=a,a=i.parentNode}return null}function Mn(i){if(i=i[St]||i[hi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function _n(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function gi(i){var s=i[eu];return s||(s=i[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(i){i[pi]=!0}var ya=new Set,_a={};function yi(i,s){_i(i,s),_i(i+"Capture",s)}function _i(i,s){for(_a[i]=s,i=0;i<s.length;i++)ya.add(s[i])}var va=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ta={},Ea={};function tu(i){return Tt.call(Ea,i)?!0:Tt.call(Ta,i)?!1:va.test(i)?Ea[i]=!0:(Ta[i]=!0,!1)}function Xs(i,s,a){if(tu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function vn(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ct(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}function kt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function co(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sa(i,s,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Xe(i){if(!i._valueTracker){var s=co(i)?"checked":"value";i._valueTracker=Sa(i,s,""+i[s])}}function cs(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=co(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fs=/[\n"\\]/g;function un(i){return i.replace(fs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ws(i,s,a,u,g,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+kt(s)):i.value!==""+kt(s)&&(i.value=""+kt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Aa(i,A,kt(s)):a!=null?Aa(i,A,kt(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+kt(I):i.removeAttribute("name")}function nu(i,s,a,u,g,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Xe(i);return}a=a!=null?""+kt(a):"",s=s!=null?""+kt(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Xe(i)}function Aa(i,s,a){s==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function fo(i,s,a,u){if(i=i.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=s.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+kt(a),s=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function iu(i,s,a){if(s!=null&&(s=""+kt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+kt(a):""}function ho(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(dt(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=kt(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Xe(i)}function cn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ca(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||ou.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ia(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&Ca(i,g,u)}else for(var _ in s)s.hasOwnProperty(_)&&Ca(i,_,s[_])}function Zs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(i){return po.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qn(){}var Ra=null;function Nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mo=null,Ti=null;function ds(i){var s=Mn(i);if(s&&(i=s.stateNode)){var a=i[Lt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Ws(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var g=u[Lt]||null;if(!g)throw Error(o(90));Ws(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&cs(u)}break e;case"textarea":iu(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&fo(i,!!a.multiple,s,!1)}}}var er=!1;function go(i,s,a){if(er)return i(s,a);er=!0;try{var u=i(s);return u}finally{if(er=!1,(mo!==null||Ti!==null)&&(Zu(),mo&&(s=mo,i=Ti,Ti=mo=null,ds(s),i)))for(s=0;s<i.length;s++)ds(i[s])}}function $n(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Lt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(Dn)try{var je={};Object.defineProperty(je,"passive",{get:function(){hs=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{hs=!1}var Ei=null,wa=null,ps=null;function Ma(){if(ps)return ps;var i,s=wa,a=s.length,u,g="value"in Ei?Ei.value:Ei.textContent,_=g.length;for(i=0;i<a&&s[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&s[a-u]===g[_-u];u++);return ps=g.slice(i,1<u?1-u:void 0)}function ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Li(){return!0}function Xn(){return!1}function zt(i){function s(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Li:Xn,this.isPropagationStopped=Xn,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),s}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=zt(ki),yo=E({},ki,{view:0,detail:0}),Na=zt(yo),_o,tr,Ai,nr=E({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(_o=i.screenX-Ai.screenX,tr=i.screenY-Ai.screenY):tr=_o=0,Ai=i),_o)},movementY:function(i){return"movementY"in i?i.movementY:tr}}),Da=zt(nr),gs=E({},nr,{dataTransfer:0}),ru=zt(gs),au=E({},yo,{relatedTarget:0}),ys=zt(au),ba=E({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),lu=zt(ba),ir=E({},ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uu=zt(ir),cu=E({},ki,{data:0}),Ci=zt(cu),fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=hu[i])?!!s[i]:!1}function vo(){return pu}var sn=E({},yo,{key:function(i){if(i.key){var s=fu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?du[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(i){return i.type==="keypress"?ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),mu=zt(sn),gu=E({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oi=zt(gu),p=E({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),T=zt(p),C=E({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=zt(C),B=E({},nr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=zt(B),ae=E({},ki,{newState:0,oldState:0}),we=zt(ae),gt=[9,13,27,32],Je=Dn&&"CompositionEvent"in window,ut=null;Dn&&"documentMode"in document&&(ut=document.documentMode);var bn=Dn&&"TextEvent"in window&&!ut,Ii=Dn&&(!Je||ut&&8<ut&&11>=ut),Wn=" ",Zn=!1;function _s(i,s){switch(i){case"keyup":return gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function or(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var sr=!1;function wA(i,s){switch(i){case"compositionend":return or(s);case"keypress":return s.which!==32?null:(Zn=!0,Wn);case"textInput":return i=s.data,i===Wn&&Zn?null:i;default:return null}}function MA(i,s){if(sr)return i==="compositionend"||!Je&&_s(i,s)?(i=Ma(),ps=wa=Ei=null,sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ii&&s.locale!=="ko"?null:s.data;default:return null}}var NA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!NA[i.type]:s==="textarea"}function Em(i,s,a,u){mo?Ti?Ti.push(u):Ti=[u]:mo=u,s=sc(s,"onChange"),0<s.length&&(a=new Si("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var xa=null,Va=null;function DA(i){i_(i,0)}function yu(i){var s=_n(i);if(cs(s))return i}function Sm(i,s){if(i==="change")return s}var Am=!1;if(Dn){var Vf;if(Dn){var Pf="oninput"in document;if(!Pf){var Cm=document.createElement("div");Cm.setAttribute("oninput","return;"),Pf=typeof Cm.oninput=="function"}Vf=Pf}else Vf=!1;Am=Vf&&(!document.documentMode||9<document.documentMode)}function Im(){xa&&(xa.detachEvent("onpropertychange",Rm),Va=xa=null)}function Rm(i){if(i.propertyName==="value"&&yu(Va)){var s=[];Em(s,Va,i,Nn(i)),go(DA,s)}}function bA(i,s,a){i==="focusin"?(Im(),xa=s,Va=a,xa.attachEvent("onpropertychange",Rm)):i==="focusout"&&Im()}function xA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yu(Va)}function VA(i,s){if(i==="click")return yu(s)}function PA(i,s){if(i==="input"||i==="change")return yu(s)}function UA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Tn=typeof Object.is=="function"?Object.is:UA;function Pa(i,s){if(Tn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Tt.call(s,g)||!Tn(i[g],s[g]))return!1}return!0}function wm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mm(i,s){var a=wm(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wm(a)}}function Nm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Nm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Dm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=vi(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=vi(i.document)}return s}function Uf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var LA=Dn&&"documentMode"in document&&11>=document.documentMode,rr=null,Lf=null,Ua=null,kf=!1;function bm(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kf||rr==null||rr!==vi(u)||(u=rr,"selectionStart"in u&&Uf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ua&&Pa(Ua,u)||(Ua=u,u=sc(Lf,"onSelect"),0<u.length&&(s=new Si("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=rr)))}function vs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var ar={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Of={},xm={};Dn&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function Ts(i){if(Of[i])return Of[i];if(!ar[i])return i;var s=ar[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in xm)return Of[i]=s[a];return i}var Vm=Ts("animationend"),Pm=Ts("animationiteration"),Um=Ts("animationstart"),kA=Ts("transitionrun"),OA=Ts("transitionstart"),qA=Ts("transitioncancel"),Lm=Ts("transitionend"),km=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function jn(i,s){km.set(i,s),yi(s,[i])}var _u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},xn=[],lr=0,Ff=0;function vu(){for(var i=lr,s=Ff=lr=0;s<i;){var a=xn[s];xn[s++]=null;var u=xn[s];xn[s++]=null;var g=xn[s];xn[s++]=null;var _=xn[s];if(xn[s++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Om(a,g,_)}}function Tu(i,s,a,u){xn[lr++]=i,xn[lr++]=s,xn[lr++]=a,xn[lr++]=u,Ff|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Gf(i,s,a,u){return Tu(i,s,a,u),Eu(i)}function Es(i,s){return Tu(i,null,null,s),Eu(i)}function Om(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&s!==null&&(g=31-mt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=a|536870912),_):null}function Eu(i){if(50<il)throw il=0,Xd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ur={};function FA(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,s,a,u){return new FA(i,s,a,u)}function Bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qi(i,s){var a=i.alternate;return a===null?(a=En(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function qm(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Su(i,s,a,u,g,_){var A=0;if(u=i,typeof i=="function")Bf(i)&&(A=1);else if(typeof i=="string")A=YC(i,a,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=En(31,a,s,g),i.elementType=M,i.lanes=_,i;case G:return Ss(a.children,g,_,s);case k:A=8,g|=24;break;case Q:return i=En(12,a,s,g|2),i.elementType=Q,i.lanes=_,i;case fe:return i=En(13,a,s,g),i.elementType=fe,i.lanes=_,i;case ue:return i=En(19,a,s,g),i.elementType=ue,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case ie:A=9;break e;case se:A=11;break e;case D:A=14;break e;case N:A=16,u=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=En(A,a,s,g),s.elementType=i,s.type=u,s.lanes=_,s}function Ss(i,s,a,u){return i=En(7,i,u,s),i.lanes=a,i}function Hf(i,s,a){return i=En(6,i,null,s),i.lanes=a,i}function Fm(i){var s=En(18,null,null,0);return s.stateNode=i,s}function zf(i,s,a){return s=En(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Gm=new WeakMap;function Vn(i,s){if(typeof i=="object"&&i!==null){var a=Gm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:da(s)},Gm.set(i,s),s)}return{value:i,source:s,stack:da(s)}}var cr=[],fr=0,Au=null,La=0,Pn=[],Un=0,To=null,Ri=1,wi="";function Fi(i,s){cr[fr++]=La,cr[fr++]=Au,Au=i,La=s}function Bm(i,s,a){Pn[Un++]=Ri,Pn[Un++]=wi,Pn[Un++]=To,To=i;var u=Ri;i=wi;var g=32-mt(u)-1;u&=~(1<<g),a+=1;var _=32-mt(s)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Ri=1<<32-mt(s)+g|a<<g|u,wi=_+i}else Ri=1<<_|a<<g|u,wi=i}function Yf(i){i.return!==null&&(Fi(i,1),Bm(i,1,0))}function Jf(i){for(;i===Au;)Au=cr[--fr],cr[fr]=null,La=cr[--fr],cr[fr]=null;for(;i===To;)To=Pn[--Un],Pn[Un]=null,wi=Pn[--Un],Pn[Un]=null,Ri=Pn[--Un],Pn[Un]=null}function Hm(i,s){Pn[Un++]=Ri,Pn[Un++]=wi,Pn[Un++]=To,Ri=s.id,wi=s.overflow,To=i}var Yt=null,st=null,Oe=!1,Eo=null,Ln=!1,Kf=Error(o(519));function So(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ka(Vn(s,i)),Kf}function zm(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[St]=i,s[Lt]=u,a){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(a=0;a<sl.length;a++)xe(sl[a],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":xe("invalid",s),nu(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",s);break;case"textarea":xe("invalid",s),ho(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||a_(s.textContent,a)?(u.popover!=null&&(xe("beforetoggle",s),xe("toggle",s)),u.onScroll!=null&&xe("scroll",s),u.onScrollEnd!=null&&xe("scrollend",s),u.onClick!=null&&(s.onclick=Qn),s=!0):s=!1,s||So(i,!0)}function Ym(i){for(Yt=i.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Yt=Yt.return}}function dr(i){if(i!==Yt)return!1;if(!Oe)return Ym(i),Oe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||fh(i.type,i.memoizedProps)),a=!a),a&&st&&So(i),Ym(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));st=g_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));st=g_(i)}else s===27?(s=st,Lo(i.type)?(i=gh,gh=null,st=i):st=s):st=Yt?On(i.stateNode.nextSibling):null;return!0}function As(){st=Yt=null,Oe=!1}function Qf(){var i=Eo;return i!==null&&(pn===null?pn=i:pn.push.apply(pn,i),Eo=null),i}function ka(i){Eo===null?Eo=[i]:Eo.push(i)}var $f=O(null),Cs=null,Gi=null;function Ao(i,s,a){le($f,s._currentValue),s._currentValue=a}function Bi(i){i._currentValue=$f.current,te($f)}function Xf(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function Wf(i,s,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=g;for(var x=0;x<s.length;x++)if(I.context===s[x]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Xf(_.return,a,i),u||(A=null);break e}_=I.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Xf(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function hr(i,s,a,u){i=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=g.type;Tn(g.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(g===qe.current){if(A=g.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(cl):i=[cl])}g=g.return}i!==null&&Wf(s,i,a,u),s.flags|=262144}function Cu(i){for(i=i.firstContext;i!==null;){if(!Tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Is(i){Cs=i,Gi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jt(i){return Jm(Cs,i)}function Iu(i,s){return Cs===null&&Is(i),Jm(i,s)}function Jm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Gi===null){if(i===null)throw Error(o(308));Gi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Gi=Gi.next=s;return a}var GA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},BA=t.unstable_scheduleCallback,HA=t.unstable_NormalPriority,It={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new GA,data:new Map,refCount:0}}function Oa(i){i.refCount--,i.refCount===0&&BA(HA,function(){i.controller.abort()})}var qa=null,jf=0,pr=0,mr=null;function zA(i,s){if(qa===null){var a=qa=[];jf=0,pr=nh(),mr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return jf++,s.then(Km,Km),s}function Km(){if(--jf===0&&qa!==null){mr!==null&&(mr.status="fulfilled");var i=qa;qa=null,pr=0,mr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function YA(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Qm=$.S;$.S=function(i,s){by=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&zA(i,s),Qm!==null&&Qm(i,s)};var Rs=O(null);function ed(){var i=Rs.current;return i!==null?i:it.pooledCache}function Ru(i,s){s===null?le(Rs,Rs.current):le(Rs,s.pool)}function $m(){var i=ed();return i===null?null:{parent:It._currentValue,pool:i}}var gr=Error(o(460)),td=Error(o(474)),wu=Error(o(542)),Mu={then:function(){}};function Xm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wm(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Qn,Qn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,jm(i),i;default:if(typeof s.status=="string")s.then(Qn,Qn);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,jm(i),i}throw Ms=s,gr}}function ws(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ms=a,gr):a}}var Ms=null;function Zm(){if(Ms===null)throw Error(o(459));var i=Ms;return Ms=null,i}function jm(i){if(i===gr||i===wu)throw Error(o(483))}var yr=null,Fa=0;function Nu(i){var s=Fa;return Fa+=1,yr===null&&(yr=[]),Wm(yr,i,s)}function Ga(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Du(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function eg(i){function s(F,L){if(i){var H=F.deletions;H===null?(F.deletions=[L],F.flags|=16):H.push(L)}}function a(F,L){if(!i)return null;for(;L!==null;)s(F,L),L=L.sibling;return null}function u(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function g(F,L){return F=qi(F,L),F.index=0,F.sibling=null,F}function _(F,L,H){return F.index=H,i?(H=F.alternate,H!==null?(H=H.index,H<L?(F.flags|=67108866,L):H):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function A(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function I(F,L,H,W){return L===null||L.tag!==6?(L=Hf(H,F.mode,W),L.return=F,L):(L=g(L,H),L.return=F,L)}function x(F,L,H,W){var _e=H.type;return _e===G?X(F,L,H.props.children,W,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&ws(_e)===L.type)?(L=g(L,H.props),Ga(L,H),L.return=F,L):(L=Su(H.type,H.key,H.props,null,F.mode,W),Ga(L,H),L.return=F,L)}function z(F,L,H,W){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=zf(H,F.mode,W),L.return=F,L):(L=g(L,H.children||[]),L.return=F,L)}function X(F,L,H,W,_e){return L===null||L.tag!==7?(L=Ss(H,F.mode,W,_e),L.return=F,L):(L=g(L,H),L.return=F,L)}function ee(F,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Hf(""+L,F.mode,H),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return H=Su(L.type,L.key,L.props,null,F.mode,H),Ga(H,L),H.return=F,H;case U:return L=zf(L,F.mode,H),L.return=F,L;case N:return L=ws(L),ee(F,L,H)}if(dt(L)||q(L))return L=Ss(L,F.mode,H,null),L.return=F,L;if(typeof L.then=="function")return ee(F,Nu(L),H);if(L.$$typeof===Z)return ee(F,Iu(F,L),H);Du(F,L)}return null}function Y(F,L,H,W){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:I(F,L,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===_e?x(F,L,H,W):null;case U:return H.key===_e?z(F,L,H,W):null;case N:return H=ws(H),Y(F,L,H,W)}if(dt(H)||q(H))return _e!==null?null:X(F,L,H,W,null);if(typeof H.then=="function")return Y(F,L,Nu(H),W);if(H.$$typeof===Z)return Y(F,L,Iu(F,H),W);Du(F,H)}return null}function K(F,L,H,W,_e){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return F=F.get(H)||null,I(L,F,""+W,_e);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case R:return F=F.get(W.key===null?H:W.key)||null,x(L,F,W,_e);case U:return F=F.get(W.key===null?H:W.key)||null,z(L,F,W,_e);case N:return W=ws(W),K(F,L,H,W,_e)}if(dt(W)||q(W))return F=F.get(H)||null,X(L,F,W,_e,null);if(typeof W.then=="function")return K(F,L,H,Nu(W),_e);if(W.$$typeof===Z)return K(F,L,H,Iu(L,W),_e);Du(L,W)}return null}function me(F,L,H,W){for(var _e=null,He=null,ge=L,De=L=0,Pe=null;ge!==null&&De<H.length;De++){ge.index>De?(Pe=ge,ge=null):Pe=ge.sibling;var ze=Y(F,ge,H[De],W);if(ze===null){ge===null&&(ge=Pe);break}i&&ge&&ze.alternate===null&&s(F,ge),L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze,ge=Pe}if(De===H.length)return a(F,ge),Oe&&Fi(F,De),_e;if(ge===null){for(;De<H.length;De++)ge=ee(F,H[De],W),ge!==null&&(L=_(ge,L,De),He===null?_e=ge:He.sibling=ge,He=ge);return Oe&&Fi(F,De),_e}for(ge=u(ge);De<H.length;De++)Pe=K(ge,F,De,H[De],W),Pe!==null&&(i&&Pe.alternate!==null&&ge.delete(Pe.key===null?De:Pe.key),L=_(Pe,L,De),He===null?_e=Pe:He.sibling=Pe,He=Pe);return i&&ge.forEach(function(Go){return s(F,Go)}),Oe&&Fi(F,De),_e}function Te(F,L,H,W){if(H==null)throw Error(o(151));for(var _e=null,He=null,ge=L,De=L=0,Pe=null,ze=H.next();ge!==null&&!ze.done;De++,ze=H.next()){ge.index>De?(Pe=ge,ge=null):Pe=ge.sibling;var Go=Y(F,ge,ze.value,W);if(Go===null){ge===null&&(ge=Pe);break}i&&ge&&Go.alternate===null&&s(F,ge),L=_(Go,L,De),He===null?_e=Go:He.sibling=Go,He=Go,ge=Pe}if(ze.done)return a(F,ge),Oe&&Fi(F,De),_e;if(ge===null){for(;!ze.done;De++,ze=H.next())ze=ee(F,ze.value,W),ze!==null&&(L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze);return Oe&&Fi(F,De),_e}for(ge=u(ge);!ze.done;De++,ze=H.next())ze=K(ge,F,De,ze.value,W),ze!==null&&(i&&ze.alternate!==null&&ge.delete(ze.key===null?De:ze.key),L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze);return i&&ge.forEach(function(nI){return s(F,nI)}),Oe&&Fi(F,De),_e}function nt(F,L,H,W){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===G){if(L.tag===7){a(F,L.sibling),W=g(L,H.props.children),W.return=F,F=W;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&ws(_e)===L.type){a(F,L.sibling),W=g(L,H.props),Ga(W,H),W.return=F,F=W;break e}a(F,L);break}else s(F,L);L=L.sibling}H.type===G?(W=Ss(H.props.children,F.mode,W,H.key),W.return=F,F=W):(W=Su(H.type,H.key,H.props,null,F.mode,W),Ga(W,H),W.return=F,F=W)}return A(F);case U:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(F,L.sibling),W=g(L,H.children||[]),W.return=F,F=W;break e}else{a(F,L);break}else s(F,L);L=L.sibling}W=zf(H,F.mode,W),W.return=F,F=W}return A(F);case N:return H=ws(H),nt(F,L,H,W)}if(dt(H))return me(F,L,H,W);if(q(H)){if(_e=q(H),typeof _e!="function")throw Error(o(150));return H=_e.call(H),Te(F,L,H,W)}if(typeof H.then=="function")return nt(F,L,Nu(H),W);if(H.$$typeof===Z)return nt(F,L,Iu(F,H),W);Du(F,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(F,L.sibling),W=g(L,H),W.return=F,F=W):(a(F,L),W=Hf(H,F.mode,W),W.return=F,F=W),A(F)):a(F,L)}return function(F,L,H,W){try{Fa=0;var _e=nt(F,L,H,W);return yr=null,_e}catch(ge){if(ge===gr||ge===wu)throw ge;var He=En(29,ge,null,F.mode);return He.lanes=W,He.return=F,He}finally{}}}var Ns=eg(!0),tg=eg(!1),Co=!1;function nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Io(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ro(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=Eu(i),Om(i,null,a),s}return Tu(i,u,s,a),Eu(i)}function Ba(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,ma(i,a)}}function od(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=s:_=_.next=s}else g=_=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var sd=!1;function Ha(){if(sd){var i=mr;if(i!==null)throw i}}function za(i,s,a,u){sd=!1;var g=i.updateQueue;Co=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var x=I,z=x.next;x.next=null,A===null?_=z:A.next=z,A=x;var X=i.alternate;X!==null&&(X=X.updateQueue,I=X.lastBaseUpdate,I!==A&&(I===null?X.firstBaseUpdate=z:I.next=z,X.lastBaseUpdate=x))}if(_!==null){var ee=g.baseState;A=0,X=z=x=null,I=_;do{var Y=I.lane&-536870913,K=Y!==I.lane;if(K?(Ve&Y)===Y:(u&Y)===Y){Y!==0&&Y===pr&&(sd=!0),X!==null&&(X=X.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=i,Te=I;Y=s;var nt=a;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){ee=me.call(nt,ee,Y);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,Y=typeof me=="function"?me.call(nt,ee,Y):me,Y==null)break e;ee=E({},ee,Y);break e;case 2:Co=!0}}Y=I.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},X===null?(z=X=K,x=ee):X=X.next=K,A|=Y;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;K=I,I=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);X===null&&(x=ee),g.baseState=x,g.firstBaseUpdate=z,g.lastBaseUpdate=X,_===null&&(g.shared.lanes=0),bo|=A,i.lanes=A,i.memoizedState=ee}}function ng(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function ig(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ng(a[i],s)}var _r=O(null),bu=O(0);function og(i,s){i=Wi,le(bu,i),le(_r,s),Wi=i|s.baseLanes}function rd(){le(bu,Wi),le(_r,_r.current)}function ad(){Wi=bu.current,te(_r),te(bu)}var Sn=O(null),kn=null;function wo(i){var s=i.alternate;le(yt,yt.current&1),le(Sn,i),kn===null&&(s===null||_r.current!==null||s.memoizedState!==null)&&(kn=i)}function ld(i){le(yt,yt.current),le(Sn,i),kn===null&&(kn=i)}function sg(i){i.tag===22?(le(yt,yt.current),le(Sn,i),kn===null&&(kn=i)):Mo()}function Mo(){le(yt,yt.current),le(Sn,Sn.current)}function An(i){te(Sn),kn===i&&(kn=null),te(yt)}var yt=O(0);function xu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ph(a)||mh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hi=0,Me=null,et=null,Rt=null,Vu=!1,vr=!1,Ds=!1,Pu=0,Ya=0,Tr=null,JA=0;function ht(){throw Error(o(321))}function ud(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Tn(i[a],s[a]))return!1;return!0}function cd(i,s,a,u,g,_){return Hi=_,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?Bg:Id,Ds=!1,_=a(u,g),Ds=!1,vr&&(_=ag(s,a,u,g)),rg(i),_}function rg(i){$.H=Qa;var s=et!==null&&et.next!==null;if(Hi=0,Rt=et=Me=null,Vu=!1,Ya=0,Tr=null,s)throw Error(o(300));i===null||wt||(i=i.dependencies,i!==null&&Cu(i)&&(wt=!0))}function ag(i,s,a,u){Me=i;var g=0;do{if(vr&&(Tr=null),Ya=0,vr=!1,25<=g)throw Error(o(301));if(g+=1,Rt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=Hg,_=s(a,u)}while(vr);return _}function KA(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?Ja(s):s,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Me.flags|=1024),s}function fd(){var i=Pu!==0;return Pu=0,i}function dd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function hd(i){if(Vu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Vu=!1}Hi=0,Rt=et=Me=null,vr=!1,Ya=Pu=0,Tr=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Me.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function _t(){if(et===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var s=Rt===null?Me.memoizedState:Rt.next;if(s!==null)Rt=s,et=i;else{if(i===null)throw Me.alternate===null?Error(o(467)):Error(o(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?Me.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(i){var s=Ya;return Ya+=1,Tr===null&&(Tr=[]),i=Wm(Tr,i,s),s=Me,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?Bg:Id),i}function Lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ja(i);if(i.$$typeof===Z)return Jt(i)}throw Error(o(438,String(i)))}function pd(i){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Uu(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=P;return s.index++,a}function zi(i,s){return typeof s=="function"?s(i):s}function ku(i){var s=_t();return md(s,et,i)}function md(i,s,a){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}s.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{s=g.next;var I=A=null,x=null,z=s,X=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(Ve&ee)===ee:(Hi&ee)===ee){var Y=z.revertLane;if(Y===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===pr&&(X=!0);else if((Hi&Y)===Y){z=z.next,Y===pr&&(X=!0);continue}else ee={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=ee,A=_):x=x.next=ee,Me.lanes|=Y,bo|=Y;ee=z.action,Ds&&a(_,ee),_=z.hasEagerState?z.eagerState:a(_,ee)}else Y={lane:ee,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=Y,A=_):x=x.next=Y,Me.lanes|=ee,bo|=ee;z=z.next}while(z!==null&&z!==s);if(x===null?A=_:x.next=I,!Tn(_,i.memoizedState)&&(wt=!0,X&&(a=mr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=x,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function gd(i){var s=_t(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=s.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);Tn(_,s.memoizedState)||(wt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,u]}function lg(i,s,a){var u=Me,g=_t(),_=Oe;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!Tn((et||g).memoizedState,a);if(A&&(g.memoizedState=a,wt=!0),g=g.queue,vd(fg.bind(null,u,g,i),[i]),g.getSnapshot!==s||A||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,Er(9,{destroy:void 0},cg.bind(null,u,g,a,s),null),it===null)throw Error(o(349));_||(Hi&127)!==0||ug(u,s,a)}return a}function ug(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=Uu(),Me.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function cg(i,s,a,u){s.value=a,s.getSnapshot=u,dg(s)&&hg(i)}function fg(i,s,a){return a(function(){dg(s)&&hg(i)})}function dg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Tn(i,a)}catch{return!0}}function hg(i){var s=Es(i,2);s!==null&&mn(s,i,2)}function yd(i){var s=rn();if(typeof i=="function"){var a=i;if(i=a(),Ds){wn(!0);try{a()}finally{wn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:i},s}function pg(i,s,a,u){return i.baseState=a,md(i,et,typeof u=="function"?u:zi)}function QA(i,s,a,u,g){if(Fu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};$.T!==null?a(!0):_.isTransition=!1,u(_),a=s.pending,a===null?(_.next=s.pending=_,mg(s,_)):(_.next=a.next,s.pending=a.next=_)}}function mg(i,s){var a=s.action,u=s.payload,g=i.state;if(s.isTransition){var _=$.T,A={};$.T=A;try{var I=a(g,u),x=$.S;x!==null&&x(A,I),gg(i,s,I)}catch(z){_d(i,s,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),$.T=_}}else try{_=a(g,u),gg(i,s,_)}catch(z){_d(i,s,z)}}function gg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){yg(i,s,u)},function(u){return _d(i,s,u)}):yg(i,s,a)}function yg(i,s,a){s.status="fulfilled",s.value=a,_g(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,mg(i,a)))}function _d(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,_g(s),s=s.next;while(s!==u)}i.action=null}function _g(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function vg(i,s){return s}function Tg(i,s){if(Oe){var a=it.formState;if(a!==null){e:{var u=Me;if(Oe){if(st){t:{for(var g=st,_=Ln;g.nodeType!==8;){if(!_){g=null;break t}if(g=On(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){st=On(g.nextSibling),u=g.data==="F!";break e}}So(u)}u=!1}u&&(s=a[0])}}return a=rn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:s},a.queue=u,a=qg.bind(null,Me,u),u.dispatch=a,u=yd(!1),_=Cd.bind(null,Me,!1,u.queue),u=rn(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,a=QA.bind(null,Me,g,_,a),g.dispatch=a,u.memoizedState=i,[s,a,!1]}function Eg(i){var s=_t();return Sg(s,et,i)}function Sg(i,s,a){if(s=md(i,s,vg)[0],i=ku(zi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ja(s)}catch(A){throw A===gr?wu:A}else u=s;s=_t();var g=s.queue,_=g.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,Er(9,{destroy:void 0},$A.bind(null,g,a),null)),[u,_,i]}function $A(i,s){i.action=s}function Ag(i){var s=_t(),a=et;if(a!==null)return Sg(s,a,i);_t(),s=s.memoizedState,a=_t();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function Er(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Uu(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function Cg(){return _t().memoizedState}function Ou(i,s,a,u){var g=rn();Me.flags|=i,g.memoizedState=Er(1|s,{destroy:void 0},a,u===void 0?null:u)}function qu(i,s,a,u){var g=_t();u=u===void 0?null:u;var _=g.memoizedState.inst;et!==null&&u!==null&&ud(u,et.memoizedState.deps)?g.memoizedState=Er(s,_,a,u):(Me.flags|=i,g.memoizedState=Er(1|s,_,a,u))}function Ig(i,s){Ou(8390656,8,i,s)}function vd(i,s){qu(2048,8,i,s)}function XA(i){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=Uu(),Me.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Rg(i){var s=_t().memoizedState;return XA({ref:s,nextImpl:i}),function(){if((Ke&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function wg(i,s){return qu(4,2,i,s)}function Mg(i,s){return qu(4,4,i,s)}function Ng(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Dg(i,s,a){a=a!=null?a.concat([i]):null,qu(4,4,Ng.bind(null,s,i),a)}function Td(){}function bg(i,s){var a=_t();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&ud(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function xg(i,s){var a=_t();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&ud(s,u[1]))return u[0];if(u=i(),Ds){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,s],u}function Ed(i,s,a){return a===void 0||(Hi&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Vy(),Me.lanes|=i,bo|=i,a)}function Vg(i,s,a,u){return Tn(a,s)?a:_r.current!==null?(i=Ed(i,a,u),Tn(i,s)||(wt=!0),i):(Hi&42)===0||(Hi&1073741824)!==0&&(Ve&261930)===0?(wt=!0,i.memoizedState=a):(i=Vy(),Me.lanes|=i,bo|=i,s)}function Pg(i,s,a,u,g){var _=re.p;re.p=_!==0&&8>_?_:8;var A=$.T,I={};$.T=I,Cd(i,!1,s,a);try{var x=g(),z=$.S;if(z!==null&&z(I,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var X=YA(x,u);Ka(i,s,X,Rn(i))}else Ka(i,s,u,Rn(i))}catch(ee){Ka(i,s,{then:function(){},status:"rejected",reason:ee},Rn())}finally{re.p=_,A!==null&&I.types!==null&&(A.types=I.types),$.T=A}}function WA(){}function Sd(i,s,a,u){if(i.tag!==5)throw Error(o(476));var g=Ug(i).queue;Pg(i,g,s,ye,a===null?WA:function(){return Lg(i),a(u)})}function Ug(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Lg(i){var s=Ug(i);s.next===null&&(s=i.alternate.memoizedState),Ka(i,s.next.queue,{},Rn())}function Ad(){return Jt(cl)}function kg(){return _t().memoizedState}function Og(){return _t().memoizedState}function ZA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Rn();i=Io(a);var u=Ro(s,i,a);u!==null&&(mn(u,s,a),Ba(u,s,a)),s={cache:Zf()},i.payload=s;return}s=s.return}}function jA(i,s,a){var u=Rn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(i)?Fg(s,a):(a=Gf(i,s,a,u),a!==null&&(mn(a,i,u),Gg(a,s,u)))}function qg(i,s,a){var u=Rn();Ka(i,s,a,u)}function Ka(i,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(i))Fg(s,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,I=_(A,a);if(g.hasEagerState=!0,g.eagerState=I,Tn(I,A))return Tu(i,s,g,0),it===null&&vu(),!1}catch{}finally{}if(a=Gf(i,s,g,u),a!==null)return mn(a,i,u),Gg(a,s,u),!0}return!1}function Cd(i,s,a,u){if(u={lane:2,revertLane:nh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fu(i)){if(s)throw Error(o(479))}else s=Gf(i,a,u,2),s!==null&&mn(s,i,2)}function Fu(i){var s=i.alternate;return i===Me||s!==null&&s===Me}function Fg(i,s){vr=Vu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Gg(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,ma(i,a)}}var Qa={readContext:Jt,use:Lu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Qa.useEffectEvent=ht;var Bg={readContext:Jt,use:Lu,useCallback:function(i,s){return rn().memoizedState=[i,s===void 0?null:s],i},useContext:Jt,useEffect:Ig,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Ou(4194308,4,Ng.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Ou(4194308,4,i,s)},useInsertionEffect:function(i,s){Ou(4,2,i,s)},useMemo:function(i,s){var a=rn();s=s===void 0?null:s;var u=i();if(Ds){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=rn();if(a!==void 0){var g=a(s);if(Ds){wn(!0);try{a(s)}finally{wn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=jA.bind(null,Me,i),[u.memoizedState,i]},useRef:function(i){var s=rn();return i={current:i},s.memoizedState=i},useState:function(i){i=yd(i);var s=i.queue,a=qg.bind(null,Me,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Td,useDeferredValue:function(i,s){var a=rn();return Ed(a,i,s)},useTransition:function(){var i=yd(!1);return i=Pg.bind(null,Me,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=Me,g=rn();if(Oe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),it===null)throw Error(o(349));(Ve&127)!==0||ug(u,s,a)}g.memoizedState=a;var _={value:a,getSnapshot:s};return g.queue=_,Ig(fg.bind(null,u,_,i),[i]),u.flags|=2048,Er(9,{destroy:void 0},cg.bind(null,u,_,a,s),null),a},useId:function(){var i=rn(),s=it.identifierPrefix;if(Oe){var a=wi,u=Ri;a=(u&~(1<<32-mt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Pu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=JA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Ad,useFormState:Tg,useActionState:Tg,useOptimistic:function(i){var s=rn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Cd.bind(null,Me,!0,a),a.dispatch=s,[i,s]},useMemoCache:pd,useCacheRefresh:function(){return rn().memoizedState=ZA.bind(null,Me)},useEffectEvent:function(i){var s=rn(),a={impl:i};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Id={readContext:Jt,use:Lu,useCallback:bg,useContext:Jt,useEffect:vd,useImperativeHandle:Dg,useInsertionEffect:wg,useLayoutEffect:Mg,useMemo:xg,useReducer:ku,useRef:Cg,useState:function(){return ku(zi)},useDebugValue:Td,useDeferredValue:function(i,s){var a=_t();return Vg(a,et.memoizedState,i,s)},useTransition:function(){var i=ku(zi)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ja(i),s]},useSyncExternalStore:lg,useId:kg,useHostTransitionStatus:Ad,useFormState:Eg,useActionState:Eg,useOptimistic:function(i,s){var a=_t();return pg(a,et,i,s)},useMemoCache:pd,useCacheRefresh:Og};Id.useEffectEvent=Rg;var Hg={readContext:Jt,use:Lu,useCallback:bg,useContext:Jt,useEffect:vd,useImperativeHandle:Dg,useInsertionEffect:wg,useLayoutEffect:Mg,useMemo:xg,useReducer:gd,useRef:Cg,useState:function(){return gd(zi)},useDebugValue:Td,useDeferredValue:function(i,s){var a=_t();return et===null?Ed(a,i,s):Vg(a,et.memoizedState,i,s)},useTransition:function(){var i=gd(zi)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ja(i),s]},useSyncExternalStore:lg,useId:kg,useHostTransitionStatus:Ad,useFormState:Ag,useActionState:Ag,useOptimistic:function(i,s){var a=_t();return et!==null?pg(a,et,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:pd,useCacheRefresh:Og};Hg.useEffectEvent=Rg;function Rd(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var wd={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=Rn(),g=Io(u);g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(mn(s,i,u),Ba(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=Rn(),g=Io(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(mn(s,i,u),Ba(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Rn(),u=Io(a);u.tag=2,s!=null&&(u.callback=s),s=Ro(i,u,a),s!==null&&(mn(s,i,a),Ba(s,i,a))}};function zg(i,s,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,u)||!Pa(g,_):!0}function Yg(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&wd.enqueueReplaceState(s,s.state,null)}function bs(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Jg(i){_u(i)}function Kg(i){console.error(i)}function Qg(i){_u(i)}function Gu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function $g(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Md(i,s,a){return a=Io(a),a.tag=3,a.payload={element:null},a.callback=function(){Gu(i,s)},a}function Xg(i){return i=Io(i),i.tag=3,i}function Wg(i,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){$g(s,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){$g(s,a,u),typeof g!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function eC(i,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&hr(s,a,g,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return kn===null?ju():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Mu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),jd(i,u,g)),!1;case 22:return a.flags|=65536,u===Mu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),jd(i,u,g)),!1}throw Error(o(435,a.tag))}return jd(i,u,g),ju(),!1}if(Oe)return s=Sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Kf&&(i=Error(o(422),{cause:u}),ka(Vn(i,a)))):(u!==Kf&&(s=Error(o(423),{cause:u}),ka(Vn(s,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Vn(u,a),g=Md(i.stateNode,u,g),od(i,g),pt!==4&&(pt=2)),!1;var _=Error(o(520),{cause:u});if(_=Vn(_,a),nl===null?nl=[_]:nl.push(_),pt!==4&&(pt=2),s===null)return!0;u=Vn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Md(a.stateNode,u,i),od(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xo===null||!xo.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Xg(g),Wg(g,i,a,u),od(a,g),!1}a=a.return}while(a!==null);return!1}var Nd=Error(o(461)),wt=!1;function Kt(i,s,a,u){s.child=i===null?tg(s,null,a,u):Ns(s,i.child,a,u)}function Zg(i,s,a,u,g){a=a.render;var _=s.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return Is(s),u=cd(i,s,a,A,_,g),I=fd(),i!==null&&!wt?(dd(i,s,g),Yi(i,s,g)):(Oe&&I&&Yf(s),s.flags|=1,Kt(i,s,u,g),s.child)}function jg(i,s,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Bf(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,ey(i,s,_,u,g)):(i=Su(a.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!kd(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(A,u)&&i.ref===s.ref)return Yi(i,s,g)}return s.flags|=1,i=qi(_,u),i.ref=s.ref,i.return=s,s.child=i}function ey(i,s,a,u,g){if(i!==null){var _=i.memoizedProps;if(Pa(_,u)&&i.ref===s.ref)if(wt=!1,s.pendingProps=u=_,kd(i,g))(i.flags&131072)!==0&&(wt=!0);else return s.lanes=i.lanes,Yi(i,s,g)}return Dd(i,s,a,u,g)}function ty(i,s,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,s.child=null;return ny(i,s,_,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ru(s,_!==null?_.cachePool:null),_!==null?og(s,_):rd(),sg(s);else return u=s.lanes=536870912,ny(i,s,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Ru(s,_.cachePool),og(s,_),Mo(),s.memoizedState=null):(i!==null&&Ru(s,null),rd(),Mo());return Kt(i,s,g,a),s.child}function $a(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ny(i,s,a,u,g){var _=ed();return _=_===null?null:{parent:It._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&Ru(s,null),rd(),sg(s),i!==null&&hr(i,s,u,!0),s.childLanes=g,null}function Bu(i,s){return s=zu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function iy(i,s,a){return Ns(s,i.child,null,a),i=Bu(s,s.pendingProps),i.flags|=2,An(s),s.memoizedState=null,i}function tC(i,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Oe){if(u.mode==="hidden")return i=Bu(s,u),s.lanes=536870912,$a(null,i);if(ld(s),(i=st)?(i=m_(i,Ln),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Fm(i),a.return=s,s.child=a,Yt=s,st=null)):i=null,i===null)throw So(s);return s.lanes=536870912,null}return Bu(s,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(ld(s),g)if(s.flags&256)s.flags&=-257,s=iy(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(wt||hr(i,s,a,!1),g=(a&i.childLanes)!==0,wt||g){if(u=it,u!==null&&(A=ga(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Es(i,A),mn(u,i,A),Nd;ju(),s=iy(i,s,a)}else i=_.treeContext,st=On(A.nextSibling),Yt=s,Oe=!0,Eo=null,Ln=!1,i!==null&&Hm(s,i),s=Bu(s,u),s.flags|=4096;return s}return i=qi(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Hu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Dd(i,s,a,u,g){return Is(s),a=cd(i,s,a,u,void 0,g),u=fd(),i!==null&&!wt?(dd(i,s,g),Yi(i,s,g)):(Oe&&u&&Yf(s),s.flags|=1,Kt(i,s,a,g),s.child)}function oy(i,s,a,u,g,_){return Is(s),s.updateQueue=null,a=ag(s,u,a,g),rg(i),u=fd(),i!==null&&!wt?(dd(i,s,_),Yi(i,s,_)):(Oe&&u&&Yf(s),s.flags|=1,Kt(i,s,a,_),s.child)}function sy(i,s,a,u,g){if(Is(s),s.stateNode===null){var _=ur,A=a.contextType;typeof A=="object"&&A!==null&&(_=Jt(A)),_=new a(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=wd,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},nd(s),A=a.contextType,_.context=typeof A=="object"&&A!==null?Jt(A):ur,_.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Rd(s,a,A,u),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&wd.enqueueReplaceState(_,_.state,null),za(s,u,_,g),Ha(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var I=s.memoizedProps,x=bs(a,I);_.props=x;var z=_.context,X=a.contextType;A=ur,typeof X=="object"&&X!==null&&(A=Jt(X));var ee=a.getDerivedStateFromProps;X=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&Yg(s,_,u,A),Co=!1;var Y=s.memoizedState;_.state=Y,za(s,u,_,g),Ha(),z=s.memoizedState,I||Y!==z||Co?(typeof ee=="function"&&(Rd(s,a,ee,u),z=s.memoizedState),(x=Co||zg(s,a,x,u,Y,z,A))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),_.props=u,_.state=z,_.context=A,u=x):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,id(i,s),A=s.memoizedProps,X=bs(a,A),_.props=X,ee=s.pendingProps,Y=_.context,z=a.contextType,x=ur,typeof z=="object"&&z!==null&&(x=Jt(z)),I=a.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ee||Y!==x)&&Yg(s,_,u,x),Co=!1,Y=s.memoizedState,_.state=Y,za(s,u,_,g),Ha();var K=s.memoizedState;A!==ee||Y!==K||Co||i!==null&&i.dependencies!==null&&Cu(i.dependencies)?(typeof I=="function"&&(Rd(s,a,I,u),K=s.memoizedState),(X=Co||zg(s,a,X,u,Y,K,x)||i!==null&&i.dependencies!==null&&Cu(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,x),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,x)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),_.props=u,_.state=K,_.context=x,u=X):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,Hu(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=Ns(s,i.child,null,g),s.child=Ns(s,null,a,g)):Kt(i,s,a,g),s.memoizedState=_.state,i=s.child):i=Yi(i,s,g),i}function ry(i,s,a,u){return As(),s.flags|=256,Kt(i,s,a,u),s.child}var bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xd(i){return{baseLanes:i,cachePool:$m()}}function Vd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=In),i}function ay(i,s,a){var u=s.pendingProps,g=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(yt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Oe){if(g?wo(s):Mo(),(i=st)?(i=m_(i,Ln),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Fm(i),a.return=s,s.child=a,Yt=s,st=null)):i=null,i===null)throw So(s);return mh(i)?s.lanes=32:s.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Mo(),g=s.mode,I=zu({mode:"hidden",children:I},g),u=Ss(u,g,a,null),I.return=s,u.return=s,I.sibling=u,s.child=I,u=s.child,u.memoizedState=xd(a),u.childLanes=Vd(i,A,a),s.memoizedState=bd,$a(null,u)):(wo(s),Pd(s,I))}var x=i.memoizedState;if(x!==null&&(I=x.dehydrated,I!==null)){if(_)s.flags&256?(wo(s),s.flags&=-257,s=Ud(i,s,a)):s.memoizedState!==null?(Mo(),s.child=i.child,s.flags|=128,s=null):(Mo(),I=u.fallback,g=s.mode,u=zu({mode:"visible",children:u.children},g),I=Ss(I,g,a,null),I.flags|=2,u.return=s,I.return=s,u.sibling=I,s.child=u,Ns(s,i.child,null,a),u=s.child,u.memoizedState=xd(a),u.childLanes=Vd(i,A,a),s.memoizedState=bd,s=$a(null,u));else if(wo(s),mh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(o(419)),u.stack="",u.digest=A,ka({value:u,source:null,stack:null}),s=Ud(i,s,a)}else if(wt||hr(i,s,a,!1),A=(a&i.childLanes)!==0,wt||A){if(A=it,A!==null&&(u=ga(A,a),u!==0&&u!==x.retryLane))throw x.retryLane=u,Es(i,u),mn(A,i,u),Nd;ph(I)||ju(),s=Ud(i,s,a)}else ph(I)?(s.flags|=192,s.child=i.child,s=null):(i=x.treeContext,st=On(I.nextSibling),Yt=s,Oe=!0,Eo=null,Ln=!1,i!==null&&Hm(s,i),s=Pd(s,u.children),s.flags|=4096);return s}return g?(Mo(),I=u.fallback,g=s.mode,x=i.child,z=x.sibling,u=qi(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,z!==null?I=qi(z,I):(I=Ss(I,g,a,null),I.flags|=2),I.return=s,u.return=s,u.sibling=I,s.child=u,$a(null,u),u=s.child,I=i.child.memoizedState,I===null?I=xd(a):(g=I.cachePool,g!==null?(x=It._currentValue,g=g.parent!==x?{parent:x,pool:x}:g):g=$m(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=Vd(i,A,a),s.memoizedState=bd,$a(i.child,u)):(wo(s),a=i.child,i=a.sibling,a=qi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Pd(i,s){return s=zu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function zu(i,s){return i=En(22,i,null,s),i.lanes=0,i}function Ud(i,s,a){return Ns(s,i.child,null,a),i=Pd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function ly(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Xf(i.return,s,a)}function Ld(i,s,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function uy(i,s,a){var u=s.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=yt.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,le(yt,A),Kt(i,s,u,a),u=Oe?La:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ly(i,a,s);else if(i.tag===19)ly(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)i=a.alternate,i!==null&&xu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Ld(s,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&xu(i)===null){s.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Ld(s,!0,a,null,_,u);break;case"together":Ld(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Yi(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),bo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(hr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=qi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=qi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function kd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Cu(i)))}function nC(i,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),Ao(s,It,i.memoizedState.cache),As();break;case 27:case 5:is(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:Ao(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ld(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(wo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?ay(i,s,a):(wo(s),i=Yi(i,s,a),i!==null?i.sibling:null);wo(s);break;case 19:var g=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(hr(i,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return uy(i,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(yt,yt.current),u)break;return null;case 22:return s.lanes=0,ty(i,s,a,s.pendingProps);case 24:Ao(s,It,i.memoizedState.cache)}return Yi(i,s,a)}function cy(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)wt=!0;else{if(!kd(i,a)&&(s.flags&128)===0)return wt=!1,nC(i,s,a);wt=(i.flags&131072)!==0}else wt=!1,Oe&&(s.flags&1048576)!==0&&Bm(s,La,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=ws(s.elementType),s.type=i,typeof i=="function")Bf(i)?(u=bs(i,u),s.tag=1,s=sy(null,s,i,u,a)):(s.tag=0,s=Dd(null,s,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===se){s.tag=11,s=Zg(null,s,i,u,a);break e}else if(g===D){s.tag=14,s=jg(null,s,i,u,a);break e}}throw s=ke(i)||i,Error(o(306,s,""))}}return s;case 0:return Dd(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=bs(u,s.pendingProps),sy(i,s,u,g,a);case 3:e:{if(xt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var _=s.memoizedState;g=_.element,id(i,s),za(s,u,null,a);var A=s.memoizedState;if(u=A.cache,Ao(s,It,u),u!==_.cache&&Wf(s,[It],a,!0),Ha(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=ry(i,s,u,a);break e}else if(u!==g){g=Vn(Error(o(424)),s),ka(g),s=ry(i,s,u,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(st=On(i.firstChild),Yt=s,Oe=!0,Eo=null,Ln=!0,a=tg(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(As(),u===g){s=Yi(i,s,a);break e}Kt(i,s,u,a)}s=s.child}return s;case 26:return Hu(i,s),i===null?(a=E_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Oe||(a=s.type,i=s.pendingProps,u=rc(Ne.current).createElement(a),u[St]=s,u[Lt]=i,Qt(u,a,i),At(u),s.stateNode=u):s.memoizedState=E_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return is(s),i===null&&Oe&&(u=s.stateNode=__(s.type,s.pendingProps,Ne.current),Yt=s,Ln=!0,g=st,Lo(s.type)?(gh=g,st=On(u.firstChild)):st=g),Kt(i,s,s.pendingProps.children,a),Hu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Oe&&((g=u=st)&&(u=xC(u,s.type,s.pendingProps,Ln),u!==null?(s.stateNode=u,Yt=s,st=On(u.firstChild),Ln=!1,g=!0):g=!1),g||So(s)),is(s),g=s.type,_=s.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,fh(g,_)?u=null:A!==null&&fh(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=cd(i,s,KA,null,null,a),cl._currentValue=g),Hu(i,s),Kt(i,s,u,a),s.child;case 6:return i===null&&Oe&&((i=a=st)&&(a=VC(a,s.pendingProps,Ln),a!==null?(s.stateNode=a,Yt=s,st=null,i=!0):i=!1),i||So(s)),null;case 13:return ay(i,s,a);case 4:return xt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ns(s,null,u,a):Kt(i,s,u,a),s.child;case 11:return Zg(i,s,s.type,s.pendingProps,a);case 7:return Kt(i,s,s.pendingProps,a),s.child;case 8:return Kt(i,s,s.pendingProps.children,a),s.child;case 12:return Kt(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Ao(s,s.type,u.value),Kt(i,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Is(s),g=Jt(g),u=u(g),s.flags|=1,Kt(i,s,u,a),s.child;case 14:return jg(i,s,s.type,s.pendingProps,a);case 15:return ey(i,s,s.type,s.pendingProps,a);case 19:return uy(i,s,a);case 31:return tC(i,s,a);case 22:return ty(i,s,a,s.pendingProps);case 24:return Is(s),u=Jt(It),i===null?(g=ed(),g===null&&(g=it,_=Zf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),s.memoizedState={parent:u,cache:g},nd(s),Ao(s,It,g)):((i.lanes&a)!==0&&(id(i,s),za(s,null,null,a),Ha()),g=i.memoizedState,_=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ao(s,It,u)):(u=_.cache,Ao(s,It,u),u!==g.cache&&Wf(s,[It],a,!0))),Kt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ji(i){i.flags|=4}function Od(i,s,a,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(ky())i.flags|=8192;else throw Ms=Mu,td}else i.flags&=-16777217}function fy(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!R_(s))if(ky())i.flags|=8192;else throw Ms=Mu,td}function Yu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Wl():536870912,i.lanes|=s,Ir|=s)}function Xa(i,s){if(!Oe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function rt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function iC(i,s,a){var u=s.pendingProps;switch(Jf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Bi(It),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(dr(s)?Ji(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qf())),rt(s),null;case 26:var g=s.type,_=s.memoizedState;return i===null?(Ji(s),_!==null?(rt(s),fy(s,_)):(rt(s),Od(s,g,null,u,a))):_?_!==i.memoizedState?(Ji(s),rt(s),fy(s,_)):(rt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ji(s),rt(s),Od(s,g,i,u,a)),null;case 27:if(zs(s),a=Ne.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}i=pe.current,dr(s)?zm(s):(i=__(g,u,a),s.stateNode=i,Ji(s))}return rt(s),null;case 5:if(zs(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}if(_=pe.current,dr(s))zm(s);else{var A=rc(Ne.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[St]=s,_[Lt]=u;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch(Qt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(s)}}return rt(s),Od(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Ne.current,dr(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,g=Yt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[St]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||a_(i.nodeValue,a)),i||So(s,!0)}else i=rc(i).createTextNode(u),i[St]=s,s.stateNode=i}return rt(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(u=dr(s),a!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[St]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),i=!1}else a=Qf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(An(s),s):(An(s),null);if((s.flags&128)!==0)throw Error(o(558))}return rt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=dr(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[St]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),g=!1}else g=Qf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(An(s),s):(An(s),null)}return An(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Yu(s,s.updateQueue),rt(s),null);case 4:return lt(),i===null&&rh(s.stateNode.containerInfo),rt(s),null;case 10:return Bi(s.type),rt(s),null;case 19:if(te(yt),u=s.memoizedState,u===null)return rt(s),null;if(g=(s.flags&128)!==0,_=u.rendering,_===null)if(g)Xa(u,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=xu(i),_!==null){for(s.flags|=128,Xa(u,!1),i=_.updateQueue,s.updateQueue=i,Yu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)qm(a,i),a=a.sibling;return le(yt,yt.current&1|2),Oe&&Fi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&on()>Xu&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304)}else{if(!g)if(i=xu(_),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Yu(s,i),Xa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Oe)return rt(s),null}else 2*on()-u.renderingStartTime>Xu&&a!==536870912&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(i=u.last,i!==null?i.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=on(),i.sibling=null,a=yt.current,le(yt,g?a&1|2:a&1),Oe&&Fi(s,u.treeForkCount),i):(rt(s),null);case 22:case 23:return An(s),ad(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),a=s.updateQueue,a!==null&&Yu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&te(Rs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Bi(It),rt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function oC(i,s){switch(Jf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Bi(It),lt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return zs(s),null;case 31:if(s.memoizedState!==null){if(An(s),s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(An(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(yt),null;case 4:return lt(),null;case 10:return Bi(s.type),null;case 22:case 23:return An(s),ad(),i!==null&&te(Rs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Bi(It),null;case 25:return null;default:return null}}function dy(i,s){switch(Jf(s),s.tag){case 3:Bi(It),lt();break;case 26:case 27:case 5:zs(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&An(s);break;case 13:An(s);break;case 19:te(yt);break;case 10:Bi(s.type);break;case 22:case 23:An(s),ad(),i!==null&&te(Rs);break;case 24:Bi(It)}}function Wa(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(I){Ze(s,s.return,I)}}function No(i,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,g=s;var x=a,z=I;try{z()}catch(X){Ze(g,x,X)}}}u=u.next}while(u!==_)}}catch(X){Ze(s,s.return,X)}}function hy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{ig(s,a)}catch(u){Ze(i,i.return,u)}}}function py(i,s,a){a.props=bs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(i,s,u)}}function Za(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){Ze(i,s,g)}}function Mi(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ze(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ze(i,s,g)}else a.current=null}function my(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ze(i,i.return,g)}}function qd(i,s,a){try{var u=i.stateNode;RC(u,i.type,a,s),u[Lt]=s}catch(g){Ze(i,i.return,g)}}function gy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Lo(i.type)||i.tag===4}function Fd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||gy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Lo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gd(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qn));else if(u!==4&&(u===27&&Lo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Gd(i,s,a),i=i.sibling;i!==null;)Gd(i,s,a),i=i.sibling}function Ju(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&Lo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ju(i,s,a),i=i.sibling;i!==null;)Ju(i,s,a),i=i.sibling}function yy(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Qt(s,u,a),s[St]=i,s[Lt]=a}catch(_){Ze(i,i.return,_)}}var Ki=!1,Mt=!1,Bd=!1,_y=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function sC(i,s){if(i=i.containerInfo,uh=hc,i=Dm(i),Uf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,x=-1,z=0,X=0,ee=i,Y=null;t:for(;;){for(var K;ee!==a||g!==0&&ee.nodeType!==3||(I=A+g),ee!==_||u!==0&&ee.nodeType!==3||(x=A+u),ee.nodeType===3&&(A+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Y=ee,ee=K;for(;;){if(ee===i)break t;if(Y===a&&++z===g&&(I=A),Y===_&&++X===u&&(x=A),(K=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=K}a=I===-1||x===-1?null:{start:I,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(ch={focusedElem:i,selectionRange:a},hc=!1,Ot=s;Ot!==null;)if(s=Ot,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Ot=i;else for(;Ot!==null;){switch(s=Ot,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var me=bs(a.type,g);i=u.getSnapshotBeforeUpdate(me,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Te){Ze(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)hh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Ot=i;break}Ot=s.return}}function vy(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:$i(i,a),u&4&&Wa(5,a);break;case 1:if($i(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){Ze(a,a.return,A)}else{var g=bs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Ze(a,a.return,A)}}u&64&&hy(a),u&512&&Za(a,a.return);break;case 3:if($i(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ig(i,s)}catch(A){Ze(a,a.return,A)}}break;case 27:s===null&&u&4&&yy(a);case 26:case 5:$i(i,a),s===null&&u&4&&my(a),u&512&&Za(a,a.return);break;case 12:$i(i,a);break;case 31:$i(i,a),u&4&&Sy(i,a);break;case 13:$i(i,a),u&4&&Ay(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=pC.bind(null,a),PC(i,a))));break;case 22:if(u=a.memoizedState!==null||Ki,!u){s=s!==null&&s.memoizedState!==null||Mt,g=Ki;var _=Mt;Ki=u,(Mt=s)&&!_?Xi(i,a,(a.subtreeFlags&8772)!==0):$i(i,a),Ki=g,Mt=_}break;case 30:break;default:$i(i,a)}}function Ty(i){var s=i.alternate;s!==null&&(i.alternate=null,Ty(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&$s(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ct=null,fn=!1;function Qi(i,s,a){for(a=a.child;a!==null;)Ey(i,s,a),a=a.sibling}function Ey(i,s,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:Mt||Mi(a,s),Qi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Mi(a,s);var u=ct,g=fn;Lo(a.type)&&(ct=a.stateNode,fn=!1),Qi(i,s,a),al(a.stateNode),ct=u,fn=g;break;case 5:Mt||Mi(a,s);case 6:if(u=ct,g=fn,ct=null,Qi(i,s,a),ct=u,fn=g,ct!==null)if(fn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(_){Ze(a,s,_)}else try{ct.removeChild(a.stateNode)}catch(_){Ze(a,s,_)}break;case 18:ct!==null&&(fn?(i=ct,h_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Vr(i)):h_(ct,a.stateNode));break;case 4:u=ct,g=fn,ct=a.stateNode.containerInfo,fn=!0,Qi(i,s,a),ct=u,fn=g;break;case 0:case 11:case 14:case 15:No(2,a,s),Mt||No(4,a,s),Qi(i,s,a);break;case 1:Mt||(Mi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&py(a,s,u)),Qi(i,s,a);break;case 21:Qi(i,s,a);break;case 22:Mt=(u=Mt)||a.memoizedState!==null,Qi(i,s,a),Mt=u;break;default:Qi(i,s,a)}}function Sy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vr(i)}catch(a){Ze(s,s.return,a)}}}function Ay(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vr(i)}catch(a){Ze(s,s.return,a)}}function rC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new _y),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new _y),s;default:throw Error(o(435,i.tag))}}function Ku(i,s){var a=rC(i);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=mC.bind(null,i,u);u.then(g,g)}})}function dn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Lo(I.type)){ct=I.stateNode,fn=!1;break e}break;case 5:ct=I.stateNode,fn=!1;break e;case 3:case 4:ct=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(ct===null)throw Error(o(160));Ey(_,A,g),ct=null,fn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cy(s,i),s=s.sibling}var ei=null;function Cy(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(s,i),hn(i),u&4&&(No(3,i,i.return),Wa(3,i),No(5,i,i.return));break;case 1:dn(s,i),hn(i),u&512&&(Mt||a===null||Mi(a,a.return)),u&64&&Ki&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ei;if(dn(s,i),hn(i),u&512&&(Mt||a===null||Mi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[pi]||_[St]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Qt(_,u,a),_[St]=i,At(_),u=_;break e;case"link":var A=C_("link","href",g).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=g.createElement(u),Qt(_,u,a),g.head.appendChild(_);break;case"meta":if(A=C_("meta","content",g).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=g.createElement(u),Qt(_,u,a),g.head.appendChild(_);break;default:throw Error(o(468,u))}_[St]=i,At(_),u=_}i.stateNode=u}else I_(g,i.type,i.stateNode);else i.stateNode=A_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?I_(g,i.type,i.stateNode):A_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&qd(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(s,i),hn(i),u&512&&(Mt||a===null||Mi(a,a.return)),a!==null&&u&4&&qd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(s,i),hn(i),u&512&&(Mt||a===null||Mi(a,a.return)),i.flags&32){g=i.stateNode;try{cn(g,"")}catch(me){Ze(i,i.return,me)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,qd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Bd=!0);break;case 6:if(dn(s,i),hn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(me){Ze(i,i.return,me)}}break;case 3:if(uc=null,g=ei,ei=ac(s.containerInfo),dn(s,i),ei=g,hn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Vr(s.containerInfo)}catch(me){Ze(i,i.return,me)}Bd&&(Bd=!1,Iy(i));break;case 4:u=ei,ei=ac(i.stateNode.containerInfo),dn(s,i),hn(i),ei=u;break;case 12:dn(s,i),hn(i);break;case 31:dn(s,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ku(i,u)));break;case 13:dn(s,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($u=on()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ku(i,u)));break;case 22:g=i.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=Ki,X=Mt;if(Ki=z||g,Mt=X||x,dn(s,i),Mt=X,Ki=z,hn(i),u&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||x||Ki||Mt||xs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){x=a=s;try{if(_=x.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=x.stateNode;var ee=x.memoizedProps.style,Y=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){Ze(x,x.return,me)}}}else if(s.tag===6){if(a===null){x=s;try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(me){Ze(x,x.return,me)}}}else if(s.tag===18){if(a===null){x=s;try{var K=x.stateNode;g?p_(K,!0):p_(x.stateNode,!1)}catch(me){Ze(x,x.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ku(i,a))));break;case 19:dn(s,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ku(i,u)));break;case 30:break;case 21:break;default:dn(s,i),hn(i)}}function hn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(gy(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,_=Fd(i);Ju(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(cn(A,""),a.flags&=-33);var I=Fd(i);Ju(i,I,A);break;case 3:case 4:var x=a.stateNode.containerInfo,z=Fd(i);Gd(i,z,x);break;default:throw Error(o(161))}}catch(X){Ze(i,i.return,X)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Iy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Iy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function $i(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vy(i,s.alternate,s),s=s.sibling}function xs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:No(4,s,s.return),xs(s);break;case 1:Mi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&py(s,s.return,a),xs(s);break;case 27:al(s.stateNode);case 26:case 5:Mi(s,s.return),xs(s);break;case 22:s.memoizedState===null&&xs(s);break;case 30:xs(s);break;default:xs(s)}i=i.sibling}}function Xi(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:Xi(g,_,a),Wa(4,_);break;case 1:if(Xi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){Ze(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var I=u.stateNode;try{var x=g.shared.hiddenCallbacks;if(x!==null)for(g.shared.hiddenCallbacks=null,g=0;g<x.length;g++)ng(x[g],I)}catch(z){Ze(u,u.return,z)}}a&&A&64&&hy(_),Za(_,_.return);break;case 27:yy(_);case 26:case 5:Xi(g,_,a),a&&u===null&&A&4&&my(_),Za(_,_.return);break;case 12:Xi(g,_,a);break;case 31:Xi(g,_,a),a&&A&4&&Sy(g,_);break;case 13:Xi(g,_,a),a&&A&4&&Ay(g,_);break;case 22:_.memoizedState===null&&Xi(g,_,a),Za(_,_.return);break;case 30:break;default:Xi(g,_,a)}s=s.sibling}}function Hd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Oa(a))}function zd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Oa(i))}function ti(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ry(i,s,a,u),s=s.sibling}function Ry(i,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ti(i,s,a,u),g&2048&&Wa(9,s);break;case 1:ti(i,s,a,u);break;case 3:ti(i,s,a,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Oa(i)));break;case 12:if(g&2048){ti(i,s,a,u),i=s.stateNode;try{var _=s.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){Ze(s,s.return,x)}}else ti(i,s,a,u);break;case 31:ti(i,s,a,u);break;case 13:ti(i,s,a,u);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?ti(i,s,a,u):ja(i,s):_._visibility&2?ti(i,s,a,u):(_._visibility|=2,Sr(i,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Hd(A,s);break;case 24:ti(i,s,a,u),g&2048&&zd(s.alternate,s);break;default:ti(i,s,a,u)}}function Sr(i,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,A=s,I=a,x=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Sr(_,A,I,x,g),Wa(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Sr(_,A,I,x,g):ja(_,A):(X._visibility|=2,Sr(_,A,I,x,g)),g&&z&2048&&Hd(A.alternate,A);break;case 24:Sr(_,A,I,x,g),g&&z&2048&&zd(A.alternate,A);break;default:Sr(_,A,I,x,g)}s=s.sibling}}function ja(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,g=u.flags;switch(u.tag){case 22:ja(a,u),g&2048&&Hd(u.alternate,u);break;case 24:ja(a,u),g&2048&&zd(u.alternate,u);break;default:ja(a,u)}s=s.sibling}}var el=8192;function Ar(i,s,a){if(i.subtreeFlags&el)for(i=i.child;i!==null;)wy(i,s,a),i=i.sibling}function wy(i,s,a){switch(i.tag){case 26:Ar(i,s,a),i.flags&el&&i.memoizedState!==null&&JC(a,ei,i.memoizedState,i.memoizedProps);break;case 5:Ar(i,s,a);break;case 3:case 4:var u=ei;ei=ac(i.stateNode.containerInfo),Ar(i,s,a),ei=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=el,el=16777216,Ar(i,s,a),el=u):Ar(i,s,a));break;default:Ar(i,s,a)}}function My(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function tl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ot=u,Dy(u,i)}My(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ny(i),i=i.sibling}function Ny(i){switch(i.tag){case 0:case 11:case 15:tl(i),i.flags&2048&&No(9,i,i.return);break;case 3:tl(i);break;case 12:tl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Qu(i)):tl(i);break;default:tl(i)}}function Qu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ot=u,Dy(u,i)}My(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:No(8,s,s.return),Qu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Qu(s));break;default:Qu(s)}i=i.sibling}}function Dy(i,s){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:No(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Oa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=i;Ot!==null;){u=Ot;var g=u.sibling,_=u.return;if(Ty(u),u===a){Ot=null;break e}if(g!==null){g.return=_,Ot=g;break e}Ot=_}}}var aC={getCacheForType:function(i){var s=Jt(It),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Jt(It).controller.signal}},lC=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,be=null,Ve=0,We=0,Cn=null,Do=!1,Cr=!1,Yd=!1,Wi=0,pt=0,bo=0,Vs=0,Jd=0,In=0,Ir=0,nl=null,pn=null,Kd=!1,$u=0,by=0,Xu=1/0,Wu=null,xo=null,Pt=0,Vo=null,Rr=null,Zi=0,Qd=0,$d=null,xy=null,il=0,Xd=null;function Rn(){return(Ke&2)!==0&&Ve!==0?Ve&-Ve:$.T!==null?nh():Zl()}function Vy(){if(In===0)if((Ve&536870912)===0||Oe){var i=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),In=i}else In=536870912;return i=Sn.current,i!==null&&(i.flags|=32),In}function mn(i,s,a){(i===it&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(wr(i,0),Po(i,Ve,In,!1)),as(i,a),((Ke&2)===0||i!==it)&&(i===it&&((Ke&2)===0&&(Vs|=a),pt===4&&Po(i,Ve,In,!1)),Ni(i))}function Py(i,s,a){if((Ke&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Yn(i,s),g=u?fC(i,s):Zd(i,s,!0),_=u;do{if(g===0){Cr&&!u&&Po(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!uC(a)){g=Zd(i,s,!1),_=!1;continue}if(g===2){if(_=s,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=i;g=nl;var x=I.current.memoizedState.isDehydrated;if(x&&(wr(I,A).flags|=256),A=Zd(I,A,!1),A!==2){if(Yd&&!x){I.errorRecoveryDisabledLanes|=_,Vs|=_,g=4;break e}_=pn,pn=g,_!==null&&(pn===null?pn=_:pn.push.apply(pn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){wr(i,0),Po(i,s,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Po(u,s,In,!Do);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=$u+300-on(),10<g)){if(Po(u,s,In,!Do),fi(u,0,!0)!==0)break e;Zi=s,u.timeoutHandle=f_(Uy.bind(null,u,a,pn,Wu,Kd,s,In,Vs,Ir,Do,_,"Throttled",-0,0),g);break e}Uy(u,a,pn,Wu,Kd,s,In,Vs,Ir,Do,_,null,-0,0)}}break}while(!0);Ni(i)}function Uy(i,s,a,u,g,_,A,I,x,z,X,ee,Y,K){if(i.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qn},wy(s,_,ee);var me=(_&62914560)===_?$u-on():(_&4194048)===_?by-on():0;if(me=KC(ee,me),me!==null){Zi=_,i.cancelPendingCommit=me(Hy.bind(null,i,s,_,a,u,g,A,I,x,X,ee,null,Y,K)),Po(i,_,A,!z);return}}Hy(i,s,_,a,u,g,A,I,x)}function uC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!Tn(_(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Po(i,s,a,u){s&=~Jd,s&=~Vs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var _=31-mt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&ls(i,a,s)}function Zu(){return(Ke&6)===0?(ol(0),!1):!0}function Wd(){if(be!==null){if(We===0)var i=be.return;else i=be,Gi=Cs=null,hd(i),yr=null,Fa=0,i=be;for(;i!==null;)dy(i.alternate,i),i=i.return;be=null}}function wr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,NC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Zi=0,Wd(),it=i,be=a=qi(i.current,null),Ve=s,We=0,Cn=null,Do=!1,Cr=Yn(i,s),Yd=!1,Ir=In=Jd=Vs=bo=pt=0,pn=nl=null,Kd=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-mt(u),_=1<<g;s|=i[g],u&=~_}return Wi=s,vu(),a}function Ly(i,s){Me=null,$.H=Qa,s===gr||s===wu?(s=Zm(),We=3):s===td?(s=Zm(),We=4):We=s===Nd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,be===null&&(pt=1,Gu(i,Vn(s,i.current)))}function ky(){var i=Sn.current;return i===null?!0:(Ve&4194048)===Ve?kn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===kn:!1}function Oy(){var i=$.H;return $.H=Qa,i===null?Qa:i}function qy(){var i=$.A;return $.A=aC,i}function ju(){pt=4,Do||(Ve&4194048)!==Ve&&Sn.current!==null||(Cr=!0),(bo&134217727)===0&&(Vs&134217727)===0||it===null||Po(it,Ve,In,!1)}function Zd(i,s,a){var u=Ke;Ke|=2;var g=Oy(),_=qy();(it!==i||Ve!==s)&&(Wu=null,wr(i,s)),s=!1;var A=pt;e:do try{if(We!==0&&be!==null){var I=be,x=Cn;switch(We){case 8:Wd(),A=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(s=!0);var z=We;if(We=0,Cn=null,Mr(i,I,x,z),a&&Cr){A=0;break e}break;default:z=We,We=0,Cn=null,Mr(i,I,x,z)}}cC(),A=pt;break}catch(X){Ly(i,X)}while(!0);return s&&i.shellSuspendCounter++,Gi=Cs=null,Ke=u,$.H=g,$.A=_,be===null&&(it=null,Ve=0,vu()),A}function cC(){for(;be!==null;)Fy(be)}function fC(i,s){var a=Ke;Ke|=2;var u=Oy(),g=qy();it!==i||Ve!==s?(Wu=null,Xu=on()+500,wr(i,s)):Cr=Yn(i,s);e:do try{if(We!==0&&be!==null){s=be;var _=Cn;t:switch(We){case 1:We=0,Cn=null,Mr(i,s,_,1);break;case 2:case 9:if(Xm(_)){We=0,Cn=null,Gy(s);break}s=function(){We!==2&&We!==9||it!==i||(We=7),Ni(i)},_.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Xm(_)?(We=0,Cn=null,Gy(s)):(We=0,Cn=null,Mr(i,s,_,7));break;case 5:var A=null;switch(be.tag){case 26:A=be.memoizedState;case 5:case 27:var I=be;if(A?R_(A):I.stateNode.complete){We=0,Cn=null;var x=I.sibling;if(x!==null)be=x;else{var z=I.return;z!==null?(be=z,ec(z)):be=null}break t}}We=0,Cn=null,Mr(i,s,_,5);break;case 6:We=0,Cn=null,Mr(i,s,_,6);break;case 8:Wd(),pt=6;break e;default:throw Error(o(462))}}dC();break}catch(X){Ly(i,X)}while(!0);return Gi=Cs=null,$.H=u,$.A=g,Ke=a,be!==null?0:(it=null,Ve=0,vu(),pt)}function dC(){for(;be!==null&&!Mf();)Fy(be)}function Fy(i){var s=cy(i.alternate,i,Wi);i.memoizedProps=i.pendingProps,s===null?ec(i):be=s}function Gy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=oy(a,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=oy(a,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:hd(s);default:dy(a,s),s=be=qm(s,Wi),s=cy(a,s,Wi)}i.memoizedProps=i.pendingProps,s===null?ec(i):be=s}function Mr(i,s,a,u){Gi=Cs=null,hd(s),yr=null,Fa=0;var g=s.return;try{if(eC(i,g,s,a,Ve)){pt=1,Gu(i,Vn(a,i.current)),be=null;return}}catch(_){if(g!==null)throw be=g,_;pt=1,Gu(i,Vn(a,i.current)),be=null;return}s.flags&32768?(Oe||u===1?i=!0:Cr||(Ve&536870912)!==0?i=!1:(Do=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),By(s,i)):ec(s)}function ec(i){var s=i;do{if((s.flags&32768)!==0){By(s,Do);return}i=s.return;var a=iC(s.alternate,s,Wi);if(a!==null){be=a;return}if(s=s.sibling,s!==null){be=s;return}be=s=i}while(s!==null);pt===0&&(pt=5)}function By(i,s){do{var a=oC(i.alternate,i);if(a!==null){a.flags&=32767,be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){be=i;return}be=i=a}while(i!==null);pt=6,be=null}function Hy(i,s,a,u,g,_,A,I,x){i.cancelPendingCommit=null;do tc();while(Pt!==0);if((Ke&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=Ff,bf(i,a,_,A,I,x),i===it&&(be=it=null,Ve=0),Rr=s,Vo=i,Zi=a,Qd=_,$d=g,xy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,gC(uo,function(){return Qy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=re.p,re.p=2,A=Ke,Ke|=4;try{sC(i,s,a)}finally{Ke=A,re.p=g,$.T=u}}Pt=1,zy(),Yy(),Jy()}}function zy(){if(Pt===1){Pt=0;var i=Vo,s=Rr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=Ke;Ke|=4;try{Cy(s,i);var _=ch,A=Dm(i.containerInfo),I=_.focusedElem,x=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Nm(I.ownerDocument.documentElement,I)){if(x!==null&&Uf(I)){var z=x.start,X=x.end;if(X===void 0&&(X=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min(X,I.value.length);else{var ee=I.ownerDocument||document,Y=ee&&ee.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),me=I.textContent.length,Te=Math.min(x.start,me),nt=x.end===void 0?Te:Math.min(x.end,me);!K.extend&&Te>nt&&(A=nt,nt=Te,Te=A);var F=Mm(I,Te),L=Mm(I,nt);if(F&&L&&(K.rangeCount!==1||K.anchorNode!==F.node||K.anchorOffset!==F.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ee.createRange();H.setStart(F.node,F.offset),K.removeAllRanges(),Te>nt?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ee=[],K=I;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ee.length;I++){var W=ee[I];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}hc=!!uh,ch=uh=null}finally{Ke=g,re.p=u,$.T=a}}i.current=s,Pt=2}}function Yy(){if(Pt===2){Pt=0;var i=Vo,s=Rr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=Ke;Ke|=4;try{vy(i,s.alternate,s)}finally{Ke=g,re.p=u,$.T=a}}Pt=3}}function Jy(){if(Pt===4||Pt===3){Pt=0,Yl();var i=Vo,s=Rr,a=Zi,u=xy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pt=5:(Pt=0,Rr=Vo=null,Ky(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(xo=null),Ui(a),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(zn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,g=re.p,re.p=2,$.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];_(I.value,{componentStack:I.stack})}}finally{$.T=s,re.p=g}}(Zi&3)!==0&&tc(),Ni(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Xd?il++:(il=0,Xd=i):il=0,ol(0)}}function Ky(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Oa(s)))}function tc(){return zy(),Yy(),Jy(),Qy()}function Qy(){if(Pt!==5)return!1;var i=Vo,s=Qd;Qd=0;var a=Ui(Zi),u=$.T,g=re.p;try{re.p=32>a?32:a,$.T=null,a=$d,$d=null;var _=Vo,A=Zi;if(Pt=0,Rr=Vo=null,Zi=0,(Ke&6)!==0)throw Error(o(331));var I=Ke;if(Ke|=4,Ny(_.current),Ry(_,_.current,A,a),Ke=I,ol(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(zn,_)}catch{}return!0}finally{re.p=g,$.T=u,Ky(i,s)}}function $y(i,s,a){s=Vn(a,s),s=Md(i.stateNode,s,2),i=Ro(i,s,2),i!==null&&(as(i,2),Ni(i))}function Ze(i,s,a){if(i.tag===3)$y(i,i,a);else for(;s!==null;){if(s.tag===3){$y(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xo===null||!xo.has(u))){i=Vn(a,i),a=Xg(2),u=Ro(s,a,2),u!==null&&(Wg(a,u,s,i),as(u,2),Ni(u));break}}s=s.return}}function jd(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new lC;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Yd=!0,g.add(a),i=hC.bind(null,i,s,a),s.then(i,i))}function hC(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(Ve&a)===a&&(pt===4||pt===3&&(Ve&62914560)===Ve&&300>on()-$u?(Ke&2)===0&&wr(i,0):Jd|=a,Ir===Ve&&(Ir=0)),Ni(i)}function Xy(i,s){s===0&&(s=Wl()),i=Es(i,s),i!==null&&(as(i,s),Ni(i))}function pC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Xy(i,a)}function mC(i,s){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Xy(i,a)}function gC(i,s){return Vt(i,s)}var nc=null,Nr=null,eh=!1,ic=!1,th=!1,Uo=0;function Ni(i){i!==Nr&&i.next===null&&(Nr===null?nc=Nr=i:Nr=Nr.next=i),ic=!0,eh||(eh=!0,_C())}function ol(i,s){if(!th&&ic){th=!0;do for(var a=!1,u=nc;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-mt(42|i)+1)-1,_&=g&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,e_(u,_))}else _=Ve,_=fi(u,u===it?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Yn(u,_)||(a=!0,e_(u,_));u=u.next}while(a);th=!1}}function yC(){Wy()}function Wy(){ic=eh=!1;var i=0;Uo!==0&&MC()&&(i=Uo);for(var s=on(),a=null,u=nc;u!==null;){var g=u.next,_=Zy(u,s);_===0?(u.next=null,a===null?nc=g:a.next=g,g===null&&(Nr=a)):(a=u,(i!==0||(_&3)!==0)&&(ic=!0)),u=g}Pt!==0&&Pt!==5||ol(i),Uo!==0&&(Uo=0)}function Zy(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-mt(_),I=1<<A,x=g[A];x===-1?((I&a)===0||(I&u)!==0)&&(g[A]=Df(I,s)):x<=s&&(i.expiredLanes|=I),_&=~I}if(s=it,a=Ve,a=fi(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(We===2||We===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&lo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Yn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&lo(u),Ui(a)){case 2:case 8:a=pa;break;case 32:a=uo;break;case 268435456:a=Jl;break;default:a=uo}return u=jy.bind(null,i),a=Vt(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&lo(u),i.callbackPriority=2,i.callbackNode=null,2}function jy(i,s){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(tc()&&i.callbackNode!==a)return null;var u=Ve;return u=fi(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Py(i,u,s),Zy(i,on()),i.callbackNode!=null&&i.callbackNode===a?jy.bind(null,i):null)}function e_(i,s){if(tc())return null;Py(i,s,!0)}function _C(){DC(function(){(Ke&6)!==0?Vt(ha,yC):Wy()})}function nh(){if(Uo===0){var i=pr;i===0&&(i=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Uo=i}return Uo}function t_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:js(""+i)}function n_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function vC(i,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var _=t_((g[Lt]||null).action),A=u.submitter;A&&(s=(s=A[Lt]||null)?t_(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var I=new Si("action","action",null,u,g);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Uo!==0){var x=A?n_(g,A):new FormData(g);Sd(a,{pending:!0,data:x,method:g.method,action:_},null,x)}}else typeof _=="function"&&(I.preventDefault(),x=A?n_(g,A):new FormData(g),Sd(a,{pending:!0,data:x,method:g.method,action:_},_,x))},currentTarget:g}]})}}for(var ih=0;ih<qf.length;ih++){var oh=qf[ih],TC=oh.toLowerCase(),EC=oh[0].toUpperCase()+oh.slice(1);jn(TC,"on"+EC)}jn(Vm,"onAnimationEnd"),jn(Pm,"onAnimationIteration"),jn(Um,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(kA,"onTransitionRun"),jn(OA,"onTransitionStart"),jn(qA,"onTransitionCancel"),jn(Lm,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function i_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var A=u.length-1;0<=A;A--){var I=u[A],x=I.instance,z=I.currentTarget;if(I=I.listener,x!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch(X){_u(X)}g.currentTarget=null,_=x}else for(A=0;A<u.length;A++){if(I=u[A],x=I.instance,z=I.currentTarget,I=I.listener,x!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch(X){_u(X)}g.currentTarget=null,_=x}}}}function xe(i,s){var a=s[Qs];a===void 0&&(a=s[Qs]=new Set);var u=i+"__bubble";a.has(u)||(o_(s,i,2,!1),a.add(u))}function sh(i,s,a){var u=0;s&&(u|=4),o_(a,i,u,s)}var oc="_reactListening"+Math.random().toString(36).slice(2);function rh(i){if(!i[oc]){i[oc]=!0,ya.forEach(function(a){a!=="selectionchange"&&(SC.has(a)||sh(a,!1,i),sh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[oc]||(s[oc]=!0,sh("selectionchange",!1,s))}}function o_(i,s,a,u){switch(V_(s)){case 2:var g=XC;break;case 8:g=WC;break;default:g=Eh}a=g.bind(null,s,a,i),g=void 0,!hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,a,{capture:!0,passive:g}):i.addEventListener(s,a,!0):g!==void 0?i.addEventListener(s,a,{passive:g}):i.addEventListener(s,a,!1)}function ah(i,s,a,u,g){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===g)break;if(A===4)for(A=u.return;A!==null;){var x=A.tag;if((x===3||x===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;I!==null;){if(A=mi(I),A===null)return;if(x=A.tag,x===5||x===6||x===26||x===27){u=_=A;continue e}I=I.parentNode}}u=u.return}go(function(){var z=_,X=Nn(a),ee=[];e:{var Y=km.get(i);if(Y!==void 0){var K=Si,me=i;switch(i){case"keypress":if(ms(a)===0)break e;case"keydown":case"keyup":K=mu;break;case"focusin":me="focus",K=ys;break;case"focusout":me="blur",K=ys;break;case"beforeblur":case"afterblur":K=ys;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=T;break;case Vm:case Pm:case Um:K=lu;break;case Lm:K=w;break;case"scroll":case"scrollend":K=Na;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Oi;break;case"toggle":case"beforetoggle":K=we}var Te=(s&4)!==0,nt=!Te&&(i==="scroll"||i==="scrollend"),F=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=z,H;L!==null;){var W=L;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||F===null||(W=$n(L,F),W!=null&&Te.push(rl(L,W,H))),nt)break;L=L.return}0<Te.length&&(Y=new K(Y,me,null,a,X),ee.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==Ra&&(me=a.relatedTarget||a.fromElement)&&(mi(me)||me[hi]))break e;if((K||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(me=a.relatedTarget||a.toElement,K=z,me=me?mi(me):null,me!==null&&(nt=l(me),Te=me.tag,me!==nt||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(K=null,me=z),K!==me)){if(Te=Da,W="onMouseLeave",F="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Oi,W="onPointerLeave",F="onPointerEnter",L="pointer"),nt=K==null?Y:_n(K),H=me==null?Y:_n(me),Y=new Te(W,L+"leave",K,a,X),Y.target=nt,Y.relatedTarget=H,W=null,mi(X)===z&&(Te=new Te(F,L+"enter",me,a,X),Te.target=H,Te.relatedTarget=nt,W=Te),nt=W,K&&me)t:{for(Te=AC,F=K,L=me,H=0,W=F;W;W=Te(W))H++;W=0;for(var _e=L;_e;_e=Te(_e))W++;for(;0<H-W;)F=Te(F),H--;for(;0<W-H;)L=Te(L),W--;for(;H--;){if(F===L||L!==null&&F===L.alternate){Te=F;break t}F=Te(F),L=Te(L)}Te=null}else Te=null;K!==null&&s_(ee,Y,K,Te,!1),me!==null&&nt!==null&&s_(ee,nt,me,Te,!0)}}e:{if(Y=z?_n(z):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var He=Sm;else if(Tm(Y))if(Am)He=PA;else{He=xA;var ge=bA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&Zs(z.elementType)&&(He=Sm):He=VA;if(He&&(He=He(i,z))){Em(ee,He,a,X);break e}ge&&ge(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Aa(Y,"number",Y.value)}switch(ge=z?_n(z):window,i){case"focusin":(Tm(ge)||ge.contentEditable==="true")&&(rr=ge,Lf=z,Ua=null);break;case"focusout":Ua=Lf=rr=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,bm(ee,a,X);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":bm(ee,a,X)}var De;if(Je)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else sr?_s(i,a)&&(Pe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ii&&a.locale!=="ko"&&(sr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&sr&&(De=Ma()):(Ei=X,wa="value"in Ei?Ei.value:Ei.textContent,sr=!0)),ge=sc(z,Pe),0<ge.length&&(Pe=new Ci(Pe,i,null,a,X),ee.push({event:Pe,listeners:ge}),De?Pe.data=De:(De=or(a),De!==null&&(Pe.data=De)))),(De=bn?wA(i,a):MA(i,a))&&(Pe=sc(z,"onBeforeInput"),0<Pe.length&&(ge=new Ci("onBeforeInput","beforeinput",null,a,X),ee.push({event:ge,listeners:Pe}),ge.data=De)),vC(ee,i,z,a,X)}i_(ee,s)})}function rl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function sc(i,s){for(var a=s+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=$n(i,a),g!=null&&u.unshift(rl(i,g,_)),g=$n(i,s),g!=null&&u.push(rl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function AC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function s_(i,s,a,u,g){for(var _=s._reactName,A=[];a!==null&&a!==u;){var I=a,x=I.alternate,z=I.stateNode;if(I=I.tag,x!==null&&x===u)break;I!==5&&I!==26&&I!==27||z===null||(x=z,g?(z=$n(a,_),z!=null&&A.unshift(rl(a,z,x))):g||(z=$n(a,_),z!=null&&A.push(rl(a,z,x)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var CC=/\r\n?/g,IC=/\u0000|\uFFFD/g;function r_(i){return(typeof i=="string"?i:""+i).replace(CC,`
`).replace(IC,"")}function a_(i,s){return s=r_(s),r_(i)===s}function tt(i,s,a,u,g,_){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||cn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&cn(i,""+u);break;case"className":vn(i,"class",u);break;case"tabIndex":vn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(i,a,u);break;case"style":Ia(i,u,_);break;case"data":if(s!=="object"){vn(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=js(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&tt(i,s,"name",g.name,g,null),tt(i,s,"formEncType",g.formEncType,g,null),tt(i,s,"formMethod",g.formMethod,g,null),tt(i,s,"formTarget",g.formTarget,g,null)):(tt(i,s,"encType",g.encType,g,null),tt(i,s,"method",g.method,g,null),tt(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=js(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"onScroll":u!=null&&xe("scroll",i);break;case"onScrollEnd":u!=null&&xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=js(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":xe("beforetoggle",i),xe("toggle",i),Xs(i,"popover",u);break;case"xlinkActuate":Ct(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xs(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=su.get(a)||a,Xs(i,a,u))}}function lh(i,s,a,u,g,_){switch(a){case"style":Ia(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof u=="string"?cn(i,u):(typeof u=="number"||typeof u=="bigint")&&cn(i,""+u);break;case"onScroll":u!=null&&xe("scroll",i);break;case"onScrollEnd":u!=null&&xe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_a.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),_=i[Lt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Xs(i,a,u)}}}function Qt(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",i),xe("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,_,A,a,null)}}g&&tt(i,s,"srcSet",a.srcSet,a,null),u&&tt(i,s,"src",a.src,a,null);return;case"input":xe("invalid",i);var I=_=A=g=null,x=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var X=a[u];if(X!=null)switch(u){case"name":g=X;break;case"type":A=X;break;case"checked":x=X;break;case"defaultChecked":z=X;break;case"value":_=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:tt(i,s,u,X,a,null)}}nu(i,_,I,x,z,A,g,!1);return;case"select":xe("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:tt(i,s,g,I,a,null)}s=_,a=A,i.multiple=!!u,s!=null?fo(i,!!u,s,!1):a!=null&&fo(i,!!u,a,!0);return;case"textarea":xe("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":g=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:tt(i,s,A,I,a,null)}ho(i,u,g,_);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(u=a[x],u!=null))switch(x){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,s,x,u,a,null)}return;case"dialog":xe("beforetoggle",i),xe("toggle",i),xe("cancel",i),xe("close",i);break;case"iframe":case"object":xe("load",i);break;case"video":case"audio":for(u=0;u<sl.length;u++)xe(sl[u],i);break;case"image":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"embed":case"source":case"link":xe("error",i),xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,z,u,a,null)}return;default:if(Zs(s)){for(X in a)a.hasOwnProperty(X)&&(u=a[X],u!==void 0&&lh(i,s,X,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&tt(i,s,I,u,a,null))}function RC(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,I=null,x=null,z=null,X=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=ee;default:u.hasOwnProperty(K)||tt(i,s,K,null,u,ee)}}for(var Y in u){var K=u[Y];if(ee=a[Y],u.hasOwnProperty(Y)&&(K!=null||ee!=null))switch(Y){case"type":_=K;break;case"name":g=K;break;case"checked":z=K;break;case"defaultChecked":X=K;break;case"value":A=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,s));break;default:K!==ee&&tt(i,s,Y,K,u,ee)}}Ws(i,A,I,x,z,X,_,g);return;case"select":K=A=I=Y=null;for(_ in a)if(x=a[_],a.hasOwnProperty(_)&&x!=null)switch(_){case"value":break;case"multiple":K=x;default:u.hasOwnProperty(_)||tt(i,s,_,null,u,x)}for(g in u)if(_=u[g],x=a[g],u.hasOwnProperty(g)&&(_!=null||x!=null))switch(g){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==x&&tt(i,s,g,_,u,x)}s=I,a=A,u=K,Y!=null?fo(i,!!a,Y,!1):!!u!=!!a&&(s!=null?fo(i,!!a,s,!0):fo(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,s,I,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==_&&tt(i,s,A,g,u,_)}iu(i,Y,K);return;case"option":for(var me in a)if(Y=a[me],a.hasOwnProperty(me)&&Y!=null&&!u.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:tt(i,s,me,null,u,Y)}for(x in u)if(Y=u[x],K=a[x],u.hasOwnProperty(x)&&Y!==K&&(Y!=null||K!=null))switch(x){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,s,x,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)Y=a[Te],a.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&tt(i,s,Te,null,u,Y);for(z in u)if(Y=u[z],K=a[z],u.hasOwnProperty(z)&&Y!==K&&(Y!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:tt(i,s,z,Y,u,K)}return;default:if(Zs(s)){for(var nt in a)Y=a[nt],a.hasOwnProperty(nt)&&Y!==void 0&&!u.hasOwnProperty(nt)&&lh(i,s,nt,void 0,u,Y);for(X in u)Y=u[X],K=a[X],!u.hasOwnProperty(X)||Y===K||Y===void 0&&K===void 0||lh(i,s,X,Y,u,K);return}}for(var F in a)Y=a[F],a.hasOwnProperty(F)&&Y!=null&&!u.hasOwnProperty(F)&&tt(i,s,F,null,u,Y);for(ee in u)Y=u[ee],K=a[ee],!u.hasOwnProperty(ee)||Y===K||Y==null&&K==null||tt(i,s,ee,Y,u,K)}function l_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,I=g.duration;if(_&&I&&l_(A)){for(A=0,I=g.responseEnd,u+=1;u<a.length;u++){var x=a[u],z=x.startTime;if(z>I)break;var X=x.transferSize,ee=x.initiatorType;X&&l_(ee)&&(x=x.responseEnd,A+=X*(x<I?1:(I-z)/(x-z)))}if(--u,s+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var uh=null,ch=null;function rc(i){return i.nodeType===9?i:i.ownerDocument}function u_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function fh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dh=null;function MC(){var i=window.event;return i&&i.type==="popstate"?i===dh?!1:(dh=i,!0):(dh=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,NC=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(i){return d_.resolve(null).then(i).catch(bC)}:f_;function bC(i){setTimeout(function(){throw i})}function Lo(i){return i==="head"}function h_(i,s){var a=s,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Vr(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,al(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[pi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&al(i.ownerDocument.body);a=g}while(a);Vr(s)}function p_(i,s){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function hh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hh(a),$s(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function xC(i,s,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[pi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=On(i.nextSibling),i===null)break}return null}function VC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=On(i.nextSibling),i===null))return null;return i}function m_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=On(i.nextSibling),i===null))return null;return i}function ph(i){return i.data==="$?"||i.data==="$~"}function mh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function PC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function On(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var gh=null;function g_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return On(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function y_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function __(i,s,a){switch(s=rc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function al(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);$s(i)}var qn=new Map,v_=new Set;function ac(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ji=re.d;re.d={f:UC,r:LC,D:kC,C:OC,L:qC,m:FC,X:BC,S:GC,M:HC};function UC(){var i=ji.f(),s=Zu();return i||s}function LC(i){var s=Mn(i);s!==null&&s.tag===5&&s.type==="form"?Lg(s):ji.r(i)}var Dr=typeof document>"u"?null:document;function T_(i,s,a){var u=Dr;if(u&&typeof s=="string"&&s){var g=un(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),v_.has(g)||(v_.add(g),i={rel:i,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),Qt(s,"link",i),At(s),u.head.appendChild(s)))}}function kC(i){ji.D(i),T_("dns-prefetch",i,null)}function OC(i,s){ji.C(i,s),T_("preconnect",i,s)}function qC(i,s,a){ji.L(i,s,a);var u=Dr;if(u&&i&&s){var g='link[rel="preload"][as="'+un(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+un(a.imageSizes)+'"]')):g+='[href="'+un(i)+'"]';var _=g;switch(s){case"style":_=br(i);break;case"script":_=xr(i)}qn.has(_)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),qn.set(_,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(ll(_))||s==="script"&&u.querySelector(ul(_))||(s=u.createElement("link"),Qt(s,"link",i),At(s),u.head.appendChild(s)))}}function FC(i,s){ji.m(i,s);var a=Dr;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+un(u)+'"][href="'+un(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=xr(i)}if(!qn.has(_)&&(i=E({rel:"modulepreload",href:i},s),qn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(_)))return}u=a.createElement("link"),Qt(u,"link",i),At(u),a.head.appendChild(u)}}}function GC(i,s,a){ji.S(i,s,a);var u=Dr;if(u&&i){var g=gi(u).hoistableStyles,_=br(i);s=s||"default";var A=g.get(_);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(ll(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=qn.get(_))&&yh(i,a);var x=A=u.createElement("link");At(x),Qt(x,"link",i),x._p=new Promise(function(z,X){x.onload=z,x.onerror=X}),x.addEventListener("load",function(){I.loading|=1}),x.addEventListener("error",function(){I.loading|=2}),I.loading|=4,lc(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:I},g.set(_,A)}}}function BC(i,s){ji.X(i,s);var a=Dr;if(a&&i){var u=gi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ul(g)),_||(i=E({src:i,async:!0},s),(s=qn.get(g))&&_h(i,s),_=a.createElement("script"),At(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function HC(i,s){ji.M(i,s);var a=Dr;if(a&&i){var u=gi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ul(g)),_||(i=E({src:i,async:!0,type:"module"},s),(s=qn.get(g))&&_h(i,s),_=a.createElement("script"),At(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function E_(i,s,a,u){var g=(g=Ne.current)?ac(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=br(a.href),a=gi(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=br(a.href);var _=gi(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(ll(i)))&&!_._p&&(A.instance=_,A.state.loading=5),qn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(i,a),_||zC(g,i,a,A.state))),s&&u===null)throw Error(o(528,""));return A}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xr(a),a=gi(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function br(i){return'href="'+un(i)+'"'}function ll(i){return'link[rel="stylesheet"]['+i+"]"}function S_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function zC(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Qt(s,"link",a),At(s),i.head.appendChild(s))}function xr(i){return'[src="'+un(i)+'"]'}function ul(i){return"script[async]"+i}function A_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+un(a.href)+'"]');if(u)return s.instance=u,At(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),At(u),Qt(u,"style",g),lc(u,a.precedence,i),s.instance=u;case"stylesheet":g=br(a.href);var _=i.querySelector(ll(g));if(_)return s.state.loading|=4,s.instance=_,At(_),_;u=S_(a),(g=qn.get(g))&&yh(u,g),_=(i.ownerDocument||i).createElement("link"),At(_);var A=_;return A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Qt(_,"link",u),s.state.loading|=4,lc(_,a.precedence,i),s.instance=_;case"script":return _=xr(a.src),(g=i.querySelector(ul(_)))?(s.instance=g,At(g),g):(u=a,(g=qn.get(_))&&(u=E({},a),_h(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),At(g),Qt(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,lc(u,a.precedence,i));return s.instance}function lc(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===s)_=I;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function yh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function _h(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var uc=null;function C_(i,s,a){if(uc===null){var u=new Map,g=uc=new Map;g.set(a,u)}else g=uc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[pi]||_[St]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=i+A;var I=u.get(A);I?I.push(_):u.set(A,[_])}}return u}function I_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function YC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function R_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function JC(i,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=br(u.href),_=s.querySelector(ll(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=cc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,At(_);return}_=s.ownerDocument||s,u=S_(u),(g=qn.get(g))&&yh(u,g),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Qt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=cc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var vh=0;function KC(i,s){return i.stylesheets&&i.count===0&&dc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&vh===0&&(vh=62500*wC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>vh?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fc=null;function dc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fc=new Map,s.forEach(QC,i),fc=null,cc.call(i))}function QC(i,s){if(!(s.state.loading&4)){var a=fc.get(i);if(a)var u=a.get(null);else{a=new Map,fc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=s.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=cc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var cl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function $C(i,s,a,u,g,_,A,I,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function w_(i,s,a,u,g,_,A,I,x,z,X,ee){return i=new $C(i,s,a,A,x,z,X,ee,I),s=1,_===!0&&(s|=24),_=En(3,null,null,s),i.current=_,_.stateNode=i,s=Zf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:s},nd(_),i}function M_(i){return i?(i=ur,i):ur}function N_(i,s,a,u,g,_){g=M_(g),u.context===null?u.context=g:u.pendingContext=g,u=Io(s),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ro(i,u,s),a!==null&&(mn(a,i,s),Ba(a,i,s))}function D_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Th(i,s){D_(i,s),(i=i.alternate)&&D_(i,s)}function b_(i){if(i.tag===13||i.tag===31){var s=Es(i,67108864);s!==null&&mn(s,i,67108864),Th(i,67108864)}}function x_(i){if(i.tag===13||i.tag===31){var s=Rn();s=us(s);var a=Es(i,s);a!==null&&mn(a,i,s),Th(i,s)}}var hc=!0;function XC(i,s,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=2,Eh(i,s,a,u)}finally{re.p=_,$.T=g}}function WC(i,s,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=8,Eh(i,s,a,u)}finally{re.p=_,$.T=g}}function Eh(i,s,a,u){if(hc){var g=Sh(u);if(g===null)ah(i,s,u,pc,a),P_(i,u);else if(jC(g,i,s,a,u))u.stopPropagation();else if(P_(i,u),s&4&&-1<ZC.indexOf(i)){for(;g!==null;){var _=Mn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ci(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var x=1<<31-mt(A);I.entanglements[1]|=x,A&=~x}Ni(_),(Ke&6)===0&&(Xu=on()+500,ol(0))}}break;case 31:case 13:I=Es(_,2),I!==null&&mn(I,_,2),Zu(),Th(_,2)}if(_=Sh(u),_===null&&ah(i,s,u,pc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else ah(i,s,u,null,a)}}function Sh(i){return i=Nn(i),Ah(i)}var pc=null;function Ah(i){if(pc=null,i=mi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===31){if(i=h(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return pc=i,null}function V_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ss()){case ha:return 2;case pa:return 8;case uo:case Nf:return 32;case Jl:return 268435456;default:return 32}default:return 32}}var Ch=!1,ko=null,Oo=null,qo=null,fl=new Map,dl=new Map,Fo=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P_(i,s){switch(i){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(s.pointerId)}}function hl(i,s,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},s!==null&&(s=Mn(s),s!==null&&b_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function jC(i,s,a,u,g){switch(s){case"focusin":return ko=hl(ko,i,s,a,u,g),!0;case"dragenter":return Oo=hl(Oo,i,s,a,u,g),!0;case"mouseover":return qo=hl(qo,i,s,a,u,g),!0;case"pointerover":var _=g.pointerId;return fl.set(_,hl(fl.get(_)||null,i,s,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,dl.set(_,hl(dl.get(_)||null,i,s,a,u,g)),!0}return!1}function U_(i){var s=mi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Jn(i.priority,function(){x_(a)});return}}else if(s===31){if(s=h(a),s!==null){i.blockedOn=s,Jn(i.priority,function(){x_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Sh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ra=u,a.target.dispatchEvent(u),Ra=null}else return s=Mn(a),s!==null&&b_(s),i.blockedOn=a,!1;s.shift()}return!0}function L_(i,s,a){mc(i)&&a.delete(s)}function eI(){Ch=!1,ko!==null&&mc(ko)&&(ko=null),Oo!==null&&mc(Oo)&&(Oo=null),qo!==null&&mc(qo)&&(qo=null),fl.forEach(L_),dl.forEach(L_)}function gc(i,s){i.blockedOn===s&&(i.blockedOn=null,Ch||(Ch=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eI)))}var yc=null;function k_(i){yc!==i&&(yc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yc===i&&(yc=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(Ah(u||a)===null)continue;break}var _=Mn(a);_!==null&&(i.splice(s,3),s-=3,Sd(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Vr(i){function s(x){return gc(x,i)}ko!==null&&gc(ko,i),Oo!==null&&gc(Oo,i),qo!==null&&gc(qo,i),fl.forEach(s),dl.forEach(s);for(var a=0;a<Fo.length;a++){var u=Fo[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Fo.length&&(a=Fo[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&Fo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[Lt]||null;if(typeof _=="function")A||k_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[Lt]||null)I=A.formAction;else if(Ah(g)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),k_(a)}}}function O_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Ih(i){this._internalRoot=i}_c.prototype.render=Ih.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Rn();N_(a,u,i,s,null,null)},_c.prototype.unmount=Ih.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;N_(i.current,2,null,i,null,null),Zu(),s[hi]=null}};function _c(i){this._internalRoot=i}_c.prototype.unstable_scheduleHydration=function(i){if(i){var s=Zl();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Fo.length&&s!==0&&s<Fo[a].priority;a++);Fo.splice(a,0,i),a===0&&U_(i)}};var q_=e.version;if(q_!=="19.2.4")throw Error(o(527,q_,"19.2.4"));re.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var tI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{zn=vc.inject(tI),Ht=vc}catch{}}return ml.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,u="",g=Jg,_=Kg,A=Qg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=w_(i,1,!1,null,null,a,u,null,g,_,A,O_),i[hi]=s.current,rh(i),new Ih(s)},ml.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var u=!1,g="",_=Jg,A=Kg,I=Qg,x=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),s=w_(i,1,!0,s,a??null,u,g,x,_,A,I,O_),s.context=M_(null),a=s.current,u=Rn(),u=us(u),g=Io(u),g.callback=null,Ro(a,g,u),a=u,s.current.lanes=a,as(s,a),Ni(s),i[hi]=s.current,rh(i),new _c(s)},ml.version="19.2.4",ml}var $_;function dI(){if($_)return Mh.exports;$_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mh.exports=fI(),Mh.exports}var hI=dI();const pI=zT(hI),mI=[{id:"happy",nameKey:"mood_happy",descKey:"mood_happy_desc",color:"yellow"},{id:"sad",nameKey:"mood_sad",descKey:"mood_sad_desc",color:"blue"},{id:"energetic",nameKey:"mood_energetic",descKey:"mood_energetic_desc",color:"orange"},{id:"relaxed",nameKey:"mood_relaxed",descKey:"mood_relaxed_desc",color:"green"},{id:"stressed",nameKey:"mood_stressed",descKey:"mood_stressed_desc",color:"red"},{id:"creative",nameKey:"mood_creative",descKey:"mood_creative_desc",color:"purple"}],YT={en:{app_title:"Find Your Spark",app_tagline:"Your Personal Inspiration Engine. Tailored To How You Feel.",intro_desc:"Discover Personalized Ideas And Inspiration Perfectly Matched To Your Current Mood. Ready To Begin?",get_started:"Get Started",how_feeling:"How Are You Feeling Today?",change_mood:"Change Mood",community_archive:"Showing Top Sparks from the Community Archive",custom_sparks:"Custom Sparks For Your {mood} Mood",personalized_inspiration:"Personalized inspiration to help you navigate your day.",discover_more:"Discover More",the_spark:"The Spark",copy_spark:"Copy Spark",community_favorite:"Community Favorite",live_ai_spark:"Live AI Spark",mood_happy:"Happy",mood_happy_desc:"Feeling Joyful And Bright",mood_sad:"Sad",mood_sad_desc:"Need A Little Pick-Me-Up",mood_energetic:"Energetic",mood_energetic_desc:"Ready To Take On The World",mood_relaxed:"Relaxed",mood_relaxed_desc:"Calm, Cool, And Collected",mood_stressed:"Stressed",mood_stressed_desc:"Feeling Overwhelmed And Tense",mood_creative:"Creative",mood_creative_desc:"Inspired And Ready To Create",cat_Activity:"Activity",cat_Mindfulness:"Mindfulness",cat_Social:"Social",cat_Creative:"Creative",cat_Inspirational:"Inspirational",cat_Music:"Music",connecting_ai:"Connecting to AI Spark Engine for {mood}..."},es:{app_title:"Encuentra tu Chispa",app_tagline:"Tu motor de inspiracin personal. Adaptado a cmo te sientes.",intro_desc:"Descubre ideas e inspiracin personalizadas que se ajustan perfectamente a tu estado de nimo actual. Listo para empezar?",get_started:"Empezar",how_feeling:"Cmo te sientes hoy?",change_mood:"Cambiar nimo",community_archive:"Mostrando las mejores chispas del archivo de la comunidad",custom_sparks:"Chispas personalizadas para tu nimo {mood}",personalized_inspiration:"Inspiracin personalizada para ayudarte en tu da.",discover_more:"Descubrir ms",the_spark:"La Chispa",copy_spark:"Copiar Chispa",community_favorite:"Favorito de la comunidad",live_ai_spark:"Chispa de IA en vivo",mood_happy:"Feliz",mood_happy_desc:"Sintindote alegre y radiante",mood_sad:"Triste",mood_sad_desc:"Necesitas un pequeo empujn",mood_energetic:"Enrgico",mood_energetic_desc:"Listo para comerte el mundo",mood_relaxed:"Relajado",mood_relaxed_desc:"Tranquilo y sereno",mood_stressed:"Estresado",mood_stressed_desc:"Sintindote abrumado y tenso",mood_creative:"Creativo",mood_creative_desc:"Inspirado y listo para crear",cat_Activity:"Actividad",cat_Mindfulness:"Atencin plena",cat_Social:"Social",cat_Creative:"Creativo",cat_Inspirational:"Inspirador",cat_Music:"Msica",connecting_ai:"Conectando al motor de IA para {mood}..."},fr:{app_title:"Trouvez votre tincelle",app_tagline:"Votre moteur d'inspiration personnel. Adapt  votre ressenti.",intro_desc:"Dcouvrez des ides personnalises et une inspiration parfaitement adaptes  votre humeur actuelle. Prt  commencer ?",get_started:"Commencer",how_feeling:"Comment vous sentez-vous aujourd'hui ?",change_mood:"Changer d'humeur",community_archive:"Affichage des meilleures tincelles de l'archive communautaire",custom_sparks:"tincelles personnalises pour votre humeur {mood}",personalized_inspiration:"Une inspiration personnalise pour vous aider  traverser la journe.",discover_more:"En savoir plus",the_spark:"L'tincelle",copy_spark:"Copier l'tincelle",community_favorite:"Favori de la communaut",live_ai_spark:"tincelle IA en direct",mood_happy:"Heureux",mood_happy_desc:"Se sentir joyeux et radieux",mood_sad:"Triste",mood_sad_desc:"Besoin d'un petit remontant",mood_energetic:"nergique",mood_energetic_desc:"Prt  conqurir le monde",mood_relaxed:"Dtendu",mood_relaxed_desc:"Calme, frais et serein",mood_stressed:"Stress",mood_stressed_desc:"Se sentir dpass et tendu",mood_creative:"Cratif",mood_creative_desc:"Inspir et prt  crer",cat_Activity:"Activit",cat_Mindfulness:"Pleine conscience",cat_Social:"Social",cat_Creative:"Cratif",cat_Inspirational:"Inspirationnel",cat_Music:"Musique",connecting_ai:"Connexion au moteur d'IA pour {mood}..."},de:{app_title:"Finde deinen Funken",app_tagline:"Deine persnliche Inspirationsquelle. Abgestimmt auf dein Befinden.",intro_desc:"Entdecke personalisierte Ideen und Inspirationen, die perfekt zu deiner aktuellen Stimmung passen. Bereit anzufangen?",get_started:"Loslegen",how_feeling:"Wie fhlst du heute?",change_mood:"Stimmung ndern",community_archive:"Die besten Funken aus dem Community-Archiv",custom_sparks:"Individuelle Funken fr deine {mood} Stimmung",personalized_inspiration:"Personalisierte Inspiration, die dir durch den Tag hilft.",discover_more:"Mehr entdecken",the_spark:"Der Funke",copy_spark:"Funken kopieren",community_favorite:"Community-Favorit",live_ai_spark:"Live KI-Funke",mood_happy:"Glcklich",mood_happy_desc:"Frhlich und strahlend fhlen",mood_sad:"Traurig",mood_sad_desc:"Brauche eine kleine Aufmunterung",mood_energetic:"Energetisch",mood_energetic_desc:"Bereit, die Welt zu erobern",mood_relaxed:"Entspannt",mood_relaxed_desc:"Ruhig, gelassen und entspannt",mood_stressed:"Gestresst",mood_stressed_desc:"berwltigt und angespannt fhlen",mood_creative:"Kreativ",mood_creative_desc:"Inspiriert und bereit zu erschaffen",cat_Activity:"Aktivitt",cat_Mindfulness:"Achtsamkeit",cat_Social:"Soziales",cat_Creative:"Kreativ",cat_Inspirational:"Inspirierend",cat_Music:"Musik",connecting_ai:"Verbindung zum KI-Modul fr {mood} wird hergestellt..."},ar:{app_title:"  ",app_tagline:"  .   .",intro_desc:"         .    ",get_started:" ",how_feeling:"  ",change_mood:" ",community_archive:"     ",custom_sparks:"   {mood}",personalized_inspiration:"    .",discover_more:" ",the_spark:"",copy_spark:" ",community_favorite:"  ",live_ai_spark:"   ",mood_happy:"",mood_happy_desc:"  ",mood_sad:"",mood_sad_desc:"  ",mood_energetic:"",mood_energetic_desc:"  ",mood_relaxed:"",mood_relaxed_desc:"  ",mood_stressed:"",mood_stressed_desc:"  ",mood_creative:"",mood_creative_desc:"  ",cat_Activity:"",cat_Mindfulness:"",cat_Social:"",cat_Creative:"",cat_Inspirational:"",cat_Music:"",connecting_ai:"      {mood}..."},fr_ca:{app_title:"Trouve ton tincelle",app_tagline:"Ton moteur d'inspiration perso. Adapt  comment tu te sens.",intro_desc:"Dcouvre des ides et de l'inspiration personnalises qui matchent ton humeur. Prt pour l'aventure?",get_started:"C'est parti",how_feeling:"Comment tu te sens aujourd'hui?",change_mood:"Changer d'humeur",community_archive:"Les meilleures tincelles de la communaut",custom_sparks:"tincelles personnalises pour ton humeur {mood}",personalized_inspiration:"De l'inspiration sur mesure pour ta journe.",discover_more:"En dcouvrir plus",the_spark:"L'tincelle",copy_spark:"Copier l'tincelle",community_favorite:"Coup de cur",live_ai_spark:"tincelle IA en direct",mood_happy:"Joyeux",mood_happy_desc:"Tout sourire et plein d'nergie",mood_sad:"Triste",mood_sad_desc:"Besoin d'un petit remontant",mood_energetic:"En feu",mood_energetic_desc:"Prt  conqurir le monde",mood_relaxed:"Relax",mood_relaxed_desc:"Calme et pos",mood_stressed:"Stress",mood_stressed_desc:"Un peu trop dans le jus",mood_creative:"Cratif",mood_creative_desc:"Inspir et prt  crer",cat_Activity:"Activit",cat_Mindfulness:"Pleine conscience",cat_Social:"Social",cat_Creative:"Cration",cat_Inspirational:"Inspiration",cat_Music:"Musique",connecting_ai:"Connexion au moteur d'IA pour {mood}..."}};var gI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yI,_I;function vI(){return{geminiUrl:yI,vertexUrl:_I}}function TI(t,e,n,o){var r,l;if(!(t!=null&&t.baseUrl)){const c=vI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro{}function ce(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(t,e,n){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const y=t[h];if(Array.isArray(n))for(let m=0;m<y.length;m++){const v=y[m];d(v,e.slice(l+1),n[m])}else for(const m of y)d(m,e.slice(l+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const y=t[h];d(y[0],e.slice(l+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>f(h,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function EI(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),l=o.split("."),c=new Set;let h=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){h=y;break}if(h!==-1&&l.length>h)for(let y=h;y<l.length;y++){const m=l[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}zh(t,r,l,0,c)}}function zh(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const y of h[c])zh(y,e,n,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of h)y[m]=c[m];for(const[m,v]of Object.entries(y)){const E=[];for(const S of n.slice(o))S==="*"?E.push(m):E.push(S);d(c,E,v)}for(const m of h)delete c[m]}}else{const c=t;l in c&&zh(c[l],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SI(t){const e={},n=f(t,["operationName"]);n!=null&&d(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function AI(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],II(c)),e}function CI(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],RI(c)),e}function II(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>wI(c))),d(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function RI(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>MI(c))),d(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function wI(t){const e={},n=f(t,["video"]);return n!=null&&d(e,["video"],PI(n)),e}function MI(t){const e={},n=f(t,["_self"]);return n!=null&&d(e,["video"],UI(n)),e}function NI(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function DI(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function bI(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],xI(c)),e}function xI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function JT(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],VI(c)),e}function VI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function PI(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],wp(o));const r=f(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function UI(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],wp(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var X_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(X_||(X_={}));var W_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(W_||(W_={}));var Z_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Z_||(Z_={}));var yn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(yn||(yn={}));var j_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j_||(j_={}));var ev;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ev||(ev={}));var tv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(tv||(tv={}));var nv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(nv||(nv={}));var iv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(iv||(iv={}));var ov;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ov||(ov={}));var sv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(sv||(sv={}));var rv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(rv||(rv={}));var av;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(av||(av={}));var lv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lv||(lv={}));var uv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(uv||(uv={}));var cv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(cv||(cv={}));var fv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(fv||(fv={}));var dv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dv||(dv={}));var hv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hv||(hv={}));var pv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(pv||(pv={}));var mv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mv||(mv={}));var qc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(qc||(qc={}));var gv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gv||(gv={}));var yv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yv||(yv={}));var _v;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_v||(_v={}));var Yh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Yh||(Yh={}));var vv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vv||(vv={}));var Tv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Tv||(Tv={}));var Jh;(function(t){t.COLLECTION="COLLECTION"})(Jh||(Jh={}));var Ev;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ev||(Ev={}));var Sv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sv||(Sv={}));var Av;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Av||(Av={}));var Cv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Cv||(Cv={}));var Iv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Iv||(Iv={}));var Rv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Rv||(Rv={}));var wv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wv||(wv={}));var Mv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mv||(Mv={}));var Nv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nv||(Nv={}));var Dv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Dv||(Dv={}));var bv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(bv||(bv={}));var xv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(xv||(xv={}));var Vv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Vv||(Vv={}));var Pv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Pv||(Pv={}));var Uv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Uv||(Uv={}));var Lv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Lv||(Lv={}));var kv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(kv||(kv={}));var Ov;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ov||(Ov={}));var qv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(qv||(qv={}));var Fv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Fv||(Fv={}));var Gv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Gv||(Gv={}));var Bv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bv||(Bv={}));var Hv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hv||(Hv={}));var zv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zv||(zv={}));var Yv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Yv||(Yv={}));var Jv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jv||(Jv={}));var Kv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Kv||(Kv={}));var qr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(qr||(qr={}));class Kh{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class gl{get text(){var e,n,o,r,l,c,h,y;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[R,U]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(U!==null||U!==void 0)&&E.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,o,r,l,c,h,y;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[S,R]of Object.entries(E))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,r,l,c,h,y;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,r,l,c,h,y,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,r,l,c,h,y,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Qv{}class $v{}class LI{}class kI{}class OI{}class qI{}class Xv{}class Wv{}class Zv{}class FI{}class Fc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Fc;let r;const l=e;return n?r=CI(l):r=AI(l),Object.assign(o,r),o}}class jv{}class e0{}class t0{}class n0{}class GI{}class BI{}class HI{}class Mp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Mp,l=bI(e);return Object.assign(o,l),o}}class zI{}class YI{}class JI{}class i0{}class KI{get text(){var e,n,o;let r="",l=!1;const c=[];for(const h of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(h))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class QI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Np{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Np,l=JT(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function KT(t,e){const n=Ye(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function QT(t){return Array.isArray(t)?t.map(e=>Gc(e)):[Gc(t)]}function Gc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $T(t){const e=Gc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XT(t){const e=Gc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function o0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function WT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>o0(e)):[o0(t)]}function Qh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function s0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function r0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function nn(t){if(t==null)throw new Error("ContentUnion is required");return Qh(t)?t:{role:"user",parts:WT(t)}}function Dp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=nn(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=nn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>nn(n)):[nn(e)]}function Bn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(s0(t)||r0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(t)]}const e=[],n=[],o=Qh(t[0]);for(const r of t){const l=Qh(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(s0(r)||r0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:WT(n)}),e}function $I(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(yn).includes(n[0].toUpperCase())?n[0].toUpperCase():yn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(yn).includes(o.toUpperCase())?o.toUpperCase():yn.TYPE_UNSPECIFIED})}}function Gr(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&$I(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(yn).includes(h.toUpperCase())?h.toUpperCase():yn.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Gr(h);else if(o.includes(c)){const y=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}y.push(Gr(m))}e[c]=y}else if(r.includes(c)){const y={};for(const[m,v]of Object.entries(h))y[m]=Gr(v);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function bp(t){return Gr(t)}function xp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ta(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Gr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Gr(e.response));return t}function na(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function XI(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function ao(t,e){if(typeof e!="string")throw new Error("name must be a string");return XI(t,e,"cachedContents")}function ZT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ts(t){return wp(t)}function WI(t){return t!=null&&typeof t=="object"&&"name"in t}function ZI(t){return t!=null&&typeof t=="object"&&"video"in t}function jI(t){return t!=null&&typeof t=="object"&&"uri"in t}function jT(t){var e;let n;if(WI(t)&&(n=t.name),!(jI(t)&&(n=t.uri,n===void 0))&&!(ZI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function eE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tE(t){for(const e of["models","tunedModels","publisherModels"])if(eR(t,e))return t[e];return[]}function eR(t,e){return t!==null&&typeof t=="object"&&e in t}function tR(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function nR(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=tR(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function nE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function iR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ia(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function oE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oR(t){const e={},n=f(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>OR(c))),d(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function sR(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function rR(t){const e={},n=f(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bc(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&d(e,["state"],oE(r));const l=f(t,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const y=f(t,["metadata","model"]);y!=null&&d(e,["model"],y);const m=f(t,["metadata","output"]);return m!=null&&d(e,["dest"],oR(iE(m))),e}function $h(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["state"]);r!=null&&d(e,["state"],oE(r));const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(e,["startTime"],h);const y=f(t,["endTime"]);y!=null&&d(e,["endTime"],y);const m=f(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const v=f(t,["model"]);v!=null&&d(e,["model"],v);const E=f(t,["inputConfig"]);E!=null&&d(e,["src"],aR(E));const S=f(t,["outputConfig"]);S!=null&&d(e,["dest"],sR(iE(S)));const R=f(t,["completionStats"]);return R!=null&&d(e,["completionStats"],R),e}function aR(t){const e={},n=f(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function lR(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&d(n,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>kR(t,c))),d(n,["requests","requests"],l)}return n}function uR(t){const e={},n=f(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cR(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function fR(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function dR(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function hR(t){const e={},n=f(t,["content"]);n!=null&&d(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],pR(o));const r=f(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const y=f(t,["index"]);y!=null&&d(e,["index"],y);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),d(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function pR(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function sE(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>YR(l))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function mR(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function gR(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],rR(iR(r))),n}function a0(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["src"]);r!=null&&d(n,["batch","inputConfig"],lR(t,nE(t,r)));const l=f(e,["config"]);return l!=null&&mR(l,n),n}function yR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],Ye(t,o));const r=f(e,["src"]);r!=null&&d(n,["inputConfig"],uR(nE(t,r)));const l=f(e,["config"]);return l!=null&&gR(l,n),n}function _R(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),n}function vR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["src"]);r!=null&&d(n,["batch","inputConfig"],RR(t,r));const l=f(e,["config"]);return l!=null&&_R(l,n),n}function TR(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function ER(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function SR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);return l!=null&&d(e,["error"],l),e}function AR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);return l!=null&&d(e,["error"],l),e}function CR(t,e){const n={},o=f(e,["contents"]);if(o!=null){let l=Dp(t,o);Array.isArray(l)&&(l=l.map(c=>c)),d(n,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(d(n,["_self"],IR(r,n)),EI(n,{"requests[].*":"requests[].request.*"})),n}function IR(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RR(t,e){const n={},o=f(e,["fileName"]);o!=null&&d(n,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&d(n,["requests"],CR(t,r)),n}function wR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function MR(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NR(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DR(t,e,n){const o={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],sE(nn(r)));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&d(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const G=f(e,["seed"]);G!=null&&d(o,["seed"],G);const k=f(e,["responseMimeType"]);k!=null&&d(o,["responseMimeType"],k);const Q=f(e,["responseSchema"]);Q!=null&&d(o,["responseSchema"],bp(Q));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(n!==void 0&&Z!=null){let b=Z;Array.isArray(b)&&(b=b.map(ke=>JR(ke))),d(n,["safetySettings"],b)}const se=f(e,["tools"]);if(n!==void 0&&se!=null){let b=na(se);Array.isArray(b)&&(b=b.map(ke=>QR(ta(ke)))),d(n,["tools"],b)}const fe=f(e,["toolConfig"]);if(n!==void 0&&fe!=null&&d(n,["toolConfig"],KR(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);n!==void 0&&ue!=null&&d(n,["cachedContent"],ao(t,ue));const D=f(e,["responseModalities"]);D!=null&&d(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&d(o,["mediaResolution"],N);const M=f(e,["speechConfig"]);if(M!=null&&d(o,["speechConfig"],xp(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&d(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&d(o,["imageConfig"],LR(V));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&d(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function bR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>hR(m))),d(e,["candidates"],y)}const r=f(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function xR(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function VR(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ia(t,o)),n}function PR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function UR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function LR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["request","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let h=Bn(r);Array.isArray(h)&&(h=h.map(y=>sE(y))),d(n,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&d(n,["metadata"],l);const c=f(e,["config"]);return c!=null&&d(n,["request","generationConfig"],DR(t,c,f(n,["request"],{}))),n}function OR(t){const e={},n=f(t,["response"]);n!=null&&d(e,["response"],bR(n));const o=f(t,["error"]);return o!=null&&d(e,["error"],o),e}function qR(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function FR(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function GR(t){const e={},n=f(t,["config"]);return n!=null&&qR(n,e),e}function BR(t){const e={},n=f(t,["config"]);return n!=null&&FR(n,e),e}function HR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bc(c))),d(e,["batchJobs"],l)}return e}function zR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>$h(c))),d(e,["batchJobs"],l)}return e}function YR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],wR(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],MR(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(t,["inlineData"]);y!=null&&d(e,["inlineData"],cR(y));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function JR(t){const e={},n=f(t,["category"]);if(n!=null&&d(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function KR(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],NR(o)),e}function QR(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],PR(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],UR(h));const y=f(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var no;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(no||(no={}));class qs{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $R extends ro{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(no.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=a0(this.apiClient,e),o=n._url,r=ce("{model}:batchGenerateContent",o),h=n.batch.inputConfig.requests,y=h.requests,m=[];for(const v of y){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=S,E.request=R}m.push(E)}return h.requests=m,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=yR(this.apiClient,e);return h=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>$h(v))}else{const m=a0(this.apiClient,e);return h=ce("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>bc(v))}}async createEmbeddingsInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vR(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>bc(y))}}async get(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=VR(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>$h(v))}else{const m=xR(this.apiClient,e);return h=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>bc(v))}}async cancel(e){var n,o,r,l;let c="",h={};if(this.apiClient.isVertexAI()){const y=dR(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=fR(this.apiClient,e);c=ce("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=BR(e);return h=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=zR(v),S=new i0;return Object.assign(S,E),S})}else{const m=GR(e);return h=ce("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=HR(v),S=new i0;return Object.assign(S,E),S})}}async delete(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=ER(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>AR(v))}else{const m=TR(this.apiClient,e);return h=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>SR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XR(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function l0(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>vw(l))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function WR(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let v=Bn(c);Array.isArray(v)&&(v=v.map(E=>l0(E))),d(e,["contents"],v)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],l0(nn(h)));const y=f(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>Ew(E))),d(e,["tools"],v)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],Tw(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ZR(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let E=Bn(c);Array.isArray(E)&&(E=E.map(S=>S)),d(e,["contents"],E)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],nn(h));const y=f(t,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>Sw(S))),d(e,["tools"],E)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),n}function jR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],KT(t,o));const r=f(e,["config"]);return r!=null&&WR(r,n),n}function ew(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],KT(t,o));const r=f(e,["config"]);return r!=null&&ZR(r,n),n}function tw(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ao(t,o)),n}function nw(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ao(t,o)),n}function iw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function ow(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function sw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function rw(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aw(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lw(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function uw(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ao(t,o)),n}function cw(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ao(t,o)),n}function fw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function dw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function hw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function pw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function mw(t){const e={},n=f(t,["config"]);return n!=null&&hw(n,e),e}function gw(t){const e={},n=f(t,["config"]);return n!=null&&pw(n,e),e}function yw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function _w(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function vw(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],sw(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],rw(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(t,["inlineData"]);y!=null&&d(e,["inlineData"],XR(y));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function Tw(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],aw(o)),e}function Ew(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],fw(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],dw(h));const y=f(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function Sw(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>lw(S))),d(e,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const y=f(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function Aw(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function Cw(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function Iw(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],ao(t,o));const r=f(e,["config"]);return r!=null&&Aw(r,n),n}function Rw(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],ao(t,o));const r=f(e,["config"]);return r!=null&&Cw(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ww extends ro{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(no.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=ew(this.apiClient,e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=jR(this.apiClient,e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=cw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=uw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=nw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ow(v),S=new t0;return Object.assign(S,E),S})}else{const m=tw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=iw(v),S=new t0;return Object.assign(S,E),S})}}async update(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=Rw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Iw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=gw(e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=_w(v),S=new n0;return Object.assign(S,E),S})}else{const m=mw(e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=yw(v),S=new n0;return Object.assign(S,E),S})}}}function Bc(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function u0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(t){return this instanceof Ae?(this.v=t,this):new Ae(t)}function ii(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(R){return function(U){return Promise.resolve(U).then(R,E)}}function h(R,U){o[R]&&(r[R]=function(G){return new Promise(function(k,Q){l.push([R,G,k,Q])>1||y(R,G)})},U&&(r[R]=U(r[R])))}function y(R,U){try{m(o[R](U))}catch(G){S(l[0][3],G)}}function m(R){R.value instanceof Ae?Promise.resolve(R.value.v).then(v,E):S(l[0][2],R)}function v(R){y("next",R)}function E(R){y("throw",R)}function S(R,U){R(U),l.shift(),l.length&&y(l[0][0],l[0][1])}}function oi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof u0=="function"?u0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(c){return new Promise(function(h,y){c=t[l](c),r(h,y,c.done,c.value)})}}function r(l,c,h,y){Promise.resolve(y).then(function(m){l({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:rE(n)}function rE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Nw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function c0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!rE(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Dw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new bw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bw{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Nw(l)}async sendMessage(e){var n;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,h;const y=await r,m=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const R=m?[m]:[];this.recordHistory(o,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?c0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ii(this,arguments,function*(){var r,l,c,h,y,m;const v=[];try{for(var E=!0,S=oi(e),R;R=yield Ae(S.next()),r=R.done,!r;E=!0){h=R.value,E=!1;const U=h;if(Mw(U)){const G=(m=(y=U.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;G!==void 0&&v.push(G)}yield yield Ae(U)}}catch(U){l={error:U}}finally{try{!E&&!r&&(c=S.return)&&(yield Ae(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(n,v)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...c0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ml extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ml.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xw(t){const e={},n=f(t,["file"]);return n!=null&&d(e,["file"],n),e}function Vw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Pw(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],jT(n)),e}function Uw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Lw(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],jT(n)),e}function kw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Ow(t){const e={},n=f(t,["config"]);return n!=null&&kw(n,e),e}function qw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fw extends ro{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(no.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ow(e);return l=ce("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=qw(y),v=new zI;return Object.assign(v,m),v})}}async createInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xw(e);return l=ce("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=Vw(y),v=new YI;return Object.assign(v,m),v})}}async get(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Lw(e);return l=ce("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Pw(e);return l=ce("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=Uw(y),v=new JI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xc(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Gw(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>i1(l))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function Bw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Hw(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zw(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Yw(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const y=f(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const R=f(t,["responseMimeType"]);R!=null&&d(e,["responseMimeType"],R);const U=f(t,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const G=f(t,["responseSchema"]);G!=null&&d(e,["responseSchema"],G);const k=f(t,["routingConfig"]);k!=null&&d(e,["routingConfig"],k);const Q=f(t,["seed"]);Q!=null&&d(e,["seed"],Q);const ie=f(t,["speechConfig"]);ie!=null&&d(e,["speechConfig"],ie);const Z=f(t,["stopSequences"]);Z!=null&&d(e,["stopSequences"],Z);const se=f(t,["temperature"]);se!=null&&d(e,["temperature"],se);const fe=f(t,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const ue=f(t,["topK"]);ue!=null&&d(e,["topK"],ue);const D=f(t,["topP"]);if(D!=null&&d(e,["topP"],D),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Jw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Kw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Qw(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(t,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(t,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],Gw(nn(U)));const G=f(t,["tools"]);if(e!==void 0&&G!=null){let ue=na(G);Array.isArray(ue)&&(ue=ue.map(D=>s1(ta(D)))),d(e,["setup","tools"],ue)}const k=f(t,["sessionResumption"]);e!==void 0&&k!=null&&d(e,["setup","sessionResumption"],o1(k));const Q=f(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const ie=f(t,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&d(e,["setup","realtimeInputConfig"],Z);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(t,["proactivity"]);if(e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $w(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],Yw(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(t,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(t,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],nn(U));const G=f(t,["tools"]);if(e!==void 0&&G!=null){let D=na(G);Array.isArray(D)&&(D=D.map(N=>r1(ta(N)))),d(e,["setup","tools"],D)}const k=f(t,["sessionResumption"]);e!==void 0&&k!=null&&d(e,["setup","sessionResumption"],k);const Q=f(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const ie=f(t,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&d(e,["setup","realtimeInputConfig"],Z);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(t,["proactivity"]);e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe);const ue=f(t,["explicitVadSignal"]);return e!==void 0&&ue!=null&&d(e,["setup","explicitVadSignal"],ue),n}function Xw(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ye(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],Qw(r,n)),n}function Ww(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ye(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],$w(r,n)),n}function Zw(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function jw(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["weightedPrompts"],o)}return e}function e1(t){const e={},n=f(t,["media"]);if(n!=null){let m=QT(n);Array.isArray(m)&&(m=m.map(v=>xc(v))),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],xc(XT(o)));const r=f(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&d(e,["video"],xc($T(l)));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const y=f(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function t1(t){const e={},n=f(t,["media"]);if(n!=null){let m=QT(n);Array.isArray(m)&&(m=m.map(v=>v)),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],XT(o));const r=f(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&d(e,["video"],$T(l));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const y=f(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function n1(t){const e={},n=f(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&d(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],a1(c));const h=f(t,["goAway"]);h!=null&&d(e,["goAway"],h);const y=f(t,["sessionResumptionUpdate"]);y!=null&&d(e,["sessionResumptionUpdate"],y);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const v=f(t,["voiceActivity"]);return v!=null&&d(e,["voiceActivity"],l1(v)),e}function i1(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],Bw(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],Hw(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(t,["inlineData"]);y!=null&&d(e,["inlineData"],xc(y));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function o1(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],Jw(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],Kw(h));const y=f(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function r1(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>zw(S))),d(e,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const y=f(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function a1(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const y=f(t,["promptTokensDetails"]);if(y!=null){let R=y;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["promptTokensDetails"],R)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["cacheTokensDetails"],R)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["responseTokensDetails"],R)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["toolUsePromptTokensDetails"],R)}const S=f(t,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}function l1(t){const e={},n=f(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function c1(t){const e={},n=f(t,["content"]);n!=null&&d(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],f1(o));const r=f(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const y=f(t,["index"]);y!=null&&d(e,["index"],y);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),d(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function f1(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function d1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let l=Bn(r);Array.isArray(l)&&(l=l.map(c=>c)),d(n,["contents"],l)}return n}function h1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["tokensInfo"],r)}return e}function p1(t){const e={},n=f(t,["values"]);n!=null&&d(e,["values"],n);const o=f(t,["statistics"]);return o!=null&&d(e,["statistics"],m1(o)),e}function m1(t){const e={},n=f(t,["truncated"]);n!=null&&d(e,["truncated"],n);const o=f(t,["token_count"]);return o!=null&&d(e,["tokenCount"],o),e}function lf(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>CM(l))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function g1(t){const e={},n=f(t,["controlType"]);n!=null&&d(e,["controlType"],n);const o=f(t,["enableControlImageComputation"]);return o!=null&&d(e,["computeControl"],o),e}function y1(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function _1(t,e){const n={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],nn(o));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>cE(h))),d(e,["tools"],c)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],uM(l)),n}function v1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let c=Bn(r);Array.isArray(c)&&(c=c.map(h=>lf(h))),d(n,["contents"],c)}const l=f(e,["config"]);return l!=null&&y1(l),n}function T1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let c=Bn(r);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["contents"],c)}const l=f(e,["config"]);return l!=null&&_1(l,n),n}function E1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);o!=null&&d(e,["totalTokens"],o);const r=f(t,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function S1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);return o!=null&&d(e,["totalTokens"],o),e}function A1(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ye(t,o)),n}function C1(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ye(t,o)),n}function I1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function R1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function w1(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const R=f(t,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const U=f(t,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const G=f(t,["outputCompressionQuality"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","compressionQuality"],G);const k=f(t,["addWatermark"]);e!==void 0&&k!=null&&d(e,["parameters","addWatermark"],k);const Q=f(t,["labels"]);e!==void 0&&Q!=null&&d(e,["labels"],Q);const ie=f(t,["editMode"]);e!==void 0&&ie!=null&&d(e,["parameters","editMode"],ie);const Z=f(t,["baseSteps"]);return e!==void 0&&Z!=null&&d(e,["parameters","editConfig","baseSteps"],Z),n}function M1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>DM(y))),d(n,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&w1(c,n),n}function N1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>uf(l))),d(e,["generatedImages"],r)}return e}function D1(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function b1(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const h=f(t,["autoTruncate"]);return e!==void 0&&h!=null&&d(e,["parameters","autoTruncate"],h),n}function x1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let h=Dp(t,r);Array.isArray(h)&&(h=h.map(y=>y)),d(n,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&D1(l,n);const c=f(e,["model"]);return c!==void 0&&d(n,["requests[]","model"],Ye(t,c)),n}function V1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let c=Dp(t,r);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&b1(l,n),n}function P1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function U1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>p1(c))),d(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function L1(t){const e={},n=f(t,["endpoint"]);n!=null&&d(e,["name"],n);const o=f(t,["deployedModelId"]);return o!=null&&d(e,["deployedModelId"],o),e}function k1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function O1(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function q1(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function F1(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function G1(t,e,n){const o={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],lf(nn(r)));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&d(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const G=f(e,["seed"]);G!=null&&d(o,["seed"],G);const k=f(e,["responseMimeType"]);k!=null&&d(o,["responseMimeType"],k);const Q=f(e,["responseSchema"]);Q!=null&&d(o,["responseSchema"],bp(Q));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(n!==void 0&&Z!=null){let b=Z;Array.isArray(b)&&(b=b.map(ke=>bM(ke))),d(n,["safetySettings"],b)}const se=f(e,["tools"]);if(n!==void 0&&se!=null){let b=na(se);Array.isArray(b)&&(b=b.map(ke=>OM(ta(ke)))),d(n,["tools"],b)}const fe=f(e,["toolConfig"]);if(n!==void 0&&fe!=null&&d(n,["toolConfig"],kM(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);n!==void 0&&ue!=null&&d(n,["cachedContent"],ao(t,ue));const D=f(e,["responseModalities"]);D!=null&&d(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&d(o,["mediaResolution"],N);const M=f(e,["speechConfig"]);if(M!=null&&d(o,["speechConfig"],xp(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&d(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&d(o,["imageConfig"],pM(V));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&d(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function B1(t,e,n){const o={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],nn(r));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&d(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const G=f(e,["seed"]);G!=null&&d(o,["seed"],G);const k=f(e,["responseMimeType"]);k!=null&&d(o,["responseMimeType"],k);const Q=f(e,["responseSchema"]);Q!=null&&d(o,["responseSchema"],bp(Q));const ie=f(e,["responseJsonSchema"]);ie!=null&&d(o,["responseJsonSchema"],ie);const Z=f(e,["routingConfig"]);Z!=null&&d(o,["routingConfig"],Z);const se=f(e,["modelSelectionConfig"]);se!=null&&d(o,["modelConfig"],se);const fe=f(e,["safetySettings"]);if(n!==void 0&&fe!=null){let re=fe;Array.isArray(re)&&(re=re.map(ye=>ye)),d(n,["safetySettings"],re)}const ue=f(e,["tools"]);if(n!==void 0&&ue!=null){let re=na(ue);Array.isArray(re)&&(re=re.map(ye=>cE(ta(ye)))),d(n,["tools"],re)}const D=f(e,["toolConfig"]);n!==void 0&&D!=null&&d(n,["toolConfig"],D);const N=f(e,["labels"]);n!==void 0&&N!=null&&d(n,["labels"],N);const M=f(e,["cachedContent"]);n!==void 0&&M!=null&&d(n,["cachedContent"],ao(t,M));const P=f(e,["responseModalities"]);P!=null&&d(o,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&d(o,["mediaResolution"],V);const q=f(e,["speechConfig"]);q!=null&&d(o,["speechConfig"],xp(q));const b=f(e,["audioTimestamp"]);b!=null&&d(o,["audioTimestamp"],b);const ke=f(e,["thinkingConfig"]);ke!=null&&d(o,["thinkingConfig"],ke);const dt=f(e,["imageConfig"]);if(dt!=null&&d(o,["imageConfig"],mM(dt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=f(e,["modelArmorConfig"]);return n!==void 0&&$!=null&&d(n,["modelArmorConfig"],$),o}function f0(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let c=Bn(r);Array.isArray(c)&&(c=c.map(h=>lf(h))),d(n,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(n,["generationConfig"],G1(t,l,n)),n}function d0(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["contents"]);if(r!=null){let c=Bn(r);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(n,["generationConfig"],B1(t,l,n)),n}function h0(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>c1(m))),d(e,["candidates"],y)}const r=f(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function p0(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["candidates"],m)}const r=f(t,["createTime"]);r!=null&&d(e,["createTime"],r);const l=f(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const h=f(t,["responseId"]);h!=null&&d(e,["responseId"],h);const y=f(t,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function H1(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const y=f(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const v=f(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","mimeType"],E);const S=f(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(t,["imageSize"]);if(e!==void 0&&R!=null&&d(e,["parameters","sampleImageSize"],R),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function z1(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const R=f(t,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const U=f(t,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const G=f(t,["outputCompressionQuality"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","compressionQuality"],G);const k=f(t,["addWatermark"]);e!==void 0&&k!=null&&d(e,["parameters","addWatermark"],k);const Q=f(t,["labels"]);e!==void 0&&Q!=null&&d(e,["labels"],Q);const ie=f(t,["imageSize"]);e!==void 0&&ie!=null&&d(e,["parameters","sampleImageSize"],ie);const Z=f(t,["enhancePrompt"]);return e!==void 0&&Z!=null&&d(e,["parameters","enhancePrompt"],Z),n}function Y1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&H1(l,n),n}function J1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&z1(l,n),n}function K1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>sM(c))),d(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],lE(r)),e}function Q1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>uf(c))),d(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],uE(r)),e}function $1(t,e){const n={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=f(t,["personGeneration"]);if(e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(t,["negativePrompt"]);e!==void 0&&y!=null&&d(e,["parameters","negativePrompt"],y);const m=f(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(t,["lastFrame"]);e!==void 0&&v!=null&&d(e,["instances[0]","lastFrame"],cf(v));const E=f(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(R=>WM(R))),d(e,["instances[0]","referenceImages"],S)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function X1(t,e){const n={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const l=f(t,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const h=f(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const y=f(t,["aspectRatio"]);e!==void 0&&y!=null&&d(e,["parameters","aspectRatio"],y);const m=f(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const E=f(t,["pubsubTopic"]);e!==void 0&&E!=null&&d(e,["parameters","pubsubTopic"],E);const S=f(t,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const R=f(t,["enhancePrompt"]);e!==void 0&&R!=null&&d(e,["parameters","enhancePrompt"],R);const U=f(t,["generateAudio"]);e!==void 0&&U!=null&&d(e,["parameters","generateAudio"],U);const G=f(t,["lastFrame"]);e!==void 0&&G!=null&&d(e,["instances[0]","lastFrame"],ai(G));const k=f(t,["referenceImages"]);if(e!==void 0&&k!=null){let Z=k;Array.isArray(Z)&&(Z=Z.map(se=>ZM(se))),d(e,["instances[0]","referenceImages"],Z)}const Q=f(t,["mask"]);e!==void 0&&Q!=null&&d(e,["instances[0]","mask"],XM(Q));const ie=f(t,["compressionQuality"]);return e!==void 0&&ie!=null&&d(e,["parameters","compressionQuality"],ie),n}function W1(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],tM(c)),e}function Z1(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],nM(c)),e}function j1(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(n,["instances[0]","image"],cf(l));const c=f(e,["video"]);c!=null&&d(n,["instances[0]","video"],fE(c));const h=f(e,["source"]);h!=null&&iM(h,n);const y=f(e,["config"]);return y!=null&&$1(y,n),n}function eM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(n,["instances[0]","image"],ai(l));const c=f(e,["video"]);c!=null&&d(n,["instances[0]","video"],dE(c));const h=f(e,["source"]);h!=null&&oM(h,n);const y=f(e,["config"]);return y!=null&&X1(y,n),n}function tM(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>aM(c))),d(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function nM(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>lM(c))),d(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function iM(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],cf(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],fE(l)),n}function oM(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ai(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],dE(l)),n}function sM(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["image"],gM(n));const o=f(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const r=f(t,["_self"]);return r!=null&&d(e,["safetyAttributes"],lE(r)),e}function uf(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["image"],aE(n));const o=f(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const r=f(t,["_self"]);r!=null&&d(e,["safetyAttributes"],uE(r));const l=f(t,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function rM(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["mask"],aE(n));const o=f(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["labels"],r)}return e}function aM(t){const e={},n=f(t,["video"]);return n!=null&&d(e,["video"],QM(n)),e}function lM(t){const e={},n=f(t,["_self"]);return n!=null&&d(e,["video"],$M(n)),e}function uM(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const y=f(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const R=f(t,["responseMimeType"]);R!=null&&d(e,["responseMimeType"],R);const U=f(t,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const G=f(t,["responseSchema"]);G!=null&&d(e,["responseSchema"],G);const k=f(t,["routingConfig"]);k!=null&&d(e,["routingConfig"],k);const Q=f(t,["seed"]);Q!=null&&d(e,["seed"],Q);const ie=f(t,["speechConfig"]);ie!=null&&d(e,["speechConfig"],ie);const Z=f(t,["stopSequences"]);Z!=null&&d(e,["stopSequences"],Z);const se=f(t,["temperature"]);se!=null&&d(e,["temperature"],se);const fe=f(t,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const ue=f(t,["topK"]);ue!=null&&d(e,["topK"],ue);const D=f(t,["topP"]);if(D!=null&&d(e,["topP"],D),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cM(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ye(t,o)),n}function fM(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ye(t,o)),n}function dM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function hM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function pM(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function mM(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);o!=null&&d(e,["imageSize"],o);const r=f(t,["personGeneration"]);r!=null&&d(e,["personGeneration"],r);const l=f(t,["outputMimeType"]);l!=null&&d(e,["imageOutputOptions","mimeType"],l);const c=f(t,["outputCompressionQuality"]);return c!=null&&d(e,["imageOutputOptions","compressionQuality"],c),e}function gM(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],ts(n));const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function aE(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],ts(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function cf(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],ts(n));const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function ai(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],ts(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function yM(t,e,n){const o={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const l=f(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const c=f(e,["filter"]);n!==void 0&&c!=null&&d(n,["_query","filter"],c);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],eE(t,h)),o}function _M(t,e,n){const o={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const l=f(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const c=f(e,["filter"]);n!==void 0&&c!=null&&d(n,["_query","filter"],c);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],eE(t,h)),o}function vM(t,e){const n={},o=f(e,["config"]);return o!=null&&yM(t,o,n),n}function TM(t,e){const n={},o=f(e,["config"]);return o!=null&&_M(t,o,n),n}function EM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=tE(r);Array.isArray(l)&&(l=l.map(c=>Xh(c))),d(e,["models"],l)}return e}function SM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=tE(r);Array.isArray(l)&&(l=l.map(c=>Wh(c))),d(e,["models"],l)}return e}function AM(t){const e={},n=f(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const o=f(t,["segmentationClasses"]);o!=null&&d(e,["maskClasses"],o);const r=f(t,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function Xh(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["description"]);r!=null&&d(e,["description"],r);const l=f(t,["version"]);l!=null&&d(e,["version"],l);const c=f(t,["_self"]);c!=null&&d(e,["tunedModelInfo"],qM(c));const h=f(t,["inputTokenLimit"]);h!=null&&d(e,["inputTokenLimit"],h);const y=f(t,["outputTokenLimit"]);y!=null&&d(e,["outputTokenLimit"],y);const m=f(t,["supportedGenerationMethods"]);m!=null&&d(e,["supportedActions"],m);const v=f(t,["temperature"]);v!=null&&d(e,["temperature"],v);const E=f(t,["maxTemperature"]);E!=null&&d(e,["maxTemperature"],E);const S=f(t,["topP"]);S!=null&&d(e,["topP"],S);const R=f(t,["topK"]);R!=null&&d(e,["topK"],R);const U=f(t,["thinking"]);return U!=null&&d(e,["thinking"],U),e}function Wh(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["description"]);r!=null&&d(e,["description"],r);const l=f(t,["versionId"]);l!=null&&d(e,["version"],l);const c=f(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>L1(S))),d(e,["endpoints"],E)}const h=f(t,["labels"]);h!=null&&d(e,["labels"],h);const y=f(t,["_self"]);y!=null&&d(e,["tunedModelInfo"],FM(y));const m=f(t,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const v=f(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),d(e,["checkpoints"],E)}return e}function CM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],k1(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],O1(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(t,["inlineData"]);y!=null&&d(e,["inlineData"],u1(y));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function IM(t){const e={},n=f(t,["productImage"]);return n!=null&&d(e,["image"],ai(n)),e}function RM(t,e){const n={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=f(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const m=f(t,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const S=f(t,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const R=f(t,["labels"]);return e!==void 0&&R!=null&&d(e,["labels"],R),n}function wM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["source"]);r!=null&&NM(r,n);const l=f(e,["config"]);return l!=null&&RM(l,n),n}function MM(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>uf(r))),d(e,["generatedImages"],o)}return e}function NM(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(t,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],ai(r));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>IM(h))),d(e,["instances[0]","productImages"],c)}return n}function DM(t){const e={},n=f(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],ai(n));const o=f(t,["referenceId"]);o!=null&&d(e,["referenceId"],o);const r=f(t,["referenceType"]);r!=null&&d(e,["referenceType"],r);const l=f(t,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],AM(l));const c=f(t,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],g1(c));const h=f(t,["styleImageConfig"]);h!=null&&d(e,["styleImageConfig"],h);const y=f(t,["subjectImageConfig"]);return y!=null&&d(e,["subjectImageConfig"],y),e}function lE(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function uE(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function bM(t){const e={},n=f(t,["category"]);if(n!=null&&d(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function xM(t){const e={},n=f(t,["image"]);return n!=null&&d(e,["image"],ai(n)),e}function VM(t,e){const n={},o=f(t,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","confidenceThreshold"],l);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const h=f(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&d(e,["parameters","binaryColorThreshold"],h);const y=f(t,["labels"]);return e!==void 0&&y!=null&&d(e,["labels"],y),n}function PM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["source"]);r!=null&&LM(r,n);const l=f(e,["config"]);return l!=null&&VM(l,n),n}function UM(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>rM(r))),d(e,["generatedMasks"],o)}return e}function LM(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ai(r));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&d(e,["instances[0]","scribble"],xM(l)),n}function kM(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],q1(o)),e}function OM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],dM(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],hM(h));const y=f(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function cE(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>F1(S))),d(e,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const y=f(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function qM(t){const e={},n=f(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&d(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function FM(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&d(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function GM(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function BM(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function HM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","name"],Ye(t,o));const r=f(e,["config"]);return r!=null&&GM(r,n),n}function zM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["config"]);return r!=null&&BM(r,n),n}function YM(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const y=f(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const m=f(t,["enhanceInputImage"]);e!==void 0&&m!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(t,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(t,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const R=f(t,["mode"]);return e!==void 0&&R!=null&&d(e,["parameters","mode"],R),n}function JM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ye(t,o));const r=f(e,["image"]);r!=null&&d(n,["instances[0]","image"],ai(r));const l=f(e,["upscaleFactor"]);l!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&YM(c,n),n}function KM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>uf(l))),d(e,["generatedImages"],r)}return e}function QM(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],ts(o));const r=f(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function $M(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],ts(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function XM(t){const e={},n=f(t,["image"]);n!=null&&d(e,["_self"],ai(n));const o=f(t,["maskMode"]);return o!=null&&d(e,["maskMode"],o),e}function WM(t){const e={},n=f(t,["image"]);n!=null&&d(e,["image"],cf(n));const o=f(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function ZM(t){const e={},n=f(t,["image"]);n!=null&&d(e,["image"],ai(n));const o=f(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function fE(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["videoBytes"]);o!=null&&d(e,["encodedVideo"],ts(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function dE(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["videoBytes"]);o!=null&&d(e,["bytesBase64Encoded"],ts(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jM(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),n}function eN(t){const e={},n=f(t,["config"]);return n!=null&&jM(n,e),e}function tN(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function nN(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&tN(o,e),e}function iN(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function oN(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),n}function sN(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],aN(c)),e}function rN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&d(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&oN(r,e),e}function aN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function lN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function uN(t){const e={},n=f(t,["config"]);return n!=null&&lN(n,e),e}function cN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function hE(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>y)),d(e,["customMetadata"],h)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),n}function fN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&hE(o,e),e}function dN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hN="Content-Type",pN="X-Server-Timeout",mN="User-Agent",Zh="x-goog-api-client",gN="1.38.0",yN=`google-genai-sdk/${gN}`,_N="v1beta1",vN="v1beta";class TN{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_N}else{if(!this.clientOptions.apiKey)throw new Ml({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:vN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Jh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const l=new AbortController,c=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>l.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return n&&n.extraBody!==null&&EN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await m0(r),new Kh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await m0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ii(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ae(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(v,{stream:!0});try{const U=JSON.parse(E);if("error"in U){const G=JSON.parse(JSON.stringify(U.error)),k=G.status,Q=G.code,ie=`got status: ${k}. ${JSON.stringify(U)}`;if(Q>=400&&Q<600)throw new Ml({message:ie,status:Q})}}catch(U){if(U.name==="ApiError")throw U}c+=E;let S=-1,R=0;for(;;){S=-1,R=0;for(const k of y){const Q=c.indexOf(k);Q!==-1&&(S===-1||Q<S)&&(S=Q,R=k.length)}if(S===-1)break;const U=c.substring(0,S);c=c.substring(S+R);const G=U.trim();if(G.startsWith(h)){const k=G.substring(h.length).trim();try{const Q=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ae(new Kh(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${k}. ${Q}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=yN+" "+this.clientOptions.userAgentExtra;return e[mN]=n,e[Zh]=n,e[hN]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(pN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const h=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const y={file:r},m=this.getFileName(e),v=ce("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,n==null?void 0:n.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var r;const l=this.clientOptions.uploader,c=await l.stat(n),h=String(c.size),y=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),E={};o!=null&&hE(o,E);const S=await this.fetchUploadUrl(m,h,y,v,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,l,c){var h;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function m0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Ml({message:r,status:n}):new Error(r)}}function EN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const h=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],v=h[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[y]=m)}return h}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN="mcp_used/unknown";let AN=!1;function pE(t){for(const e of t)if(CN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return AN}function mE(t){var e;const n=(e=t[Zh])!==null&&e!==void 0?e:"";t[Zh]=(n+` ${SN}`).trimStart()}function CN(t){return t!==null&&typeof t=="object"&&t instanceof Pp}function IN(t){return ii(this,arguments,function*(n,o=100){let r,l=0;for(;l<o;){const c=yield Ae(n.listTools({cursor:r}));for(const h of c.tools)yield yield Ae(h),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class Pp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Pp(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,y=(n=void 0,oi(IN(v))),m;m=await y.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const E=r;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(o=y.return)&&await o.call(y)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),nR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RN(t,e,n){const o=new QI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class wN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=DN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),E=e.callbacks,S=function(){m({})},R=this.apiClient,U={onopen:S,onmessage:Z=>{RN(R,E.onmessage,Z)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(Z){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(Z){}},G=this.webSocketFactory.create(y,NN(c),U);G.connect(),await v;const ie={setup:{model:Ye(this.apiClient,e.model)}};return G.send(JSON.stringify(ie)),new MN(G,this.apiClient)}}class MN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=jw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Zw(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(qr.PLAY)}pause(){this.sendPlaybackControl(qr.PAUSE)}stop(){this.sendPlaybackControl(qr.STOP)}resetContext(){this.sendPlaybackControl(qr.RESET_CONTEXT)}close(){this.conn.close()}}function NN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function DN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xN(t,e,n){const o=new KI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=n1(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class VN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new wN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&pE(e.config.tools)&&mE(E);const S=kN(E);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),P=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),q=!!M&&!!P||!!V;this.apiClient.getCustomBaseUrl()&&!q?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const M=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${V}=${M}`}let R=()=>{};const U=new Promise(M=>{R=M}),G=e.callbacks,k=function(){var M;(M=G==null?void 0:G.onopen)===null||M===void 0||M.call(G),R({})},Q=this.apiClient,ie={onopen:k,onmessage:M=>{xN(Q,G.onmessage,M)},onerror:(n=G==null?void 0:G.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=G==null?void 0:G.onclose)!==null&&o!==void 0?o:function(M){}},Z=this.webSocketFactory.create(v,LN(S),ie);Z.connect(),await U;let se=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const M=this.apiClient.getProject(),P=this.apiClient.getLocation();M&&P&&(se=`projects/${M}/locations/${P}/`+se)}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qc.AUDIO]}:e.config.responseModalities=[qc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],D=[];for(const M of ue)if(this.isCallableTool(M)){const P=M;D.push(await P.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=Ww(this.apiClient,N):fe=Xw(this.apiClient,N),delete fe.config,Z.send(JSON.stringify(fe)),new UN(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const PN={turnComplete:!0};class UN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Bn(n.turns),e.isVertexAI()||(o=o.map(r=>lf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(bN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},PN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:t1(e)}:n={realtimeInput:e1(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function LN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function kN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g0=10;function y0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Br(c)){r=!0;break}if(!r)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Br(t){return"callTool"in t&&typeof t.callTool=="function"}function ON(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Br(r)))!==null&&o!==void 0?o:!1}function _0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(Br(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function v0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qN extends ro{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,l,c,h;const y=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ON(n)||y0(n.config))return await this.generateContentInternal(y);const m=_0(n);if(m.length>0){const G=m.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let v,E;const S=Bn(y.contents),R=(l=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:g0;let U=0;for(;U<R&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const G=v.candidates[0].content,k=[];for(const Q of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Br(Q)){const Z=await Q.callTool(v.functionCalls);k.push(...Z)}U++,E={role:"user",parts:k},y.contents=Bn(y.contents),y.contents.push(G),y.contents.push(E),v0(y.config)&&(S.push(G),S.push(E))}return v0(y.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var o,r,l,c,h;if(this.maybeMoveToResponseJsonSchem(n),y0(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const y=_0(n);if(y.length>0){const E=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let l;const c=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new qs(no.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,l,c,h,y;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(h=n.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Br(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&pE(e.config.tools)){const y=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),mE(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,o,r;const l=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Br(c)){const h=c,y=await h.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:g0;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(m,v,E){return ii(this,arguments,function*(){for(var S,R,U,G,k,Q;h<l;){c&&(h++,c=!1);const fe=yield Ae(m.processParamsMaybeAddMcpUsage(E)),ue=yield Ae(m.generateContentStreamInternal(fe)),D=[],N=[];try{for(var ie=!0,Z=(R=void 0,oi(ue)),se;se=yield Ae(Z.next()),S=se.done,!S;ie=!0){G=se.value,ie=!1;const M=G;if(yield yield Ae(M),M.candidates&&(!((k=M.candidates[0])===null||k===void 0)&&k.content)){N.push(M.candidates[0].content);for(const P of(Q=M.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield Ae(v.get(P.functionCall.name).callTool([P.functionCall]));D.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(M){R={error:M}}finally{try{!ie&&!S&&(U=Z.return)&&(yield Ae(U.call(Z)))}finally{if(R)throw R.error}}if(D.length>0){c=!0;const M=new gl;M.candidates=[{content:{role:"user",parts:D}}],yield yield Ae(M);const P=[];P.push(...N),P.push({role:"user",parts:D});const V=Bn(E.contents).concat(P);E.contents=V}else break}})})(this,y,e)}async generateContentInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=d0(this.apiClient,e);return h=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=p0(v),S=new gl;return Object.assign(S,E),S})}else{const m=f0(this.apiClient,e);return h=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=h0(v),S=new gl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=d0(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(E){return ii(this,arguments,function*(){var S,R,U,G;try{for(var k=!0,Q=oi(E),ie;ie=yield Ae(Q.next()),S=ie.done,!S;k=!0){G=ie.value,k=!1;const Z=G,se=p0(yield Ae(Z.json()));se.sdkHttpResponse={headers:Z.headers};const fe=new gl;Object.assign(fe,se),yield yield Ae(fe)}}catch(Z){R={error:Z}}finally{try{!k&&!S&&(U=Q.return)&&(yield Ae(U.call(Q)))}finally{if(R)throw R.error}}})})}else{const m=f0(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return ii(this,arguments,function*(){var S,R,U,G;try{for(var k=!0,Q=oi(E),ie;ie=yield Ae(Q.next()),S=ie.done,!S;k=!0){G=ie.value,k=!1;const Z=G,se=h0(yield Ae(Z.json()));se.sdkHttpResponse={headers:Z.headers};const fe=new gl;Object.assign(fe,se),yield yield Ae(fe)}}catch(Z){R={error:Z}}finally{try{!k&&!S&&(U=Q.return)&&(yield Ae(U.call(Q)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=V1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=U1(v),S=new Qv;return Object.assign(S,E),S})}else{const m=x1(this.apiClient,e);return h=ce("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=P1(v),S=new Qv;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=J1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Q1(v),S=new $v;return Object.assign(S,E),S})}else{const m=Y1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=K1(v),S=new $v;return Object.assign(S,E),S})}}async editImageInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=M1(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=N1(y),v=new LI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=JM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=KM(y),v=new kI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=wM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=MM(y),v=new OI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=PM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=UM(y),v=new qI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=fM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Wh(v))}else{const m=cM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Xh(v))}}async listInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=TM(this.apiClient,e);return h=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=SM(v),S=new Xv;return Object.assign(S,E),S})}else{const m=vM(this.apiClient,e);return h=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=EM(v),S=new Xv;return Object.assign(S,E),S})}}async update(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=zM(this.apiClient,e);return h=ce("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Wh(v))}else{const m=HM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Xh(v))}}async delete(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=C1(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=R1(v),S=new Wv;return Object.assign(S,E),S})}else{const m=A1(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=I1(v),S=new Wv;return Object.assign(S,E),S})}}async countTokens(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=T1(this.apiClient,e);return h=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=S1(v),S=new Zv;return Object.assign(S,E),S})}else{const m=v1(this.apiClient,e);return h=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=E1(v),S=new Zv;return Object.assign(S,E),S})}}async computeTokens(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=d1(this.apiClient,e);return l=ce("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=h1(y),v=new FI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=eM(this.apiClient,e);return h=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Z1(v),S=new Fc;return Object.assign(S,E),S})}else{const m=j1(this.apiClient,e);return h=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=W1(v),S=new Fc;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FN extends ro{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=DI(e);return h=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=NI(e);return h=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=SI(e);return l=ce("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GN(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function BN(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>WN(l))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function HN(t,e,n){const o={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&d(n,["newSessionExpireTime"],l);const c=f(e,["uses"]);n!==void 0&&c!=null&&d(n,["uses"],c);const h=f(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&d(n,["bidiGenerateContentSetup"],XN(t,h));const y=f(e,["lockAdditionalFields"]);return n!==void 0&&y!=null&&d(n,["fieldMask"],y),o}function zN(t,e){const n={},o=f(e,["config"]);return o!=null&&d(n,["config"],HN(t,o,n)),n}function YN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function JN(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function QN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function $N(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(t,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(t,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],BN(nn(U)));const G=f(t,["tools"]);if(e!==void 0&&G!=null){let ue=na(G);Array.isArray(ue)&&(ue=ue.map(D=>jN(ta(D)))),d(e,["setup","tools"],ue)}const k=f(t,["sessionResumption"]);e!==void 0&&k!=null&&d(e,["setup","sessionResumption"],ZN(k));const Q=f(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const ie=f(t,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&d(e,["setup","realtimeInputConfig"],Z);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(t,["proactivity"]);if(e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XN(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ye(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],$N(r,n)),n}function WN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],YN(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],JN(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(t,["inlineData"]);y!=null&&d(e,["inlineData"],GN(y));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function ZN(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jN(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],KN(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],QN(h));const y=f(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eD(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function tD(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=eD(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];l&&y.push(l),h.length>0&&y.push(...h),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class nD extends ro{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=zN(this.apiClient,e);l=ce("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=tD(h,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iD(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function oD(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&iD(o,e),e}function sD(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function rD(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function aD(t){const e={},n=f(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&rD(o,e),e}function lD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uD extends ro{constructor(e){super(),this.apiClient=e,this.list=async n=>new qs(no.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sD(e);return l=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oD(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aD(e);return l=ce("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=lD(y),v=new GI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cD extends ro{constructor(e,n=new uD(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new qs(no.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eN(e);return l=ce("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=iN(e);return l=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nN(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uN(e);return l=ce("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=cN(y),v=new BI;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fN(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=dN(y),v=new HI;return Object.assign(v,m),v})}}async importFile(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=rN(e);return l=ce("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=sN(y),v=new Mp;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return gE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const fD=()=>gE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ep=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn extends Error{}class ln extends Hn{constructor(e,n,o,r){super(`${ln.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new ff({message:o,cause:ep(n)});const l=n;return e===400?new _E(e,l,o,r):e===401?new vE(e,l,o,r):e===403?new TE(e,l,o,r):e===404?new EE(e,l,o,r):e===409?new SE(e,l,o,r):e===422?new AE(e,l,o,r):e===429?new CE(e,l,o,r):e>=500?new IE(e,l,o,r):new ln(e,l,o,r)}}class tp extends ln{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ff extends ln{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class yE extends ff{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _E extends ln{}class vE extends ln{}class TE extends ln{}class EE extends ln{}class SE extends ln{}class AE extends ln{}class CE extends ln{}class IE extends ln{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dD=/^[a-z][a-z0-9+.-]*:/i,hD=t=>dD.test(t);let np=t=>(np=Array.isArray,np(t));const pD=np;let mD=pD;const T0=mD;function gD(t){if(!t)return!0;for(const e in t)return!1;return!0}function yD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const _D=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Hn(`${t} must be an integer`);if(e<0)throw new Hn(`${t} must be a positive integer`);return e},vD=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TD=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ED(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const SD=()=>{var t,e,n,o,r;const l=ED();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":S0(Deno.build.os),"X-Stainless-Arch":E0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":S0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":E0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=AD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function AD(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const E0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",S0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Tc;const CD=()=>Tc??(Tc=SD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function RD(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return RE({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function wE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wD(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MD=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ME=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xh(t,e,n){return ME(),new File(t,e??"unknown_file",n)}function ND(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const DD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bD=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&NE(t),xD=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function VD(t,e,n){if(ME(),t=await t,bD(t))return t instanceof File?t:xh([await t.arrayBuffer()],t.name);if(xD(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xh(await ip(r),e,n)}const o=await ip(t);if(e||(e=ND(t)),!(n!=null&&n.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return xh(o,e,n)}async function ip(t){var e,n,o,r,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(NE(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(DD(t))try{for(var h=!0,y=oi(t),m;m=await y.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const v=r;c.push(...await ip(v))}}catch(v){n={error:v}}finally{try{!h&&!e&&(o=y.return)&&await o.call(y)}finally{if(n)throw n.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${PD(t)}`)}return c}function PD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DE{constructor(e){this._client=e}}DE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const A0=Object.freeze(Object.create(null)),UD=(t=bE)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const l=[],c=n.reduce((v,E,S)=>{var R,U,G;/[?#]/.test(E)&&(r=!0);const k=o[S];let Q=(r?encodeURIComponent:t)(""+k);return S!==o.length&&(k==null||typeof k=="object"&&k.toString===((G=Object.getPrototypeOf((U=Object.getPrototypeOf((R=k.hasOwnProperty)!==null&&R!==void 0?R:A0))!==null&&U!==void 0?U:A0))===null||G===void 0?void 0:G.toString))&&(Q=k+"",l.push({start:v.length+E.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),v+E+(S===o.length?"":Q)},""),h=c.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(h))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,E)=>v.start-E.start),l.length>0){let v=0;const E=l.reduce((S,R)=>{const U=" ".repeat(R.start-v),G="^".repeat(R.length);return v=R.start+R.length,S+U+G},"");throw new Hn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${E}`)}return c}),Ec=UD(bE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xE extends DE{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,l=Bc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ec`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ec`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ec`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const l=n??{},{api_version:c=this._client.apiVersion}=l,h=Bc(l,["api_version"]);return this._client.get(Ec`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}xE._key=Object.freeze(["interactions"]);class VE extends xE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Sc;function Up(t){let e;return(Sc??(e=new globalThis.TextEncoder,Sc=e.encode.bind(e)))(t)}let Ac;function C0(t){let e;return(Ac??(e=new globalThis.TextDecoder,Ac=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class df{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Up(e):e;this.buffer=LD([this.buffer,n]);const o=[];let r;for(;(r=kD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(C0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=C0(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}df.NEWLINE_CHARS=new Set([`
`,"\r"]);df.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kD(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function OD(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hc={off:0,error:200,warn:300,info:400,debug:500},I0=(t,e,n)=>{if(t){if(yD(Hc,t))return t;an(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Hc))}`)}};function vl(){}function Cc(t,e,n){return!e||Hc[t]>Hc[n]?vl:e[t].bind(e)}const qD={error:vl,warn:vl,info:vl,debug:vl};let R0=new WeakMap;function an(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return qD;const r=R0.get(n);if(r&&r[0]===o)return r[1];const l={error:Cc("error",n,o),warn:Cc("warn",n,o),info:Cc("info",n,o),debug:Cc("debug",n,o)};return R0.set(n,[o,l]),l}const Ps=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fr{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const l=o?an(o):console;function c(){return ii(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,U=oi(FD(e,n)),G;G=yield Ae(U.next()),y=G.done,!y;R=!0){E=G.value,R=!1;const k=E;if(!S)if(k.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ae(JSON.parse(k.data))}catch(Q){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),Q}}}catch(k){m={error:k}}finally{try{!R&&!y&&(v=U.return)&&(yield Ae(v.call(U)))}finally{if(m)throw m.error}}S=!0}catch(k){if(jh(k))return yield Ae(void 0);throw k}finally{S||n.abort()}})}return new Fr(c,n,o)}static fromReadableStream(e,n,o){let r=!1;function l(){return ii(this,arguments,function*(){var y,m,v,E;const S=new df,R=wE(e);try{for(var U=!0,G=oi(R),k;k=yield Ae(G.next()),y=k.done,!y;U=!0){E=k.value,U=!1;const Q=E;for(const ie of S.decode(Q))yield yield Ae(ie)}}catch(Q){m={error:Q}}finally{try{!U&&!y&&(v=G.return)&&(yield Ae(v.call(G)))}finally{if(m)throw m.error}}for(const Q of S.flush())yield yield Ae(Q)})}function c(){return ii(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,U=oi(l()),G;G=yield Ae(U.next()),y=G.done,!y;R=!0){E=G.value,R=!1;const k=E;S||k&&(yield yield Ae(JSON.parse(k)))}}catch(k){m={error:k}}finally{try{!R&&!y&&(v=U.return)&&(yield Ae(v.call(U)))}finally{if(m)throw m.error}}S=!0}catch(k){if(jh(k))return yield Ae(void 0);throw k}finally{S||n.abort()}})}return new Fr(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),n.push(c)}return l.shift()}});return[new Fr(()=>r(e),this.controller,this.client),new Fr(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return RE({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await n.next();if(l)return o.close();const c=Up(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function FD(t,e){return ii(this,arguments,function*(){var o,r,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hn("Attempted to iterate over a response with no body");const h=new BD,y=new df,m=wE(t.body);try{for(var v=!0,E=oi(GD(m)),S;S=yield Ae(E.next()),o=S.done,!o;v=!0){c=S.value,v=!1;const R=c;for(const U of y.decode(R)){const G=h.decode(U);G&&(yield yield Ae(G))}}}catch(R){r={error:R}}finally{try{!v&&!o&&(l=E.return)&&(yield Ae(l.call(E)))}finally{if(r)throw r.error}}for(const R of y.flush()){const U=h.decode(R);U&&(yield yield Ae(U))}})}function GD(t){return ii(this,arguments,function*(){var n,o,r,l;let c=new Uint8Array;try{for(var h=!0,y=oi(t),m;m=yield Ae(y.next()),n=m.done,!n;h=!0){l=m.value,h=!1;const v=l;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Up(v):v;let S=new Uint8Array(c.length+E.length);S.set(c),S.set(E,c.length),c=S;let R;for(;(R=OD(c))!==-1;)yield yield Ae(c.slice(0,R)),c=c.slice(R)}}catch(v){o={error:v}}finally{try{!h&&!n&&(r=y.return)&&(yield Ae(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield Ae(c))})}class BD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=HD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function HD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zD(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return an(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Fr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const y=n.headers.get("content-type"),m=(h=y==null?void 0:y.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await n.json():await n.text()})();return an(t).debug(`[${o}] response parsed`,Ps({retryOfRequestLogID:r,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lp extends Promise{constructor(e,n,o=zD){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Lp(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PE=Symbol("brand.privateNullableHeaders");function*YD(t){if(!t)return;if(PE in t){const{values:o,nulls:r}=t;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():T0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=T0(o[1])?o[1]:[o[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const yl=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[l,c]of YD(o)){const h=l.toLowerCase();r.has(h)||(e.delete(l),r.add(h)),c===null?(e.delete(l),n.add(h)):(e.append(l,c),n.delete(h))}}return{[PE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vh=t=>{var e,n,o,r,l,c;if(typeof globalThis.process<"u")return(o=(n=(e=gI)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var UE;class hf{constructor(e){var n,o,r,l,c,h,y,{baseURL:m=Vh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Vh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,S=Bc(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:hf.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const U="warn";this.logLevel=U,this.logLevel=(c=(l=I0(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:I0(Vh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:U,this.fetchOptions=R.fetchOptions,this.maxRetries=(h=R.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(y=R.fetch)!==null&&y!==void 0?y:ID(),this.encoder=MD,this._options=R,this.apiKey=v,this.apiVersion=E,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=yl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return yl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return yl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Hn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Pr}`}defaultIdempotencyKey(){return`stainless-node-retry-${fD()}`}makeStatusError(e,n,o,r){return ln.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=hD(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return gD(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Lp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,l,c;const h=await e,y=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=y),await this.prepareOptions(h);const{req:m,url:v,timeout:E}=await this.buildRequest(h,{retryCount:y-n});await this.prepareRequest(m,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,U=Date.now();if(an(this).debug(`[${S}] sending request`,Ps({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:m.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new tp;const G=new AbortController,k=await this.fetchWithTimeout(v,m,E,G).catch(ep),Q=Date.now();if(k instanceof globalThis.Error){const Z=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new tp;const se=jh(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(n)return an(this).info(`[${S}] connection ${se?"timed out":"failed"} - ${Z}`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (${Z})`,Ps({retryOfRequestLogID:o,url:v,durationMs:Q-U,message:k.message})),this.retryRequest(h,n,o??S);throw an(this).info(`[${S}] connection ${se?"timed out":"failed"} - error; no more retries left`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (error; no more retries left)`,Ps({retryOfRequestLogID:o,url:v,durationMs:Q-U,message:k.message})),se?new yE:new ff({cause:k})}const ie=`[${S}${R}] ${m.method} ${v} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${Q-U}ms`;if(!k.ok){const Z=await this.shouldRetry(k);if(n&&Z){const M=`retrying, ${n} attempts remaining`;return await wD(k.body),an(this).info(`${ie} - ${M}`),an(this).debug(`[${S}] response error (${M})`,Ps({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:Q-U})),this.retryRequest(h,n,o??S,k.headers)}const se=Z?"error; no more retries left":"error; not retryable";an(this).info(`${ie} - ${se}`);const fe=await k.text().catch(M=>ep(M).message),ue=vD(fe),D=ue?void 0:fe;throw an(this).debug(`[${S}] response error (${se})`,Ps({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,message:D,durationMs:Date.now()-U})),this.makeStatusError(k.status,ue,D,k.headers)}return an(this).info(ie),an(this).debug(`[${S}] response start`,Ps({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:Q-U})),{response:k,options:h,controller:G,requestLogID:S,retryOfRequestLogID:o,startTime:U}}async fetchWithTimeout(e,n,o,r){const l=n||{},{signal:c,method:h}=l,y=Bc(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);h&&(E.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(m)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var l;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const y=r==null?void 0:r.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,m)}return await TD(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,l;const c=Object.assign({},e),{method:h,path:y,query:m,defaultBaseURL:v}=c,E=this.buildURL(y,m,v);"timeout"in c&&_D("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:c}),U=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:U},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=yl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),CD()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=yl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:RD(e)}:this.encoder({body:e,headers:o})}}hf.DEFAULT_TIMEOUT=6e4;class Bt extends hf{constructor(){super(...arguments),this.interactions=new VE(this)}}UE=Bt;Bt.GeminiNextGenAPIClient=UE;Bt.GeminiNextGenAPIClientError=Hn;Bt.APIError=ln;Bt.APIConnectionError=ff;Bt.APIConnectionTimeoutError=yE;Bt.APIUserAbortError=tp;Bt.NotFoundError=EE;Bt.ConflictError=SE;Bt.RateLimitError=CE;Bt.BadRequestError=_E;Bt.AuthenticationError=vE;Bt.InternalServerError=IE;Bt.PermissionDeniedError=TE;Bt.UnprocessableEntityError=AE;Bt.toFile=VD;Bt.Interactions=VE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JD(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function KD(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function QD(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function $D(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function XD(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const y=f(t,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function WD(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const R=f(t,["validationDataset"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec"],w0(R))}else if(r==="PREFERENCE_TUNING"){const R=f(t,["validationDataset"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec"],w0(R))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const R=f(t,["epochCount"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(h==="PREFERENCE_TUNING"){const R=f(t,["epochCount"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let y=f(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const R=f(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(y==="PREFERENCE_TUNING"){const R=f(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=f(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(m==="PREFERENCE_TUNING"){const R=f(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(t,["adapterSize"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(t,["adapterSize"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(t,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(t,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function ZD(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&ub(l);const c=f(t,["config"]);return c!=null&&XD(c,n),n}function jD(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&cb(l,n,e);const c=f(t,["config"]);return c!=null&&WD(c,n,e),n}function eb(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function tb(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function nb(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function ib(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function ob(t,e){const n={},o=f(t,["config"]);return o!=null&&nb(o,n),n}function sb(t,e){const n={},o=f(t,["config"]);return o!=null&&ib(o,n),n}function rb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>LE(h))),d(n,["tuningJobs"],c)}return n}function ab(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>op(h))),d(n,["tuningJobs"],c)}return n}function lb(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["model"],o);const r=f(t,["name"]);return r!=null&&d(n,["endpoint"],r),n}function ub(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(n,["examples","examples"],r)}return n}function cb(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function LE(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const l=f(t,["state"]);l!=null&&d(n,["state"],ZT(l));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["tuningTask","startTime"]);h!=null&&d(n,["startTime"],h);const y=f(t,["tuningTask","completeTime"]);y!=null&&d(n,["endTime"],y);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const v=f(t,["description"]);v!=null&&d(n,["description"],v);const E=f(t,["baseModel"]);E!=null&&d(n,["baseModel"],E);const S=f(t,["_self"]);return S!=null&&d(n,["tunedModel"],lb(S)),n}function op(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const l=f(t,["state"]);l!=null&&d(n,["state"],ZT(l));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(n,["startTime"],h);const y=f(t,["endTime"]);y!=null&&d(n,["endTime"],y);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const v=f(t,["error"]);v!=null&&d(n,["error"],v);const E=f(t,["description"]);E!=null&&d(n,["description"],E);const S=f(t,["baseModel"]);S!=null&&d(n,["baseModel"],S);const R=f(t,["tunedModel"]);R!=null&&d(n,["tunedModel"],R);const U=f(t,["preTunedModel"]);U!=null&&d(n,["preTunedModel"],U);const G=f(t,["supervisedTuningSpec"]);G!=null&&d(n,["supervisedTuningSpec"],G);const k=f(t,["preferenceOptimizationSpec"]);k!=null&&d(n,["preferenceOptimizationSpec"],k);const Q=f(t,["tuningDataStats"]);Q!=null&&d(n,["tuningDataStats"],Q);const ie=f(t,["encryptionSpec"]);ie!=null&&d(n,["encryptionSpec"],ie);const Z=f(t,["partnerModelTuningSpec"]);Z!=null&&d(n,["partnerModelTuningSpec"],Z);const se=f(t,["customBaseModel"]);se!=null&&d(n,["customBaseModel"],se);const fe=f(t,["experiment"]);fe!=null&&d(n,["experiment"],fe);const ue=f(t,["labels"]);ue!=null&&d(n,["labels"],ue);const D=f(t,["outputUri"]);D!=null&&d(n,["outputUri"],D);const N=f(t,["pipelineJob"]);N!=null&&d(n,["pipelineJob"],N);const M=f(t,["serviceAccount"]);M!=null&&d(n,["serviceAccount"],M);const P=f(t,["tunedModelDisplayName"]);P!=null&&d(n,["tunedModelDisplayName"],P);const V=f(t,["veoTuningSpec"]);return V!=null&&d(n,["veoTuningSpec"],V),n}function fb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const l=f(t,["metadata"]);l!=null&&d(n,["metadata"],l);const c=f(t,["done"]);c!=null&&d(n,["done"],c);const h=f(t,["error"]);return h!=null&&d(n,["error"],h),n}function w0(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class db extends ro{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(no.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Yh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=tb(e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>op(v))}else{const m=eb(e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>LE(v))}}async listInternal(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=sb(e);return h=ce("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ab(v),S=new jv;return Object.assign(S,E),S})}else{const m=ob(e);return h=ce("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rb(v),S=new jv;return Object.assign(S,E),S})}}async cancel(e){var n,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=KD(e);return h=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=$D(v),S=new e0;return Object.assign(S,E),S})}else{const m=JD(e);return h=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=QD(v),S=new e0;return Object.assign(S,E),S})}}async tuneInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=jD(e,e);return l=ce("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>op(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZD(e);return l=ce("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>fb(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hb{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pb=1024*1024*8,mb=3,gb=1e3,yb=2,zc="x-goog-upload-status";async function _b(t,e,n){var o;const r=await kE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function vb(t,e,n){var o;const r=await kE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=JT(l),h=new Np;return Object.assign(h,c),h}async function kE(t,e,n){var o,r;let l=0,c=0,h=new Kh(new Response),y="upload";for(l=t.size;c<l;){const m=Math.min(pb,l-c),v=t.slice(c,c+m);c+m>=l&&(y+=", finalize");let E=0,S=gb;for(;E<mb&&(h=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[zc]));)E++,await Eb(S),S=S*yb;if(c+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[zc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function Tb(t){return{size:t.size,type:t.type}}function Eb(t){return new Promise(e=>setTimeout(e,t))}class Sb{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _b(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vb(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Tb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ab{create(e,n,o){return new Cb(e,n,o)}}class Cb{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M0="x-goog-api-key";class Ib{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(M0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(M0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rb="gl-node/";class wb{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Bt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=TI(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Ib(this.apiKey);this.apiClient=new TN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Rb+"web",uploader:new Sb,downloader:new hb}),this.models=new qN(this.apiClient),this.live=new VN(this.apiClient,r,new Ab),this.batches=new $R(this.apiClient),this.chats=new Dw(this.models,this.apiClient),this.caches=new ww(this.apiClient),this.files=new Fw(this.apiClient),this.operations=new FN(this.apiClient),this.authTokens=new nD(this.apiClient),this.tunings=new db(this.apiClient),this.fileSearchStores=new cD(this.apiClient)}}var eo=(t=>(t.Activity="Activity",t.Mindfulness="Mindfulness",t.Social="Social",t.Creative="Creative",t.Inspirational="Inspirational",t.Music="Music",t))(eo||{});const Mb={type:yn.OBJECT,properties:{title:{type:yn.STRING,description:"Short, catchy name for the idea."},description:{type:yn.STRING,description:"2-4 sentences explaining the idea and why it fits the mood."},category:{type:yn.STRING,enum:Object.values(eo),description:"The category of the idea. Must be exactly one of the provided values."},uniquePoint:{type:yn.STRING,description:"What makes this idea special or a unique take."}},required:["title","description","category","uniquePoint"]};async function Nb(t,e){const n=new wb({apiKey:"AIzaSyDZcI36gJkjBr0fb0QL3X08Gg1MqSnvGfE"}),r=`
    Generate a list of 5 unique and inspiring ideas for someone feeling ${YT[e][t.nameKey]||t.id}.
    LANGUAGE REQUIREMENT: All content (title, description, uniquePoint) MUST be written in ${e.toUpperCase()}.
    
    The ideas should be practical, positive, and tailored to this specific mood.
    For each idea, provide a title, description, category, and a unique point.
    The category must be one of the following exact English strings: ${Object.values(eo).join(", ")}.
    Be creative and avoid clichs.
  `;try{const c=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:yn.ARRAY,items:Mb}}})).text.trim();return JSON.parse(c).map(y=>({...y,id:Math.random().toString(36).substring(2,11),timestamp:Date.now(),isFromHistory:!1}))}catch(l){throw console.error("Error generating ideas with Gemini:",l),new Error("Failed to generate fresh ideas from AI.")}}const Db=()=>{};var N0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},bb=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=t[n++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=t[n++],c=t[n++],h=t[n++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(y>>10)),e[o++]=String.fromCharCode(56320+(y&1023))}else{const l=t[n++],c=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},qE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const l=t[r],c=r+1<t.length,h=c?t[r+1]:0,y=r+2<t.length,m=y?t[r+2]:0,v=l>>2,E=(l&3)<<4|h>>4;let S=(h&15)<<2|m>>6,R=m&63;y||(R=64,c||(S=64)),o.push(n[v],n[E],n[S],n[R])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const l=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const m=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,l==null||h==null||m==null||E==null)throw new xb;const S=l<<2|h>>4;if(o.push(S),m!==64){const R=h<<4&240|m>>2;if(o.push(R),E!==64){const U=m<<6&192|E;o.push(U)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vb=function(t){const e=OE(t);return qE.encodeByteArray(e,!0)},Yc=function(t){return Vb(t).replace(/\./g,"")},Pb=function(t){try{return qE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=()=>Ub().__FIREBASE_DEFAULTS__,kb=()=>{if(typeof process>"u"||typeof N0>"u")return;const t=N0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ob=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pb(t[1]);return e&&JSON.parse(e)},kp=()=>{try{return Db()||Lb()||kb()||Ob()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qb=t=>{var e,n;return(n=(e=kp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Fb=t=>{const e=qb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},FE=()=>{var t;return(t=kp())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yc(JSON.stringify(n)),Yc(JSON.stringify(c)),""].join(".")}const Al={};function zb(){const t={prod:[],emulator:[]};for(const e of Object.keys(Al))Al[e]?t.emulator.push(e):t.prod.push(e);return t}function Yb(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let D0=!1;function Jb(t,e){if(typeof window>"u"||typeof document>"u"||!Op(window.location.host)||Al[t]===e||Al[t]||D0)return;Al[t]=e;function n(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=zb().prod.length>0;function c(){const S=document.getElementById(o);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{D0=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=Yb(o),R=n("text"),U=document.getElementById(R)||document.createElement("span"),G=n("learnmore"),k=document.getElementById(G)||document.createElement("a"),Q=n("preprendIcon"),ie=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;h(Z),v(k,G);const se=m();y(ie,Q),Z.append(ie,U,k,se),document.body.appendChild(Z)}l?(U.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qb(){var e;const t=(e=kp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $b(){return!Qb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xb(){try{return typeof indexedDB=="object"}catch{return!1}}function Wb(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="FirebaseError";class oa extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=Zb,Object.setPrototypeOf(this,oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,GE.prototype.create)}}class GE{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?jb(l,o):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new oa(r,h,o)}}function jb(t,e){return t.replace(ex,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const ex=/\{\$([^}]+)}/g;function Jc(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const l=t[r],c=e[r];if(b0(l)&&b0(c)){if(!Jc(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function b0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){return t&&t._delegate?t._delegate:t}class Nl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Gb;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);o===h&&c.resolve(r)}return r}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:nx(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nx(t){return t===Us?void 0:t}function ix(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const sx={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},rx=Ge.INFO,ax={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},lx=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=ax[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BE{constructor(e){this.name=e,this._logLevel=rx,this._logHandler=lx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const ux=(t,e)=>e.some(n=>t instanceof n);let x0,V0;function cx(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fx(){return V0||(V0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HE=new WeakMap,sp=new WeakMap,zE=new WeakMap,Ph=new WeakMap,qp=new WeakMap;function dx(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(zo(t.result)),r()},c=()=>{o(t.error),r()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&HE.set(n,t)}).catch(()=>{}),qp.set(e,t),e}function hx(t){if(sp.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),r()},c=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});sp.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function px(t){rp=t(rp)}function mx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Uh(this),e,...n);return zE.set(o,e.sort?e.sort():[e]),zo(o)}:fx().includes(t)?function(...e){return t.apply(Uh(this),e),zo(HE.get(this))}:function(...e){return zo(t.apply(Uh(this),e))}}function gx(t){return typeof t=="function"?mx(t):(t instanceof IDBTransaction&&hx(t),ux(t,cx())?new Proxy(t,rp):t)}function zo(t){if(t instanceof IDBRequest)return dx(t);if(Ph.has(t))return Ph.get(t);const e=gx(t);return e!==t&&(Ph.set(t,e),qp.set(e,t)),e}const Uh=t=>qp.get(t);function yx(t,e,{blocked:n,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(t,e),h=zo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(zo(c.result),y.oldVersion,y.newVersion,zo(c.transaction),y)}),n&&c.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),h.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const _x=["get","getKey","getAll","getAllKeys","count"],vx=["put","add","delete","clear"],Lh=new Map;function P0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=vx.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||_x.includes(n)))return;const l=async function(c,...h){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),r&&y.done]))[0]};return Lh.set(e,l),l}px(t=>({...t,get:(e,n,o)=>P0(e,n)||t.get(e,n,o),has:(e,n)=>!!P0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ex(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function Ex(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",U0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new BE("@firebase/app"),Sx="@firebase/app-compat",Ax="@firebase/analytics-compat",Cx="@firebase/analytics",Ix="@firebase/app-check-compat",Rx="@firebase/app-check",wx="@firebase/auth",Mx="@firebase/auth-compat",Nx="@firebase/database",Dx="@firebase/data-connect",bx="@firebase/database-compat",xx="@firebase/functions",Vx="@firebase/functions-compat",Px="@firebase/installations",Ux="@firebase/installations-compat",Lx="@firebase/messaging",kx="@firebase/messaging-compat",Ox="@firebase/performance",qx="@firebase/performance-compat",Fx="@firebase/remote-config",Gx="@firebase/remote-config-compat",Bx="@firebase/storage",Hx="@firebase/storage-compat",zx="@firebase/firestore",Yx="@firebase/ai",Jx="@firebase/firestore-compat",Kx="firebase",Qx="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",$x={[ap]:"fire-core",[Sx]:"fire-core-compat",[Cx]:"fire-analytics",[Ax]:"fire-analytics-compat",[Rx]:"fire-app-check",[Ix]:"fire-app-check-compat",[wx]:"fire-auth",[Mx]:"fire-auth-compat",[Nx]:"fire-rtdb",[Dx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[xx]:"fire-fn",[Vx]:"fire-fn-compat",[Px]:"fire-iid",[Ux]:"fire-iid-compat",[Lx]:"fire-fcm",[kx]:"fire-fcm-compat",[Ox]:"fire-perf",[qx]:"fire-perf-compat",[Fx]:"fire-rc",[Gx]:"fire-rc-compat",[Bx]:"fire-gcs",[Hx]:"fire-gcs-compat",[zx]:"fire-fst",[Jx]:"fire-fst-compat",[Yx]:"fire-vertex","fire-js":"fire-js",[Kx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,Xx=new Map,up=new Map;function L0(t,e){try{t.container.addComponent(e)}catch(n){io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qc(t){const e=t.name;if(up.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,t);for(const n of Kc.values())L0(n,t);for(const n of Xx.values())L0(n,t);return!0}function Wx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zx(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new GE("app","Firebase",jx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=Qx;function YE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:lp,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Yo.create("bad-app-name",{appName:String(r)});if(n||(n=FE()),!n)throw Yo.create("no-options");const l=Kc.get(r);if(l){if(Jc(n,l.options)&&Jc(o,l.config))return l;throw Yo.create("duplicate-app",{appName:r})}const c=new ox(r);for(const y of up.values())c.addComponent(y);const h=new e2(n,o,c);return Kc.set(r,h),h}function n2(t=lp){const e=Kc.get(t);if(!e&&t===lp&&FE())return YE();if(!e)throw Yo.create("no-app",{appName:t});return e}function Hr(t,e,n){let o=$x[t]??t;n&&(o+=`-${n}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(c.join(" "));return}Qc(new Nl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebase-heartbeat-database",o2=1,Dl="firebase-heartbeat-store";let kh=null;function JE(){return kh||(kh=yx(i2,o2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yo.create("idb-open",{originalErrorMessage:t.message})})),kh}async function s2(t){try{const n=(await JE()).transaction(Dl),o=await n.objectStore(Dl).get(KE(t));return await n.done,o}catch(e){if(e instanceof oa)io.warn(e.message);else{const n=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(n.message)}}}async function k0(t,e){try{const o=(await JE()).transaction(Dl,"readwrite");await o.objectStore(Dl).put(e,KE(t)),await o.done}catch(n){if(n instanceof oa)io.warn(n.message);else{const o=Yo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});io.warn(o.message)}}}function KE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1024,a2=30;class l2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c2(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=O0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>a2){const c=f2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){io.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O0(),{heartbeatsToSend:o,unsentEntries:r}=u2(this._heartbeatsCache.heartbeats),l=Yc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return io.warn(n),""}}}function O0(){return new Date().toISOString().substring(0,10)}function u2(t,e=r2){const n=[];let o=t.slice();for(const r of t){const l=n.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),q0(n)>e){l.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),q0(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class c2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xb()?Wb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function q0(t){return Yc(JSON.stringify({version:2,heartbeats:t})).length}function f2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){Qc(new Nl("platform-logger",e=>new Tx(e),"PRIVATE")),Qc(new Nl("heartbeat",e=>new l2(e),"PRIVATE")),Hr(ap,U0,t),Hr(ap,U0,"esm2020"),Hr("fire-js","")}d2("");var h2="firebase",p2="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(h2,p2,"app");var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,QE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.F=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(P,V,q){for(var b=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)b[ke-2]=arguments[ke];return N.prototype[V].apply(P,b)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,M){M||(M=0);const P=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)P[V]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(V=0;V<16;++V)P[V]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],V=D.g[2];let q=D.g[3],b;b=N+(q^M&(V^q))+P[0]+3614090360&4294967295,N=M+(b<<7&4294967295|b>>>25),b=q+(V^N&(M^V))+P[1]+3905402710&4294967295,q=N+(b<<12&4294967295|b>>>20),b=V+(M^q&(N^M))+P[2]+606105819&4294967295,V=q+(b<<17&4294967295|b>>>15),b=M+(N^V&(q^N))+P[3]+3250441966&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(q^M&(V^q))+P[4]+4118548399&4294967295,N=M+(b<<7&4294967295|b>>>25),b=q+(V^N&(M^V))+P[5]+1200080426&4294967295,q=N+(b<<12&4294967295|b>>>20),b=V+(M^q&(N^M))+P[6]+2821735955&4294967295,V=q+(b<<17&4294967295|b>>>15),b=M+(N^V&(q^N))+P[7]+4249261313&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(q^M&(V^q))+P[8]+1770035416&4294967295,N=M+(b<<7&4294967295|b>>>25),b=q+(V^N&(M^V))+P[9]+2336552879&4294967295,q=N+(b<<12&4294967295|b>>>20),b=V+(M^q&(N^M))+P[10]+4294925233&4294967295,V=q+(b<<17&4294967295|b>>>15),b=M+(N^V&(q^N))+P[11]+2304563134&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(q^M&(V^q))+P[12]+1804603682&4294967295,N=M+(b<<7&4294967295|b>>>25),b=q+(V^N&(M^V))+P[13]+4254626195&4294967295,q=N+(b<<12&4294967295|b>>>20),b=V+(M^q&(N^M))+P[14]+2792965006&4294967295,V=q+(b<<17&4294967295|b>>>15),b=M+(N^V&(q^N))+P[15]+1236535329&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(V^q&(M^V))+P[1]+4129170786&4294967295,N=M+(b<<5&4294967295|b>>>27),b=q+(M^V&(N^M))+P[6]+3225465664&4294967295,q=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(q^N))+P[11]+643717713&4294967295,V=q+(b<<14&4294967295|b>>>18),b=M+(q^N&(V^q))+P[0]+3921069994&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^q&(M^V))+P[5]+3593408605&4294967295,N=M+(b<<5&4294967295|b>>>27),b=q+(M^V&(N^M))+P[10]+38016083&4294967295,q=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(q^N))+P[15]+3634488961&4294967295,V=q+(b<<14&4294967295|b>>>18),b=M+(q^N&(V^q))+P[4]+3889429448&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^q&(M^V))+P[9]+568446438&4294967295,N=M+(b<<5&4294967295|b>>>27),b=q+(M^V&(N^M))+P[14]+3275163606&4294967295,q=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(q^N))+P[3]+4107603335&4294967295,V=q+(b<<14&4294967295|b>>>18),b=M+(q^N&(V^q))+P[8]+1163531501&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^q&(M^V))+P[13]+2850285829&4294967295,N=M+(b<<5&4294967295|b>>>27),b=q+(M^V&(N^M))+P[2]+4243563512&4294967295,q=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(q^N))+P[7]+1735328473&4294967295,V=q+(b<<14&4294967295|b>>>18),b=M+(q^N&(V^q))+P[12]+2368359562&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(M^V^q)+P[5]+4294588738&4294967295,N=M+(b<<4&4294967295|b>>>28),b=q+(N^M^V)+P[8]+2272392833&4294967295,q=N+(b<<11&4294967295|b>>>21),b=V+(q^N^M)+P[11]+1839030562&4294967295,V=q+(b<<16&4294967295|b>>>16),b=M+(V^q^N)+P[14]+4259657740&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^q)+P[1]+2763975236&4294967295,N=M+(b<<4&4294967295|b>>>28),b=q+(N^M^V)+P[4]+1272893353&4294967295,q=N+(b<<11&4294967295|b>>>21),b=V+(q^N^M)+P[7]+4139469664&4294967295,V=q+(b<<16&4294967295|b>>>16),b=M+(V^q^N)+P[10]+3200236656&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^q)+P[13]+681279174&4294967295,N=M+(b<<4&4294967295|b>>>28),b=q+(N^M^V)+P[0]+3936430074&4294967295,q=N+(b<<11&4294967295|b>>>21),b=V+(q^N^M)+P[3]+3572445317&4294967295,V=q+(b<<16&4294967295|b>>>16),b=M+(V^q^N)+P[6]+76029189&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^q)+P[9]+3654602809&4294967295,N=M+(b<<4&4294967295|b>>>28),b=q+(N^M^V)+P[12]+3873151461&4294967295,q=N+(b<<11&4294967295|b>>>21),b=V+(q^N^M)+P[15]+530742520&4294967295,V=q+(b<<16&4294967295|b>>>16),b=M+(V^q^N)+P[2]+3299628645&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(V^(M|~q))+P[0]+4096336452&4294967295,N=M+(b<<6&4294967295|b>>>26),b=q+(M^(N|~V))+P[7]+1126891415&4294967295,q=N+(b<<10&4294967295|b>>>22),b=V+(N^(q|~M))+P[14]+2878612391&4294967295,V=q+(b<<15&4294967295|b>>>17),b=M+(q^(V|~N))+P[5]+4237533241&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~q))+P[12]+1700485571&4294967295,N=M+(b<<6&4294967295|b>>>26),b=q+(M^(N|~V))+P[3]+2399980690&4294967295,q=N+(b<<10&4294967295|b>>>22),b=V+(N^(q|~M))+P[10]+4293915773&4294967295,V=q+(b<<15&4294967295|b>>>17),b=M+(q^(V|~N))+P[1]+2240044497&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~q))+P[8]+1873313359&4294967295,N=M+(b<<6&4294967295|b>>>26),b=q+(M^(N|~V))+P[15]+4264355552&4294967295,q=N+(b<<10&4294967295|b>>>22),b=V+(N^(q|~M))+P[6]+2734768916&4294967295,V=q+(b<<15&4294967295|b>>>17),b=M+(q^(V|~N))+P[13]+1309151649&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~q))+P[4]+4149444226&4294967295,N=M+(b<<6&4294967295|b>>>26),b=q+(M^(N|~V))+P[11]+3174756917&4294967295,q=N+(b<<10&4294967295|b>>>22),b=V+(N^(q|~M))+P[2]+718787259&4294967295,V=q+(b<<15&4294967295|b>>>17),b=M+(q^(V|~N))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+q&4294967295}o.prototype.v=function(D,N){N===void 0&&(N=D.length);const M=N-this.blockSize,P=this.C;let V=this.h,q=0;for(;q<N;){if(V==0)for(;q<=M;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<N;)if(P[V++]=D.charCodeAt(q++),V==this.blockSize){r(this,P),V=0;break}}else for(;q<N;)if(P[V++]=D[q++],V==this.blockSize){r(this,P),V=0;break}}this.h=V,this.o+=N},o.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,M=0;M<4;++M)for(let P=0;P<32;P+=8)D[N++]=this.g[M]>>>P&255;return D};function l(D,N){var M=h;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function c(D,N){this.h=N;const M=[];let P=!0;for(let V=D.length-1;V>=0;V--){const q=D[V]|0;P&&q==N||(M[V]=q,P=!1)}this.g=M}var h={};function y(D){return-128<=D&&D<128?l(D,function(N){return new c([N|0],N<0?-1:0)}):new c([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return k(m(-D));const N=[];let M=1;for(let P=0;D>=M;P++)N[P]=D/M|0,M*=4294967296;return new c(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return k(v(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(N,8));let P=E;for(let q=0;q<D.length;q+=8){var V=Math.min(8,D.length-q);const b=parseInt(D.substring(q,q+V),N);V<8?(V=m(Math.pow(N,V)),P=P.j(V).add(m(b))):(P=P.j(M),P=P.add(m(b)))}return P}var E=y(0),S=y(1),R=y(16777216);t=c.prototype,t.m=function(){if(G(this))return-k(this).m();let D=0,N=1;for(let M=0;M<this.g.length;M++){const P=this.i(M);D+=(P>=0?P:4294967296+P)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(G(this))return"-"+k(this).toString(D);const N=m(Math.pow(D,6));var M=this;let P="";for(;;){const V=se(M,N).g;M=Q(M,V.j(N));let q=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=V,U(M))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function G(D){return D.h==-1}t.l=function(D){return D=Q(this,D),G(D)?-1:U(D)?0:1};function k(D){const N=D.g.length,M=[];for(let P=0;P<N;P++)M[P]=~D.g[P];return new c(M,~D.h).add(S)}t.abs=function(){return G(this)?k(this):this},t.add=function(D){const N=Math.max(this.g.length,D.g.length),M=[];let P=0;for(let V=0;V<=N;V++){let q=P+(this.i(V)&65535)+(D.i(V)&65535),b=(q>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);P=b>>>16,q&=65535,b&=65535,M[V]=b<<16|q}return new c(M,M[M.length-1]&-2147483648?-1:0)};function Q(D,N){return D.add(k(N))}t.j=function(D){if(U(this)||U(D))return E;if(G(this))return G(D)?k(this).j(k(D)):k(k(this).j(D));if(G(D))return k(this.j(k(D)));if(this.l(R)<0&&D.l(R)<0)return m(this.m()*D.m());const N=this.g.length+D.g.length,M=[];for(var P=0;P<2*N;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<D.g.length;V++){const q=this.i(P)>>>16,b=this.i(P)&65535,ke=D.i(V)>>>16,dt=D.i(V)&65535;M[2*P+2*V]+=b*dt,ie(M,2*P+2*V),M[2*P+2*V+1]+=q*dt,ie(M,2*P+2*V+1),M[2*P+2*V+1]+=b*ke,ie(M,2*P+2*V+1),M[2*P+2*V+2]+=q*ke,ie(M,2*P+2*V+2)}for(D=0;D<N;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=N;D<2*N;D++)M[D]=0;return new c(M,0)};function ie(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function Z(D,N){this.g=D,this.h=N}function se(D,N){if(U(N))throw Error("division by zero");if(U(D))return new Z(E,E);if(G(D))return N=se(k(D),N),new Z(k(N.g),k(N.h));if(G(N))return N=se(D,k(N)),new Z(k(N.g),N.h);if(D.g.length>30){if(G(D)||G(N))throw Error("slowDivide_ only works with positive integers.");for(var M=S,P=N;P.l(D)<=0;)M=fe(M),P=fe(P);var V=ue(M,1),q=ue(P,1);for(P=ue(P,2),M=ue(M,2);!U(P);){var b=q.add(P);b.l(D)<=0&&(V=V.add(M),q=b),P=ue(P,1),M=ue(M,1)}return N=Q(D,V.j(N)),new Z(V,N)}for(V=E;D.l(N)>=0;){for(M=Math.max(1,Math.floor(D.m()/N.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=m(M),b=q.j(N);G(b)||b.l(D)>0;)M-=P,q=m(M),b=q.j(N);U(q)&&(q=S),V=V.add(q),D=Q(D,b)}return new Z(V,D)}t.B=function(D){return se(this,D).h},t.and=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)&D.i(P);return new c(M,this.h&D.h)},t.or=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)|D.i(P);return new c(M,this.h|D.h)},t.xor=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)^D.i(P);return new c(M,this.h^D.h)};function fe(D){const N=D.g.length+1,M=[];for(let P=0;P<N;P++)M[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(M,D.h)}function ue(D,N){const M=N>>5;N%=32;const P=D.g.length-M,V=[];for(let q=0;q<P;q++)V[q]=N>0?D.i(q+M)>>>N|D.i(q+M+1)<<32-N:D.i(q+M);return new c(V,D.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,QE=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Jo=c}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,Tl,XE,Vc,cp,WE,ZE,jE;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=n(this);function r(p,T){if(T)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var B=p[w];if(!(B in C))break e;C=C[B]}p=p[p.length-1],w=C[p],T=T(w),T!=w&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(T){var C=[],w;for(w in T)Object.prototype.hasOwnProperty.call(T,w)&&C.push([w,T[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function y(p,T,C){return p.call.apply(p.bind,arguments)}function m(p,T,C){return m=y,m.apply(null,arguments)}function v(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function E(p,T){function C(){}C.prototype=T.prototype,p.Z=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(w,B,J){for(var ae=Array(arguments.length-2),we=2;we<arguments.length;we++)ae[we-2]=arguments[we];return T.prototype[B].apply(w,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function R(p){const T=p.length;if(T>0){const C=Array(T);for(let w=0;w<T;w++)C[w]=p[w];return C}return[]}function U(p,T){for(let w=1;w<arguments.length;w++){const B=arguments[w];var C=typeof B;if(C=C!="object"?C:B?Array.isArray(B)?"array":C:"null",C=="array"||C=="object"&&typeof B.length=="number"){C=p.length||0;const J=B.length||0;p.length=C+J;for(let ae=0;ae<J;ae++)p[C+ae]=B[ae]}else p.push(B)}}class G{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function k(p){c.setTimeout(()=>{throw p},0)}function Q(){var p=D;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class ie{constructor(){this.h=this.g=null}add(T,C){const w=Z.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var Z=new G(()=>new se,p=>p.reset());class se{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ue=!1,D=new ie,N=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(M)}};function M(){for(var p;p=Q();){try{p.h.call(p.g)}catch(C){k(C)}var T=Z;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}ue=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,T),c.removeEventListener("test",C,T)}catch{}return p})();function b(p){return/^[\s\xa0]*$/.test(p)}function ke(p,T){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}E(ke,V),ke.prototype.init=function(p,T){const C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),$=0;function re(p,T,C,w,B){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=B,this.key=++$,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Be(p,T,C){for(const w in p)T.call(C,p[w],w,p)}function $e(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function O(p){const T={};for(const C in p)T[C]=p[C];return T}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(p,T){let C,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(C in w)p[C]=w[C];for(let J=0;J<te.length;J++)C=te[J],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function pe(p){this.src=p,this.g={},this.h=0}pe.prototype.add=function(p,T,C,w,B){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const ae=Ne(p,T,w,B);return ae>-1?(T=p[ae],C||(T.fa=!1)):(T=new re(T,this.src,J,!!w,B),T.fa=C,p.push(T)),T};function Se(p,T){const C=T.type;if(C in p.g){var w=p.g[C],B=Array.prototype.indexOf.call(w,T,void 0),J;(J=B>=0)&&Array.prototype.splice.call(w,B,1),J&&(ye(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Ne(p,T,C,w){for(let B=0;B<p.length;++B){const J=p[B];if(!J.da&&J.listener==T&&J.capture==!!C&&J.ha==w)return B}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),xt={};function lt(p,T,C,w,B){if(Array.isArray(T)){for(let J=0;J<T.length;J++)lt(p,T[J],C,w,B);return null}return C=da(C),p&&p[dt]?p.J(T,C,h(w)?!!w.capture:!1,B):is(p,T,C,!1,w,B)}function is(p,T,C,w,B,J){if(!T)throw Error("Invalid event type");const ae=h(B)?!!B.capture:!!B;let we=os(p);if(we||(p[qe]=we=new pe(p)),C=we.add(T,C,w,ae,J),C.proxy)return C;if(w=zs(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)q||(B=ae),B===void 0&&(B=!1),p.addEventListener(T.toString(),w,B);else if(p.attachEvent)p.attachEvent(li(T.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function zs(){function p(C){return T.call(p.src,p.listener,C)}const T=ca;return p}function Ys(p,T,C,w,B){if(Array.isArray(T))for(var J=0;J<T.length;J++)Ys(p,T[J],C,w,B);else w=h(w)?!!w.capture:!!w,C=da(C),p&&p[dt]?(p=p.i,J=String(T).toString(),J in p.g&&(T=p.g[J],C=Ne(T,C,w,B),C>-1&&(ye(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete p.g[J],p.h--)))):p&&(p=os(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Ne(T,C,w,B)),(C=p>-1?T[p]:null)&&Js(C))}function Js(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[dt])Se(T.i,p);else{var C=p.type,w=p.proxy;T.removeEventListener?T.removeEventListener(C,w,p.capture):T.detachEvent?T.detachEvent(li(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=os(T))?(Se(C,p),C.h==0&&(C.src=null,T[qe]=null)):ye(p)}}}function li(p){return p in xt?xt[p]:xt[p]="on"+p}function ca(p,T){if(p.da)p=!0;else{T=new ke(T,this);const C=p.listener,w=p.ha||p.src;p.fa&&Js(p),p=C.call(w,T)}return p}function os(p){return p=p[qe],p instanceof pe?p:null}var fa="__closure_events_fn_"+(Math.random()*1e9>>>0);function da(p){return typeof p=="function"?p:(p[fa]||(p[fa]=function(T){return p.handleEvent(T)}),p[fa])}function Tt(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}E(Tt,P),Tt.prototype[dt]=!0,Tt.prototype.removeEventListener=function(p,T,C,w){Ys(this,p,T,C,w)};function Vt(p,T){var C,w=p.G;if(w)for(C=[];w;w=w.G)C.push(w);if(p=p.M,w=T.type||T,typeof T=="string")T=new V(T,p);else if(T instanceof V)T.target=T.target||p;else{var B=T;T=new V(w,p),le(T,B)}B=!0;let J,ae;if(C)for(ae=C.length-1;ae>=0;ae--)J=T.g=C[ae],B=lo(J,w,!0,T)&&B;if(J=T.g=p,B=lo(J,w,!0,T)&&B,B=lo(J,w,!1,T)&&B,C)for(ae=0;ae<C.length;ae++)J=T.g=C[ae],B=lo(J,w,!1,T)&&B}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const C=p.g[T];for(let w=0;w<C.length;w++)ye(C[w]);delete p.g[T],p.h--}}this.G=null},Tt.prototype.J=function(p,T,C,w){return this.i.add(String(p),T,!1,C,w)},Tt.prototype.K=function(p,T,C,w){return this.i.add(String(p),T,!0,C,w)};function lo(p,T,C,w){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let B=!0;for(let J=0;J<T.length;++J){const ae=T[J];if(ae&&!ae.da&&ae.capture==C){const we=ae.listener,gt=ae.ha||ae.src;ae.fa&&Se(p.i,ae),B=we.call(gt,w)!==!1&&B}}return B&&!w.defaultPrevented}function Mf(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(p,T||0)}function Yl(p){p.g=Mf(()=>{p.g=null,p.i&&(p.i=!1,Yl(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class on extends P{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Yl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(p){P.call(this),this.h=p,this.g={}}E(ss,P);var ha=[];function pa(p){Be(p.g,function(T,C){this.g.hasOwnProperty(C)&&Js(T)},p),p.g={}}ss.prototype.N=function(){ss.Z.N.call(this),pa(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=c.JSON.stringify,Nf=c.JSON.parse,Jl=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Kl(){}function Ql(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){V.call(this,"d")}E(Ht,V);function wn(){V.call(this,"c")}E(wn,V);var mt={},$l=null;function Ks(){return $l=$l||new Tt}mt.Ia="serverreachability";function Xl(p){V.call(this,mt.Ia,p)}E(Xl,V);function ui(p){const T=Ks();Vt(T,new Xl(T))}mt.STAT_EVENT="statevent";function rs(p,T){V.call(this,mt.STAT_EVENT,p),this.stat=T}E(rs,V);function Et(p){const T=Ks();Vt(T,new rs(T,p))}mt.Ja="timingevent";function ci(p,T){V.call(this,mt.Ja,p),this.size=T}E(ci,V);function fi(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},T)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function Df(p,T,C,w,B,J){p.info(function(){if(p.g)if(J){var ae="",we=J.split("&");for(let Je=0;Je<we.length;Je++){var gt=we[Je].split("=");if(gt.length>1){const ut=gt[0];gt=gt[1];const bn=ut.split("_");ae=bn.length>=2&&bn[1]=="type"?ae+(ut+"="+gt+"&"):ae+(ut+"=redacted&")}}}else ae=null;else ae=J;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+T+`
`+C+`
`+ae})}function Wl(p,T,C,w,B,J,ae){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+T+`
`+C+`
`+J+" "+ae})}function di(p,T,C,w){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+bf(p,C)+(w?" "+w:"")})}function as(p,T){p.info(function(){return"TIMEOUT: "+T})}Yn.prototype.info=function(){};function bf(p,T){if(!p.g)return T;if(!T)return null;try{const J=JSON.parse(T);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var C=J[p];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var B=w[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ae=1;ae<w.length;ae++)w[ae]=""}}}}return uo(J)}catch{return T}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ma={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ga;function us(){}E(us,Kl),us.prototype.g=function(){return new XMLHttpRequest},ga=new us;function Ui(p){return encodeURIComponent(String(p))}function Zl(p){var T=1;p=p.split(":");const C=[];for(;T>0&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function Jn(p,T,C,w){this.j=p,this.i=T,this.l=C,this.S=w||1,this.V=new ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var St={},Lt={};function hi(p,T,C){p.M=1,p.A=cs(Ct(T)),p.u=C,p.R=!0,Qs(p,null)}function Qs(p,T){p.F=Date.now(),pi(p),p.B=Ct(p.A);var C=p.B,w=p.S;Array.isArray(w)||(w=[String(w)]),Zs(C.i,"t",w),p.C=0,C=p.j.L,p.h=new Kn,p.g=hu(p.j,C?T:null,!p.u),p.P>0&&(p.O=new on(m(p.Y,p,p.g),p.P)),T=p.V,C=p.g,w=p.ba;var B="readystatechange";Array.isArray(B)||(B&&(ha[0]=B.toString()),B=ha);for(let J=0;J<B.length;J++){const ae=lt(C,B[J],w||T.handleEvent,!1,T.h||T);if(!ae)break;T.g[ae.key]=ae}T=p.J?O(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),ui(),Df(p.i,p.v,p.B,p.l,p.S,p.u)}Jn.prototype.ba=function(p){p=p.target;const T=this.O;T&&Xn(p)==3?T.j():this.Y(p)},Jn.prototype.Y=function(p){try{if(p==this.g)e:{const we=Xn(this.g),gt=this.g.ya(),Je=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||we!=4||gt==7||(gt==8||Je<=0?ui(3):ui(2)),mi(this);var T=this.g.ca();this.X=T;var C=xf(this);if(this.o=T==200,Wl(this.i,this.v,this.B,this.l,this.S,we,T),this.o){if(this.U&&!this.L){t:{if(this.g){var w,B=this.g;if((w=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(w)){var J=w;break t}}J=null}if(p=J)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,p);else{this.o=!1,this.m=3,Et(12),_n(this),Mn(this);break e}}if(this.R){p=!0;let ut;for(;!this.K&&this.C<C.length;)if(ut=eu(this,C),ut==Lt){we==4&&(this.m=4,Et(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==St){this.m=4,Et(15),di(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,ut,null),gi(this,ut);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||C.length!=0||this.h.h||(this.m=1,Et(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,C,"[Invalid Chunked Response]"),_n(this),Mn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ba(ae),ae.P=!0,Et(11))}}else di(this.i,this.l,C,null),gi(this,C);we==4&&_n(this),this.o&&!this.K&&(we==4?uu(this.j,this):(this.o=!1,pi(this)))}else ki(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),_n(this),Mn(this)}}}catch{}finally{}};function xf(p){if(!jl(p))return p.g.la();const T=zt(p.g);if(T==="")return"";let C="";const w=T.length,B=Xn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return _n(p),Mn(p),"";p.h.i=new c.TextDecoder}for(let J=0;J<w;J++)p.h.h=!0,C+=p.h.i.decode(T[J],{stream:!(B&&J==w-1)});return T.length=0,p.h.g+=C,p.C=0,p.h.g}function jl(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function eu(p,T){var C=p.C,w=T.indexOf(`
`,C);return w==-1?Lt:(C=Number(T.substring(C,w)),isNaN(C)?St:(w+=1,w+C>T.length?Lt:(T=T.slice(w,w+C),p.C=w+C,T)))}Jn.prototype.cancel=function(){this.K=!0,_n(this)};function pi(p){p.T=Date.now()+p.H,$s(p,p.H)}function $s(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=fi(m(p.aa,p),T)}function mi(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Jn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(as(this.i,this.B),this.M!=2&&(ui(),Et(17)),_n(this),this.m=2,Mn(this)):$s(this,this.T-p)};function Mn(p){p.j.I==0||p.K||uu(p.j,p)}function _n(p){mi(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,pa(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function gi(p,T){try{var C=p.j;if(C.I!=0&&(C.g==p||_i(C.h,p))){if(!p.L&&_i(C.h,p)&&C.I==3){try{var w=C.Ba.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)ir(C),_o(C);else break e;ys(C),Et(18)}}else C.xa=B[1],0<C.xa-C.K&&B[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=fi(m(C.Va,C),6e3));yi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ci(C,11)}else if((p.L||C.g==p)&&ir(C),!b(T))for(B=C.Ba.g.parse(T),T=0;T<B.length;T++){let Je=B[T];const ut=Je[0];if(!(ut<=C.K))if(C.K=ut,Je=Je[1],C.I==2)if(Je[0]=="c"){C.M=Je[1],C.ba=Je[2];const bn=Je[3];bn!=null&&(C.ka=bn,C.j.info("VER="+C.ka));const Ii=Je[4];Ii!=null&&(C.za=Ii,C.j.info("SVER="+C.za));const Wn=Je[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(w=1.5*Wn,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const Zn=p.g;if(Zn){const _s=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var J=w.h;J.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(va(J,J.h),J.h=null))}if(w.G){const or=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;or&&(w.wa=or,Xe(w.J,w.G,or))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var ae=p;if(w.na=du(w,w.L?w.ba:null,w.W),ae.L){Ta(w.h,ae);var we=ae,gt=w.O;gt&&(we.H=gt),we.D&&(mi(we),pi(we)),w.g=ae}else au(w);C.i.length>0&&Ai(C)}else Je[0]!="stop"&&Je[0]!="close"||Ci(C,7);else C.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ci(C,7):Na(C):Je[0]!="noop"&&C.l&&C.l.qa(Je),C.A=0)}}ui(4)}catch{}}var At=class{constructor(p,T){this.g=p,this.map=T}};function ya(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function yi(p){return p.h?1:p.g?p.g.size:0}function _i(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function va(p,T){p.g?p.g.add(T):p.h=T}function Ta(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}ya.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ea(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.G);return T}return R(p.i)}var tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xs(p,T){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const w=p[C].indexOf("=");let B,J=null;w>=0?(B=p[C].substring(0,w),J=p[C].substring(w+1)):B=p[C],T(B,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function vn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof vn?(this.l=p.l,kt(this,p.j),this.o=p.o,this.g=p.g,co(this,p.u),this.h=p.h,Sa(this,su(p.i)),this.m=p.m):p&&(T=String(p).match(tu))?(this.l=!1,kt(this,T[1]||"",!0),this.o=vi(T[2]||""),this.g=vi(T[3]||"",!0),co(this,T[4]),this.h=vi(T[5]||"",!0),Sa(this,T[6]||"",!0),this.m=vi(T[7]||"")):(this.l=!1,this.i=new ho(null,this.l))}vn.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(fs(T,Ws,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(fs(T,Ws,!0),"@"),p.push(Ui(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(fs(C,C.charAt(0)=="/"?Aa:nu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",fs(C,iu)),p.join("")},vn.prototype.resolve=function(p){const T=Ct(this);let C=!!p.j;C?kt(T,p.j):C=!!p.o,C?T.o=p.o:C=!!p.g,C?T.g=p.g:C=p.u!=null;var w=p.h;if(C)co(T,p.u);else if(C=!!p.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var B=T.h.lastIndexOf("/");B!=-1&&(w=T.h.slice(0,B+1)+w)}if(B=w,B==".."||B==".")w="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){w=B.lastIndexOf("/",0)==0,B=B.split("/");const J=[];for(let ae=0;ae<B.length;){const we=B[ae++];we=="."?w&&ae==B.length&&J.push(""):we==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),w&&ae==B.length&&J.push("")):(J.push(we),w=!0)}w=J.join("/")}else w=B}return C?T.h=w:C=p.i.toString()!=="",C?Sa(T,su(p.i)):C=!!p.m,C&&(T.m=p.m),T};function Ct(p){return new vn(p)}function kt(p,T,C){p.j=C?vi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function co(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Sa(p,T,C){T instanceof ho?(p.i=T,js(p.i,p.l)):(C||(T=fs(T,fo)),p.i=new ho(T,p.l))}function Xe(p,T,C){p.i.set(T,C)}function cs(p){return Xe(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function fs(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,un),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function un(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ws=/[#\/\?@]/g,nu=/[#\?:]/g,Aa=/[#\?]/g,fo=/[#\?@]/g,iu=/#/g;function ho(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function cn(p){p.g||(p.g=new Map,p.h=0,p.i&&Xs(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}t=ho.prototype,t.add=function(p,T){cn(this),this.i=null,p=po(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function ou(p,T){cn(p),T=po(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function Ca(p,T){return cn(p),T=po(p,T),p.g.has(T)}t.forEach=function(p,T){cn(this),this.g.forEach(function(C,w){C.forEach(function(B){p.call(T,B,w,this)},this)},this)};function Ia(p,T){cn(p);let C=[];if(typeof T=="string")Ca(p,T)&&(C=C.concat(p.g.get(po(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)C=C.concat(p[T]);return C}t.set=function(p,T){return cn(this),this.i=null,p=po(this,p),Ca(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=Ia(this,p),p.length>0?String(p[0]):T):T};function Zs(p,T,C){ou(p,T),C.length>0&&(p.i=null,p.g.set(po(p,T),R(C)),p.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let w=0;w<T.length;w++){var C=T[w];const B=Ui(C);C=Ia(this,C);for(let J=0;J<C.length;J++){let ae=B;C[J]!==""&&(ae+="="+Ui(C[J])),p.push(ae)}}return this.i=p.join("&")};function su(p){const T=new ho;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function po(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function js(p,T){T&&!p.j&&(cn(p),p.i=null,p.g.forEach(function(C,w){const B=w.toLowerCase();w!=B&&(ou(this,w),Zs(this,B,C))},p)),p.j=T}function Qn(p,T){const C=new Yn;if(c.Image){const w=new Image;w.onload=v(Nn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=v(Nn,C,"TestLoadImage: error",!1,T,w),w.onabort=v(Nn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=v(Nn,C,"TestLoadImage: timeout",!1,T,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else T(!1)}function Ra(p,T){const C=new Yn,w=new AbortController,B=setTimeout(()=>{w.abort(),Nn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:w.signal}).then(J=>{clearTimeout(B),J.ok?Nn(C,"TestPingServer: ok",!0,T):Nn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(B),Nn(C,"TestPingServer: error",!1,T)})}function Nn(p,T,C,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(C)}catch{}}function mo(){this.g=new Jl}function Ti(p){this.i=p.Sb||null,this.h=p.ab||!1}E(Ti,Kl),Ti.prototype.g=function(){return new ds(this.i,this.h)};function ds(p,T){Tt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ds,Tt),t=ds.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,$n(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;er(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function er(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?go(this):$n(this),this.readyState==3&&er(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,go(this))},t.Na=function(p){this.g&&(this.response=p,go(this))},t.ga=function(){this.g&&go(this)};function go(p){p.readyState=4,p.l=null,p.j=null,p.B=null,$n(p)}t.setRequestHeader=function(p,T){this.A.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function $n(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Dn(p){let T="";return Be(p,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function hs(p,T,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Dn(C),typeof p=="string"?C!=null&&Ui(C):Xe(p,T,C))}function je(p){Tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(je,Tt);var Ei=/^https?$/i,wa=["POST","PUT"];t=je.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ga.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(J){ps(this,J);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)C.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const J of w.keys())C.set(J,w.get(J));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),B=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(wa,T,void 0)>=0)||w||B||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of C)this.g.setRequestHeader(J,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){ps(this,J)}};function ps(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,Ma(p),Li(p)}function Ma(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},t.Xa=function(){ms(this)};function ms(p){if(p.h&&typeof l<"u"){if(p.v&&Xn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),Xn(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var w;if(w=J===0){let ae=String(p.D).match(tu)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),w=!Ei.test(ae?ae.toLowerCase():"")}C=w}if(C)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var B=Xn(p)>2?p.g.statusText:""}catch{B=""}p.l=B+" ["+p.ca()+"]",Ma(p)}}finally{Li(p)}}}}function Li(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,T||Vt(p,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xn(p){return p.g?p.g.readyState:0}t.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),Nf(T)}};function zt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ki(p){const T={};p=(p.g&&Xn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(b(p[w]))continue;var C=Zl(p[w]);const B=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=T[B]||[];T[B]=J,J.push(C)}$e(T,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function yo(p){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,p),this.Za=Si("retryDelaySeedMs",1e4,p),this.Ta=Si("forwardChannelMaxRetries",2,p),this.va=Si("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ya(p&&p.concurrentRequestLimit),this.Ba=new mo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yo.prototype,t.ka=8,t.I=1,t.connect=function(p,T,C,w){Et(0),this.W=p,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=du(this,null,this.W),Ai(this)};function Na(p){if(tr(p),p.I==3){var T=p.V++,C=Ct(p.J);if(Xe(C,"SID",p.M),Xe(C,"RID",T),Xe(C,"TYPE","terminate"),gs(p,C),T=new Jn(p,p.j,T),T.M=2,T.A=cs(Ct(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=T.A,C=!0),C||(T.g=hu(T.j,null),T.g.ea(T.A)),T.F=Date.now(),pi(T)}fu(p)}function _o(p){p.g&&(ba(p),p.g.cancel(),p.g=null)}function tr(p){_o(p),p.v&&(c.clearTimeout(p.v),p.v=null),ir(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Ai(p){if(!_a(p.h)&&!p.m){p.m=!0;var T=p.Ea;fe||N(),ue||(fe(),ue=!0),D.add(T,p),p.D=0}}function nr(p,T){return yi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=fi(m(p.Ea,p,T),cu(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const B=new Jn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=O(J),le(J,this.U)):J=this.U),this.u!==null||this.R||(B.J=J,J=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(T+=w,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=ru(this,B,T),C=Ct(this.J),Xe(C,"RID",p),Xe(C,"CVER",22),this.G&&Xe(C,"X-HTTP-Session-Id",this.G),gs(this,C),J&&(this.R?T="headers="+Ui(Dn(J))+"&"+T:this.u&&hs(C,this.u,J)),va(this.h,B),this.Ra&&Xe(C,"TYPE","init"),this.S?(Xe(C,"$req",T),Xe(C,"SID","null"),B.U=!0,hi(B,C,null)):hi(B,C,T),this.I=2}}else this.I==3&&(p?Da(this,p):this.i.length==0||_a(this.h)||Da(this))};function Da(p,T){var C;T?C=T.l:C=p.V++;const w=Ct(p.J);Xe(w,"SID",p.M),Xe(w,"RID",C),Xe(w,"AID",p.K),gs(p,w),p.u&&p.o&&hs(w,p.u,p.o),C=new Jn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),T&&(p.i=T.G.concat(p.i)),T=ru(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),va(p.h,C),hi(C,w,T)}function gs(p,T){p.H&&Be(p.H,function(C,w){Xe(T,w,C)}),p.l&&Be({},function(C,w){Xe(T,w,C)})}function ru(p,T,C){C=Math.min(p.i.length,C);const w=p.l?m(p.l.Ka,p.l,p):null;e:{var B=p.i;let we=-1;for(;;){const gt=["count="+C];we==-1?C>0?(we=B[0].g,gt.push("ofs="+we)):we=0:gt.push("ofs="+we);let Je=!0;for(let ut=0;ut<C;ut++){var J=B[ut].g;const bn=B[ut].map;if(J-=we,J<0)we=Math.max(0,B[ut].g-100),Je=!1;else try{J="req"+J+"_"||"";try{var ae=bn instanceof Map?bn:Object.entries(bn);for(const[Ii,Wn]of ae){let Zn=Wn;h(Wn)&&(Zn=uo(Wn)),gt.push(J+Ii+"="+encodeURIComponent(Zn))}}catch(Ii){throw gt.push(J+"type="+encodeURIComponent("_badmap")),Ii}}catch{w&&w(bn)}}if(Je){ae=gt.join("&");break e}}ae=void 0}return p=p.i.splice(0,C),T.G=p,ae}function au(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;fe||N(),ue||(fe(),ue=!0),D.add(T,p),p.A=0}}function ys(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=fi(m(p.Da,p),cu(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=fi(m(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),_o(this),lu(this))};function ba(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function lu(p){p.g=new Jn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=Ct(p.na);Xe(T,"RID","rpc"),Xe(T,"SID",p.M),Xe(T,"AID",p.K),Xe(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&Xe(T,"TO",p.ia),Xe(T,"TYPE","xmlhttp"),gs(p,T),p.u&&p.o&&hs(T,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=cs(Ct(T)),C.u=null,C.R=!0,Qs(C,p)}t.Va=function(){this.C!=null&&(this.C=null,_o(this),ys(this),Et(19))};function ir(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function uu(p,T){var C=null;if(p.g==T){ir(p),ba(p),p.g=null;var w=2}else if(_i(p.h,T))C=T.G,Ta(p.h,T),w=1;else return;if(p.I!=0){if(T.o)if(w==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var B=p.D;w=Ks(),Vt(w,new ci(w,C)),Ai(p)}else au(p);else if(B=T.m,B==3||B==0&&T.X>0||!(w==1&&nr(p,T)||w==2&&ys(p)))switch(C&&C.length>0&&(T=p.h,T.i=T.i.concat(C)),B){case 1:Ci(p,5);break;case 4:Ci(p,10);break;case 3:Ci(p,6);break;default:Ci(p,2)}}}function cu(p,T){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*T}function Ci(p,T){if(p.j.info("Error code "+T),T==2){var C=m(p.bb,p),w=p.Ua;const B=!w;w=new vn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||kt(w,"https"),cs(w),B?Qn(w.toString(),C):Ra(w.toString(),C)}else Et(2);p.I=0,p.l&&p.l.pa(T),fu(p),tr(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function fu(p){if(p.I=0,p.ja=[],p.l){const T=Ea(p.h);(T.length!=0||p.i.length!=0)&&(U(p.ja,T),U(p.ja,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.oa()}}function du(p,T,C){var w=C instanceof vn?Ct(C):new vn(C);if(w.g!="")T&&(w.g=T+"."+w.g),co(w,w.u);else{var B=c.location;w=B.protocol,T=T?T+"."+B.hostname:B.hostname,B=+B.port;const J=new vn(null);w&&kt(J,w),T&&(J.g=T),B&&co(J,B),C&&(J.h=C),w=J}return C=p.G,T=p.wa,C&&T&&Xe(w,C,T),Xe(w,"VER",p.ka),gs(p,w),w}function hu(p,T,C){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new je(new Ti({ab:C})):new je(p.ma),T.Fa(p.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pu(){}t=pu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function vo(){}vo.prototype.g=function(p,T){return new sn(p,T)};function sn(p,T){Tt.call(this),this.g=new yo(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!b(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!b(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Oi(this)}E(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Na(this.g)},sn.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=uo(p),p=C);T.i.push(new At(T.Ya++,p)),T.I==3&&Ai(T)},sn.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,sn.Z.N.call(this)};function mu(p){Ht.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}E(mu,Ht);function gu(){wn.call(this),this.status=1}E(gu,wn);function Oi(p){this.g=p}E(Oi,pu),Oi.prototype.ra=function(){Vt(this.g,"a")},Oi.prototype.qa=function(p){Vt(this.g,new mu(p))},Oi.prototype.pa=function(p){Vt(this.g,new gu)},Oi.prototype.oa=function(){Vt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,jE=function(){return new vo},ZE=function(){return Ks()},WE=mt,cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Vc=ls,ma.COMPLETE="complete",XE=ma,Ql.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Tl=Ql,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,$E=je}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.8.0";function m2(t){sa=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new BE("@firebase/firestore");function Ur(){return ks.logLevel}function he(t,...e){if(ks.logLevel<=Ge.DEBUG){const n=e.map(Fp);ks.debug(`Firestore (${sa}): ${t}`,...n)}}function oo(t,...e){if(ks.logLevel<=Ge.ERROR){const n=e.map(Fp);ks.error(`Firestore (${sa}): ${t}`,...n)}}function $r(t,...e){if(ks.logLevel<=Ge.WARN){const n=e.map(Fp);ks.warn(`Firestore (${sa}): ${t}`,...n)}}function Fp(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,eS(t,o,n)}function eS(t,e,n){let o=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw oo(o),new Error(o)}function Qe(t,e,n,o){let r="Unexpected state";typeof n=="string"?r=n:o=n,t||eS(e,r,o)}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends oa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(en.UNAUTHENTICATED)))}shutdown(){}}class y2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _2{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let o=this.i;const r=y=>this.i!==o?(o=this.i,n(y)):Promise.resolve();let l=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ko,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},h=y=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ko)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Qe(typeof o.accessToken=="string",31837,{l:o}),new tS(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class v2{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=en.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class T2{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new v2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class G0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const o=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new G0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new G0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=S2(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<n&&(o+=e.charAt(r[l]%62))}return o}}function Ue(t,e){return t<e?-1:t>e?1:0}function fp(t,e){const n=Math.min(t.length,e.length);for(let o=0;o<n;o++){const r=t.charAt(o),l=e.charAt(o);if(r!==l)return Oh(r)===Oh(l)?Ue(r,l):Oh(r)?1:-1}return Ue(t.length,e.length)}const A2=55296,C2=57343;function Oh(t){const e=t.charCodeAt(0);return e>=A2&&e<=C2}function Xr(t,e,n){return t.length===e.length&&t.every(((o,r)=>n(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class Di{constructor(e,n,o){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&Ee(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let r=0;r<o;r++){const l=Di.compareSegments(e.get(r),n.get(r));if(l!==0)return l}return Ue(e.length,n.length)}static compareSegments(e,n){const o=Di.isNumericId(e),r=Di.isNumericId(n);return o&&!r?-1:!o&&r?1:o&&r?Di.extractNumericId(e).compare(Di.extractNumericId(n)):fp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class ot extends Di{construct(e,n,o){return new ot(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((r=>r.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const I2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Di{construct(e,n,o){return new Xt(e,n,o)}static isValidIdentifier(e){return I2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Xt([B0])}static fromServerFormat(e){const n=[];let o="",r=0;const l=()=>{if(o.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=y,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(o+=h,r++):(l(),r++)}if(l(),c)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ot.fromString(e))}static fromName(e){return new ve(ot.fromString(e).popFirst(5))}static empty(){return new ve(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,n){if(!n)throw new de(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R2(t,e,n,o){if(e===!0&&o===!0)throw new de(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!ve.isDocumentKey(t))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(ve.isDocumentKey(t))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee(12329,{type:typeof t})}function $c(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pf(t);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ql(t,e){if(!iS(t))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in t)){n=`JSON missing required field: '${o}'`;break}const c=t[o];if(r&&typeof c!==r){n=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${o}' field to equal '${l.value}'`;break}}if(n)throw new de(ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=-62135596800,J0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*J0);return new at(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Y0)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ql(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:bt("string",at._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new at(0,0))}static max(){return new Ce(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function w2(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(o===1e9?new at(n+1,0):new at(n,o));return new $o(r,ve.empty(),e)}function M2(t){return new $o(t.readTime,t.key,bl)}class $o{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new $o(Ce.min(),ve.empty(),bl)}static max(){return new $o(Ce.max(),ve.empty(),bl)}}function N2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==D2)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,o)=>{n(e)}))}static reject(e){return new oe(((n,o)=>{o(e)}))}static waitFor(e){return new oe(((n,o)=>{let r=0,l=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++l,c&&l===r&&n()}),(y=>o(y)))})),c=!0,l===r&&n()}))}static or(e){let n=oe.resolve(!1);for(const o of e)n=n.next((r=>r?oe.resolve(r):o()));return n}static forEach(e,n){const o=[];return e.forEach(((r,l)=>{o.push(n.call(this,r,l))})),this.waitFor(o)}static mapArray(e,n){return new oe(((o,r)=>{const l=e.length,c=new Array(l);let h=0;for(let y=0;y<l;y++){const m=y;n(e[m]).next((v=>{c[m]=v,++h,h===l&&o(c)}),(v=>r(v)))}}))}static doWhile(e,n){return new oe(((o,r)=>{const l=()=>{e()===!0?n().next((()=>{l()}),r):o()};l()}))}}function x2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=-1;function gf(t){return t==null}function Xc(t){return t===0&&1/t==-1/0}function V2(t){return typeof t=="number"&&Number.isInteger(t)&&!Xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="";function P2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K0(e)),e=U2(t.get(n),e);return K0(e)}function U2(t,e){let n=e;const o=t.length;for(let r=0;r<o;r++){const l=t.charAt(r);switch(l){case"\0":n+="";break;case oS:n+="";break;default:n+=l}}return n}function K0(t){return t+oS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return n+o.left.size;r<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,n,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,o,r,l){this.key=e,this.value=n,this.color=o??$t.RED,this.left=r??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,r,l){return new $t(e??this.key,n??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,n,o),null):l===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $t.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,o,r,l){return this}insert(e,n,o){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ni([])}unionWith(e){let n=new Ut(Xt.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xr(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rS("Invalid base64 string: "+l):l}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const L2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=L2.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="server_timestamp",lS="__type__",uS="__previous_value__",cS="__local_write_time__";function Hp(t){var n,o;return((o=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lS])==null?void 0:o.stringValue)===aS}function yf(t){const e=t.mapValue.fields[uS];return Hp(e)?yf(e):e}function xl(t){const e=Xo(t.mapValue.fields[cS].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,o,r,l,c,h,y,m,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=m,this.isUsingEmulator=v,this.apiKey=E}}const Wc="(default)";class Vl{constructor(e,n){this.projectId=e,this.database=n||Wc}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===Wc}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}function O2(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="__type__",q2="__max__",wc={mapValue:{}},dS="__vector__",Zc="value";function Zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hp(t)?4:G2(t)?9007199254740991:F2(t)?10:11:Ee(28295,{value:t})}function Pi(t,e){if(t===e)return!0;const n=Zo(t);if(n!==Zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xl(t).isEqual(xl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Xo(r.timestampValue),h=Xo(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,l){return Wo(r.bytesValue).isEqual(Wo(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,l){return vt(r.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(t,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return vt(r.integerValue)===vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=vt(r.doubleValue),h=vt(l.doubleValue);return c===h?Xc(c)===Xc(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return Xr(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},h=l.mapValue.fields||{};if(Q0(c)!==Q0(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(h[y]===void 0||!Pi(c[y],h[y])))return!1;return!0})(t,e);default:return Ee(52216,{left:t})}}function Pl(t,e){return(t.values||[]).find((n=>Pi(n,e)))!==void 0}function Wr(t,e){if(t===e)return 0;const n=Zo(t),o=Zo(e);if(n!==o)return Ue(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=vt(l.integerValue||l.doubleValue),y=vt(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0(xl(t),xl(e));case 5:return fp(t.stringValue,e.stringValue);case 6:return(function(l,c){const h=Wo(l),y=Wo(c);return h.compareTo(y)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),y=c.split("/");for(let m=0;m<h.length&&m<y.length;m++){const v=Ue(h[m],y[m]);if(v!==0)return v}return Ue(h.length,y.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ue(vt(l.latitude),vt(c.latitude));return h!==0?h:Ue(vt(l.longitude),vt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return W0(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,U,G;const h=l.fields||{},y=c.fields||{},m=(S=h[Zc])==null?void 0:S.arrayValue,v=(R=y[Zc])==null?void 0:R.arrayValue,E=Ue(((U=m==null?void 0:m.values)==null?void 0:U.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return E!==0?E:W0(m,v)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===wc.mapValue&&c===wc.mapValue)return 0;if(l===wc.mapValue)return 1;if(c===wc.mapValue)return-1;const h=l.fields||{},y=Object.keys(h),m=c.fields||{},v=Object.keys(m);y.sort(),v.sort();for(let E=0;E<y.length&&E<v.length;++E){const S=fp(y[E],v[E]);if(S!==0)return S;const R=Wr(h[y[E]],m[v[E]]);if(R!==0)return R}return Ue(y.length,v.length)})(t.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Xo(t),o=Xo(e),r=Ue(n.seconds,o.seconds);return r!==0?r:Ue(n.nanos,o.nanos)}function W0(t,e){const n=t.values||[],o=e.values||[];for(let r=0;r<n.length&&r<o.length;++r){const l=Wr(n[r],o[r]);if(l)return l}return Ue(n.length,o.length)}function Zr(t){return dp(t)}function dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=Xo(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Wo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",r=!0;for(const l of n.values||[])r?r=!1:o+=",",o+=dp(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${dp(n.fields[c])}`;return r+"}"})(t.mapValue):Ee(61005,{value:t})}function Pc(t){switch(Zo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(t);return e?16+Pc(e):16;case 5:return 2*t.stringValue.length;case 6:return Wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Pc(l)),0)})(t.arrayValue);case 10:case 11:return(function(o){let r=0;return Fs(o.fields,((l,c)=>{r+=l.length+Pc(c)})),r})(t.mapValue);default:throw Ee(13486,{value:t})}}function Z0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hp(t){return!!t&&"integerValue"in t}function zp(t){return!!t&&"arrayValue"in t}function j0(t){return!!t&&"nullValue"in t}function eT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uc(t){return!!t&&"mapValue"in t}function F2(t){var n,o;return((o=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fS])==null?void 0:o.stringValue)===dS}function Cl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Cl(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(t.arrayValue.values[n]);return e}return{...t}}function G2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=Xt.emptyPath(),o={},r=[];e.forEach(((c,h)=>{if(!n.isImmediateParentOf(h)){const y=this.getFieldsMap(n);this.applyChanges(y,o,r),o={},r=[],n=h.popLast()}c?o[h.lastSegment()]=Cl(c):r.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,r)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=n.mapValue.fields[e.get(o)];Uc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,o){Fs(n,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Fn(Cl(this.value))}}function hS(t){const e=[];return Fs(t.fields,((n,o)=>{const r=new Xt([n]);if(Uc(o)){const l=hS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,o,r,l,c,h){this.key=e,this.documentType=n,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new tn(e,0,Ce.min(),Ce.min(),Ce.min(),Fn.empty(),0)}static newFoundDocument(e,n,o,r){return new tn(e,1,n,Ce.min(),o,r,0)}static newNoDocument(e,n){return new tn(e,2,n,Ce.min(),Ce.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Ce.min(),Ce.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.position=e,this.inclusive=n}}function tT(t,e,n){let o=0;for(let r=0;r<t.position.length;r++){const l=e[r],c=t.position[r];if(l.field.isKeyField()?o=ve.comparator(ve.fromName(c.referenceValue),n.key):o=Wr(c,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function nT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function B2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{}class Dt extends pS{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new z2(e,n,o):n==="array-contains"?new K2(e,o):n==="in"?new Q2(e,o):n==="not-in"?new $2(e,o):n==="array-contains-any"?new X2(e,o):new Dt(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new Y2(e,o):new J2(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wr(n,this.value)):n!==null&&Zo(this.value)===Zo(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends pS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ri(e,n)}matches(e){return mS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(t){return t.op==="and"}function gS(t){return H2(t)&&mS(t)}function H2(t){for(const e of t.filters)if(e instanceof ri)return!1;return!0}function pp(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+Zr(t.value);if(gS(t))return t.filters.map((e=>pp(e))).join(",");{const e=t.filters.map((n=>pp(n))).join(",");return`${t.op}(${e})`}}function yS(t,e){return t instanceof Dt?(function(o,r){return r instanceof Dt&&o.op===r.op&&o.field.isEqual(r.field)&&Pi(o.value,r.value)})(t,e):t instanceof ri?(function(o,r){return r instanceof ri&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,h)=>l&&yS(c,r.filters[h])),!0):!1})(t,e):void Ee(19439)}function _S(t){return t instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zr(n.value)}`})(t):t instanceof ri?(function(n){return n.op.toString()+" {"+n.getFilters().map(_S).join(" ,")+"}"})(t):"Filter"}class z2 extends Dt{constructor(e,n,o){super(e,n,o),this.key=ve.fromName(o.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y2 extends Dt{constructor(e,n){super(e,"in",n),this.keys=vS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class J2 extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=vS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function vS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>ve.fromName(o.referenceValue)))}class K2 extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zp(n)&&Pl(n.arrayValue,this.value)}}class Q2 extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class $2 extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pl(this.value.arrayValue,n)}}class X2 extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Pl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n=null,o=[],r=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function iT(t,e=null,n=[],o=[],r=null,l=null,c=null){return new W2(t,e,n,o,r,l,c)}function Yp(t){const e=Re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>pp(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Zr(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Zr(o))).join(",")),e.Te=n}return e.Te}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nT(t.startAt,e.startAt)&&nT(t.endAt,e.endAt)}function mp(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n=null,o=[],r=[],l=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Z2(t,e,n,o,r,l,c,h){return new la(t,e,n,o,r,l,c,h)}function TS(t){return new la(t)}function oT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function j2(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ES(t){return t.collectionGroup!==null}function Il(t){const e=Re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ut(Xt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ul(l,o))})),n.has(Xt.keyField().canonicalString())||e.Ie.push(new Ul(Xt.keyField(),o))}return e.Ie}function bi(t){const e=Re(t);return e.Ee||(e.Ee=eV(e,Il(t))),e.Ee}function eV(t,e){if(t.limitType==="F")return iT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Ul(r.field,l)}));const n=t.endAt?new jc(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new jc(t.startAt.position,t.startAt.inclusive):null;return iT(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function gp(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tV(t,e){const n=t.explicitOrderBy.concat([e]);return new la(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function ef(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _f(t,e){return Jp(bi(t),bi(e))&&t.limitType===e.limitType}function SS(t){return`${Yp(bi(t))}|lt:${t.limitType}`}function Lr(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((r=>_S(r))).join(", ")}]`),gf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((r=>Zr(r))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((r=>Zr(r))).join(",")),`Target(${o})`})(bi(t))}; limitType=${t.limitType})`}function vf(t,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):ve.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,r){for(const l of Il(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(t,e)&&(function(o,r){return!(o.startAt&&!(function(c,h,y){const m=tT(c,h,y);return c.inclusive?m<=0:m<0})(o.startAt,Il(o),r)||o.endAt&&!(function(c,h,y){const m=tT(c,h,y);return c.inclusive?m>=0:m>0})(o.endAt,Il(o),r))})(t,e)}function nV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AS(t){return(e,n)=>{let o=!1;for(const r of Il(t)){const l=iV(r,e,n);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function iV(t,e,n){const o=t.field.isKeyField()?ve.comparator(e.key,n.key):(function(l,c,h){const y=c.data.field(l),m=h.data.field(l);return y!==null&&m!==null?Wr(y,m):Ee(42886)})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[n]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((n,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return sS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new ft(ve.comparator);function so(){return oV}const CS=new ft(ve.comparator);function El(...t){let e=CS;for(const n of t)e=e.insert(n.key,n);return e}function IS(t){let e=CS;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Ls(){return Rl()}function RS(){return Rl()}function Rl(){return new Gs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const sV=new ft(ve.comparator),rV=new Ut(ve.comparator);function Le(...t){let e=rV;for(const n of t)e=e.add(n);return e}const aV=new Ut(Ue);function lV(){return aV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function wS(t){return{integerValue:""+t}}function uV(t,e){return V2(e)?wS(e):Kp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function cV(t,e,n){return t instanceof Ll?(function(r,l){const c={fields:{[lS]:{stringValue:aS},[cS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Hp(l)&&(l=yf(l)),l&&(c.fields[uS]=l),{mapValue:c}})(n,e):t instanceof kl?NS(t,e):t instanceof Ol?DS(t,e):(function(r,l){const c=MS(r,l),h=sT(c)+sT(r.Ae);return hp(c)&&hp(r.Ae)?wS(h):Kp(r.serializer,h)})(t,e)}function fV(t,e,n){return t instanceof kl?NS(t,e):t instanceof Ol?DS(t,e):n}function MS(t,e){return t instanceof tf?(function(o){return hp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Ll extends Tf{}class kl extends Tf{constructor(e){super(),this.elements=e}}function NS(t,e){const n=bS(e);for(const o of t.elements)n.some((r=>Pi(r,o)))||n.push(o);return{arrayValue:{values:n}}}class Ol extends Tf{constructor(e){super(),this.elements=e}}function DS(t,e){let n=bS(e);for(const o of t.elements)n=n.filter((r=>!Pi(r,o)));return{arrayValue:{values:n}}}class tf extends Tf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sT(t){return vt(t.integerValue||t.doubleValue)}function bS(t){return zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.field=e,this.transform=n}}function hV(t,e){return t.field.isEqual(e.field)&&(function(o,r){return o instanceof kl&&r instanceof kl||o instanceof Ol&&r instanceof Ol?Xr(o.elements,r.elements,Pi):o instanceof tf&&r instanceof tf?Pi(o.Ae,r.Ae):o instanceof Ll&&r instanceof Ll})(t.transform,e.transform)}class pV{constructor(e,n){this.version=e,this.transformResults=n}}class to{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new to}static exists(e){return new to(void 0,e)}static updateTime(e){return new to(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ef{}function xS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PS(t.key,to.none()):new Fl(t.key,t.data,to.none());{const n=t.data,o=Fn.empty();let r=new Ut(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new Bs(t.key,o,new ni(r.toArray()),to.none())}}function mV(t,e,n){t instanceof Fl?(function(r,l,c){const h=r.value.clone(),y=aT(r.fieldTransforms,l,c.transformResults);h.setAll(y),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Bs?(function(r,l,c){if(!Lc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const h=aT(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(VS(r)),y.setAll(h),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(t,e,n):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function wl(t,e,n,o){return t instanceof Fl?(function(l,c,h,y){if(!Lc(l.precondition,c))return h;const m=l.value.clone(),v=lT(l.fieldTransforms,y,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(t,e,n,o):t instanceof Bs?(function(l,c,h,y){if(!Lc(l.precondition,c))return h;const m=lT(l.fieldTransforms,y,c),v=c.data;return v.setAll(VS(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,o):(function(l,c,h){return Lc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,n)}function gV(t,e){let n=null;for(const o of t.fieldTransforms){const r=e.data.field(o.field),l=MS(o.transform,r||null);l!=null&&(n===null&&(n=Fn.empty()),n.set(o.field,l))}return n||null}function rT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Xr(o,r,((l,c)=>hV(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends Ef{constructor(e,n,o,r=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bs extends Ef{constructor(e,n,o,r,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function VS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function aT(t,e,n){const o=new Map;Qe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let r=0;r<n.length;r++){const l=t[r],c=l.transform,h=e.data.field(l.field);o.set(l.field,fV(c,h,n[r]))}return o}function lT(t,e,n){const o=new Map;for(const r of t){const l=r.transform,c=n.data.field(r.field);o.set(r.field,cV(l,c,e))}return o}class PS extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yV extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n,o,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&mV(l,e,o[r])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=wl(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=wl(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=RS();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(r.key)?null:h;const y=xS(c,h);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Xr(this.mutations,e.mutations,((n,o)=>rT(n,o)))&&Xr(this.baseMutations,e.baseMutations,((n,o)=>rT(n,o)))}}class Qp{constructor(e,n,o,r){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=r}static from(e,n,o){Qe(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return sV})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new Qp(e,n,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Fe;function EV(t){switch(t){case ne.OK:return Ee(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ee(15467,{code:t})}}function US(t){if(t===void 0)return oo("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Nt.OK:return ne.OK;case Nt.CANCELLED:return ne.CANCELLED;case Nt.UNKNOWN:return ne.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ne.INTERNAL;case Nt.UNAVAILABLE:return ne.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ne.NOT_FOUND;case Nt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Nt.ABORTED:return ne.ABORTED;case Nt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Nt.DATA_LOSS:return ne.DATA_LOSS;default:return Ee(39323,{code:t})}}(Fe=Nt||(Nt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=new Jo([4294967295,4294967295],0);function uT(t){const e=SV().encode(t),n=new QE;return n.update(e),new Uint8Array(n.digest())}function cT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Jo([n,o],0),new Jo([r,l],0)]}class $p{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Sl(`Invalid padding: ${n}`);if(o<0)throw new Sl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jo.fromNumber(this.ge)}ye(e,n,o){let r=e.add(n.multiply(Jo.fromNumber(o)));return r.compare(AV)===1&&(r=new Jo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uT(e),[o,r]=cT(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);if(!this.we(c))return!1}return!0}static create(e,n,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new $p(l,r,n);return o.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const n=uT(e),[o,r]=cT(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);this.be(c)}}be(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,o,r,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const r=new Map;return r.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Sf(Ce.min(),r,new ft(Ue),so(),Le())}}class Gl{constructor(e,n,o,r,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Gl(o,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,o,r){this.Se=e,this.removedTargetIds=n,this.key=o,this.De=r}}class LS{constructor(e,n){this.targetId=e,this.Ce=n}}class kS{constructor(e,n,o=Wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=r}}class fT{constructor(){this.ve=0,this.Fe=dT(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),o=Le();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:o=o.add(r);break;default:Ee(38017,{changeType:l})}})),new Gl(this.Me,this.xe,e,n,o)}Ke(){this.Oe=!1,this.Fe=dT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CV{constructor(e){this.Ge=e,this.ze=new Map,this.je=so(),this.He=Mc(),this.Je=Mc(),this.Ze=new ft(Ue)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,o=e.Ce.count,r=this.ot(n);if(r){const l=r.target;if(mp(l))if(o===0){const c=new ve(l.path);this.et(n,c,tn.newNoDocument(c,Ce.min()))}else Qe(o===1,20013,{expectedCount:o});else{const c=this._t(n);if(c!==o){const h=this.ut(e),y=h?this.ct(h,e,c):1;if(y!==0){this.it(n);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=n;let c,h;try{c=Wo(o).toUint8Array()}catch(y){if(y instanceof rS)return $r("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new $p(c,r,l)}catch(y){return $r(y instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let r=0;return o.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&mp(h.target)){const y=new ve(h.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,tn.newNoDocument(y,e))}l.Be&&(n.set(c,l.ke()),l.Ke())}}));let o=Le();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((y=>{const m=this.ot(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(o=o.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new Sf(e,n,this.Ze,this.je,o);return this.je=so(),this.He=Mc(),this.Je=Mc(),this.Ze=new ft(Ue),r}Ye(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,o),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.qe(n,1):r.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new fT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ut(Ue),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ut(Ue),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mc(){return new ft(ve.comparator)}function dT(){return new ft(ve.comparator)}const IV={asc:"ASCENDING",desc:"DESCENDING"},RV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wV={and:"AND",or:"OR"};class MV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(t,e){return t.useProto3Json||gf(e)?e:{value:e}}function nf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NV(t,e){return nf(t,e.toTimestamp())}function xi(t){return Qe(!!t,49232),Ce.fromTimestamp((function(n){const o=Xo(n);return new at(o.seconds,o.nanos)})(t))}function Xp(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=(function(r){return new ot(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qS(t){const e=ot.fromString(t);return Qe(zS(e),10190,{key:e.toString()}),e}function vp(t,e){return Xp(t.databaseId,e.path)}function qh(t,e){const n=qS(e);if(n.get(1)!==t.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(GS(n))}function FS(t,e){return Xp(t.databaseId,e)}function DV(t){const e=qS(t);return e.length===4?ot.emptyPath():GS(e)}function Tp(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GS(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hT(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function bV(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const v=m.code===void 0?ne.UNKNOWN:US(m.code);return new de(v,m.message||"")})(c);n=new kS(o,r,l,h||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=qh(t,o.document.name),l=xi(o.document.updateTime),c=o.document.createTime?xi(o.document.createTime):Ce.min(),h=new Fn({mapValue:{fields:o.document.fields}}),y=tn.newFoundDocument(r,l,c,h),m=o.targetIds||[],v=o.removedTargetIds||[];n=new kc(m,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=qh(t,o.document),l=o.readTime?xi(o.readTime):Ce.min(),c=tn.newNoDocument(r,l),h=o.removedTargetIds||[];n=new kc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=qh(t,o.document),l=o.removedTargetIds||[];n=new kc([],l,r,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new TV(r,l),h=o.targetId;n=new LS(h,c)}}return n}function xV(t,e){let n;if(e instanceof Fl)n={update:hT(t,e.key,e.value)};else if(e instanceof PS)n={delete:vp(t,e.key)};else if(e instanceof Bs)n={update:hT(t,e.key,e.data),updateMask:GV(e.fieldMask)};else{if(!(e instanceof yV))return Ee(16599,{dt:e.type});n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,c){const h=c.transform;if(h instanceof Ll)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof kl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ol)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof tf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ee(20930,{transform:c.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:NV(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(t,e.precondition)),n}function VV(t,e){return t&&t.length>0?(Qe(e!==void 0,14353),t.map((n=>(function(r,l){let c=r.updateTime?xi(r.updateTime):xi(l);return c.isEqual(Ce.min())&&(c=xi(l)),new pV(c,r.transformResults||[])})(n,e)))):[]}function PV(t,e){return{documents:[FS(t,e.path)]}}function UV(t,e){const n={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=FS(t,r);const l=(function(m){if(m.length!==0)return HS(ri.create(m,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:kr(S.field),direction:OV(S.dir)}})(v)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=yp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:r}}function LV(t){let e=DV(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let r=null;if(o>0){Qe(o===1,65062);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];n.where&&(l=(function(E){const S=BS(E);return S instanceof ri&&gS(S)?S.getFilters():[S]})(n.where));let c=[];n.orderBy&&(c=(function(E){return E.map((S=>(function(U){return new Ul(Or(U.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(n.orderBy));let h=null;n.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,gf(S)?null:S})(n.limit));let y=null;n.startAt&&(y=(function(E){const S=!!E.before,R=E.values||[];return new jc(R,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const S=!E.before,R=E.values||[];return new jc(R,S)})(n.endAt)),Z2(e,r,c,l,h,"F",y,m)}function kV(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Or(n.unaryFilter.field);return Dt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Or(n.unaryFilter.field);return Dt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Or(n.unaryFilter.field);return Dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Or(n.unaryFilter.field);return Dt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Dt.create(Or(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ri.create(n.compositeFilter.filters.map((o=>BS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(t):Ee(30097,{filter:t})}function OV(t){return IV[t]}function qV(t){return RV[t]}function FV(t){return wV[t]}function kr(t){return{fieldPath:t.canonicalString()}}function Or(t){return Xt.fromServerFormat(t.fieldPath)}function HS(t){return t instanceof Dt?(function(n){if(n.op==="=="){if(eT(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NAN"}};if(j0(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eT(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NAN"}};if(j0(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kr(n.field),op:qV(n.op),value:n.value}}})(t):t instanceof ri?(function(n){const o=n.getFilters().map((r=>HS(r)));return o.length===1?o[0]:{compositeFilter:{op:FV(n.op),filters:o}}})(t):Ee(54877,{filter:t})}function GV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function zS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function YS(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,o,r,l=Ce.min(),c=Ce.min(),h=Wt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.yt=e}}function HV(t){const e=LV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.Sn=new YV}addToCollectionParentIndex(e,n){return this.Sn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve($o.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve($o.min())}updateCollectionGroup(e,n,o){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class YV{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n]||new Ut(ot.comparator),l=!r.has(o);return this.index[n]=r.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Ut(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(JS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jr(0)}static ar(){return new jr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",JV=1048576;function gT([t,e],[n,o]){const r=Ue(t,n);return r===0?Ue(e,o):r}class KV{constructor(e){this.Pr=e,this.buffer=new Ut(gT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();gT(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QV{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?he(mT,"Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.Ar(3e5)}))}}class $V{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(mf.ce);const o=new KV(n);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.Vr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(pT)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let o,r,l,c,h,y,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(o=E,h=Date.now(),this.removeTargets(e,o,n)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(m=Date.now(),Ur()<=Ge.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${l} targets in `+(y-h)+`ms
	Removed ${E} documents in `+(m-y)+`ms
Total Duration: ${m-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function XV(t,e){return new $V(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?oe.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n,o,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(o!==null&&wl(o.mutation,r,ni.empty(),at.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Le()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Le()){const r=Ls();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,o).next((l=>{let c=El();return l.forEach(((h,y)=>{c=c.insert(h,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const o=Ls();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Le())))}populateOverlays(e,n,o){const r=[];return o.forEach((l=>{n.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,h)=>{n.set(c,h)}))}))}computeViews(e,n,o,r){let l=so();const c=Rl(),h=(function(){return Rl()})();return n.forEach(((y,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Bs)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),wl(v.mutation,m,v.mutation.getFieldMask(),at.now())):c.set(m.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((m,v)=>c.set(m,v))),n.forEach(((m,v)=>h.set(m,new ZV(v,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const o=Rl();let r=new ft(((c,h)=>c-h)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const h of c)h.keys().forEach((y=>{const m=n.get(y);if(m===null)return;let v=o.get(y)||ni.empty();v=h.applyToLocalView(m,v),o.set(y,v);const E=(r.get(h.batchId)||Le()).add(y);r=r.insert(h.batchId,E)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),m=y.key,v=y.value,E=RS();v.forEach((S=>{if(!l.has(S)){const R=xS(n.get(S),o.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return oe.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,r){return j2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ES(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,r):this.getDocumentsMatchingCollectionQuery(e,n,o,r)}getNextDocuments(e,n,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,r-l.size):oe.resolve(Ls());let h=bl,y=l;return c.next((m=>oe.forEach(m,((v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{y=y.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,y,m,Le()))).next((v=>({batchId:h,changes:IS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((o=>{let r=El();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,r){const l=n.collectionGroup;let c=El();return this.indexManager.getCollectionParents(e,l).next((h=>oe.forEach(h,(y=>{const m=(function(E,S){return new la(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,r)))).next((c=>{l.forEach(((y,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,tn.newInvalidDocument(v)))}));let h=El();return c.forEach(((y,m)=>{const v=l.get(y);v!==void 0&&wl(v.mutation,m,ni.empty(),at.now()),vf(n,m)&&(h=h.insert(y,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return oe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(r){return{name:r.name,query:HV(r.bundledQuery),readTime:xi(r.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.overlays=new ft(ve.comparator),this.Lr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Ls();return oe.forEach(n,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((r,l)=>{this.bt(e,n,l)})),oe.resolve()}removeOverlaysForBatchId(e,n,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),oe.resolve()}getOverlaysForCollection(e,n,o){const r=Ls(),l=n.length+1,c=new ve(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,m=y.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&y.largestBatchId>o&&r.set(y.getKey(),y)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,n,o,r){let l=new ft(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ls(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Ls(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=r)););return oe.resolve(h)}bt(e,n,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new vV(n,o));let l=this.Lr.get(n);l===void 0&&(l=Le(),this.Lr.set(n,l)),this.Lr.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.kr=new Ut(Ft.Kr),this.qr=new Ut(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const o=new Ft(e,n);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Wr(new Ft(e,n))}Qr(e,n){e.forEach((o=>this.removeReference(o,n)))}Gr(e){const n=new ve(new ot([])),o=new Ft(n,e),r=new Ft(n,e+1),l=[];return this.qr.forEachInRange([o,r],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ve(new ot([])),o=new Ft(n,e),r=new Ft(n,e+1);let l=Le();return this.qr.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new Ft(e,0),o=this.kr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Ft{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ve.comparator(e.key,n.key)||Ue(e.Hr,n.Hr)}static Ur(e,n){return Ue(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ut(Ft.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _V(l,n,o,r);this.mutationQueue.push(c);for(const h of r)this.Jr=this.Jr.add(new Ft(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,n){return oe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,r=this.Xr(o),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Bp:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ft(n,0),r=new Ft(n,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(c=>{const h=this.Zr(c.Hr);l.push(h)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ut(Ue);return n.forEach((r=>{const l=new Ft(r,0),c=new Ft(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{o=o.add(h.Hr)}))})),oe.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,r=o.length+1;let l=o;ve.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new ve(l),0);let h=new Ut(Ue);return this.Jr.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(h=h.add(y.Hr)),!0)}),c),oe.resolve(this.Yr(h))}Yr(e){const n=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Qe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return oe.forEach(n.mutations,(r=>{const l=new Ft(r.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,n){const o=new Ft(n,0),r=this.Jr.firstAfterOrEqual(o);return oe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.ti=e,this.docs=(function(){return new ft(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,r=this.docs.get(o),l=r?r.size:0,c=this.ti(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return oe.resolve(o?o.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let o=so();return n.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():tn.newInvalidDocument(r))})),oe.resolve(o)}getDocumentsMatchingQuery(e,n,o,r){let l=so();const c=n.path,h=new ve(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:m,value:{document:v}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||N2(M2(v),o)<=0||(r.has(v.key)||vf(n,v))&&(l=l.insert(v.key,v.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,n,o,r){Ee(9500)}ni(e,n){return oe.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new sP(this)}getSize(e){return oe.resolve(this.size)}}class sP extends WV{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?n.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),oe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.persistence=e,this.ri=new Gs((n=>Yp(n)),Jp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Wp,this.targetCount=0,this.oi=jr._r()}forEachTarget(e,n){return this.ri.forEach(((o,r)=>n(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.ii&&(this.ii=n),oe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new jr(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.lr(n),oe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,o){let r=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=n&&o.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const o=this.ri.get(n)||null;return oe.resolve(o)}addMatchingKeys(e,n,o){return this.si.$r(n,o),oe.resolve()}removeMatchingKeys(e,n,o){this.si.Qr(n,o);const r=this.persistence.referenceDelegate,l=[];return r&&n.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const o=this.si.jr(n);return oe.resolve(o)}containsKey(e,n){return oe.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this._i={},this.overlays={},this.ai=new mf(0),this.ui=!1,this.ui=!0,this.ci=new nP,this.referenceDelegate=e(this),this.li=new rP(this),this.indexManager=new zV,this.remoteDocumentCache=(function(r){return new oP(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new BV(n),this.Pi=new eP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this._i[e.toKey()];return o||(o=new iP(n,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,o){he("MemoryPersistence","Starting transaction:",e);const r=new aP(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,n){return oe.or(Object.values(this._i).map((o=>()=>o.containsKey(e,n))))}}class aP extends b2{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Wp,this.Ai=null}static Vi(e){return new Zp(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.di.delete(o.toString()),oe.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.di.add(o.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(o=>{const r=ve.fromPath(o);return this.mi(e,r).next((l=>{l||n.removeEntry(r,Ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((o=>{o?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class of{constructor(e,n){this.persistence=e,this.fi=new Gs((o=>P2(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=XV(this,n)}static Vi(e,n){return new of(e,n)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((r=>o+r))))}pr(e){let n=0;return this.mr(e,(o=>{n++})).next((()=>n))}mr(e,n){return oe.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?oe.resolve():n(r)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(c=>this.wr(e,c,n).next((h=>{h||(o++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pc(e.data.value)),n}wr(e,n,o){return oe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.fi.get(n);return oe.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,o,r){this.targetId=e,this.fromCache=n,this.Ts=o,this.Is=r}static Es(e,n){let o=Le(),r=Le();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new jp(e,n.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $b()?8:x2(Kb())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,r){const l={result:null};return this.gs(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,n,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new lP;return this.ys(e,n,c).next((h=>{if(l.result=h,this.As)return this.ws(e,n,c,h.size)}))})).next((()=>l.result))}ws(e,n,o,r){return o.documentReadCount<this.Vs?(Ur()<=Ge.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Lr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Ur()<=Ge.DEBUG&&he("QueryEngine","Query:",Lr(n),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Ur()<=Ge.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Lr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):oe.resolve())}gs(e,n){if(oT(n))return oe.resolve(null);let o=bi(n);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=ef(n,null,"F"),o=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const c=Le(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,o).next((y=>{const m=this.bs(n,h);return this.Ss(n,m,c,y.readTime)?this.gs(e,ef(n,null,"F")):this.Ds(e,m,n,y)}))))})))))}ps(e,n,o,r){return oT(n)||r.isEqual(Ce.min())?oe.resolve(null):this.fs.getDocuments(e,o).next((l=>{const c=this.bs(n,l);return this.Ss(n,c,o,r)?oe.resolve(null):(Ur()<=Ge.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lr(n)),this.Ds(e,c,n,w2(r,bl)).next((h=>h)))}))}bs(e,n){let o=new Ut(AS(e));return n.forEach(((r,l)=>{vf(e,l)&&(o=o.add(l))})),o}Ss(e,n,o,r){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,n,o){return Ur()<=Ge.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Lr(n)),this.fs.getDocumentsMatchingQuery(e,n,$o.min(),o)}Ds(e,n,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LocalStore",cP=3e8;class fP{constructor(e,n,o,r){this.persistence=e,this.Cs=n,this.serializer=r,this.vs=new ft(Ue),this.Fs=new Gs((l=>Yp(l)),Jp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jV(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function dP(t,e,n,o){return new fP(t,e,n,o)}async function QS(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return n.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,n.Os(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],h=[];let y=Le();for(const m of r){c.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}return n.localDocuments.getDocuments(o,y).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function hP(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=n.xs.newChangeBuffer({trackRemovals:!0});return(function(h,y,m,v){const E=m.batch,S=E.keys();let R=oe.resolve();return S.forEach((U=>{R=R.next((()=>v.getEntry(y,U))).next((G=>{const k=m.docVersions.get(U);Qe(k!==null,48541),G.version.compareTo(k)<0&&(E.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),R.next((()=>h.mutationQueue.removeMutationBatch(y,E)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(h){let y=Le();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(y=y.add(h.batch.mutations[m].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(o,r)))}))}function $S(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function pP(t,e){const n=Re(t),o=e.snapshotVersion;let r=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});r=n.vs;const h=[];e.targetChanges.forEach(((v,E)=>{const S=r.get(E);if(!S)return;h.push(n.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>n.li.addMatchingKeys(l,v.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Wt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,o)),r=r.insert(E,R),(function(G,k,Q){return G.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=cP?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,R,v)&&h.push(n.li.updateTargetData(l,R))}));let y=so(),m=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(mP(l,c,e.documentUpdates).next((v=>{y=v.Bs,m=v.Ls}))),!o.isEqual(Ce.min())){const v=n.li.getLastRemoteSnapshotVersion(l).next((E=>n.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));h.push(v)}return oe.waitFor(h).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,y,m))).next((()=>y))})).then((l=>(n.vs=r,l)))}function mP(t,e,n){let o=Le(),r=Le();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let c=so();return n.forEach(((h,y)=>{const m=l.get(h);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),y.isNoDocument()&&y.version.isEqual(Ce.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):he(em,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",y.version)})),{Bs:c,Ls:r}}))}function gP(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Bp),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function yP(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return n.li.getTargetData(o,e).next((l=>l?(r=l,oe.resolve(r)):n.li.allocateTargetId(o).next((c=>(r=new Ho(e,c,"TargetPurposeListen",o.currentSequenceNumber),n.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=n.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(o.targetId,o),n.Fs.set(e,o.targetId)),o}))}async function Ep(t,e,n){const o=Re(t),r=o.vs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!aa(c))throw c;he(em,`Failed to update sequence numbers for target ${e}: ${c}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function yT(t,e,n){const o=Re(t);let r=Ce.min(),l=Le();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,v){const E=Re(y),S=E.Fs.get(v);return S!==void 0?oe.resolve(E.vs.get(S)):E.li.getTargetData(m,v)})(o,c,bi(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(c,h.targetId).next((y=>{l=y}))})).next((()=>o.Cs.getDocumentsMatchingQuery(c,e,n?r:Ce.min(),n?l:Le()))).next((h=>(_P(o,nV(e),h),{documents:h,ks:l})))))}function _P(t,e,n){let o=t.Ms.get(e)||Ce.min();n.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.Ms.set(e,o)}class _T{constructor(){this.activeTargetIds=lV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vP{constructor(){this.vo=new _T,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,o){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _T,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="ConnectivityMonitor";class TT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(vT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(vT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function Sp(){return Nc===null?Nc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="RestConnection",EP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===Wc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,n,o,r,l){const c=Sp(),h=this.Qo(e,n.toUriEncodedString());he(Fh,`Sending RPC '${e}' ${c}:`,h,o);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(y,r,l);const{host:m}=new URL(h),v=Op(m);return this.zo(e,h,y,o,v).then((E=>(he(Fh,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw $r(Fh,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",o),E}))}jo(e,n,o,r,l,c){return this.Wo(e,n,o,r,l)}Go(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,n){const o=EP[e];let r=`${this.qo}/v1/${n}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection",_l=(t,e,n)=>{t.listen(e,(o=>{try{n(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class zr extends SP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zr.c_){const e=ZE();_l(e,WE.STAT_EVENT,(n=>{n.stat===cp.PROXY?he(jt,"STAT_EVENT: detected buffering proxy"):n.stat===cp.NOPROXY&&he(jt,"STAT_EVENT: detected no buffering proxy")})),zr.c_=!0}}zo(e,n,o,r,l){const c=Sp();return new Promise(((h,y)=>{const m=new $E;m.setWithCredentials(!0),m.listenOnce(XE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Vc.NO_ERROR:const E=m.getResponseJson();he(jt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case Vc.TIMEOUT:he(jt,`RPC '${e}' ${c} timed out`),y(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const S=m.getStatus();if(he(jt,`RPC '${e}' ${c} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const G=(function(Q){const ie=Q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ie)>=0?ie:ne.UNKNOWN})(U.status);y(new de(G,U.message))}else y(new de(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else y(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(jt,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);he(jt,`RPC '${e}' ${c} sending request:`,r),m.send(n,"POST",v,o,15)}))}T_(e,n,o){const r=Sp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(h.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,n,o),h.encodeInitMessageHeaders=!0;const m=l.join("");he(jt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const v=c.createWebChannel(m,h);this.I_(v);let E=!1,S=!1;const R=new AP({Ho:U=>{S?he(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(E||(he(jt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),he(jt,`RPC '${e}' stream ${r} sending:`,U),v.send(U))},Jo:()=>v.close()});return _l(v,Tl.EventType.OPEN,(()=>{S||(he(jt,`RPC '${e}' stream ${r} transport opened.`),R.i_())})),_l(v,Tl.EventType.CLOSE,(()=>{S||(S=!0,he(jt,`RPC '${e}' stream ${r} transport closed`),R.o_(),this.E_(v))})),_l(v,Tl.EventType.ERROR,(U=>{S||(S=!0,$r(jt,`RPC '${e}' stream ${r} transport errored. Name:`,U.name,"Message:",U.message),R.o_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),_l(v,Tl.EventType.MESSAGE,(U=>{var G;if(!S){const k=U.data[0];Qe(!!k,16349);const Q=k,ie=(Q==null?void 0:Q.error)||((G=Q[0])==null?void 0:G.error);if(ie){he(jt,`RPC '${e}' stream ${r} received error:`,ie);const Z=ie.status;let se=(function(D){const N=Nt[D];if(N!==void 0)return US(N)})(Z),fe=ie.message;se===void 0&&(se=ne.INTERNAL,fe="Unknown error status: "+Z+" with message "+ie.message),S=!0,R.o_(new de(se,fe)),v.close()}else he(jt,`RPC '${e}' stream ${r} received:`,k),R.__(k)}})),zr.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,o){super.Go(e,n,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){return new zr(t)}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new MV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.c_=!1;class XS{constructor(e,n,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=n,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-o);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="PersistentStream";class WS{constructor(e,n,o,r,l,c,h,y){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(oo(n.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===n&&this.G_(o,r)}),(o=>{e((()=>{const r=new de(ne.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,n){const o=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(ET,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(he(ET,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IP extends WS{constructor(e,n,o,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,r,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bV(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?xi(c.readTime):Ce.min()})(e);return this.listener.J_(n,o)}Z_(e){const n={};n.database=Tp(this.serializer),n.addTarget=(function(l,c){let h;const y=c.target;if(h=mp(y)?{documents:PV(l,y)}:{query:UV(l,y).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=OS(l,c.resumeToken);const m=yp(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ce.min())>0){h.readTime=nf(l,c.snapshotVersion.toTimestamp());const m=yp(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const o=kV(this.serializer,e);o&&(n.labels=o),this.K_(n)}X_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.K_(n)}}class RP extends WS{constructor(e,n,o,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,r,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VV(e.writeResults,e.commitTime),o=xi(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=Tp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>xV(this.serializer,o)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{}class MP extends wP{constructor(e,n,o,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,_p(n,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ne.UNKNOWN,l.toString())}))}jo(e,n,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,_p(n,o),r,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function NP(t,e,n,o){return new MP(t,e,n,o)}class DP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class bP{constructor(e,n,o,r,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{o.enqueueAndForget((async()=>{Hs(this)&&(he(Os,"Restarting streams for network reachability change."),await(async function(y){const m=Re(y);m.Ea.add(4),await Bl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Cf(m)})(this))}))})),this.Va=new DP(o,r)}}async function Cf(t){if(Hs(t))for(const e of t.Ra)await e(!0)}async function Bl(t){for(const e of t.Ra)await e(!1)}function ZS(t,e){const n=Re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),om(n)?im(n):ua(n).O_()&&nm(n,e))}function tm(t,e){const n=Re(t),o=ua(n);n.Ia.delete(e),o.O_()&&jS(n,e),n.Ia.size===0&&(o.O_()?o.L_():Hs(n)&&n.Va.set("Unknown"))}function nm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ua(t).Z_(e)}function jS(t,e){t.da.$e(e),ua(t).X_(e)}function im(t){t.da=new CV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ua(t).start(),t.Va.ua()}function om(t){return Hs(t)&&!ua(t).x_()&&t.Ia.size>0}function Hs(t){return Re(t).Ea.size===0}function eA(t){t.da=void 0}async function xP(t){t.Va.set("Online")}async function VP(t){t.Ia.forEach(((e,n)=>{nm(t,e)}))}async function PP(t,e){eA(t),om(t)?(t.Va.ha(e),im(t)):t.Va.set("Unknown")}async function UP(t,e,n){if(t.Va.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const h of l.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.da.removeTarget(h))})(t,e)}catch(o){he(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await sf(t,o)}else if(e instanceof kc?t.da.Xe(e):e instanceof LS?t.da.st(e):t.da.tt(e),!n.isEqual(Ce.min()))try{const o=await $S(t.localStore);n.compareTo(o)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(y.resumeToken,c))}})),h.targetMismatches.forEach(((y,m)=>{const v=l.Ia.get(y);if(!v)return;l.Ia.set(y,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),jS(l,y);const E=new Ho(v.target,y,m,v.sequenceNumber);nm(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(o){he(Os,"Failed to raise snapshot:",o),await sf(t,o)}}async function sf(t,e,n){if(!aa(e))throw e;t.Ea.add(1),await Bl(t),t.Va.set("Offline"),n||(n=()=>$S(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{he(Os,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cf(t)}))}function tA(t,e){return e().catch((n=>sf(t,n,e)))}async function If(t){const e=Re(t),n=jo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bp;for(;LP(e);)try{const r=await gP(e.localStore,o);if(r===null){e.Ta.length===0&&n.L_();break}o=r.batchId,kP(e,r)}catch(r){await sf(e,r)}nA(e)&&iA(e)}function LP(t){return Hs(t)&&t.Ta.length<10}function kP(t,e){t.Ta.push(e);const n=jo(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function nA(t){return Hs(t)&&!jo(t).x_()&&t.Ta.length>0}function iA(t){jo(t).start()}async function OP(t){jo(t).ra()}async function qP(t){const e=jo(t);for(const n of t.Ta)e.ea(n.mutations)}async function FP(t,e,n){const o=t.Ta.shift(),r=Qp.from(o,e,n);await tA(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await If(t)}async function GP(t,e){e&&jo(t).Y_&&await(async function(o,r){if((function(c){return EV(c)&&c!==ne.ABORTED})(r.code)){const l=o.Ta.shift();jo(o).B_(),await tA(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await If(o)}})(t,e),nA(t)&&iA(t)}async function ST(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),he(Os,"RemoteStore received new credentials");const o=Hs(n);n.Ea.add(3),await Bl(n),o&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cf(n)}async function BP(t,e){const n=Re(t);e?(n.Ea.delete(2),await Cf(n)):e||(n.Ea.add(2),await Bl(n),n.Va.set("Unknown"))}function ua(t){return t.ma||(t.ma=(function(n,o,r){const l=Re(n);return l.sa(),new IP(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Zo:xP.bind(null,t),Yo:VP.bind(null,t),t_:PP.bind(null,t),J_:UP.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),om(t)?im(t):t.Va.set("Unknown")):(await t.ma.stop(),eA(t))}))),t.ma}function jo(t){return t.fa||(t.fa=(function(n,o,r){const l=Re(n);return l.sa(),new RP(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OP.bind(null,t),t_:GP.bind(null,t),ta:qP.bind(null,t),na:FP.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await If(t)):(await t.fa.stop(),t.Ta.length>0&&(he(Os,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,o,r,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,r,l){const c=Date.now()+o,h=new sm(e,n,c,r,l);return h.start(o),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(t,e){if(oo("AsyncQueue",`${e}: ${t}`),aa(t))return new de(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{static emptySet(e){return new Yr(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||ve.comparator(n.key,o.key):(n,o)=>ve.comparator(n.key,o.key),this.keyedMap=El(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Yr;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.ga=new ft(ve.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class ea{constructor(e,n,o,r,l,c,h,y,m){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(e,n,o,r,l){const c=[];return n.forEach((h=>{c.push({type:0,doc:h})})),new ea(e,n,Yr.emptySet(n),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==o[r].type||!n[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class zP{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const r=Re(n),l=r.queries;r.queries=CT(),l.forEach(((c,h)=>{for(const y of h.ba)y.onError(o)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function CT(){return new Gs((t=>SS(t)),_f)}async function YP(t,e){const n=Re(t);let o=3;const r=e.query;let l=n.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new HP,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await n.onListen(r,!0);break;case 1:l.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(c){const h=rm(c,`Initialization of query '${Lr(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,l),l.ba.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&am(n)}async function JP(t,e){const n=Re(t),o=e.query;let r=3;const l=n.queries.get(o);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function KP(t,e){const n=Re(t);let o=!1;for(const r of e){const l=r.query,c=n.queries.get(l);if(c){for(const h of c.ba)h.Fa(r)&&(o=!0);c.wa=r}}o&&am(n)}function QP(t,e,n){const o=Re(t),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(n);o.queries.delete(e)}function am(t){t.Ca.forEach((e=>{e.next()}))}var Ap,IT;(IT=Ap||(Ap={})).Ma="default",IT.Cache="cache";class $P{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new ea(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.key=e}}class sA{constructor(e){this.key=e}}class XP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Le(),this.mutatedKeys=Le(),this.eu=AS(e),this.tu=new Yr(this.eu)}get nu(){return this.Za}ru(e,n){const o=n?n.iu:new AT,r=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,E)=>{const S=r.get(v),R=vf(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),G=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;S&&R?S.data.isEqual(R.data)?U!==G&&(o.track({type:3,doc:R}),k=!0):this.su(S,R)||(o.track({type:2,doc:R}),k=!0,(y&&this.eu(R,y)>0||m&&this.eu(R,m)<0)&&(h=!0)):!S&&R?(o.track({type:0,doc:R}),k=!0):S&&!R&&(o.track({type:1,doc:S}),k=!0,(y||m)&&(h=!0)),k&&(R?(c=c.add(R),l=G?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:c,iu:o,Ss:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(R,U){const G=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:k})}};return G(R)-G(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(o),r=r??!1;const h=n&&!r?this._u():[],y=this.Ya.size===0&&this.current&&!r?1:0,m=y!==this.Xa;return this.Xa=y,c.length!==0||m?{snapshot:new ea(this.query,e.tu,l,c,e.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Le(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const n=[];return e.forEach((o=>{this.Ya.has(o)||n.push(new sA(o))})),this.Ya.forEach((o=>{e.has(o)||n.push(new oA(o))})),n}cu(e){this.Za=e.ks,this.Ya=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const lm="SyncEngine";class WP{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class ZP{constructor(e){this.key=e,this.hu=!1}}class jP{constructor(e,n,o,r,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Gs((h=>SS(h)),_f),this.Iu=new Map,this.Eu=new Set,this.Ru=new ft(ve.comparator),this.Au=new Map,this.Vu=new Wp,this.du={},this.mu=new Map,this.fu=jr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eU(t,e,n=!0){const o=fA(t);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await rA(o,e,n,!0),r}async function tU(t,e){const n=fA(t);await rA(n,e,!0,!1)}async function rA(t,e,n,o){const r=await yP(t.localStore,bi(e)),l=r.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let h;return o&&(h=await nU(t,e,l,c==="current",r.resumeToken)),t.isPrimaryClient&&n&&ZS(t.remoteStore,r),h}async function nU(t,e,n,o,r){t.pu=(E,S,R)=>(async function(G,k,Q,ie){let Z=k.view.ru(Q);Z.Ss&&(Z=await yT(G.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,Z))));const se=ie&&ie.targetChanges.get(k.targetId),fe=ie&&ie.targetMismatches.get(k.targetId)!=null,ue=k.view.applyChanges(Z,G.isPrimaryClient,se,fe);return wT(G,k.targetId,ue.au),ue.snapshot})(t,E,S,R);const l=await yT(t.localStore,e,!0),c=new XP(e,l.ks),h=c.ru(l.documents),y=Gl.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",r),m=c.applyChanges(h,t.isPrimaryClient,y);wT(t,n,m.au);const v=new WP(e,n,c);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function iU(t,e,n){const o=Re(t),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((c=>!_f(c,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Ep(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),n&&tm(o.remoteStore,r.targetId),Cp(o,r.targetId)})).catch(ra)):(Cp(o,r.targetId),await Ep(o.localStore,r.targetId,!0))}async function oU(t,e){const n=Re(t),o=n.Tu.get(e),r=n.Iu.get(o.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),tm(n.remoteStore,o.targetId))}async function sU(t,e,n){const o=dU(t);try{const r=await(function(c,h){const y=Re(c),m=at.now(),v=h.reduce(((R,U)=>R.add(U.key)),Le());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let U=so(),G=Le();return y.xs.getEntries(R,v).next((k=>{U=k,U.forEach(((Q,ie)=>{ie.isValidDocument()||(G=G.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(R,U))).next((k=>{E=k;const Q=[];for(const ie of h){const Z=gV(ie,E.get(ie.key).overlayedDocument);Z!=null&&Q.push(new Bs(ie.key,Z,hS(Z.value.mapValue),to.exists(!0)))}return y.mutationQueue.addMutationBatch(R,m,Q,h)})).next((k=>{S=k;const Q=k.applyToLocalDocumentSet(E,G);return y.documentOverlayCache.saveOverlays(R,k.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:IS(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(c,h,y){let m=c.du[c.currentUser.toKey()];m||(m=new ft(Ue)),m=m.insert(h,y),c.du[c.currentUser.toKey()]=m})(o,r.batchId,n),await Hl(o,r.changes),await If(o.remoteStore)}catch(r){const l=rm(r,"Failed to persist write");n.reject(l)}}async function aA(t,e){const n=Re(t);try{const o=await pP(n.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=n.Au.get(l);c&&(Qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Qe(c.hu,14607):r.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await Hl(n,o,e)}catch(o){await ra(o)}}function RT(t,e,n){const o=Re(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const r=[];o.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const y=Re(c);y.onlineState=h;let m=!1;y.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(h)&&(m=!0)})),m&&am(y)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function rU(t,e,n){const o=Re(t);o.sharedClientState.updateQueryState(e,"rejected",n);const r=o.Au.get(e),l=r&&r.key;if(l){let c=new ft(ve.comparator);c=c.insert(l,tn.newNoDocument(l,Ce.min()));const h=Le().add(l),y=new Sf(Ce.min(),new Map,new ft(Ue),c,h);await aA(o,y),o.Ru=o.Ru.remove(l),o.Au.delete(e),um(o)}else await Ep(o.localStore,e,!1).then((()=>Cp(o,e,n))).catch(ra)}async function aU(t,e){const n=Re(t),o=e.batch.batchId;try{const r=await hP(n.localStore,e);uA(n,o,null),lA(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Hl(n,r)}catch(r){await ra(r)}}async function lU(t,e,n){const o=Re(t);try{const r=await(function(c,h){const y=Re(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return y.mutationQueue.lookupMutationBatch(m,h).next((E=>(Qe(E!==null,37113),v=E.keys(),y.mutationQueue.removeMutationBatch(m,E)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>y.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);uA(o,e,n),lA(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Hl(o,r)}catch(r){await ra(r)}}function lA(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function uA(t,e,n){const o=Re(t);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(n?l.reject(n):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function Cp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Iu.get(e))t.Tu.delete(o),n&&t.Pu.yu(o,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((o=>{t.Vu.containsKey(o)||cA(t,o)}))}function cA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(tm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),um(t))}function wT(t,e,n){for(const o of n)o instanceof oA?(t.Vu.addReference(o.key,e),uU(t,o)):o instanceof sA?(he(lm,"Document no longer in limbo: "+o.key),t.Vu.removeReference(o.key,e),t.Vu.containsKey(o.key)||cA(t,o.key)):Ee(19791,{wu:o})}function uU(t,e){const n=e.key,o=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(o)||(he(lm,"New document in limbo: "+n),t.Eu.add(o),um(t))}function um(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(ot.fromString(e)),o=t.fu.next();t.Au.set(o,new ZP(n)),t.Ru=t.Ru.insert(n,o),ZS(t.remoteStore,new Ho(bi(TS(n.path)),o,"TargetPurposeLimboResolution",mf.ce))}}async function Hl(t,e,n){const o=Re(t),r=[],l=[],c=[];o.Tu.isEmpty()||(o.Tu.forEach(((h,y)=>{c.push(o.pu(y,e,n).then((m=>{var v;if((m||n)&&o.isPrimaryClient){const E=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:v.current;o.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(m){r.push(m);const E=jp.Es(y.targetId,m);l.push(E)}})))})),await Promise.all(c),o.Pu.J_(r),await(async function(y,m){const v=Re(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(m,(S=>oe.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>oe.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!aa(E))throw E;he(em,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const R=v.vs.get(S),U=R.snapshotVersion,G=R.withLastLimboFreeSnapshotVersion(U);v.vs=v.vs.insert(S,G)}}})(o.localStore,l))}async function cU(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){he(lm,"User change. New user:",e.toKey());const o=await QS(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((y=>{y.reject(new de(ne.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Hl(n,o.Ns)}}function fU(t,e){const n=Re(t),o=n.Au.get(e);if(o&&o.hu)return Le().add(o.key);{let r=Le();const l=n.Iu.get(e);if(!l)return r;for(const c of l){const h=n.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function fA(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rU.bind(null,e),e.Pu.J_=KP.bind(null,e.eventManager),e.Pu.yu=QP.bind(null,e.eventManager),e}function dU(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lU.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dP(this.persistence,new uP,e.initialUser,this.serializer)}Cu(e){return new KS(Zp.Vi,this.serializer)}Du(e){return new vP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class hU extends rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof of,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new QV(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new KS((o=>of.Vi(o,n)),this.serializer)}}class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>RT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=cU.bind(null,this.syncEngine),await BP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zP})()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),o=CP(e.databaseInfo);return NP(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,r,l,c,h){return new bP(o,r,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>RT(this.syncEngine,n,0)),(function(){return TT.v()?new TT:new TP})())}createSyncEngine(e,n){return(function(r,l,c,h,y,m,v){const E=new jP(r,l,c,h,y,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const l=Re(r);he(Os,"RemoteStore shutting down."),l.Ea.add(5),await Bl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class mU{constructor(e,n,o,r,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this._databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{he(es,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(he(es,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=rm(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Bh(t,e){t.asyncQueue.verifyOperationInProgress(),he(es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async r=>{o.isEqual(r)||(await QS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function MT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gU(t);he(es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>ST(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,r)=>ST(e.remoteStore,r))),t._onlineComponents=e}async function gU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(es,"Using user provided OfflineComponentProvider");try{await Bh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),await Bh(t,new rf)}}else he(es,"Using default OfflineComponentProvider"),await Bh(t,new hU(void 0));return t._offlineComponents}async function dA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(es,"Using user provided OnlineComponentProvider"),await MT(t,t._uninitializedComponentsProvider._online)):(he(es,"Using default OnlineComponentProvider"),await MT(t,new Ip))),t._onlineComponents}function yU(t){return dA(t).then((e=>e.syncEngine))}async function _U(t){const e=await dA(t),n=e.eventManager;return n.onListen=eU.bind(null,e.syncEngine),n.onUnlisten=iU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oU.bind(null,e.syncEngine),n}function vU(t,e,n={}){const o=new Ko;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,y,m){const v=new pU({next:S=>{v.Nu(),c.enqueueAndForget((()=>JP(l,E))),S.fromCache&&y.source==="server"?m.reject(new de(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new $P(h,v,{includeMetadataChanges:!0,Ka:!0});return YP(l,E)})(await _U(t),t.asyncQueue,e,n,o))),o.promise}function TU(t,e){const n=new Ko;return t.asyncQueue.enqueueAndForget((async()=>sU(await yU(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="ComponentProvider",NT=new Map;function SU(t,e,n,o,r){return new k2(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hA(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firestore.googleapis.com",DT=!0;class bT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pA,this.ssl=DT}else this.host=e.host,this.ssl=e.ssl??DT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JV)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,n,o,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new g2;switch(o.type){case"firstParty":return new T2(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=NT.get(n);o&&(he(EU,"Removing Datastore"),NT.delete(n),o.terminate())})(this),Promise.resolve()}}function AU(t,e,n,o={}){var m;t=$c(t,Rf);const r=Op(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;r&&(Bb(`https://${h}`),Jb("Firestore",!0)),l.host!==pA&&l.host!==h&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:h,ssl:r,emulatorOptions:o};if(!Jc(y,c)&&(t._setSettings(y),o.mockUserToken)){let v,E;if(typeof o.mockUserToken=="string")v=o.mockUserToken,E=en.MOCK_USER;else{v=Hb(o.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new en(S)}t._authCredentials=new y2(new tS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Gt{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(ql(n,Gt._jsonSchema))return new Gt(e,o||null,new ve(ot.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:bt("string",Gt._jsonSchemaVersion),referencePath:bt("string")};class Qo extends ns{constructor(e,n,o){super(e,n,TS(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function xT(t,e,...n){if(t=Qr(t),nS("collection","path",e),t instanceof Rf){const o=ot.fromString(e,...n);return z0(o),new Qo(t,null,o)}{if(!(t instanceof Gt||t instanceof Qo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(ot.fromString(e,...n));return z0(o),new Qo(t.firestore,null,o)}}function CU(t,e,...n){if(t=Qr(t),arguments.length===1&&(e=Gp.newId()),nS("doc","path",e),t instanceof Rf){const o=ot.fromString(e,...n);return H0(o),new Gt(t,null,new ve(o))}{if(!(t instanceof Gt||t instanceof Qo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(ot.fromString(e,...n));return H0(o),new Gt(t.firestore,t instanceof Qo?t.converter:null,new ve(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class PT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XS(this,"async_queue_retry"),this._c=()=>{const o=Gh();o&&he(VT,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=Gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ko;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;he(VT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",UT(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=sm.createAndSchedule(this,e,n,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ee(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class cm extends Rf{constructor(e,n,o,r){super(e,n,o,r),this.type="firestore",this._queue=new PT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PT(e),this._firestoreClient=void 0,await e}}}function IU(t,e){const n=typeof t=="object"?t:n2(),o=typeof t=="string"?t:Wc,r=Wx(n,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=Fb("firestore");l&&AU(r,...l)}return r}function mA(t){if(t._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RU(t),t._firestoreClient}function RU(t){var o,r,l,c;const e=t._freezeSettings(),n=SU(t._databaseId,((o=t._app)==null?void 0:o.options.appId)||"",t._persistenceKey,(r=t._app)==null?void 0:r.options.apiKey,e);t._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(y){const m=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(m),_online:m}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Wt.fromBase64String(e))}catch(n){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ql(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:bt("string",Gn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(ql(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:bt("string",Vi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ql(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new si(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:bt("string",si._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=/^__.*__$/;class MU{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}function yA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:t})}}class dm{constructor(e,n,o,r,l,c){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const n=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:n,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var r;const n=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:n,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return af(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yA(this.dataSource)&&wU.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class NU{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Af(e)}createContext(e,n,o,r=!1){return new dm({dataSource:e,methodName:n,targetDoc:o,path:Xt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _A(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new NU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DU(t,e,n,o,r,l={}){const c=t.createContext(l.merge||l.mergeFields?2:0,e,n,r);EA("Data must be an object, but it was:",c,o);const h=vA(o,c);let y,m;if(l.merge)y=new ni(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=zl(e,E,n);if(!c.contains(S))throw new de(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);PU(v,S)||v.push(S)}y=new ni(v),m=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,m=c.fieldTransforms;return new MU(new Fn(h),y,m)}class hm extends fm{_toFieldTransform(e){return new dV(e.path,new Ll)}isEqual(e){return e instanceof hm}}function bU(t,e,n,o=!1){return pm(n,t.createContext(o?4:3,e))}function pm(t,e){if(TA(t=Qr(t)))return EA("Unsupported field value:",e,t),vA(t,e);if(t instanceof fm)return(function(o,r){if(!yA(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const h of o){let y=pm(h,r.childContextForArray(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(t,e)}return(function(o,r){if((o=Qr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return uV(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=at.fromDate(o);return{timestampValue:nf(r.serializer,l)}}if(o instanceof at){const l=new at(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:nf(r.serializer,l)}}if(o instanceof Vi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gn)return{bytesValue:OS(r.serializer,o._byteString)};if(o instanceof Gt){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof si)return(function(c,h){const y=c instanceof si?c.toArray():c;return{mapValue:{fields:{[fS]:{stringValue:dS},[Zc]:{arrayValue:{values:y.map((v=>{if(typeof v!="number")throw h.createError("VectorValues must only contain numeric values.");return Kp(h.serializer,v)}))}}}}}})(o,r);if(YS(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${pf(o)}`)})(t,e)}function vA(t,e){const n={};return sS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,((o,r)=>{const l=pm(r,e.childContextForField(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function TA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Vi||t instanceof Gn||t instanceof Gt||t instanceof fm||t instanceof si||YS(t))}function EA(t,e,n){if(!TA(n)||!iS(n)){const o=pf(n);throw o==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+o)}}function zl(t,e,n){if((e=Qr(e))instanceof gA)return e._internalPath;if(typeof e=="string")return VU(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}const xU=new RegExp("[~\\*/\\[\\]]");function VU(t,e,n){if(e.search(xU)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gA(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new de(ne.INVALID_ARGUMENT,h+t+y)}function PU(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{convertValue(e,n="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Fs(e,((r,l)=>{o[r]=this.convertValue(l,n)})),o}convertVectorValue(e){var o,r,l;const n=(l=(r=(o=e.fields)==null?void 0:o[Zc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new si(n)}convertGeoPoint(e){return new Vi(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=yf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const n=Xo(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=ot.fromString(e);Qe(zS(o),9688,{name:e});const r=new Vl(o.get(1),o.get(3)),l=new ve(o.popFirst(5));return r.isEqual(n)||oo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU extends UU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function kU(){return new hm("serverTimestamp")}const LT="@firebase/firestore",kT="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,o,r,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(zl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OU extends SA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mm{}class gm extends mm{}function FU(t,e,...n){let o=[];e instanceof mm&&o.push(e),o=o.concat(n),(function(l){const c=l.filter((y=>y instanceof ym)).length,h=l.filter((y=>y instanceof wf)).length;if(c>1||c>0&&h>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)t=r._apply(t);return t}class wf extends gm{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new wf(e,n,o)}_apply(e){const n=this._parse(e);return AA(e._query,n),new ns(e.firestore,e.converter,gp(e._query,n))}_parse(e){const n=_A(e.firestore);return(function(l,c,h,y,m,v,E){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){qT(E,v);const U=[];for(const G of E)U.push(OT(y,l,G));S={arrayValue:{values:U}}}else S=OT(y,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||qT(E,v),S=bU(h,c,E,v==="in"||v==="not-in");return Dt.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GU(t,e,n){const o=e,r=zl("where",t);return wf._create(r,o,n)}class ym extends mm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ym(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:ri.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,l){let c=r;const h=l.getFlattenedFilters();for(const y of h)AA(c,y),c=gp(c,y)})(e._query,n),new ns(e.firestore,e.converter,gp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _m extends gm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _m(e,n)}_apply(e){const n=(function(r,l,c){if(r.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(l,c)})(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,tV(e._query,n))}}function BU(t,e="asc"){const n=e,o=zl("orderBy",t);return _m._create(o,n)}class vm extends gm{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new vm(e,n,o)}_apply(e){return new ns(e.firestore,e.converter,ef(e._query,this._limit,this._limitType))}}function HU(t){return vm._create("limit",t,"F")}function OT(t,e,n){if(typeof(n=Qr(n))=="string"){if(n==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ES(e)&&n.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(ot.fromString(n));if(!ve.isDocumentKey(o))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Z0(t,new ve(o))}if(n instanceof Gt)return Z0(t,n._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(n)}.`)}function qT(t,e){if(!Array.isArray(t)||t.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AA(t,e){const n=(function(r,l){for(const c of r)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function zU(t,e,n){let o;return o=t?t.toFirestore(e):e,o}class Dc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jr extends SA{constructor(e,n,o,r,l,c){super(e,n,o,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(zl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jr._jsonSchema={type:bt("string",Jr._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Oc extends Jr{data(e={}){return super.data(e)}}class Kr{constructor(e,n,o,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Dc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Oc(this._firestore,this._userDataWriter,o.key,o,new Dc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const y=new Oc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const y=new Oc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:YU(h.type),doc:y,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:bt("string",Kr._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};function JU(t){t=$c(t,ns);const e=$c(t.firestore,cm),n=mA(e),o=new LU(e);return qU(t._query),vU(n,t._query).then((r=>new Kr(e,o,t,r)))}function KU(t,e){const n=$c(t.firestore,cm),o=CU(t),r=zU(t.converter,e),l=_A(t.firestore);return QU(n,[DU(l,"addDoc",o._key,r,t.converter!==null,{}).toMutation(o._key,to.exists(!1))]).then((()=>o))}function QU(t,e){const n=mA(t);return TU(n,e)}(function(e,n=!0){m2(t2),Qc(new Nl("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),h=new cm(new _2(o.getProvider("auth-internal")),new E2(c,o.getProvider("app-check-internal")),O2(c,r),c);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Hr(LT,kT,e),Hr(LT,kT,"esm2020")})();const $U={apiKey:"AIzaSyAZhCiueUudnHjS6TjU771OP0jkIoWpJgQ",authDomain:"php-firebase-8899.firebaseapp.com",projectId:"php-firebase-8899",storageBucket:"php-firebase-8899.firebasestorage.app",messagingSenderId:"859105024090",appId:"1:859105024090:web:47d80be90b2c1b6aa96063"},XU=YE($U),FT=IU(XU),Hh={async saveToGlobalArchive(t,e){try{const n=xT(FT,"sparks"),o=e.map(r=>r.isFromHistory?Promise.resolve():KU(n,{title:r.title,description:r.description,category:r.category,uniquePoint:r.uniquePoint,moodTag:t.toLowerCase(),timestamp:Date.now(),isFromHistory:!0,createdAt:kU()}));await Promise.all(o),console.log(`[Firebase] Successfully archived fresh sparks for mood: ${t}`)}catch(n){console.error("[Firebase] Error saving to global archive:",n)}},async getFromGlobalArchive(t){try{const e=xT(FT,"sparks"),n=FU(e,GU("moodTag","==",t.toLowerCase()),BU("createdAt","desc"),HU(20));return(await JU(n)).docs.map(l=>{const c=l.data();return{id:l.id,title:c.title,description:c.description,category:c.category,uniquePoint:c.uniquePoint,timestamp:c.timestamp||Date.now(),isFromHistory:!0}}).sort(()=>.5-Math.random()).slice(0,6)}catch(e){return console.error("[Firebase] Error fetching from archive:",e),this.getLocalSimulation(t)}},getLocalSimulation(t){const e=localStorage.getItem("find-your-spark-global-cache");return(e?JSON.parse(e):[]).filter(o=>o.isFromHistory).sort(()=>.5-Math.random()).slice(0,6)},syncToGlobalSimulation(t){const e=localStorage.getItem("find-your-spark-global-cache"),n=e?JSON.parse(e):[],o=[...t.map(r=>({...r,isFromHistory:!0})),...n].slice(0,100);localStorage.setItem("find-your-spark-global-cache",JSON.stringify(o))}},CA=qt.createContext(void 0),WU=({children:t})=>{const[e,n]=qt.useState("dark");qt.useEffect(()=>{const r=localStorage.getItem("theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches;n(r||(l?"dark":"light"))},[]),qt.useEffect(()=>{const r=document.documentElement;e==="dark"?r.classList.add("dark"):r.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const o=()=>{n(r=>r==="light"?"dark":"light")};return j.jsx(CA.Provider,{value:{theme:e,toggleTheme:o},children:t})},ZU=()=>{const t=qt.useContext(CA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},jU=t=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.364l-1.591 1.591M21 12h-2.25m-.364 6.364l-1.591-1.591M12 18.75V21m-4.95-4.95l-1.591 1.591M5.25 12H3m4.25-4.95l-1.59-1.59M12 12a4.5 4.5 0 00-4.5 4.5v.75A.75.75 0 017.5 18h9a.75.75 0 01.75-.75v-.75a4.5 4.5 0 00-4.5-4.5z"})}),e4=t=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),t4=()=>{const{theme:t,toggleTheme:e}=ZU();return j.jsx("button",{onClick:e,className:"p-2 rounded-full bg-slate-200 dark:bg-gray-800 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-gray-700 transition-colors duration-300","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?j.jsx(e4,{className:"w-6 h-6"}):j.jsx(jU,{className:"w-6 h-6"})})},n4=({onTitleClick:t,isMoodSelected:e,language:n,onLanguageChange:o,t:r})=>j.jsxs("header",{className:"w-full text-center py-6 md:py-10 relative",children:[j.jsxs("div",{className:`absolute top-6 ${n==="ar"?"left-4 md:left-8":"right-4 md:right-8"} flex items-center gap-2 md:gap-3`,children:[!e&&j.jsxs("select",{value:n,onChange:l=>o(l.target.value),className:"bg-slate-100 dark:bg-gray-800 border-none rounded-lg px-2 py-1 text-xs font-bold text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-cyan-500 transition-all cursor-pointer animate-fade-in",children:[j.jsx("option",{value:"en",children:"EN"}),j.jsx("option",{value:"es",children:"ES"}),j.jsx("option",{value:"fr",children:"FR"}),j.jsx("option",{value:"de",children:"DE"}),j.jsx("option",{value:"ar",children:"AR"}),j.jsx("option",{value:"fr_ca",children:"CA"})]}),j.jsx(t4,{})]}),j.jsx("h1",{onClick:t,className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500 cursor-pointer transition-transform hover:scale-[1.02] active:scale-95 inline-block",children:r("app_title")}),!e&&j.jsx("p",{className:"mt-3 text-base md:text-lg text-slate-500 dark:text-slate-400 max-w-lg mx-auto px-4",children:r("app_tagline")})]}),IA=({moodName:t,...e})=>{switch(t.toLowerCase()){case"happy":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.5 9.5a1 1 0 100-2 1 1 0 000 2zM15.5 9.5a1 1 0 100-2 1 1 0 000 2z",fill:"currentColor"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 14.5c-.5 1-1.5 2-4 2s-3.5-1-4-2"})]});case"sad":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 110-18 9 9 0 010 18z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15a6 6 0 016 0"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 10a.5.5 0 10-1 0 .5.5 0 001 0zM15 10a.5.5 0 10-1 0 .5.5 0 001 0z",fill:"currentColor"})]});case"energetic":return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:j.jsx("path",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 2.25L4.5 12h6.75l-1.5 8.25L20.25 12h-7.5l2.25-9.75z"})});case"relaxed":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 12c2.5-3.5 7.5-3.5 10 0"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 15c2.5 3.5 7.5 3.5 10 0"})]});case"stressed":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a8.962 8.962 0 01-5.657-2.343m0 0a8.962 8.962 0 010-11.314m0 0a8.962 8.962 0 0111.313 0m0 0a8.962 8.962 0 010 11.314m0 0A8.962 8.962 0 0112 21z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 17.25L6 19.5m12-1.5L18 17.25M6 4.5l2.25 2.25M18 4.5l-2.25 2.25"})]});case"creative":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.5 14.25c0 .414.336.75.75.75h3.5a.75.75 0 00.75-.75V12a2.5 2.5 0 00-5 0v2.25z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75h7.5"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2.25c-3.99 0-7.25 3.26-7.25 7.25 0 2.449 1.214 4.636 3.085 5.955V18a.75.75 0 00.75.75h6.83a.75.75 0 00.75-.75v-2.545a7.22 7.22 0 003.085-5.955C19.25 5.51 15.99 2.25 12 2.25z"}),j.jsx("path",{fill:"currentColor",d:"M12 6.75a.75.75 0 000 1.5.75.75 0 000-1.5z"}),j.jsx("path",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5h1.5l.75 1.5h-3l.75-1.5z"})]});default:return null}},i4={yellow:"from-yellow-400 to-yellow-500 text-yellow-900 hover:shadow-yellow-500/20 dark:from-yellow-300 dark:to-yellow-500 dark:text-white dark:hover:shadow-yellow-400/30",blue:"from-sky-400 to-blue-500 text-blue-900 hover:shadow-sky-500/20 dark:from-sky-400 dark:to-blue-600 dark:text-white dark:hover:shadow-sky-400/30",orange:"from-orange-400 to-red-500 text-orange-900 hover:shadow-orange-500/20 dark:from-orange-400 dark:to-red-500 dark:text-white dark:hover:shadow-orange-400/30",green:"from-teal-400 to-green-500 text-teal-900 hover:shadow-teal-500/20 dark:from-teal-300 dark:to-green-500 dark:text-white dark:hover:shadow-teal-400/30",red:"from-pink-500 to-rose-500 text-rose-900 hover:shadow-pink-500/20 dark:from-pink-500 dark:to-rose-500 dark:text-white dark:hover:shadow-pink-400/30",purple:"from-purple-500 to-indigo-600 text-purple-900 hover:shadow-purple-500/20 dark:from-purple-500 dark:to-indigo-600 dark:text-white dark:hover:shadow-purple-400/30"},o4=({moods:t,onSelectMood:e,t:n})=>j.jsxs("div",{className:"w-full",children:[j.jsx("h2",{className:"text-3xl font-semibold mb-8 text-slate-800 dark:text-slate-200",children:n("how_feeling")}),j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>j.jsxs("button",{onClick:()=>e(o),className:`group p-6 rounded-xl bg-gradient-to-br ${i4[o.color]} text-left flex flex-col justify-between transform transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:brightness-110 focus:outline-none focus:ring-4 focus:ring-opacity-50 focus:ring-cyan-500 dark:focus:ring-cyan-300`,children:[j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsx(IA,{moodName:o.id,className:"w-16 h-16 transition-transform duration-300 group-hover:scale-110"}),j.jsx("span",{className:"text-xl font-bold opacity-0 group-hover:opacity-100 transform group-hover:translate-x-0 -translate-x-4 transition-all duration-300",children:""})]}),j.jsxs("div",{className:"transition-transform duration-300 group-hover:scale-105 origin-left",children:[j.jsx("h3",{className:"text-2xl font-bold mt-4",children:n(o.nameKey)}),j.jsx("p",{className:"opacity-90",children:n(o.descKey)})]})]},o.id))})]}),GT="find-your-spark-ideas-v1",BT="find-your-spark-usage-v1",HT="find-your-spark-favorites-v1",s4=3,Bo={saveIdeas:(t,e)=>{const n=Bo.getAllSavedIdeas(),o=n[t]||[],r=e.filter(l=>!o.some(c=>c.title===l.title));n[t]=[...o,...r],localStorage.setItem(GT,JSON.stringify(n))},getAllSavedIdeas:()=>{const t=localStorage.getItem(GT);return t?JSON.parse(t):{}},getIdeasByMood:t=>(Bo.getAllSavedIdeas()[t]||[]).map(n=>({...n,isFromHistory:!0})),toggleFavorite:t=>{const e=Bo.getFavorites(),n=e.findIndex(o=>o.id===t.id||o.title===t.title);n>-1?e.splice(n,1):e.unshift({...t,isFromHistory:!0}),localStorage.setItem(HT,JSON.stringify(e)),window.dispatchEvent(new Event("favoritesChanged"))},isFavorite:(t,e)=>Bo.getFavorites().some(o=>o.id===t||o.title===e),getFavorites:()=>{const t=localStorage.getItem(HT);return t?JSON.parse(t):[]},getDailyUsage:()=>{const t=new Date().toISOString().split("T")[0],e=localStorage.getItem(BT),n=e?JSON.parse(e):{date:t,count:0};return n.date!==t?{date:t,count:0}:n},incrementDailyUsage:()=>{const t=Bo.getDailyUsage();t.count+=1,localStorage.setItem(BT,JSON.stringify(t))},isLimitReached:()=>Bo.getDailyUsage().count>=s4},r4={[eo.Activity]:"bg-sky-100 text-sky-800 dark:bg-sky-500/20 dark:text-sky-300",[eo.Mindfulness]:"bg-teal-100 text-teal-800 dark:bg-teal-500/20 dark:text-teal-300",[eo.Social]:"bg-amber-100 text-amber-800 dark:bg-amber-500/20 dark:text-amber-300",[eo.Creative]:"bg-violet-100 text-violet-800 dark:bg-violet-500/20 dark:text-violet-300",[eo.Inspirational]:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300",[eo.Music]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-500/20 dark:text-indigo-300"},a4=({idea:t,t:e})=>{const[n,o]=qt.useState(!1),[r,l]=qt.useState(!1);qt.useEffect(()=>{l(Bo.isFavorite(t.id,t.title))},[t.id,t.title]);const c=()=>{if(n)return;const y=`${t.title}

${t.description}

Found via Find Your Spark`;navigator.clipboard.writeText(y).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},h=()=>{Bo.toggleFavorite(t),l(!r)};return j.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-7 flex flex-col text-left h-full border ${t.isFromHistory?"border-indigo-100 dark:border-indigo-900/40 shadow-indigo-500/5":"border-slate-100 dark:border-gray-800"} hover:border-cyan-500/50 dark:hover:border-cyan-400/50 transition-all duration-300 transform hover:-translate-y-1 relative group`,children:[j.jsx("div",{className:`absolute top-0 left-7 -translate-y-1/2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm ${t.isFromHistory?"bg-indigo-500 text-white":"bg-cyan-500 text-white"}`,children:t.isFromHistory?e("community_favorite"):e("live_ai_spark")}),j.jsx("button",{onClick:h,className:`absolute top-4 right-4 p-2 rounded-full transition-all duration-300 z-10 ${r?"bg-rose-50 text-rose-500 dark:bg-rose-500/20 dark:text-rose-400 scale-110 shadow-sm":"bg-slate-50 text-slate-300 hover:text-rose-400 dark:bg-gray-800 dark:text-gray-600 dark:hover:text-rose-400"}`,"aria-label":r?"Remove from favorites":"Save to favorites",children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:r?"currentColor":"none",stroke:"currentColor",strokeWidth:r?"0":"2",children:j.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),j.jsxs("div",{className:"flex-grow pt-4",children:[j.jsx("div",{className:"flex justify-between items-start mb-3 pr-8",children:j.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight",children:t.title})}),j.jsx("span",{className:`inline-block px-2.5 py-1 text-[10px] uppercase tracking-wider font-extrabold rounded-lg mb-4 ${r4[t.category]}`,children:e(`cat_${t.category}`)}),j.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-sm md:text-base leading-relaxed line-clamp-4",children:t.description})]}),j.jsxs("div",{className:"mt-auto pt-5 border-t border-slate-50 dark:border-gray-800/50 flex justify-between items-center",children:[j.jsxs("div",{className:"flex flex-col gap-1",children:[j.jsx("p",{className:"text-[10px] font-black text-cyan-600 dark:text-cyan-400 uppercase tracking-widest",children:e("the_spark")}),j.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic font-medium",children:['"',t.uniquePoint,'"']})]}),j.jsx("button",{onClick:c,className:`p-2.5 rounded-xl transition-all duration-200 ${n?"bg-green-100 text-green-600 dark:bg-green-500/20 dark:text-green-400":"text-slate-400 hover:bg-slate-100 dark:text-gray-500 dark:hover:bg-gray-800"}`,title:e("copy_spark"),children:n?j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:j.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})},l4=({ideas:t,mood:e,t:n})=>t.length===0?null:j.jsxs("div",{className:"w-full flex flex-col items-center animate-fade-in",children:[j.jsxs("h2",{className:"text-2xl md:text-3xl font-semibold mb-2 text-center flex items-center justify-center flex-wrap px-4",children:[n("custom_sparks",{mood:n(e.nameKey).toLowerCase()}),j.jsx(IA,{moodName:e.id,className:"w-8 h-8 ml-2 hidden sm:block"})]}),j.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 text-center px-4",children:n("personalized_inspiration")}),j.jsx("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-4",children:t.map((o,r)=>j.jsx(a4,{idea:o,t:n},`${o.title}-${r}`))})]}),u4=({message:t})=>j.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 my-8",children:[j.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-cyan-500 dark:border-cyan-400"}),j.jsx("p",{className:"text-cyan-600 dark:text-cyan-300 text-lg",children:t})]}),c4=()=>j.jsx("footer",{className:"w-full text-center p-4 mt-8",children:j.jsx("p",{className:"text-slate-400 dark:text-gray-600 text-sm",children:"Powered By Gamesmanship"})}),f4=t=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.456-2.456L11.25 18l1.938-.648a3.375 3.375 0 002.456-2.456L16.25 13l.648 1.938a3.375 3.375 0 002.456 2.456L21.25 18l-1.938.648a3.375 3.375 0 00-2.456 2.456z"})}),d4=({onStart:t,t:e})=>j.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-4 h-full animate-fade-in min-h-[80vh]",children:[j.jsx("div",{className:"mb-8",children:j.jsx(f4,{className:"w-24 h-24 text-cyan-400"})}),j.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500 mb-4",children:e("app_title")}),j.jsx("p",{className:"max-w-md mx-auto text-lg text-slate-600 dark:text-slate-400 mb-10",children:e("intro_desc")}),j.jsx("button",{onClick:t,className:"font-bold text-lg py-4 px-10 rounded-full text-white bg-gradient-to-r from-cyan-500 to-fuchsia-500 hover:from-cyan-600 hover:to-fuchsia-600 transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-cyan-300 focus:ring-opacity-50 shadow-lg",children:e("get_started")})]}),h4=()=>{const[t,e]=qt.useState(()=>localStorage.getItem("app-language")||"en"),[n,o]=qt.useState(null),[r,l]=qt.useState([]),[c,h]=qt.useState(!1),[y,m]=qt.useState(null),[v,E]=qt.useState(!0),[S,R]=qt.useState(!1);qt.useEffect(()=>{localStorage.setItem("app-language",t),t==="ar"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.lang="ar"):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.lang=t.split("_")[0])},[t]);const U=(ie,Z)=>{let se=YT[t][ie]||ie;return Z&&Object.entries(Z).forEach(([fe,ue])=>{se=se.replace(`{${fe}}`,ue)}),se},G=qt.useCallback(async(ie,Z=!1)=>{o(ie),h(!0),m(null),l([]),R(!1);try{const se=await Nb(ie,t);await Hh.saveToGlobalArchive(ie.id,se),Hh.syncToGlobalSimulation(se),l(se),h(!1)}catch{const fe=await Hh.getFromGlobalArchive(ie.id);fe.length>0?(l(fe.map(ue=>({...ue,isFromHistory:!0}))),R(!0)):m("The AI is offline and the Community Archive is currently empty for this mood. Please try again later!"),h(!1)}},[t]),k=()=>{o(null),l([]),m(null),R(!1)},Q=()=>E(!1);return j.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-black text-slate-900 dark:text-white flex flex-col items-center transition-colors duration-300",children:[j.jsx("main",{className:"w-full max-w-5xl mx-auto flex-grow flex flex-col items-center px-4 md:px-6",children:v?j.jsx(d4,{onStart:Q,language:t,t:U}):j.jsxs(j.Fragment,{children:[j.jsx(n4,{onTitleClick:k,isMoodSelected:!!n,language:t,onLanguageChange:e,t:U}),c&&j.jsx(u4,{message:U("connecting_ai",{mood:U((n==null?void 0:n.nameKey)||"")})}),!c&&!n&&j.jsx(o4,{moods:mI,onSelectMood:G,language:t,t:U}),!c&&n&&j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"flex flex-col items-center mb-8",children:[j.jsxs("button",{onClick:k,className:"group mb-4 bg-white dark:bg-gray-900 shadow-sm border border-slate-200 dark:border-gray-800 hover:border-cyan-500 text-slate-600 dark:text-slate-300 font-bold py-2.5 px-6 rounded-full transition-all duration-300 flex items-center gap-2",children:[j.jsx("span",{className:t==="ar"?"rotate-180":"",children:""})," ",U("change_mood")]}),S&&j.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-200 px-6 py-3 rounded-2xl text-sm font-medium border border-indigo-200 dark:border-indigo-800 flex items-center gap-3 shadow-sm",children:[j.jsx("span",{className:"flex h-3 w-3 rounded-full bg-indigo-500 animate-pulse"}),U("community_archive")]})]}),r.length>0&&j.jsx(l4,{ideas:r,mood:n,language:t,t:U})]}),y&&!c&&j.jsxs("div",{className:"mt-8 max-w-lg mx-auto text-rose-800 bg-rose-50 dark:text-rose-200 dark:bg-rose-900/30 p-8 rounded-2xl shadow-xl border border-rose-100 dark:border-rose-900/50 text-center animate-fade-in",children:[j.jsx("p",{className:"text-3xl mb-4",children:""}),j.jsx("p",{className:"font-bold text-lg mb-2",children:"Service Note"}),j.jsx("p",{className:"text-sm opacity-90 leading-relaxed",children:y}),j.jsx("button",{onClick:k,className:"mt-6 bg-rose-500 text-white px-8 py-2 rounded-full font-bold hover:bg-rose-600 transition-colors",children:"Try Again"})]})]})}),j.jsx(c4,{})]})},RA=document.getElementById("root");if(!RA)throw new Error("Could not find root element to mount to");const p4=pI.createRoot(RA);p4.render(j.jsx(rI.StrictMode,{children:j.jsx(WU,{children:j.jsx(h4,{})})}));

