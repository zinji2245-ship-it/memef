(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function qC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _d={exports:{}},va={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function J1(){if(lS)return va;lS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,o,a){var l=null;if(a!==void 0&&(l=""+a),o.key!==void 0&&(l=""+o.key),"key"in o){a={};for(var c in o)c!=="key"&&(a[c]=o[c])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:l,ref:o!==void 0?o:null,props:a}}return va.Fragment=t,va.jsx=e,va.jsxs=e,va}var uS;function K1(){return uS||(uS=1,_d.exports=J1()),_d.exports}var O=K1(),Cd={exports:{}},Tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function j1(){if(cS)return Tt;cS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function _(I){return I===null||typeof I!="object"?null:(I=S&&I[S]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function w(I,K,nt){this.props=I,this.context=K,this.refs=b,this.updater=nt||x}w.prototype.isReactComponent={},w.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function D(){}D.prototype=w.prototype;function R(I,K,nt){this.props=I,this.context=K,this.refs=b,this.updater=nt||x}var k=R.prototype=new D;k.constructor=R,E(k,w.prototype),k.isPureReactComponent=!0;var L=Array.isArray;function Y(){}var G={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function $(I,K,nt){var rt=nt.ref;return{$$typeof:n,type:I,key:K,ref:rt!==void 0?rt:null,props:nt}}function et(I,K){return $(I.type,K,I.props)}function st(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function at(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(nt){return K[nt]})}var it=/\/+/g;function ct(I,K){return typeof I=="object"&&I!==null&&I.key!=null?at(""+I.key):K.toString(36)}function Et(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(Y,Y):(I.status="pending",I.then(function(K){I.status==="pending"&&(I.status="fulfilled",I.value=K)},function(K){I.status==="pending"&&(I.status="rejected",I.reason=K)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function H(I,K,nt,rt,mt){var yt=typeof I;(yt==="undefined"||yt==="boolean")&&(I=null);var wt=!1;if(I===null)wt=!0;else switch(yt){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(I.$$typeof){case n:case t:wt=!0;break;case p:return wt=I._init,H(wt(I._payload),K,nt,rt,mt)}}if(wt)return mt=mt(I),wt=rt===""?"."+ct(I,0):rt,L(mt)?(nt="",wt!=null&&(nt=wt.replace(it,"$&/")+"/"),H(mt,K,nt,"",function(Ve){return Ve})):mt!=null&&(st(mt)&&(mt=et(mt,nt+(mt.key==null||I&&I.key===mt.key?"":(""+mt.key).replace(it,"$&/")+"/")+wt)),K.push(mt)),1;wt=0;var ve=rt===""?".":rt+":";if(L(I))for(var Yt=0;Yt<I.length;Yt++)rt=I[Yt],yt=ve+ct(rt,Yt),wt+=H(rt,K,nt,yt,mt);else if(Yt=_(I),typeof Yt=="function")for(I=Yt.call(I),Yt=0;!(rt=I.next()).done;)rt=rt.value,yt=ve+ct(rt,Yt++),wt+=H(rt,K,nt,yt,mt);else if(yt==="object"){if(typeof I.then=="function")return H(Et(I),K,nt,rt,mt);throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return wt}function Q(I,K,nt){if(I==null)return I;var rt=[],mt=0;return H(I,rt,"","",function(yt){return K.call(nt,yt,mt++)}),rt}function tt(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(nt){(I._status===0||I._status===-1)&&(I._status=1,I._result=nt)},function(nt){(I._status===0||I._status===-1)&&(I._status=2,I._result=nt)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var gt=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},St={map:Q,forEach:function(I,K,nt){Q(I,function(){K.apply(this,arguments)},nt)},count:function(I){var K=0;return Q(I,function(){K++}),K},toArray:function(I){return Q(I,function(K){return K})||[]},only:function(I){if(!st(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Tt.Activity=v,Tt.Children=St,Tt.Component=w,Tt.Fragment=e,Tt.Profiler=o,Tt.PureComponent=R,Tt.StrictMode=i,Tt.Suspense=h,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return G.H.useMemoCache(I)}},Tt.cache=function(I){return function(){return I.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(I,K,nt){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var rt=E({},I.props),mt=I.key;if(K!=null)for(yt in K.key!==void 0&&(mt=""+K.key),K)!V.call(K,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&K.ref===void 0||(rt[yt]=K[yt]);var yt=arguments.length-2;if(yt===1)rt.children=nt;else if(1<yt){for(var wt=Array(yt),ve=0;ve<yt;ve++)wt[ve]=arguments[ve+2];rt.children=wt}return $(I.type,mt,rt)},Tt.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},Tt.createElement=function(I,K,nt){var rt,mt={},yt=null;if(K!=null)for(rt in K.key!==void 0&&(yt=""+K.key),K)V.call(K,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(mt[rt]=K[rt]);var wt=arguments.length-2;if(wt===1)mt.children=nt;else if(1<wt){for(var ve=Array(wt),Yt=0;Yt<wt;Yt++)ve[Yt]=arguments[Yt+2];mt.children=ve}if(I&&I.defaultProps)for(rt in wt=I.defaultProps,wt)mt[rt]===void 0&&(mt[rt]=wt[rt]);return $(I,yt,mt)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(I){return{$$typeof:c,render:I}},Tt.isValidElement=st,Tt.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:tt}},Tt.memo=function(I,K){return{$$typeof:f,type:I,compare:K===void 0?null:K}},Tt.startTransition=function(I){var K=G.T,nt={};G.T=nt;try{var rt=I(),mt=G.S;mt!==null&&mt(nt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Y,gt)}catch(yt){gt(yt)}finally{K!==null&&nt.types!==null&&(K.types=nt.types),G.T=K}},Tt.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Tt.use=function(I){return G.H.use(I)},Tt.useActionState=function(I,K,nt){return G.H.useActionState(I,K,nt)},Tt.useCallback=function(I,K){return G.H.useCallback(I,K)},Tt.useContext=function(I){return G.H.useContext(I)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(I,K){return G.H.useDeferredValue(I,K)},Tt.useEffect=function(I,K){return G.H.useEffect(I,K)},Tt.useEffectEvent=function(I){return G.H.useEffectEvent(I)},Tt.useId=function(){return G.H.useId()},Tt.useImperativeHandle=function(I,K,nt){return G.H.useImperativeHandle(I,K,nt)},Tt.useInsertionEffect=function(I,K){return G.H.useInsertionEffect(I,K)},Tt.useLayoutEffect=function(I,K){return G.H.useLayoutEffect(I,K)},Tt.useMemo=function(I,K){return G.H.useMemo(I,K)},Tt.useOptimistic=function(I,K){return G.H.useOptimistic(I,K)},Tt.useReducer=function(I,K,nt){return G.H.useReducer(I,K,nt)},Tt.useRef=function(I){return G.H.useRef(I)},Tt.useState=function(I){return G.H.useState(I)},Tt.useSyncExternalStore=function(I,K,nt){return G.H.useSyncExternalStore(I,K,nt)},Tt.useTransition=function(){return G.H.useTransition()},Tt.version="19.2.3",Tt}var hS;function jp(){return hS||(hS=1,Cd.exports=j1()),Cd.exports}var Z=jp();const Q1=qC(Z);var xd={exports:{}},Sa={},Ed={exports:{}},bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function Z1(){return fS||(fS=1,(function(n){function t(H,Q){var tt=H.length;H.push(Q);t:for(;0<tt;){var gt=tt-1>>>1,St=H[gt];if(0<o(St,Q))H[gt]=Q,H[tt]=St,tt=gt;else break t}}function e(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Q=H[0],tt=H.pop();if(tt!==Q){H[0]=tt;t:for(var gt=0,St=H.length,I=St>>>1;gt<I;){var K=2*(gt+1)-1,nt=H[K],rt=K+1,mt=H[rt];if(0>o(nt,tt))rt<St&&0>o(mt,nt)?(H[gt]=mt,H[rt]=tt,gt=rt):(H[gt]=nt,H[K]=tt,gt=K);else if(rt<St&&0>o(mt,tt))H[gt]=mt,H[rt]=tt,gt=rt;else break t}}return Q}function o(H,Q){var tt=H.sortIndex-Q.sortIndex;return tt!==0?tt:H.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],p=1,v=null,S=3,_=!1,x=!1,E=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(H){for(var Q=e(f);Q!==null;){if(Q.callback===null)i(f);else if(Q.startTime<=H)i(f),Q.sortIndex=Q.expirationTime,t(h,Q);else break;Q=e(f)}}function L(H){if(E=!1,k(H),!x)if(e(h)!==null)x=!0,Y||(Y=!0,at());else{var Q=e(f);Q!==null&&Et(L,Q.startTime-H)}}var Y=!1,G=-1,V=5,$=-1;function et(){return b?!0:!(n.unstable_now()-$<V)}function st(){if(b=!1,Y){var H=n.unstable_now();$=H;var Q=!0;try{t:{x=!1,E&&(E=!1,D(G),G=-1),_=!0;var tt=S;try{e:{for(k(H),v=e(h);v!==null&&!(v.expirationTime>H&&et());){var gt=v.callback;if(typeof gt=="function"){v.callback=null,S=v.priorityLevel;var St=gt(v.expirationTime<=H);if(H=n.unstable_now(),typeof St=="function"){v.callback=St,k(H),Q=!0;break e}v===e(h)&&i(h),k(H)}else i(h);v=e(h)}if(v!==null)Q=!0;else{var I=e(f);I!==null&&Et(L,I.startTime-H),Q=!1}}break t}finally{v=null,S=tt,_=!1}Q=void 0}}finally{Q?at():Y=!1}}}var at;if(typeof R=="function")at=function(){R(st)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ct=it.port2;it.port1.onmessage=st,at=function(){ct.postMessage(null)}}else at=function(){w(st,0)};function Et(H,Q){G=w(function(){H(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var tt=S;S=Q;try{return H()}finally{S=tt}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var tt=S;S=H;try{return Q()}finally{S=tt}},n.unstable_scheduleCallback=function(H,Q,tt){var gt=n.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?gt+tt:gt):tt=gt,H){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=tt+St,H={id:p++,callback:Q,priorityLevel:H,startTime:tt,expirationTime:St,sortIndex:-1},tt>gt?(H.sortIndex=tt,t(f,H),e(h)===null&&H===e(f)&&(E?(D(G),G=-1):E=!0,Et(L,tt-gt))):(H.sortIndex=St,t(h,H),x||_||(x=!0,Y||(Y=!0,at()))),H},n.unstable_shouldYield=et,n.unstable_wrapCallback=function(H){var Q=S;return function(){var tt=S;S=Q;try{return H.apply(this,arguments)}finally{S=tt}}}})(bd)),bd}var dS;function tM(){return dS||(dS=1,Ed.exports=Z1()),Ed.exports}var Ad={exports:{}},Ae={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function eM(){if(pS)return Ae;pS=1;var n=jp();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:h,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ae.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ae.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,p)},Ae.flushSync=function(h){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=p,i.d.f()}},Ae.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Ae.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Ae.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:_}):p==="script"&&i.d.X(h,{crossOrigin:v,integrity:S,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ae.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Ae.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ae.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Ae.requestFormReset=function(h){i.d.r(h)},Ae.unstable_batchedUpdates=function(h,f){return h(f)},Ae.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},Ae.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ae.version="19.2.3",Ae}var gS;function nM(){if(gS)return Ad.exports;gS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ad.exports=eM(),Ad.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function iM(){if(mS)return Sa;mS=1;var n=tM(),t=jp(),e=nM();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,u=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(u=r.return),s=r.return;while(s)}return r.tag===3?u:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function c(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function f(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var u=s,d=r;;){var y=u.return;if(y===null)break;var T=y.alternate;if(T===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===u)return h(y),s;if(T===d)return h(y),r;T=T.sibling}throw Error(i(188))}if(u.return!==d.return)u=y,d=T;else{for(var C=!1,A=y.child;A;){if(A===u){C=!0,u=y,d=T;break}if(A===d){C=!0,d=y,u=T;break}A=A.sibling}if(!C){for(A=T.child;A;){if(A===u){C=!0,u=T,d=y;break}if(A===d){C=!0,d=T,u=y;break}A=A.sibling}if(!C)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:r}function p(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=p(s),r!==null)return r;s=s.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),st=Symbol.iterator;function at(s){return s===null||typeof s!="object"?null:(s=st&&s[st]||s["@@iterator"],typeof s=="function"?s:null)}var it=Symbol.for("react.client.reference");function ct(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===it?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case L:return"Suspense";case Y:return"SuspenseList";case $:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case R:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case k:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return r=s.displayName||null,r!==null?r:ct(s.type)||"Memo";case V:r=s._payload,s=s._init;try{return ct(s(r))}catch{}}return null}var Et=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},gt=[],St=-1;function I(s){return{current:s}}function K(s){0>St||(s.current=gt[St],gt[St]=null,St--)}function nt(s,r){St++,gt[St]=s.current,s.current=r}var rt=I(null),mt=I(null),yt=I(null),wt=I(null);function ve(s,r){switch(nt(yt,r),nt(mt,s),nt(rt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Nv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Nv(r),s=Iv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(rt),nt(rt,s)}function Yt(){K(rt),K(mt),K(yt)}function Ve(s){s.memoizedState!==null&&nt(wt,s);var r=rt.current,u=Iv(r,s.type);r!==u&&(nt(mt,s),nt(rt,u))}function el(s){mt.current===s&&(K(rt),K(mt)),wt.current===s&&(K(wt),pa._currentValue=tt)}var nh,am;function Ts(s){if(nh===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);nh=r&&r[1]||"",am=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nh+s+am}var ih=!1;function sh(s,r){if(!s||ih)return"";ih=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var j=function(){throw Error()};if(Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(X){var z=X}Reflect.construct(s,[],j)}else{try{j.call()}catch(X){z=X}s.call(j.prototype)}}else{try{throw Error()}catch(X){z=X}(j=s())&&typeof j.catch=="function"&&j.catch(function(){})}}catch(X){if(X&&z&&typeof X.stack=="string")return[X.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),C=T[0],A=T[1];if(C&&A){var M=C.split(`
`),B=A.split(`
`);for(y=d=0;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;for(;y<B.length&&!B[y].includes("DetermineComponentFrameRoot");)y++;if(d===M.length||y===B.length)for(d=M.length-1,y=B.length-1;1<=d&&0<=y&&M[d]!==B[y];)y--;for(;1<=d&&0<=y;d--,y--)if(M[d]!==B[y]){if(d!==1||y!==1)do if(d--,y--,0>y||M[d]!==B[y]){var W=`
`+M[d].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=d&&0<=y);break}}}finally{ih=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ts(u):""}function AA(s,r){switch(s.tag){case 26:case 27:case 5:return Ts(s.type);case 16:return Ts("Lazy");case 13:return s.child!==r&&r!==null?Ts("Suspense Fallback"):Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return sh(s.type,!1);case 11:return sh(s.type.render,!1);case 1:return sh(s.type,!0);case 31:return Ts("Activity");default:return""}}function lm(s){try{var r="",u=null;do r+=AA(s,u),u=s,s=s.return;while(s);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var oh=Object.prototype.hasOwnProperty,rh=n.unstable_scheduleCallback,ah=n.unstable_cancelCallback,wA=n.unstable_shouldYield,MA=n.unstable_requestPaint,je=n.unstable_now,DA=n.unstable_getCurrentPriorityLevel,um=n.unstable_ImmediatePriority,cm=n.unstable_UserBlockingPriority,nl=n.unstable_NormalPriority,RA=n.unstable_LowPriority,hm=n.unstable_IdlePriority,NA=n.log,IA=n.unstable_setDisableYieldValue,Ar=null,Qe=null;function Vi(s){if(typeof NA=="function"&&IA(s),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Ar,s)}catch{}}var Ze=Math.clz32?Math.clz32:OA,PA=Math.log,kA=Math.LN2;function OA(s){return s>>>=0,s===0?32:31-(PA(s)/kA|0)|0}var il=256,sl=262144,ol=4194304;function _s(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function rl(s,r,u){var d=s.pendingLanes;if(d===0)return 0;var y=0,T=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var A=d&134217727;return A!==0?(d=A&~T,d!==0?y=_s(d):(C&=A,C!==0?y=_s(C):u||(u=A&~s,u!==0&&(y=_s(u))))):(A=d&~T,A!==0?y=_s(A):C!==0?y=_s(C):u||(u=d&~s,u!==0&&(y=_s(u)))),y===0?0:r!==0&&r!==y&&(r&T)===0&&(T=y&-y,u=r&-r,T>=u||T===32&&(u&4194048)!==0)?r:y}function wr(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function LA(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(){var s=ol;return ol<<=1,(ol&62914560)===0&&(ol=4194304),s}function lh(s){for(var r=[],u=0;31>u;u++)r.push(s);return r}function Mr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function UA(s,r,u,d,y,T){var C=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var A=s.entanglements,M=s.expirationTimes,B=s.hiddenUpdates;for(u=C&~u;0<u;){var W=31-Ze(u),j=1<<W;A[W]=0,M[W]=-1;var z=B[W];if(z!==null)for(B[W]=null,W=0;W<z.length;W++){var X=z[W];X!==null&&(X.lane&=-536870913)}u&=~j}d!==0&&dm(s,d,0),T!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=T&~(C&~r))}function dm(s,r,u){s.pendingLanes|=r,s.suspendedLanes&=~r;var d=31-Ze(r);s.entangledLanes|=r,s.entanglements[d]=s.entanglements[d]|1073741824|u&261930}function pm(s,r){var u=s.entangledLanes|=r;for(s=s.entanglements;u;){var d=31-Ze(u),y=1<<d;y&r|s[d]&r&&(s[d]|=r),u&=~y}}function gm(s,r){var u=r&-r;return u=(u&42)!==0?1:uh(u),(u&(s.suspendedLanes|r))!==0?0:u}function uh(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ch(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function mm(){var s=Q.p;return s!==0?s:(s=window.event,s===void 0?32:eS(s.type))}function ym(s,r){var u=Q.p;try{return Q.p=s,r()}finally{Q.p=u}}var Fi=Math.random().toString(36).slice(2),Se="__reactFiber$"+Fi,Fe="__reactProps$"+Fi,oo="__reactContainer$"+Fi,hh="__reactEvents$"+Fi,VA="__reactListeners$"+Fi,FA="__reactHandles$"+Fi,vm="__reactResources$"+Fi,Dr="__reactMarker$"+Fi;function fh(s){delete s[Se],delete s[Fe],delete s[hh],delete s[VA],delete s[FA]}function ro(s){var r=s[Se];if(r)return r;for(var u=s.parentNode;u;){if(r=u[oo]||u[Se]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(s=Fv(s);s!==null;){if(u=s[Se])return u;s=Fv(s)}return r}s=u,u=s.parentNode}return null}function ao(s){if(s=s[Se]||s[oo]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Rr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function lo(s){var r=s[vm];return r||(r=s[vm]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pe(s){s[Dr]=!0}var Sm=new Set,Tm={};function Cs(s,r){uo(s,r),uo(s+"Capture",r)}function uo(s,r){for(Tm[s]=r,s=0;s<r.length;s++)Sm.add(r[s])}var BA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_m={},Cm={};function GA(s){return oh.call(Cm,s)?!0:oh.call(_m,s)?!1:BA.test(s)?Cm[s]=!0:(_m[s]=!0,!1)}function al(s,r,u){if(GA(r))if(u===null)s.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+u)}}function ll(s,r,u){if(u===null)s.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+u)}}function si(s,r,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(r,u,""+d)}}function cn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xm(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function HA(s,r,u){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,T=d.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,T.call(this,C)}}),Object.defineProperty(s,r,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function dh(s){if(!s._valueTracker){var r=xm(s)?"checked":"value";s._valueTracker=HA(s,r,""+s[r])}}function Em(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var u=r.getValue(),d="";return s&&(d=xm(s)?s.checked?"true":"false":s.value),s=d,s!==u?(r.setValue(s),!0):!1}function ul(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var zA=/[\n"\\]/g;function hn(s){return s.replace(zA,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ph(s,r,u,d,y,T,C,A){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+cn(r)):s.value!==""+cn(r)&&(s.value=""+cn(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?gh(s,C,cn(r)):u!=null?gh(s,C,cn(u)):d!=null&&s.removeAttribute("value"),y==null&&T!=null&&(s.defaultChecked=!!T),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+cn(A):s.removeAttribute("name")}function bm(s,r,u,d,y,T,C,A){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||u!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){dh(s);return}u=u!=null?""+cn(u):"",r=r!=null?""+cn(r):u,A||r===s.value||(s.value=r),s.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=A?s.checked:!!d,s.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),dh(s)}function gh(s,r,u){r==="number"&&ul(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function co(s,r,u,d){if(s=s.options,r){r={};for(var y=0;y<u.length;y++)r["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=r.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&d&&(s[u].defaultSelected=!0)}else{for(u=""+cn(u),r=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Am(s,r,u){if(r!=null&&(r=""+cn(r),r!==s.value&&(s.value=r),u==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=u!=null?""+cn(u):""}function wm(s,r,u,d){if(r==null){if(d!=null){if(u!=null)throw Error(i(92));if(Et(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),r=u}u=cn(r),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d),dh(s)}function ho(s,r){if(r){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=r;return}}s.textContent=r}var qA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mm(s,r,u){var d=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":d?s.setProperty(r,u):typeof u!="number"||u===0||qA.has(r)?r==="float"?s.cssFloat=u:s[r]=(""+u).trim():s[r]=u+"px"}function Dm(s,r,u){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&u[y]!==d&&Mm(s,y,d)}else for(var T in r)r.hasOwnProperty(T)&&Mm(s,T,r[T])}function mh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cl(s){return XA.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function oi(){}var yh=null;function vh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,po=null;function Rm(s){var r=ao(s);if(r&&(s=r.stateNode)){var u=s[Fe]||null;t:switch(s=r.stateNode,r.type){case"input":if(ph(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var d=u[r];if(d!==s&&d.form===s.form){var y=d[Fe]||null;if(!y)throw Error(i(90));ph(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<u.length;r++)d=u[r],d.form===s.form&&Em(d)}break t;case"textarea":Am(s,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&co(s,!!u.multiple,r,!1)}}}var Sh=!1;function Nm(s,r,u){if(Sh)return s(r,u);Sh=!0;try{var d=s(r);return d}finally{if(Sh=!1,(fo!==null||po!==null)&&(jl(),fo&&(r=fo,s=po,po=fo=null,Rm(r),s)))for(r=0;r<s.length;r++)Rm(s[r])}}function Nr(s,r){var u=s.stateNode;if(u===null)return null;var d=u[Fe]||null;if(d===null)return null;u=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,r,typeof u));return u}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=!1;if(ri)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){Th=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Th=!1}var Bi=null,_h=null,hl=null;function Im(){if(hl)return hl;var s,r=_h,u=r.length,d,y="value"in Bi?Bi.value:Bi.textContent,T=y.length;for(s=0;s<u&&r[s]===y[s];s++);var C=u-s;for(d=1;d<=C&&r[u-d]===y[T-d];d++);return hl=y.slice(s,1<d?1-d:void 0)}function fl(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function dl(){return!0}function Pm(){return!1}function Be(s){function r(u,d,y,T,C){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(u=s[A],this[A]=u?u(T):T[A]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?dl:Pm,this.isPropagationStopped=Pm,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),r}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Be(xs),Pr=v({},xs,{view:0,detail:0}),$A=Be(Pr),Ch,xh,kr,gl=v({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==kr&&(kr&&s.type==="mousemove"?(Ch=s.screenX-kr.screenX,xh=s.screenY-kr.screenY):xh=Ch=0,kr=s),Ch)},movementY:function(s){return"movementY"in s?s.movementY:xh}}),km=Be(gl),WA=v({},gl,{dataTransfer:0}),JA=Be(WA),KA=v({},Pr,{relatedTarget:0}),Eh=Be(KA),jA=v({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),QA=Be(jA),ZA=v({},xs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),tw=Be(ZA),ew=v({},xs,{data:0}),Om=Be(ew),nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ow(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=sw[s])?!!r[s]:!1}function bh(){return ow}var rw=v({},Pr,{key:function(s){if(s.key){var r=nw[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=fl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?iw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bh,charCode:function(s){return s.type==="keypress"?fl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),aw=Be(rw),lw=v({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=Be(lw),uw=v({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bh}),cw=Be(uw),hw=v({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),fw=Be(hw),dw=v({},gl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pw=Be(dw),gw=v({},xs,{newState:0,oldState:0}),mw=Be(gw),yw=[9,13,27,32],Ah=ri&&"CompositionEvent"in window,Or=null;ri&&"documentMode"in document&&(Or=document.documentMode);var vw=ri&&"TextEvent"in window&&!Or,Um=ri&&(!Ah||Or&&8<Or&&11>=Or),Vm=" ",Fm=!1;function Bm(s,r){switch(s){case"keyup":return yw.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var go=!1;function Sw(s,r){switch(s){case"compositionend":return Gm(r);case"keypress":return r.which!==32?null:(Fm=!0,Vm);case"textInput":return s=r.data,s===Vm&&Fm?null:s;default:return null}}function Tw(s,r){if(go)return s==="compositionend"||!Ah&&Bm(s,r)?(s=Im(),hl=_h=Bi=null,go=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Um&&r.locale!=="ko"?null:r.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!_w[s.type]:r==="textarea"}function zm(s,r,u,d){fo?po?po.push(d):po=[d]:fo=d,r=su(r,"onChange"),0<r.length&&(u=new pl("onChange","change",null,u,d),s.push({event:u,listeners:r}))}var Lr=null,Ur=null;function Cw(s){bv(s,0)}function ml(s){var r=Rr(s);if(Em(r))return s}function qm(s,r){if(s==="change")return r}var Ym=!1;if(ri){var wh;if(ri){var Mh="oninput"in document;if(!Mh){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),Mh=typeof Xm.oninput=="function"}wh=Mh}else wh=!1;Ym=wh&&(!document.documentMode||9<document.documentMode)}function $m(){Lr&&(Lr.detachEvent("onpropertychange",Wm),Ur=Lr=null)}function Wm(s){if(s.propertyName==="value"&&ml(Ur)){var r=[];zm(r,Ur,s,vh(s)),Nm(Cw,r)}}function xw(s,r,u){s==="focusin"?($m(),Lr=r,Ur=u,Lr.attachEvent("onpropertychange",Wm)):s==="focusout"&&$m()}function Ew(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ml(Ur)}function bw(s,r){if(s==="click")return ml(r)}function Aw(s,r){if(s==="input"||s==="change")return ml(r)}function ww(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var tn=typeof Object.is=="function"?Object.is:ww;function Vr(s,r){if(tn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var u=Object.keys(s),d=Object.keys(r);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!oh.call(r,y)||!tn(s[y],r[y]))return!1}return!0}function Jm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Km(s,r){var u=Jm(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=r&&d>=r)return{node:u,offset:r-s};s=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Jm(u)}}function jm(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?jm(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Qm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=ul(s.document);r instanceof s.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)s=r.contentWindow;else break;r=ul(s.document)}return r}function Dh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Mw=ri&&"documentMode"in document&&11>=document.documentMode,mo=null,Rh=null,Fr=null,Nh=!1;function Zm(s,r,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Nh||mo==null||mo!==ul(d)||(d=mo,"selectionStart"in d&&Dh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fr&&Vr(Fr,d)||(Fr=d,d=su(Rh,"onSelect"),0<d.length&&(r=new pl("onSelect","select",null,r,u),s.push({event:r,listeners:d}),r.target=mo)))}function Es(s,r){var u={};return u[s.toLowerCase()]=r.toLowerCase(),u["Webkit"+s]="webkit"+r,u["Moz"+s]="moz"+r,u}var yo={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Ih={},t0={};ri&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function bs(s){if(Ih[s])return Ih[s];if(!yo[s])return s;var r=yo[s],u;for(u in r)if(r.hasOwnProperty(u)&&u in t0)return Ih[s]=r[u];return s}var e0=bs("animationend"),n0=bs("animationiteration"),i0=bs("animationstart"),Dw=bs("transitionrun"),Rw=bs("transitionstart"),Nw=bs("transitioncancel"),s0=bs("transitionend"),o0=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function In(s,r){o0.set(s,r),Cs(r,[s])}var yl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},fn=[],vo=0,kh=0;function vl(){for(var s=vo,r=kh=vo=0;r<s;){var u=fn[r];fn[r++]=null;var d=fn[r];fn[r++]=null;var y=fn[r];fn[r++]=null;var T=fn[r];if(fn[r++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}T!==0&&r0(u,y,T)}}function Sl(s,r,u,d){fn[vo++]=s,fn[vo++]=r,fn[vo++]=u,fn[vo++]=d,kh|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Oh(s,r,u,d){return Sl(s,r,u,d),Tl(s)}function As(s,r){return Sl(s,null,null,r),Tl(s)}function r0(s,r,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var y=!1,T=s.return;T!==null;)T.childLanes|=u,d=T.alternate,d!==null&&(d.childLanes|=u),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(y=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,y&&r!==null&&(y=31-Ze(u),s=T.hiddenUpdates,d=s[y],d===null?s[y]=[r]:d.push(r),r.lane=u|536870912),T):null}function Tl(s){if(50<aa)throw aa=0,Yf=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var So={};function Iw(s,r,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(s,r,u,d){return new Iw(s,r,u,d)}function Lh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ai(s,r){var u=s.alternate;return u===null?(u=en(s.tag,r,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=r,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,r=s.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function a0(s,r){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,r=u.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function _l(s,r,u,d,y,T){var C=0;if(d=s,typeof s=="function")Lh(s)&&(C=1);else if(typeof s=="string")C=U1(s,u,rt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case $:return s=en(31,u,r,y),s.elementType=$,s.lanes=T,s;case E:return ws(u.children,y,T,r);case b:C=8,y|=24;break;case w:return s=en(12,u,r,y|2),s.elementType=w,s.lanes=T,s;case L:return s=en(13,u,r,y),s.elementType=L,s.lanes=T,s;case Y:return s=en(19,u,r,y),s.elementType=Y,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:C=10;break t;case D:C=9;break t;case k:C=11;break t;case G:C=14;break t;case V:C=16,d=null;break t}C=29,u=Error(i(130,s===null?"null":typeof s,"")),d=null}return r=en(C,u,r,y),r.elementType=s,r.type=d,r.lanes=T,r}function ws(s,r,u,d){return s=en(7,s,d,r),s.lanes=u,s}function Uh(s,r,u){return s=en(6,s,null,r),s.lanes=u,s}function l0(s){var r=en(18,null,null,0);return r.stateNode=s,r}function Vh(s,r,u){return r=en(4,s.children!==null?s.children:[],s.key,r),r.lanes=u,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var u0=new WeakMap;function dn(s,r){if(typeof s=="object"&&s!==null){var u=u0.get(s);return u!==void 0?u:(r={value:s,source:r,stack:lm(r)},u0.set(s,r),r)}return{value:s,source:r,stack:lm(r)}}var To=[],_o=0,Cl=null,Br=0,pn=[],gn=0,Gi=null,Xn=1,$n="";function li(s,r){To[_o++]=Br,To[_o++]=Cl,Cl=s,Br=r}function c0(s,r,u){pn[gn++]=Xn,pn[gn++]=$n,pn[gn++]=Gi,Gi=s;var d=Xn;s=$n;var y=32-Ze(d)-1;d&=~(1<<y),u+=1;var T=32-Ze(r)+y;if(30<T){var C=y-y%5;T=(d&(1<<C)-1).toString(32),d>>=C,y-=C,Xn=1<<32-Ze(r)+y|u<<y|d,$n=T+s}else Xn=1<<T|u<<y|d,$n=s}function Fh(s){s.return!==null&&(li(s,1),c0(s,1,0))}function Bh(s){for(;s===Cl;)Cl=To[--_o],To[_o]=null,Br=To[--_o],To[_o]=null;for(;s===Gi;)Gi=pn[--gn],pn[gn]=null,$n=pn[--gn],pn[gn]=null,Xn=pn[--gn],pn[gn]=null}function h0(s,r){pn[gn++]=Xn,pn[gn++]=$n,pn[gn++]=Gi,Xn=r.id,$n=r.overflow,Gi=s}var Te=null,Xt=null,Rt=!1,Hi=null,mn=!1,Gh=Error(i(519));function zi(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gr(dn(r,s)),Gh}function f0(s){var r=s.stateNode,u=s.type,d=s.memoizedProps;switch(r[Se]=s,r[Fe]=d,u){case"dialog":At("cancel",r),At("close",r);break;case"iframe":case"object":case"embed":At("load",r);break;case"video":case"audio":for(u=0;u<ua.length;u++)At(ua[u],r);break;case"source":At("error",r);break;case"img":case"image":case"link":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"input":At("invalid",r),bm(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":At("invalid",r);break;case"textarea":At("invalid",r),wm(r,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||d.suppressHydrationWarning===!0||Dv(r.textContent,u)?(d.popover!=null&&(At("beforetoggle",r),At("toggle",r)),d.onScroll!=null&&At("scroll",r),d.onScrollEnd!=null&&At("scrollend",r),d.onClick!=null&&(r.onclick=oi),r=!0):r=!1,r||zi(s,!0)}function d0(s){for(Te=s.return;Te;)switch(Te.tag){case 5:case 31:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:Te=Te.return}}function Co(s){if(s!==Te)return!1;if(!Rt)return d0(s),Rt=!0,!1;var r=s.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||rd(s.type,s.memoizedProps)),u=!u),u&&Xt&&zi(s),d0(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Xt=Vv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Xt=Vv(s)}else r===27?(r=Xt,is(s.type)?(s=hd,hd=null,Xt=s):Xt=r):Xt=Te?vn(s.stateNode.nextSibling):null;return!0}function Ms(){Xt=Te=null,Rt=!1}function Hh(){var s=Hi;return s!==null&&(qe===null?qe=s:qe.push.apply(qe,s),Hi=null),s}function Gr(s){Hi===null?Hi=[s]:Hi.push(s)}var zh=I(null),Ds=null,ui=null;function qi(s,r,u){nt(zh,r._currentValue),r._currentValue=u}function ci(s){s._currentValue=zh.current,K(zh)}function qh(s,r,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),s===u)break;s=s.return}}function Yh(s,r,u,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){var C=y.child;T=T.firstContext;t:for(;T!==null;){var A=T;T=y;for(var M=0;M<r.length;M++)if(A.context===r[M]){T.lanes|=u,A=T.alternate,A!==null&&(A.lanes|=u),qh(T.return,u,s),d||(C=null);break t}T=A.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=u,T=C.alternate,T!==null&&(T.lanes|=u),qh(C,u,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function xo(s,r,u,d){s=null;for(var y=r,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var A=y.type;tn(y.pendingProps.value,C.value)||(s!==null?s.push(A):s=[A])}}else if(y===wt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(pa):s=[pa])}y=y.return}s!==null&&Yh(r,s,u,d),r.flags|=262144}function xl(s){for(s=s.firstContext;s!==null;){if(!tn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Rs(s){Ds=s,ui=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function _e(s){return p0(Ds,s)}function El(s,r){return Ds===null&&Rs(s),p0(s,r)}function p0(s,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},ui===null){if(s===null)throw Error(i(308));ui=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ui=ui.next=r;return u}var Pw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){r.aborted=!0,s.forEach(function(u){return u()})}},kw=n.unstable_scheduleCallback,Ow=n.unstable_NormalPriority,oe={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new Pw,data:new Map,refCount:0}}function Hr(s){s.refCount--,s.refCount===0&&kw(Ow,function(){s.controller.abort()})}var zr=null,$h=0,Eo=0,bo=null;function Lw(s,r){if(zr===null){var u=zr=[];$h=0,Eo=jf(),bo={status:"pending",value:void 0,then:function(d){u.push(d)}}}return $h++,r.then(g0,g0),r}function g0(){if(--$h===0&&zr!==null){bo!==null&&(bo.status="fulfilled");var s=zr;zr=null,Eo=0,bo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Uw(s,r){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<u.length;y++)(0,u[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var m0=H.S;H.S=function(s,r){Zy=je(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Lw(s,r),m0!==null&&m0(s,r)};var Ns=I(null);function Wh(){var s=Ns.current;return s!==null?s:Ht.pooledCache}function bl(s,r){r===null?nt(Ns,Ns.current):nt(Ns,r.pool)}function y0(){var s=Wh();return s===null?null:{parent:oe._currentValue,pool:s}}var Ao=Error(i(460)),Jh=Error(i(474)),Al=Error(i(542)),wl={then:function(){}};function v0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function S0(s,r,u){switch(u=s[u],u===void 0?s.push(r):u!==r&&(r.then(oi,oi),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,_0(s),s;default:if(typeof r.status=="string")r.then(oi,oi);else{if(s=Ht,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,_0(s),s}throw Ps=r,Ao}}function Is(s){try{var r=s._init;return r(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ps=u,Ao):u}}var Ps=null;function T0(){if(Ps===null)throw Error(i(459));var s=Ps;return Ps=null,s}function _0(s){if(s===Ao||s===Al)throw Error(i(483))}var wo=null,qr=0;function Ml(s){var r=qr;return qr+=1,wo===null&&(wo=[]),S0(wo,s,r)}function Yr(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Dl(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function C0(s){function r(U,N){if(s){var F=U.deletions;F===null?(U.deletions=[N],U.flags|=16):F.push(N)}}function u(U,N){if(!s)return null;for(;N!==null;)r(U,N),N=N.sibling;return null}function d(U){for(var N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function y(U,N){return U=ai(U,N),U.index=0,U.sibling=null,U}function T(U,N,F){return U.index=F,s?(F=U.alternate,F!==null?(F=F.index,F<N?(U.flags|=67108866,N):F):(U.flags|=67108866,N)):(U.flags|=1048576,N)}function C(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function A(U,N,F,J){return N===null||N.tag!==6?(N=Uh(F,U.mode,J),N.return=U,N):(N=y(N,F),N.return=U,N)}function M(U,N,F,J){var ft=F.type;return ft===E?W(U,N,F.props.children,J,F.key):N!==null&&(N.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===V&&Is(ft)===N.type)?(N=y(N,F.props),Yr(N,F),N.return=U,N):(N=_l(F.type,F.key,F.props,null,U.mode,J),Yr(N,F),N.return=U,N)}function B(U,N,F,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Vh(F,U.mode,J),N.return=U,N):(N=y(N,F.children||[]),N.return=U,N)}function W(U,N,F,J,ft){return N===null||N.tag!==7?(N=ws(F,U.mode,J,ft),N.return=U,N):(N=y(N,F),N.return=U,N)}function j(U,N,F){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Uh(""+N,U.mode,F),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _:return F=_l(N.type,N.key,N.props,null,U.mode,F),Yr(F,N),F.return=U,F;case x:return N=Vh(N,U.mode,F),N.return=U,N;case V:return N=Is(N),j(U,N,F)}if(Et(N)||at(N))return N=ws(N,U.mode,F,null),N.return=U,N;if(typeof N.then=="function")return j(U,Ml(N),F);if(N.$$typeof===R)return j(U,El(U,N),F);Dl(U,N)}return null}function z(U,N,F,J){var ft=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ft!==null?null:A(U,N,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return F.key===ft?M(U,N,F,J):null;case x:return F.key===ft?B(U,N,F,J):null;case V:return F=Is(F),z(U,N,F,J)}if(Et(F)||at(F))return ft!==null?null:W(U,N,F,J,null);if(typeof F.then=="function")return z(U,N,Ml(F),J);if(F.$$typeof===R)return z(U,N,El(U,F),J);Dl(U,F)}return null}function X(U,N,F,J,ft){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(F)||null,A(N,U,""+J,ft);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case _:return U=U.get(J.key===null?F:J.key)||null,M(N,U,J,ft);case x:return U=U.get(J.key===null?F:J.key)||null,B(N,U,J,ft);case V:return J=Is(J),X(U,N,F,J,ft)}if(Et(J)||at(J))return U=U.get(F)||null,W(N,U,J,ft,null);if(typeof J.then=="function")return X(U,N,F,Ml(J),ft);if(J.$$typeof===R)return X(U,N,F,El(N,J),ft);Dl(N,J)}return null}function ut(U,N,F,J){for(var ft=null,It=null,ht=N,Ct=N=0,Dt=null;ht!==null&&Ct<F.length;Ct++){ht.index>Ct?(Dt=ht,ht=null):Dt=ht.sibling;var Pt=z(U,ht,F[Ct],J);if(Pt===null){ht===null&&(ht=Dt);break}s&&ht&&Pt.alternate===null&&r(U,ht),N=T(Pt,N,Ct),It===null?ft=Pt:It.sibling=Pt,It=Pt,ht=Dt}if(Ct===F.length)return u(U,ht),Rt&&li(U,Ct),ft;if(ht===null){for(;Ct<F.length;Ct++)ht=j(U,F[Ct],J),ht!==null&&(N=T(ht,N,Ct),It===null?ft=ht:It.sibling=ht,It=ht);return Rt&&li(U,Ct),ft}for(ht=d(ht);Ct<F.length;Ct++)Dt=X(ht,U,Ct,F[Ct],J),Dt!==null&&(s&&Dt.alternate!==null&&ht.delete(Dt.key===null?Ct:Dt.key),N=T(Dt,N,Ct),It===null?ft=Dt:It.sibling=Dt,It=Dt);return s&&ht.forEach(function(ls){return r(U,ls)}),Rt&&li(U,Ct),ft}function dt(U,N,F,J){if(F==null)throw Error(i(151));for(var ft=null,It=null,ht=N,Ct=N=0,Dt=null,Pt=F.next();ht!==null&&!Pt.done;Ct++,Pt=F.next()){ht.index>Ct?(Dt=ht,ht=null):Dt=ht.sibling;var ls=z(U,ht,Pt.value,J);if(ls===null){ht===null&&(ht=Dt);break}s&&ht&&ls.alternate===null&&r(U,ht),N=T(ls,N,Ct),It===null?ft=ls:It.sibling=ls,It=ls,ht=Dt}if(Pt.done)return u(U,ht),Rt&&li(U,Ct),ft;if(ht===null){for(;!Pt.done;Ct++,Pt=F.next())Pt=j(U,Pt.value,J),Pt!==null&&(N=T(Pt,N,Ct),It===null?ft=Pt:It.sibling=Pt,It=Pt);return Rt&&li(U,Ct),ft}for(ht=d(ht);!Pt.done;Ct++,Pt=F.next())Pt=X(ht,U,Ct,Pt.value,J),Pt!==null&&(s&&Pt.alternate!==null&&ht.delete(Pt.key===null?Ct:Pt.key),N=T(Pt,N,Ct),It===null?ft=Pt:It.sibling=Pt,It=Pt);return s&&ht.forEach(function(W1){return r(U,W1)}),Rt&&li(U,Ct),ft}function Gt(U,N,F,J){if(typeof F=="object"&&F!==null&&F.type===E&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case _:t:{for(var ft=F.key;N!==null;){if(N.key===ft){if(ft=F.type,ft===E){if(N.tag===7){u(U,N.sibling),J=y(N,F.props.children),J.return=U,U=J;break t}}else if(N.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===V&&Is(ft)===N.type){u(U,N.sibling),J=y(N,F.props),Yr(J,F),J.return=U,U=J;break t}u(U,N);break}else r(U,N);N=N.sibling}F.type===E?(J=ws(F.props.children,U.mode,J,F.key),J.return=U,U=J):(J=_l(F.type,F.key,F.props,null,U.mode,J),Yr(J,F),J.return=U,U=J)}return C(U);case x:t:{for(ft=F.key;N!==null;){if(N.key===ft)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){u(U,N.sibling),J=y(N,F.children||[]),J.return=U,U=J;break t}else{u(U,N);break}else r(U,N);N=N.sibling}J=Vh(F,U.mode,J),J.return=U,U=J}return C(U);case V:return F=Is(F),Gt(U,N,F,J)}if(Et(F))return ut(U,N,F,J);if(at(F)){if(ft=at(F),typeof ft!="function")throw Error(i(150));return F=ft.call(F),dt(U,N,F,J)}if(typeof F.then=="function")return Gt(U,N,Ml(F),J);if(F.$$typeof===R)return Gt(U,N,El(U,F),J);Dl(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,N!==null&&N.tag===6?(u(U,N.sibling),J=y(N,F),J.return=U,U=J):(u(U,N),J=Uh(F,U.mode,J),J.return=U,U=J),C(U)):u(U,N)}return function(U,N,F,J){try{qr=0;var ft=Gt(U,N,F,J);return wo=null,ft}catch(ht){if(ht===Ao||ht===Al)throw ht;var It=en(29,ht,null,U.mode);return It.lanes=J,It.return=U,It}finally{}}}var ks=C0(!0),x0=C0(!1),Yi=!1;function Kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $i(s,r,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ot&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=Tl(s),r0(s,null,u),r}return Sl(s,d,r,u),Tl(s)}function Xr(s,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var d=r.lanes;d&=s.pendingLanes,u|=d,r.lanes=u,pm(s,u)}}function Qh(s,r){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};T===null?y=T=C:T=T.next=C,u=u.next}while(u!==null);T===null?y=T=r:T=T.next=r}else y=T=r;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=r:s.next=r,u.lastBaseUpdate=r}var Zh=!1;function $r(){if(Zh){var s=bo;if(s!==null)throw s}}function Wr(s,r,u,d){Zh=!1;var y=s.updateQueue;Yi=!1;var T=y.firstBaseUpdate,C=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var M=A,B=M.next;M.next=null,C===null?T=B:C.next=B,C=M;var W=s.alternate;W!==null&&(W=W.updateQueue,A=W.lastBaseUpdate,A!==C&&(A===null?W.firstBaseUpdate=B:A.next=B,W.lastBaseUpdate=M))}if(T!==null){var j=y.baseState;C=0,W=B=M=null,A=T;do{var z=A.lane&-536870913,X=z!==A.lane;if(X?(Mt&z)===z:(d&z)===z){z!==0&&z===Eo&&(Zh=!0),W!==null&&(W=W.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var ut=s,dt=A;z=r;var Gt=u;switch(dt.tag){case 1:if(ut=dt.payload,typeof ut=="function"){j=ut.call(Gt,j,z);break t}j=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=dt.payload,z=typeof ut=="function"?ut.call(Gt,j,z):ut,z==null)break t;j=v({},j,z);break t;case 2:Yi=!0}}z=A.callback,z!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[z]:X.push(z))}else X={lane:z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},W===null?(B=W=X,M=j):W=W.next=X,C|=z;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;X=A,A=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);W===null&&(M=j),y.baseState=M,y.firstBaseUpdate=B,y.lastBaseUpdate=W,T===null&&(y.shared.lanes=0),Qi|=C,s.lanes=C,s.memoizedState=j}}function E0(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function b0(s,r){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)E0(u[s],r)}var Mo=I(null),Rl=I(0);function A0(s,r){s=Si,nt(Rl,s),nt(Mo,r),Si=s|r.baseLanes}function tf(){nt(Rl,Si),nt(Mo,Mo.current)}function ef(){Si=Rl.current,K(Mo),K(Rl)}var nn=I(null),yn=null;function Wi(s){var r=s.alternate;nt(ee,ee.current&1),nt(nn,s),yn===null&&(r===null||Mo.current!==null||r.memoizedState!==null)&&(yn=s)}function nf(s){nt(ee,ee.current),nt(nn,s),yn===null&&(yn=s)}function w0(s){s.tag===22?(nt(ee,ee.current),nt(nn,s),yn===null&&(yn=s)):Ji()}function Ji(){nt(ee,ee.current),nt(nn,nn.current)}function sn(s){K(nn),yn===s&&(yn=null),K(ee)}var ee=I(0);function Nl(s){for(var r=s;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||ud(u)||cd(u)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var hi=0,_t=null,Ft=null,re=null,Il=!1,Do=!1,Os=!1,Pl=0,Jr=0,Ro=null,Vw=0;function Qt(){throw Error(i(321))}function sf(s,r){if(r===null)return!1;for(var u=0;u<r.length&&u<s.length;u++)if(!tn(s[u],r[u]))return!1;return!0}function of(s,r,u,d,y,T){return hi=T,_t=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=s===null||s.memoizedState===null?cy:Tf,Os=!1,T=u(d,y),Os=!1,Do&&(T=D0(r,u,d,y)),M0(s),T}function M0(s){H.H=Qr;var r=Ft!==null&&Ft.next!==null;if(hi=0,re=Ft=_t=null,Il=!1,Jr=0,Ro=null,r)throw Error(i(300));s===null||ae||(s=s.dependencies,s!==null&&xl(s)&&(ae=!0))}function D0(s,r,u,d){_t=s;var y=0;do{if(Do&&(Ro=null),Jr=0,Do=!1,25<=y)throw Error(i(301));if(y+=1,re=Ft=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}H.H=hy,T=r(u,d)}while(Do);return T}function Fw(){var s=H.H,r=s.useState()[0];return r=typeof r.then=="function"?Kr(r):r,s=s.useState()[0],(Ft!==null?Ft.memoizedState:null)!==s&&(_t.flags|=1024),r}function rf(){var s=Pl!==0;return Pl=0,s}function af(s,r,u){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~u}function lf(s){if(Il){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Il=!1}hi=0,re=Ft=_t=null,Do=!1,Jr=Pl=0,Ro=null}function Ne(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?_t.memoizedState=re=s:re=re.next=s,re}function ne(){if(Ft===null){var s=_t.alternate;s=s!==null?s.memoizedState:null}else s=Ft.next;var r=re===null?_t.memoizedState:re.next;if(r!==null)re=r,Ft=s;else{if(s===null)throw _t.alternate===null?Error(i(467)):Error(i(310));Ft=s,s={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},re===null?_t.memoizedState=re=s:re=re.next=s}return re}function kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kr(s){var r=Jr;return Jr+=1,Ro===null&&(Ro=[]),s=S0(Ro,s,r),r=_t,(re===null?r.memoizedState:re.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?cy:Tf),s}function Ol(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Kr(s);if(s.$$typeof===R)return _e(s)}throw Error(i(438,String(s)))}function uf(s){var r=null,u=_t.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var d=_t.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=kl(),_t.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(s),d=0;d<s;d++)u[d]=et;return r.index++,u}function fi(s,r){return typeof r=="function"?r(s):r}function Ll(s){var r=ne();return cf(r,Ft,s)}function cf(s,r,u){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var y=s.baseQueue,T=d.pending;if(T!==null){if(y!==null){var C=y.next;y.next=T.next,T.next=C}r.baseQueue=y=T,d.pending=null}if(T=s.baseState,y===null)s.memoizedState=T;else{r=y.next;var A=C=null,M=null,B=r,W=!1;do{var j=B.lane&-536870913;if(j!==B.lane?(Mt&j)===j:(hi&j)===j){var z=B.revertLane;if(z===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),j===Eo&&(W=!0);else if((hi&z)===z){B=B.next,z===Eo&&(W=!0);continue}else j={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(A=M=j,C=T):M=M.next=j,_t.lanes|=z,Qi|=z;j=B.action,Os&&u(T,j),T=B.hasEagerState?B.eagerState:u(T,j)}else z={lane:j,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(A=M=z,C=T):M=M.next=z,_t.lanes|=j,Qi|=j;B=B.next}while(B!==null&&B!==r);if(M===null?C=T:M.next=A,!tn(T,s.memoizedState)&&(ae=!0,W&&(u=bo,u!==null)))throw u;s.memoizedState=T,s.baseState=C,s.baseQueue=M,d.lastRenderedState=T}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function hf(s){var r=ne(),u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var d=u.dispatch,y=u.pending,T=r.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do T=s(T,C.action),C=C.next;while(C!==y);tn(T,r.memoizedState)||(ae=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),u.lastRenderedState=T}return[T,d]}function R0(s,r,u){var d=_t,y=ne(),T=Rt;if(T){if(u===void 0)throw Error(i(407));u=u()}else u=r();var C=!tn((Ft||y).memoizedState,u);if(C&&(y.memoizedState=u,ae=!0),y=y.queue,pf(P0.bind(null,d,y,s),[s]),y.getSnapshot!==r||C||re!==null&&re.memoizedState.tag&1){if(d.flags|=2048,No(9,{destroy:void 0},I0.bind(null,d,y,u,r),null),Ht===null)throw Error(i(349));T||(hi&127)!==0||N0(d,r,u)}return u}function N0(s,r,u){s.flags|=16384,s={getSnapshot:r,value:u},r=_t.updateQueue,r===null?(r=kl(),_t.updateQueue=r,r.stores=[s]):(u=r.stores,u===null?r.stores=[s]:u.push(s))}function I0(s,r,u,d){r.value=u,r.getSnapshot=d,k0(r)&&O0(s)}function P0(s,r,u){return u(function(){k0(r)&&O0(s)})}function k0(s){var r=s.getSnapshot;s=s.value;try{var u=r();return!tn(s,u)}catch{return!0}}function O0(s){var r=As(s,2);r!==null&&Ye(r,s,2)}function ff(s){var r=Ne();if(typeof s=="function"){var u=s;if(s=u(),Os){Vi(!0);try{u()}finally{Vi(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:s},r}function L0(s,r,u,d){return s.baseState=u,cf(s,Ft,typeof d=="function"?d:fi)}function Bw(s,r,u,d,y){if(Fl(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};H.T!==null?u(!0):T.isTransition=!1,d(T),u=r.pending,u===null?(T.next=r.pending=T,U0(r,T)):(T.next=u.next,r.pending=u.next=T)}}function U0(s,r){var u=r.action,d=r.payload,y=s.state;if(r.isTransition){var T=H.T,C={};H.T=C;try{var A=u(y,d),M=H.S;M!==null&&M(C,A),V0(s,r,A)}catch(B){df(s,r,B)}finally{T!==null&&C.types!==null&&(T.types=C.types),H.T=T}}else try{T=u(y,d),V0(s,r,T)}catch(B){df(s,r,B)}}function V0(s,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){F0(s,r,d)},function(d){return df(s,r,d)}):F0(s,r,u)}function F0(s,r,u){r.status="fulfilled",r.value=u,B0(r),s.state=u,r=s.pending,r!==null&&(u=r.next,u===r?s.pending=null:(u=u.next,r.next=u,U0(s,u)))}function df(s,r,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=u,B0(r),r=r.next;while(r!==d)}s.action=null}function B0(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function G0(s,r){return r}function H0(s,r){if(Rt){var u=Ht.formState;if(u!==null){t:{var d=_t;if(Rt){if(Xt){e:{for(var y=Xt,T=mn;y.nodeType!==8;){if(!T){y=null;break e}if(y=vn(y.nextSibling),y===null){y=null;break e}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){Xt=vn(y.nextSibling),d=y.data==="F!";break t}}zi(d)}d=!1}d&&(r=u[0])}}return u=Ne(),u.memoizedState=u.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G0,lastRenderedState:r},u.queue=d,u=ay.bind(null,_t,d),d.dispatch=u,d=ff(!1),T=Sf.bind(null,_t,!1,d.queue),d=Ne(),y={state:r,dispatch:null,action:s,pending:null},d.queue=y,u=Bw.bind(null,_t,y,T,u),y.dispatch=u,d.memoizedState=s,[r,u,!1]}function z0(s){var r=ne();return q0(r,Ft,s)}function q0(s,r,u){if(r=cf(s,r,G0)[0],s=Ll(fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Kr(r)}catch(C){throw C===Ao?Al:C}else d=r;r=ne();var y=r.queue,T=y.dispatch;return u!==r.memoizedState&&(_t.flags|=2048,No(9,{destroy:void 0},Gw.bind(null,y,u),null)),[d,T,s]}function Gw(s,r){s.action=r}function Y0(s){var r=ne(),u=Ft;if(u!==null)return q0(r,u,s);ne(),r=r.memoizedState,u=ne();var d=u.queue.dispatch;return u.memoizedState=s,[r,d,!1]}function No(s,r,u,d){return s={tag:s,create:u,deps:d,inst:r,next:null},r=_t.updateQueue,r===null&&(r=kl(),_t.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,r.lastEffect=s),s}function X0(){return ne().memoizedState}function Ul(s,r,u,d){var y=Ne();_t.flags|=s,y.memoizedState=No(1|r,{destroy:void 0},u,d===void 0?null:d)}function Vl(s,r,u,d){var y=ne();d=d===void 0?null:d;var T=y.memoizedState.inst;Ft!==null&&d!==null&&sf(d,Ft.memoizedState.deps)?y.memoizedState=No(r,T,u,d):(_t.flags|=s,y.memoizedState=No(1|r,T,u,d))}function $0(s,r){Ul(8390656,8,s,r)}function pf(s,r){Vl(2048,8,s,r)}function Hw(s){_t.flags|=4;var r=_t.updateQueue;if(r===null)r=kl(),_t.updateQueue=r,r.events=[s];else{var u=r.events;u===null?r.events=[s]:u.push(s)}}function W0(s){var r=ne().memoizedState;return Hw({ref:r,nextImpl:s}),function(){if((Ot&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function J0(s,r){return Vl(4,2,s,r)}function K0(s,r){return Vl(4,4,s,r)}function j0(s,r){if(typeof r=="function"){s=s();var u=r(s);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Q0(s,r,u){u=u!=null?u.concat([s]):null,Vl(4,4,j0.bind(null,r,s),u)}function gf(){}function Z0(s,r){var u=ne();r=r===void 0?null:r;var d=u.memoizedState;return r!==null&&sf(r,d[1])?d[0]:(u.memoizedState=[s,r],s)}function ty(s,r){var u=ne();r=r===void 0?null:r;var d=u.memoizedState;if(r!==null&&sf(r,d[1]))return d[0];if(d=s(),Os){Vi(!0);try{s()}finally{Vi(!1)}}return u.memoizedState=[d,r],d}function mf(s,r,u){return u===void 0||(hi&1073741824)!==0&&(Mt&261930)===0?s.memoizedState=r:(s.memoizedState=u,s=ev(),_t.lanes|=s,Qi|=s,u)}function ey(s,r,u,d){return tn(u,r)?u:Mo.current!==null?(s=mf(s,u,d),tn(s,r)||(ae=!0),s):(hi&42)===0||(hi&1073741824)!==0&&(Mt&261930)===0?(ae=!0,s.memoizedState=u):(s=ev(),_t.lanes|=s,Qi|=s,r)}function ny(s,r,u,d,y){var T=Q.p;Q.p=T!==0&&8>T?T:8;var C=H.T,A={};H.T=A,Sf(s,!1,r,u);try{var M=y(),B=H.S;if(B!==null&&B(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var W=Uw(M,d);jr(s,r,W,an(s))}else jr(s,r,d,an(s))}catch(j){jr(s,r,{then:function(){},status:"rejected",reason:j},an())}finally{Q.p=T,C!==null&&A.types!==null&&(C.types=A.types),H.T=C}}function zw(){}function yf(s,r,u,d){if(s.tag!==5)throw Error(i(476));var y=iy(s).queue;ny(s,y,r,tt,u===null?zw:function(){return sy(s),u(d)})}function iy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:tt},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:u},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function sy(s){var r=iy(s);r.next===null&&(r=s.alternate.memoizedState),jr(s,r.next.queue,{},an())}function vf(){return _e(pa)}function oy(){return ne().memoizedState}function ry(){return ne().memoizedState}function qw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var u=an();s=Xi(u);var d=$i(r,s,u);d!==null&&(Ye(d,r,u),Xr(d,r,u)),r={cache:Xh()},s.payload=r;return}r=r.return}}function Yw(s,r,u){var d=an();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fl(s)?ly(r,u):(u=Oh(s,r,u,d),u!==null&&(Ye(u,s,d),uy(u,r,d)))}function ay(s,r,u){var d=an();jr(s,r,u,d)}function jr(s,r,u,d){var y={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fl(s))ly(r,y);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,A=T(C,u);if(y.hasEagerState=!0,y.eagerState=A,tn(A,C))return Sl(s,r,y,0),Ht===null&&vl(),!1}catch{}finally{}if(u=Oh(s,r,y,d),u!==null)return Ye(u,s,d),uy(u,r,d),!0}return!1}function Sf(s,r,u,d){if(d={lane:2,revertLane:jf(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Fl(s)){if(r)throw Error(i(479))}else r=Oh(s,u,d,2),r!==null&&Ye(r,s,2)}function Fl(s){var r=s.alternate;return s===_t||r!==null&&r===_t}function ly(s,r){Do=Il=!0;var u=s.pending;u===null?r.next=r:(r.next=u.next,u.next=r),s.pending=r}function uy(s,r,u){if((u&4194048)!==0){var d=r.lanes;d&=s.pendingLanes,u|=d,r.lanes=u,pm(s,u)}}var Qr={readContext:_e,use:Ol,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Qr.useEffectEvent=Qt;var cy={readContext:_e,use:Ol,useCallback:function(s,r){return Ne().memoizedState=[s,r===void 0?null:r],s},useContext:_e,useEffect:$0,useImperativeHandle:function(s,r,u){u=u!=null?u.concat([s]):null,Ul(4194308,4,j0.bind(null,r,s),u)},useLayoutEffect:function(s,r){return Ul(4194308,4,s,r)},useInsertionEffect:function(s,r){Ul(4,2,s,r)},useMemo:function(s,r){var u=Ne();r=r===void 0?null:r;var d=s();if(Os){Vi(!0);try{s()}finally{Vi(!1)}}return u.memoizedState=[d,r],d},useReducer:function(s,r,u){var d=Ne();if(u!==void 0){var y=u(r);if(Os){Vi(!0);try{u(r)}finally{Vi(!1)}}}else y=r;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=Yw.bind(null,_t,s),[d.memoizedState,s]},useRef:function(s){var r=Ne();return s={current:s},r.memoizedState=s},useState:function(s){s=ff(s);var r=s.queue,u=ay.bind(null,_t,r);return r.dispatch=u,[s.memoizedState,u]},useDebugValue:gf,useDeferredValue:function(s,r){var u=Ne();return mf(u,s,r)},useTransition:function(){var s=ff(!1);return s=ny.bind(null,_t,s.queue,!0,!1),Ne().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,u){var d=_t,y=Ne();if(Rt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=r(),Ht===null)throw Error(i(349));(Mt&127)!==0||N0(d,r,u)}y.memoizedState=u;var T={value:u,getSnapshot:r};return y.queue=T,$0(P0.bind(null,d,T,s),[s]),d.flags|=2048,No(9,{destroy:void 0},I0.bind(null,d,T,u,r),null),u},useId:function(){var s=Ne(),r=Ht.identifierPrefix;if(Rt){var u=$n,d=Xn;u=(d&~(1<<32-Ze(d)-1)).toString(32)+u,r="_"+r+"R_"+u,u=Pl++,0<u&&(r+="H"+u.toString(32)),r+="_"}else u=Vw++,r="_"+r+"r_"+u.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:vf,useFormState:H0,useActionState:H0,useOptimistic:function(s){var r=Ne();r.memoizedState=r.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=Sf.bind(null,_t,!0,u),u.dispatch=r,[s,r]},useMemoCache:uf,useCacheRefresh:function(){return Ne().memoizedState=qw.bind(null,_t)},useEffectEvent:function(s){var r=Ne(),u={impl:s};return r.memoizedState=u,function(){if((Ot&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Tf={readContext:_e,use:Ol,useCallback:Z0,useContext:_e,useEffect:pf,useImperativeHandle:Q0,useInsertionEffect:J0,useLayoutEffect:K0,useMemo:ty,useReducer:Ll,useRef:X0,useState:function(){return Ll(fi)},useDebugValue:gf,useDeferredValue:function(s,r){var u=ne();return ey(u,Ft.memoizedState,s,r)},useTransition:function(){var s=Ll(fi)[0],r=ne().memoizedState;return[typeof s=="boolean"?s:Kr(s),r]},useSyncExternalStore:R0,useId:oy,useHostTransitionStatus:vf,useFormState:z0,useActionState:z0,useOptimistic:function(s,r){var u=ne();return L0(u,Ft,s,r)},useMemoCache:uf,useCacheRefresh:ry};Tf.useEffectEvent=W0;var hy={readContext:_e,use:Ol,useCallback:Z0,useContext:_e,useEffect:pf,useImperativeHandle:Q0,useInsertionEffect:J0,useLayoutEffect:K0,useMemo:ty,useReducer:hf,useRef:X0,useState:function(){return hf(fi)},useDebugValue:gf,useDeferredValue:function(s,r){var u=ne();return Ft===null?mf(u,s,r):ey(u,Ft.memoizedState,s,r)},useTransition:function(){var s=hf(fi)[0],r=ne().memoizedState;return[typeof s=="boolean"?s:Kr(s),r]},useSyncExternalStore:R0,useId:oy,useHostTransitionStatus:vf,useFormState:Y0,useActionState:Y0,useOptimistic:function(s,r){var u=ne();return Ft!==null?L0(u,Ft,s,r):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:uf,useCacheRefresh:ry};hy.useEffectEvent=W0;function _f(s,r,u,d){r=s.memoizedState,u=u(d,r),u=u==null?r:v({},r,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Cf={enqueueSetState:function(s,r,u){s=s._reactInternals;var d=an(),y=Xi(d);y.payload=r,u!=null&&(y.callback=u),r=$i(s,y,d),r!==null&&(Ye(r,s,d),Xr(r,s,d))},enqueueReplaceState:function(s,r,u){s=s._reactInternals;var d=an(),y=Xi(d);y.tag=1,y.payload=r,u!=null&&(y.callback=u),r=$i(s,y,d),r!==null&&(Ye(r,s,d),Xr(r,s,d))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var u=an(),d=Xi(u);d.tag=2,r!=null&&(d.callback=r),r=$i(s,d,u),r!==null&&(Ye(r,s,u),Xr(r,s,u))}};function fy(s,r,u,d,y,T,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,T,C):r.prototype&&r.prototype.isPureReactComponent?!Vr(u,d)||!Vr(y,T):!0}function dy(s,r,u,d){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,d),r.state!==s&&Cf.enqueueReplaceState(r,r.state,null)}function Ls(s,r){var u=r;if("ref"in r){u={};for(var d in r)d!=="ref"&&(u[d]=r[d])}if(s=s.defaultProps){u===r&&(u=v({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}function py(s){yl(s)}function gy(s){console.error(s)}function my(s){yl(s)}function Bl(s,r){try{var u=s.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function yy(s,r,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function xf(s,r,u){return u=Xi(u),u.tag=3,u.payload={element:null},u.callback=function(){Bl(s,r)},u}function vy(s){return s=Xi(s),s.tag=3,s}function Sy(s,r,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var T=d.value;s.payload=function(){return y(T)},s.callback=function(){yy(r,u,d)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){yy(r,u,d),typeof y!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function Xw(s,r,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=u.alternate,r!==null&&xo(r,u,y,!0),u=nn.current,u!==null){switch(u.tag){case 31:case 13:return yn===null?Ql():u.alternate===null&&Zt===0&&(Zt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===wl?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([d]):r.add(d),Wf(s,d,y)),!1;case 22:return u.flags|=65536,d===wl?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([d]):u.add(d)),Wf(s,d,y)),!1}throw Error(i(435,u.tag))}return Wf(s,d,y),Ql(),!1}if(Rt)return r=nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==Gh&&(s=Error(i(422),{cause:d}),Gr(dn(s,u)))):(d!==Gh&&(r=Error(i(423),{cause:d}),Gr(dn(r,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=dn(d,u),y=xf(s.stateNode,d,y),Qh(s,y),Zt!==4&&(Zt=2)),!1;var T=Error(i(520),{cause:d});if(T=dn(T,u),ra===null?ra=[T]:ra.push(T),Zt!==4&&(Zt=2),r===null)return!0;d=dn(d,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=xf(u.stateNode,d,s),Qh(u,s),!1;case 1:if(r=u.type,T=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Zi===null||!Zi.has(T))))return u.flags|=65536,y&=-y,u.lanes|=y,y=vy(y),Sy(y,s,u,d),Qh(u,y),!1}u=u.return}while(u!==null);return!1}var Ef=Error(i(461)),ae=!1;function Ce(s,r,u,d){r.child=s===null?x0(r,null,u,d):ks(r,s.child,u,d)}function Ty(s,r,u,d,y){u=u.render;var T=r.ref;if("ref"in d){var C={};for(var A in d)A!=="ref"&&(C[A]=d[A])}else C=d;return Rs(r),d=of(s,r,u,C,T,y),A=rf(),s!==null&&!ae?(af(s,r,y),di(s,r,y)):(Rt&&A&&Fh(r),r.flags|=1,Ce(s,r,d,y),r.child)}function _y(s,r,u,d,y){if(s===null){var T=u.type;return typeof T=="function"&&!Lh(T)&&T.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=T,Cy(s,r,T,d,y)):(s=_l(u.type,null,d,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!If(s,y)){var C=T.memoizedProps;if(u=u.compare,u=u!==null?u:Vr,u(C,d)&&s.ref===r.ref)return di(s,r,y)}return r.flags|=1,s=ai(T,d),s.ref=r.ref,s.return=r,r.child=s}function Cy(s,r,u,d,y){if(s!==null){var T=s.memoizedProps;if(Vr(T,d)&&s.ref===r.ref)if(ae=!1,r.pendingProps=d=T,If(s,y))(s.flags&131072)!==0&&(ae=!0);else return r.lanes=s.lanes,di(s,r,y)}return bf(s,r,u,d,y)}function xy(s,r,u,d){var y=d.children,T=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|u:u,s!==null){for(d=r.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~T}else d=0,r.child=null;return Ey(s,r,T,u,d)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&bl(r,T!==null?T.cachePool:null),T!==null?A0(r,T):tf(),w0(r);else return d=r.lanes=536870912,Ey(s,r,T!==null?T.baseLanes|u:u,u,d)}else T!==null?(bl(r,T.cachePool),A0(r,T),Ji(),r.memoizedState=null):(s!==null&&bl(r,null),tf(),Ji());return Ce(s,r,y,u),r.child}function Zr(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ey(s,r,u,d,y){var T=Wh();return T=T===null?null:{parent:oe._currentValue,pool:T},r.memoizedState={baseLanes:u,cachePool:T},s!==null&&bl(r,null),tf(),w0(r),s!==null&&xo(s,r,d,!0),r.childLanes=y,null}function Gl(s,r){return r=zl({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function by(s,r,u){return ks(r,s.child,null,u),s=Gl(r,r.pendingProps),s.flags|=2,sn(r),r.memoizedState=null,s}function $w(s,r,u){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Rt){if(d.mode==="hidden")return s=Gl(r,d),r.lanes=536870912,Zr(null,s);if(nf(r),(s=Xt)?(s=Uv(s,mn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Gi!==null?{id:Xn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},u=l0(s),u.return=r,r.child=u,Te=r,Xt=null)):s=null,s===null)throw zi(r);return r.lanes=536870912,null}return Gl(r,d)}var T=s.memoizedState;if(T!==null){var C=T.dehydrated;if(nf(r),y)if(r.flags&256)r.flags&=-257,r=by(s,r,u);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(ae||xo(s,r,u,!1),y=(u&s.childLanes)!==0,ae||y){if(d=Ht,d!==null&&(C=gm(d,u),C!==0&&C!==T.retryLane))throw T.retryLane=C,As(s,C),Ye(d,s,C),Ef;Ql(),r=by(s,r,u)}else s=T.treeContext,Xt=vn(C.nextSibling),Te=r,Rt=!0,Hi=null,mn=!1,s!==null&&h0(r,s),r=Gl(r,d),r.flags|=4096;return r}return s=ai(s.child,{mode:d.mode,children:d.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Hl(s,r){var u=r.ref;if(u===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(r.flags|=4194816)}}function bf(s,r,u,d,y){return Rs(r),u=of(s,r,u,d,void 0,y),d=rf(),s!==null&&!ae?(af(s,r,y),di(s,r,y)):(Rt&&d&&Fh(r),r.flags|=1,Ce(s,r,u,y),r.child)}function Ay(s,r,u,d,y,T){return Rs(r),r.updateQueue=null,u=D0(r,d,u,y),M0(s),d=rf(),s!==null&&!ae?(af(s,r,T),di(s,r,T)):(Rt&&d&&Fh(r),r.flags|=1,Ce(s,r,u,T),r.child)}function wy(s,r,u,d,y){if(Rs(r),r.stateNode===null){var T=So,C=u.contextType;typeof C=="object"&&C!==null&&(T=_e(C)),T=new u(d,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Cf,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=d,T.state=r.memoizedState,T.refs={},Kh(r),C=u.contextType,T.context=typeof C=="object"&&C!==null?_e(C):So,T.state=r.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(_f(r,u,C,d),T.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&Cf.enqueueReplaceState(T,T.state,null),Wr(r,d,T,y),$r(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(s===null){T=r.stateNode;var A=r.memoizedProps,M=Ls(u,A);T.props=M;var B=T.context,W=u.contextType;C=So,typeof W=="object"&&W!==null&&(C=_e(W));var j=u.getDerivedStateFromProps;W=typeof j=="function"||typeof T.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,W||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(A||B!==C)&&dy(r,T,d,C),Yi=!1;var z=r.memoizedState;T.state=z,Wr(r,d,T,y),$r(),B=r.memoizedState,A||z!==B||Yi?(typeof j=="function"&&(_f(r,u,j,d),B=r.memoizedState),(M=Yi||fy(r,u,M,d,z,B,C))?(W||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=B),T.props=d,T.state=B,T.context=C,d=M):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{T=r.stateNode,jh(s,r),C=r.memoizedProps,W=Ls(u,C),T.props=W,j=r.pendingProps,z=T.context,B=u.contextType,M=So,typeof B=="object"&&B!==null&&(M=_e(B)),A=u.getDerivedStateFromProps,(B=typeof A=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==j||z!==M)&&dy(r,T,d,M),Yi=!1,z=r.memoizedState,T.state=z,Wr(r,d,T,y),$r();var X=r.memoizedState;C!==j||z!==X||Yi||s!==null&&s.dependencies!==null&&xl(s.dependencies)?(typeof A=="function"&&(_f(r,u,A,d),X=r.memoizedState),(W=Yi||fy(r,u,W,d,z,X,M)||s!==null&&s.dependencies!==null&&xl(s.dependencies))?(B||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,X,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,X,M)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&z===s.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=X),T.props=d,T.state=X,T.context=M,d=W):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&z===s.memoizedState||(r.flags|=1024),d=!1)}return T=d,Hl(s,r),d=(r.flags&128)!==0,T||d?(T=r.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&d?(r.child=ks(r,s.child,null,y),r.child=ks(r,null,u,y)):Ce(s,r,u,y),r.memoizedState=T.state,s=r.child):s=di(s,r,y),s}function My(s,r,u,d){return Ms(),r.flags|=256,Ce(s,r,u,d),r.child}var Af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wf(s){return{baseLanes:s,cachePool:y0()}}function Mf(s,r,u){return s=s!==null?s.childLanes&~u:0,r&&(s|=rn),s}function Dy(s,r,u){var d=r.pendingProps,y=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(ee.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(Rt){if(y?Wi(r):Ji(),(s=Xt)?(s=Uv(s,mn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Gi!==null?{id:Xn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},u=l0(s),u.return=r,r.child=u,Te=r,Xt=null)):s=null,s===null)throw zi(r);return cd(s)?r.lanes=32:r.lanes=536870912,null}var A=d.children;return d=d.fallback,y?(Ji(),y=r.mode,A=zl({mode:"hidden",children:A},y),d=ws(d,y,u,null),A.return=r,d.return=r,A.sibling=d,r.child=A,d=r.child,d.memoizedState=wf(u),d.childLanes=Mf(s,C,u),r.memoizedState=Af,Zr(null,d)):(Wi(r),Df(r,A))}var M=s.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(T)r.flags&256?(Wi(r),r.flags&=-257,r=Rf(s,r,u)):r.memoizedState!==null?(Ji(),r.child=s.child,r.flags|=128,r=null):(Ji(),A=d.fallback,y=r.mode,d=zl({mode:"visible",children:d.children},y),A=ws(A,y,u,null),A.flags|=2,d.return=r,A.return=r,d.sibling=A,r.child=d,ks(r,s.child,null,u),d=r.child,d.memoizedState=wf(u),d.childLanes=Mf(s,C,u),r.memoizedState=Af,r=Zr(null,d));else if(Wi(r),cd(A)){if(C=A.nextSibling&&A.nextSibling.dataset,C)var B=C.dgst;C=B,d=Error(i(419)),d.stack="",d.digest=C,Gr({value:d,source:null,stack:null}),r=Rf(s,r,u)}else if(ae||xo(s,r,u,!1),C=(u&s.childLanes)!==0,ae||C){if(C=Ht,C!==null&&(d=gm(C,u),d!==0&&d!==M.retryLane))throw M.retryLane=d,As(s,d),Ye(C,s,d),Ef;ud(A)||Ql(),r=Rf(s,r,u)}else ud(A)?(r.flags|=192,r.child=s.child,r=null):(s=M.treeContext,Xt=vn(A.nextSibling),Te=r,Rt=!0,Hi=null,mn=!1,s!==null&&h0(r,s),r=Df(r,d.children),r.flags|=4096);return r}return y?(Ji(),A=d.fallback,y=r.mode,M=s.child,B=M.sibling,d=ai(M,{mode:"hidden",children:d.children}),d.subtreeFlags=M.subtreeFlags&65011712,B!==null?A=ai(B,A):(A=ws(A,y,u,null),A.flags|=2),A.return=r,d.return=r,d.sibling=A,r.child=d,Zr(null,d),d=r.child,A=s.child.memoizedState,A===null?A=wf(u):(y=A.cachePool,y!==null?(M=oe._currentValue,y=y.parent!==M?{parent:M,pool:M}:y):y=y0(),A={baseLanes:A.baseLanes|u,cachePool:y}),d.memoizedState=A,d.childLanes=Mf(s,C,u),r.memoizedState=Af,Zr(s.child,d)):(Wi(r),u=s.child,s=u.sibling,u=ai(u,{mode:"visible",children:d.children}),u.return=r,u.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=u,r.memoizedState=null,u)}function Df(s,r){return r=zl({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function zl(s,r){return s=en(22,s,null,r),s.lanes=0,s}function Rf(s,r,u){return ks(r,s.child,null,u),s=Df(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Ry(s,r,u){s.lanes|=r;var d=s.alternate;d!==null&&(d.lanes|=r),qh(s.return,r,u)}function Nf(s,r,u,d,y,T){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y,treeForkCount:T}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=u,C.tailMode=y,C.treeForkCount=T)}function Ny(s,r,u){var d=r.pendingProps,y=d.revealOrder,T=d.tail;d=d.children;var C=ee.current,A=(C&2)!==0;if(A?(C=C&1|2,r.flags|=128):C&=1,nt(ee,C),Ce(s,r,d,u),d=Rt?Br:0,!A&&s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ry(s,u,r);else if(s.tag===19)Ry(s,u,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(u=r.child,y=null;u!==null;)s=u.alternate,s!==null&&Nl(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=r.child,r.child=null):(y=u.sibling,u.sibling=null),Nf(r,!1,y,u,T,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Nl(s)===null){r.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}Nf(r,!0,u,null,T,d);break;case"together":Nf(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function di(s,r,u){if(s!==null&&(r.dependencies=s.dependencies),Qi|=r.lanes,(u&r.childLanes)===0)if(s!==null){if(xo(s,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,u=ai(s,s.pendingProps),r.child=u,u.return=r;s.sibling!==null;)s=s.sibling,u=u.sibling=ai(s,s.pendingProps),u.return=r;u.sibling=null}return r.child}function If(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&xl(s)))}function Ww(s,r,u){switch(r.tag){case 3:ve(r,r.stateNode.containerInfo),qi(r,oe,s.memoizedState.cache),Ms();break;case 27:case 5:Ve(r);break;case 4:ve(r,r.stateNode.containerInfo);break;case 10:qi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,nf(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Wi(r),r.flags|=128,null):(u&r.child.childLanes)!==0?Dy(s,r,u):(Wi(r),s=di(s,r,u),s!==null?s.sibling:null);Wi(r);break;case 19:var y=(s.flags&128)!==0;if(d=(u&r.childLanes)!==0,d||(xo(s,r,u,!1),d=(u&r.childLanes)!==0),y){if(d)return Ny(s,r,u);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),nt(ee,ee.current),d)break;return null;case 22:return r.lanes=0,xy(s,r,u,r.pendingProps);case 24:qi(r,oe,s.memoizedState.cache)}return di(s,r,u)}function Iy(s,r,u){if(s!==null)if(s.memoizedProps!==r.pendingProps)ae=!0;else{if(!If(s,u)&&(r.flags&128)===0)return ae=!1,Ww(s,r,u);ae=(s.flags&131072)!==0}else ae=!1,Rt&&(r.flags&1048576)!==0&&c0(r,Br,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(s=Is(r.elementType),r.type=s,typeof s=="function")Lh(s)?(d=Ls(s,d),r.tag=1,r=wy(null,r,s,d,u)):(r.tag=0,r=bf(null,r,s,d,u));else{if(s!=null){var y=s.$$typeof;if(y===k){r.tag=11,r=Ty(null,r,s,d,u);break t}else if(y===G){r.tag=14,r=_y(null,r,s,d,u);break t}}throw r=ct(s)||s,Error(i(306,r,""))}}return r;case 0:return bf(s,r,r.type,r.pendingProps,u);case 1:return d=r.type,y=Ls(d,r.pendingProps),wy(s,r,d,y,u);case 3:t:{if(ve(r,r.stateNode.containerInfo),s===null)throw Error(i(387));d=r.pendingProps;var T=r.memoizedState;y=T.element,jh(s,r),Wr(r,d,null,u);var C=r.memoizedState;if(d=C.cache,qi(r,oe,d),d!==T.cache&&Yh(r,[oe],u,!0),$r(),d=C.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=My(s,r,d,u);break t}else if(d!==y){y=dn(Error(i(424)),r),Gr(y),r=My(s,r,d,u);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xt=vn(s.firstChild),Te=r,Rt=!0,Hi=null,mn=!0,u=x0(r,null,d,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ms(),d===y){r=di(s,r,u);break t}Ce(s,r,d,u)}r=r.child}return r;case 26:return Hl(s,r),s===null?(u=zv(r.type,null,r.pendingProps,null))?r.memoizedState=u:Rt||(u=r.type,s=r.pendingProps,d=ou(yt.current).createElement(u),d[Se]=r,d[Fe]=s,xe(d,u,s),pe(d),r.stateNode=d):r.memoizedState=zv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ve(r),s===null&&Rt&&(d=r.stateNode=Bv(r.type,r.pendingProps,yt.current),Te=r,mn=!0,y=Xt,is(r.type)?(hd=y,Xt=vn(d.firstChild)):Xt=y),Ce(s,r,r.pendingProps.children,u),Hl(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Rt&&((y=d=Xt)&&(d=E1(d,r.type,r.pendingProps,mn),d!==null?(r.stateNode=d,Te=r,Xt=vn(d.firstChild),mn=!1,y=!0):y=!1),y||zi(r)),Ve(r),y=r.type,T=r.pendingProps,C=s!==null?s.memoizedProps:null,d=T.children,rd(y,T)?d=null:C!==null&&rd(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=of(s,r,Fw,null,null,u),pa._currentValue=y),Hl(s,r),Ce(s,r,d,u),r.child;case 6:return s===null&&Rt&&((s=u=Xt)&&(u=b1(u,r.pendingProps,mn),u!==null?(r.stateNode=u,Te=r,Xt=null,s=!0):s=!1),s||zi(r)),null;case 13:return Dy(s,r,u);case 4:return ve(r,r.stateNode.containerInfo),d=r.pendingProps,s===null?r.child=ks(r,null,d,u):Ce(s,r,d,u),r.child;case 11:return Ty(s,r,r.type,r.pendingProps,u);case 7:return Ce(s,r,r.pendingProps,u),r.child;case 8:return Ce(s,r,r.pendingProps.children,u),r.child;case 12:return Ce(s,r,r.pendingProps.children,u),r.child;case 10:return d=r.pendingProps,qi(r,r.type,d.value),Ce(s,r,d.children,u),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,Rs(r),y=_e(y),d=d(y),r.flags|=1,Ce(s,r,d,u),r.child;case 14:return _y(s,r,r.type,r.pendingProps,u);case 15:return Cy(s,r,r.type,r.pendingProps,u);case 19:return Ny(s,r,u);case 31:return $w(s,r,u);case 22:return xy(s,r,u,r.pendingProps);case 24:return Rs(r),d=_e(oe),s===null?(y=Wh(),y===null&&(y=Ht,T=Xh(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=u),y=T),r.memoizedState={parent:d,cache:y},Kh(r),qi(r,oe,y)):((s.lanes&u)!==0&&(jh(s,r),Wr(r,null,null,u),$r()),y=s.memoizedState,T=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),qi(r,oe,d)):(d=T.cache,qi(r,oe,d),d!==y.cache&&Yh(r,[oe],u,!0))),Ce(s,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function pi(s){s.flags|=4}function Pf(s,r,u,d,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(ov())s.flags|=8192;else throw Ps=wl,Jh}else s.flags&=-16777217}function Py(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Wv(r))if(ov())s.flags|=8192;else throw Ps=wl,Jh}function ql(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?fm():536870912,s.lanes|=r,Oo|=r)}function ta(s,r){if(!Rt)switch(s.tailMode){case"hidden":r=s.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function $t(s){var r=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(r)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=u,r}function Jw(s,r,u){var d=r.pendingProps;switch(Bh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return $t(r),null;case 3:return u=r.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ci(oe),Yt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Co(r)?pi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hh())),$t(r),null;case 26:var y=r.type,T=r.memoizedState;return s===null?(pi(r),T!==null?($t(r),Py(r,T)):($t(r),Pf(r,y,null,d,u))):T?T!==s.memoizedState?(pi(r),$t(r),Py(r,T)):($t(r),r.flags&=-16777217):(s=s.memoizedProps,s!==d&&pi(r),$t(r),Pf(r,y,s,d,u)),null;case 27:if(el(r),u=yt.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==d&&pi(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return $t(r),null}s=rt.current,Co(r)?f0(r):(s=Bv(y,d,u),r.stateNode=s,pi(r))}return $t(r),null;case 5:if(el(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==d&&pi(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return $t(r),null}if(T=rt.current,Co(r))f0(r);else{var C=ou(yt.current);switch(T){case 1:T=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:T=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":T=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":T=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":T=C.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?C.createElement(y,{is:d.is}):C.createElement(y)}}T[Se]=r,T[Fe]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)T.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=T;t:switch(xe(T,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&pi(r)}}return $t(r),Pf(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,u),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==d&&pi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(s=yt.current,Co(r)){if(s=r.stateNode,u=r.memoizedProps,d=null,y=Te,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[Se]=r,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||Dv(s.nodeValue,u)),s||zi(r,!0)}else s=ou(s).createTextNode(d),s[Se]=r,r.stateNode=s}return $t(r),null;case 31:if(u=r.memoizedState,s===null||s.memoizedState!==null){if(d=Co(r),u!==null){if(s===null){if(!d)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Se]=r}else Ms(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),s=!1}else u=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return r.flags&256?(sn(r),r):(sn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return $t(r),null;case 13:if(d=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Co(r),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Se]=r}else Ms(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),y=!1}else y=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(sn(r),r):(sn(r),null)}return sn(r),(r.flags&128)!==0?(r.lanes=u,r):(u=d!==null,s=s!==null&&s.memoizedState!==null,u&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==y&&(d.flags|=2048)),u!==s&&u&&(r.child.flags|=8192),ql(r,r.updateQueue),$t(r),null);case 4:return Yt(),s===null&&ed(r.stateNode.containerInfo),$t(r),null;case 10:return ci(r.type),$t(r),null;case 19:if(K(ee),d=r.memoizedState,d===null)return $t(r),null;if(y=(r.flags&128)!==0,T=d.rendering,T===null)if(y)ta(d,!1);else{if(Zt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=Nl(s),T!==null){for(r.flags|=128,ta(d,!1),s=T.updateQueue,r.updateQueue=s,ql(r,s),r.subtreeFlags=0,s=u,u=r.child;u!==null;)a0(u,s),u=u.sibling;return nt(ee,ee.current&1|2),Rt&&li(r,d.treeForkCount),r.child}s=s.sibling}d.tail!==null&&je()>Jl&&(r.flags|=128,y=!0,ta(d,!1),r.lanes=4194304)}else{if(!y)if(s=Nl(T),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,ql(r,s),ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Rt)return $t(r),null}else 2*je()-d.renderingStartTime>Jl&&u!==536870912&&(r.flags|=128,y=!0,ta(d,!1),r.lanes=4194304);d.isBackwards?(T.sibling=r.child,r.child=T):(s=d.last,s!==null?s.sibling=T:r.child=T,d.last=T)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=je(),s.sibling=null,u=ee.current,nt(ee,y?u&1|2:u&1),Rt&&li(r,d.treeForkCount),s):($t(r),null);case 22:case 23:return sn(r),ef(),d=r.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(u&536870912)!==0&&(r.flags&128)===0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),u=r.updateQueue,u!==null&&ql(r,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==u&&(r.flags|=2048),s!==null&&K(Ns),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ci(oe),$t(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Kw(s,r){switch(Bh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ci(oe),Yt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return el(r),null;case 31:if(r.memoizedState!==null){if(sn(r),r.alternate===null)throw Error(i(340));Ms()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(sn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ms()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return K(ee),null;case 4:return Yt(),null;case 10:return ci(r.type),null;case 22:case 23:return sn(r),ef(),s!==null&&K(Ns),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ci(oe),null;case 25:return null;default:return null}}function ky(s,r){switch(Bh(r),r.tag){case 3:ci(oe),Yt();break;case 26:case 27:case 5:el(r);break;case 4:Yt();break;case 31:r.memoizedState!==null&&sn(r);break;case 13:sn(r);break;case 19:K(ee);break;case 10:ci(r.type);break;case 22:case 23:sn(r),ef(),s!==null&&K(Ns);break;case 24:ci(oe)}}function ea(s,r){try{var u=r.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&s)===s){d=void 0;var T=u.create,C=u.inst;d=T(),C.destroy=d}u=u.next}while(u!==y)}}catch(A){Vt(r,r.return,A)}}function Ki(s,r,u){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&s)===s){var C=d.inst,A=C.destroy;if(A!==void 0){C.destroy=void 0,y=r;var M=u,B=A;try{B()}catch(W){Vt(y,M,W)}}}d=d.next}while(d!==T)}}catch(W){Vt(r,r.return,W)}}function Oy(s){var r=s.updateQueue;if(r!==null){var u=s.stateNode;try{b0(r,u)}catch(d){Vt(s,s.return,d)}}}function Ly(s,r,u){u.props=Ls(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){Vt(s,r,d)}}function na(s,r){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(y){Vt(s,r,y)}}function Wn(s,r){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){Vt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Vt(s,r,y)}else u.current=null}function Uy(s){var r=s.type,u=s.memoizedProps,d=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){Vt(s,s.return,y)}}function kf(s,r,u){try{var d=s.stateNode;v1(d,s.type,u,r),d[Fe]=r}catch(y){Vt(s,s.return,y)}}function Vy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&is(s.type)||s.tag===4}function Of(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Vy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&is(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lf(s,r,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(s),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=oi));else if(d!==4&&(d===27&&is(s.type)&&(u=s.stateNode,r=null),s=s.child,s!==null))for(Lf(s,r,u),s=s.sibling;s!==null;)Lf(s,r,u),s=s.sibling}function Yl(s,r,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,r?u.insertBefore(s,r):u.appendChild(s);else if(d!==4&&(d===27&&is(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Yl(s,r,u),s=s.sibling;s!==null;)Yl(s,r,u),s=s.sibling}function Fy(s){var r=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);xe(r,d,u),r[Se]=s,r[Fe]=u}catch(T){Vt(s,s.return,T)}}var gi=!1,le=!1,Uf=!1,By=typeof WeakSet=="function"?WeakSet:Set,ge=null;function jw(s,r){if(s=s.containerInfo,sd=fu,s=Qm(s),Dh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break t}var C=0,A=-1,M=-1,B=0,W=0,j=s,z=null;e:for(;;){for(var X;j!==u||y!==0&&j.nodeType!==3||(A=C+y),j!==T||d!==0&&j.nodeType!==3||(M=C+d),j.nodeType===3&&(C+=j.nodeValue.length),(X=j.firstChild)!==null;)z=j,j=X;for(;;){if(j===s)break e;if(z===u&&++B===y&&(A=C),z===T&&++W===d&&(M=C),(X=j.nextSibling)!==null)break;j=z,z=j.parentNode}j=X}u=A===-1||M===-1?null:{start:A,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(od={focusedElem:s,selectionRange:u},fu=!1,ge=r;ge!==null;)if(r=ge,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,ge=s;else for(;ge!==null;){switch(r=ge,T=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)y=s[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,u=r,y=T.memoizedProps,T=T.memoizedState,d=u.stateNode;try{var ut=Ls(u.type,y);s=d.getSnapshotBeforeUpdate(ut,T),d.__reactInternalSnapshotBeforeUpdate=s}catch(dt){Vt(u,u.return,dt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,u=s.nodeType,u===9)ld(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ld(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,ge=s;break}ge=r.return}}function Gy(s,r,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:yi(s,u),d&4&&ea(5,u);break;case 1:if(yi(s,u),d&4)if(s=u.stateNode,r===null)try{s.componentDidMount()}catch(C){Vt(u,u.return,C)}else{var y=Ls(u.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Vt(u,u.return,C)}}d&64&&Oy(u),d&512&&na(u,u.return);break;case 3:if(yi(s,u),d&64&&(s=u.updateQueue,s!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{b0(s,r)}catch(C){Vt(u,u.return,C)}}break;case 27:r===null&&d&4&&Fy(u);case 26:case 5:yi(s,u),r===null&&d&4&&Uy(u),d&512&&na(u,u.return);break;case 12:yi(s,u);break;case 31:yi(s,u),d&4&&qy(s,u);break;case 13:yi(s,u),d&4&&Yy(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=r1.bind(null,u),A1(s,u))));break;case 22:if(d=u.memoizedState!==null||gi,!d){r=r!==null&&r.memoizedState!==null||le,y=gi;var T=le;gi=d,(le=r)&&!T?vi(s,u,(u.subtreeFlags&8772)!==0):yi(s,u),gi=y,le=T}break;case 30:break;default:yi(s,u)}}function Hy(s){var r=s.alternate;r!==null&&(s.alternate=null,Hy(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&fh(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Wt=null,Ge=!1;function mi(s,r,u){for(u=u.child;u!==null;)zy(s,r,u),u=u.sibling}function zy(s,r,u){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Ar,u)}catch{}switch(u.tag){case 26:le||Wn(u,r),mi(s,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:le||Wn(u,r);var d=Wt,y=Ge;is(u.type)&&(Wt=u.stateNode,Ge=!1),mi(s,r,u),ha(u.stateNode),Wt=d,Ge=y;break;case 5:le||Wn(u,r);case 6:if(d=Wt,y=Ge,Wt=null,mi(s,r,u),Wt=d,Ge=y,Wt!==null)if(Ge)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(u.stateNode)}catch(T){Vt(u,r,T)}else try{Wt.removeChild(u.stateNode)}catch(T){Vt(u,r,T)}break;case 18:Wt!==null&&(Ge?(s=Wt,Ov(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),zo(s)):Ov(Wt,u.stateNode));break;case 4:d=Wt,y=Ge,Wt=u.stateNode.containerInfo,Ge=!0,mi(s,r,u),Wt=d,Ge=y;break;case 0:case 11:case 14:case 15:Ki(2,u,r),le||Ki(4,u,r),mi(s,r,u);break;case 1:le||(Wn(u,r),d=u.stateNode,typeof d.componentWillUnmount=="function"&&Ly(u,r,d)),mi(s,r,u);break;case 21:mi(s,r,u);break;case 22:le=(d=le)||u.memoizedState!==null,mi(s,r,u),le=d;break;default:mi(s,r,u)}}function qy(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{zo(s)}catch(u){Vt(r,r.return,u)}}}function Yy(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zo(s)}catch(u){Vt(r,r.return,u)}}function Qw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new By),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new By),r;default:throw Error(i(435,s.tag))}}function Xl(s,r){var u=Qw(s);r.forEach(function(d){if(!u.has(d)){u.add(d);var y=a1.bind(null,s,d);d.then(y,y)}})}function He(s,r){var u=r.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],T=s,C=r,A=C;t:for(;A!==null;){switch(A.tag){case 27:if(is(A.type)){Wt=A.stateNode,Ge=!1;break t}break;case 5:Wt=A.stateNode,Ge=!1;break t;case 3:case 4:Wt=A.stateNode.containerInfo,Ge=!0;break t}A=A.return}if(Wt===null)throw Error(i(160));zy(T,C,y),Wt=null,Ge=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Xy(r,s),r=r.sibling}var Pn=null;function Xy(s,r){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:He(r,s),ze(s),d&4&&(Ki(3,s,s.return),ea(3,s),Ki(5,s,s.return));break;case 1:He(r,s),ze(s),d&512&&(le||u===null||Wn(u,u.return)),d&64&&gi&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=Pn;if(He(r,s),ze(s),d&512&&(le||u===null||Wn(u,u.return)),d&4){var T=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){t:{d=s.type,u=s.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":T=y.getElementsByTagName("title")[0],(!T||T[Dr]||T[Se]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(d),y.head.insertBefore(T,y.querySelector("head > title"))),xe(T,d,u),T[Se]=s,pe(T),d=T;break t;case"link":var C=Xv("link","href",y).get(d+(u.href||""));if(C){for(var A=0;A<C.length;A++)if(T=C[A],T.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&T.getAttribute("rel")===(u.rel==null?null:u.rel)&&T.getAttribute("title")===(u.title==null?null:u.title)&&T.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(A,1);break e}}T=y.createElement(d),xe(T,d,u),y.head.appendChild(T);break;case"meta":if(C=Xv("meta","content",y).get(d+(u.content||""))){for(A=0;A<C.length;A++)if(T=C[A],T.getAttribute("content")===(u.content==null?null:""+u.content)&&T.getAttribute("name")===(u.name==null?null:u.name)&&T.getAttribute("property")===(u.property==null?null:u.property)&&T.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&T.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(A,1);break e}}T=y.createElement(d),xe(T,d,u),y.head.appendChild(T);break;default:throw Error(i(468,d))}T[Se]=s,pe(T),d=T}s.stateNode=d}else $v(y,s.type,s.stateNode);else s.stateNode=Yv(y,d,s.memoizedProps);else T!==d?(T===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):T.count--,d===null?$v(y,s.type,s.stateNode):Yv(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&kf(s,s.memoizedProps,u.memoizedProps)}break;case 27:He(r,s),ze(s),d&512&&(le||u===null||Wn(u,u.return)),u!==null&&d&4&&kf(s,s.memoizedProps,u.memoizedProps);break;case 5:if(He(r,s),ze(s),d&512&&(le||u===null||Wn(u,u.return)),s.flags&32){y=s.stateNode;try{ho(y,"")}catch(ut){Vt(s,s.return,ut)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,kf(s,y,u!==null?u.memoizedProps:y)),d&1024&&(Uf=!0);break;case 6:if(He(r,s),ze(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(ut){Vt(s,s.return,ut)}}break;case 3:if(lu=null,y=Pn,Pn=ru(r.containerInfo),He(r,s),Pn=y,ze(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{zo(r.containerInfo)}catch(ut){Vt(s,s.return,ut)}Uf&&(Uf=!1,$y(s));break;case 4:d=Pn,Pn=ru(s.stateNode.containerInfo),He(r,s),ze(s),Pn=d;break;case 12:He(r,s),ze(s);break;case 31:He(r,s),ze(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xl(s,d)));break;case 13:He(r,s),ze(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Wl=je()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xl(s,d)));break;case 22:y=s.memoizedState!==null;var M=u!==null&&u.memoizedState!==null,B=gi,W=le;if(gi=B||y,le=W||M,He(r,s),le=W,gi=B,ze(s),d&8192)t:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(u===null||M||gi||le||Us(s)),u=null,r=s;;){if(r.tag===5||r.tag===26){if(u===null){M=u=r;try{if(T=M.stateNode,y)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{A=M.stateNode;var j=M.memoizedProps.style,z=j!=null&&j.hasOwnProperty("display")?j.display:null;A.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(ut){Vt(M,M.return,ut)}}}else if(r.tag===6){if(u===null){M=r;try{M.stateNode.nodeValue=y?"":M.memoizedProps}catch(ut){Vt(M,M.return,ut)}}}else if(r.tag===18){if(u===null){M=r;try{var X=M.stateNode;y?Lv(X,!0):Lv(M.stateNode,!1)}catch(ut){Vt(M,M.return,ut)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Xl(s,u))));break;case 19:He(r,s),ze(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xl(s,d)));break;case 30:break;case 21:break;default:He(r,s),ze(s)}}function ze(s){var r=s.flags;if(r&2){try{for(var u,d=s.return;d!==null;){if(Vy(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,T=Of(s);Yl(s,T,y);break;case 5:var C=u.stateNode;u.flags&32&&(ho(C,""),u.flags&=-33);var A=Of(s);Yl(s,A,C);break;case 3:case 4:var M=u.stateNode.containerInfo,B=Of(s);Lf(s,B,M);break;default:throw Error(i(161))}}catch(W){Vt(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function $y(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;$y(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function yi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Gy(s,r.alternate,r),r=r.sibling}function Us(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ki(4,r,r.return),Us(r);break;case 1:Wn(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&Ly(r,r.return,u),Us(r);break;case 27:ha(r.stateNode);case 26:case 5:Wn(r,r.return),Us(r);break;case 22:r.memoizedState===null&&Us(r);break;case 30:Us(r);break;default:Us(r)}s=s.sibling}}function vi(s,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=s,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:vi(y,T,u),ea(4,T);break;case 1:if(vi(y,T,u),d=T,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(B){Vt(d,d.return,B)}if(d=T,y=d.updateQueue,y!==null){var A=d.stateNode;try{var M=y.shared.hiddenCallbacks;if(M!==null)for(y.shared.hiddenCallbacks=null,y=0;y<M.length;y++)E0(M[y],A)}catch(B){Vt(d,d.return,B)}}u&&C&64&&Oy(T),na(T,T.return);break;case 27:Fy(T);case 26:case 5:vi(y,T,u),u&&d===null&&C&4&&Uy(T),na(T,T.return);break;case 12:vi(y,T,u);break;case 31:vi(y,T,u),u&&C&4&&qy(y,T);break;case 13:vi(y,T,u),u&&C&4&&Yy(y,T);break;case 22:T.memoizedState===null&&vi(y,T,u),na(T,T.return);break;case 30:break;default:vi(y,T,u)}r=r.sibling}}function Vf(s,r){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Hr(u))}function Ff(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Hr(s))}function kn(s,r,u,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Wy(s,r,u,d),r=r.sibling}function Wy(s,r,u,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:kn(s,r,u,d),y&2048&&ea(9,r);break;case 1:kn(s,r,u,d);break;case 3:kn(s,r,u,d),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Hr(s)));break;case 12:if(y&2048){kn(s,r,u,d),s=r.stateNode;try{var T=r.memoizedProps,C=T.id,A=T.onPostCommit;typeof A=="function"&&A(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(M){Vt(r,r.return,M)}}else kn(s,r,u,d);break;case 31:kn(s,r,u,d);break;case 13:kn(s,r,u,d);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?kn(s,r,u,d):ia(s,r):T._visibility&2?kn(s,r,u,d):(T._visibility|=2,Io(s,r,u,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Vf(C,r);break;case 24:kn(s,r,u,d),y&2048&&Ff(r.alternate,r);break;default:kn(s,r,u,d)}}function Io(s,r,u,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=s,C=r,A=u,M=d,B=C.flags;switch(C.tag){case 0:case 11:case 15:Io(T,C,A,M,y),ea(8,C);break;case 23:break;case 22:var W=C.stateNode;C.memoizedState!==null?W._visibility&2?Io(T,C,A,M,y):ia(T,C):(W._visibility|=2,Io(T,C,A,M,y)),y&&B&2048&&Vf(C.alternate,C);break;case 24:Io(T,C,A,M,y),y&&B&2048&&Ff(C.alternate,C);break;default:Io(T,C,A,M,y)}r=r.sibling}}function ia(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=s,d=r,y=d.flags;switch(d.tag){case 22:ia(u,d),y&2048&&Vf(d.alternate,d);break;case 24:ia(u,d),y&2048&&Ff(d.alternate,d);break;default:ia(u,d)}r=r.sibling}}var sa=8192;function Po(s,r,u){if(s.subtreeFlags&sa)for(s=s.child;s!==null;)Jy(s,r,u),s=s.sibling}function Jy(s,r,u){switch(s.tag){case 26:Po(s,r,u),s.flags&sa&&s.memoizedState!==null&&V1(u,Pn,s.memoizedState,s.memoizedProps);break;case 5:Po(s,r,u);break;case 3:case 4:var d=Pn;Pn=ru(s.stateNode.containerInfo),Po(s,r,u),Pn=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=sa,sa=16777216,Po(s,r,u),sa=d):Po(s,r,u));break;default:Po(s,r,u)}}function Ky(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function oa(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var d=r[u];ge=d,Qy(d,s)}Ky(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jy(s),s=s.sibling}function jy(s){switch(s.tag){case 0:case 11:case 15:oa(s),s.flags&2048&&Ki(9,s,s.return);break;case 3:oa(s);break;case 12:oa(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,$l(s)):oa(s);break;default:oa(s)}}function $l(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var d=r[u];ge=d,Qy(d,s)}Ky(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ki(8,r,r.return),$l(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,$l(r));break;default:$l(r)}s=s.sibling}}function Qy(s,r){for(;ge!==null;){var u=ge;switch(u.tag){case 0:case 11:case 15:Ki(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Hr(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,ge=d;else t:for(u=s;ge!==null;){d=ge;var y=d.sibling,T=d.return;if(Hy(d),d===u){ge=null;break t}if(y!==null){y.return=T,ge=y;break t}ge=T}}}var Zw={getCacheForType:function(s){var r=_e(oe),u=r.data.get(s);return u===void 0&&(u=s(),r.data.set(s,u)),u},cacheSignal:function(){return _e(oe).controller.signal}},t1=typeof WeakMap=="function"?WeakMap:Map,Ot=0,Ht=null,bt=null,Mt=0,Ut=0,on=null,ji=!1,ko=!1,Bf=!1,Si=0,Zt=0,Qi=0,Vs=0,Gf=0,rn=0,Oo=0,ra=null,qe=null,Hf=!1,Wl=0,Zy=0,Jl=1/0,Kl=null,Zi=null,ce=0,ts=null,Lo=null,Ti=0,zf=0,qf=null,tv=null,aa=0,Yf=null;function an(){return(Ot&2)!==0&&Mt!==0?Mt&-Mt:H.T!==null?jf():mm()}function ev(){if(rn===0)if((Mt&536870912)===0||Rt){var s=sl;sl<<=1,(sl&3932160)===0&&(sl=262144),rn=s}else rn=536870912;return s=nn.current,s!==null&&(s.flags|=32),rn}function Ye(s,r,u){(s===Ht&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)&&(Uo(s,0),es(s,Mt,rn,!1)),Mr(s,u),((Ot&2)===0||s!==Ht)&&(s===Ht&&((Ot&2)===0&&(Vs|=u),Zt===4&&es(s,Mt,rn,!1)),Jn(s))}function nv(s,r,u){if((Ot&6)!==0)throw Error(i(327));var d=!u&&(r&127)===0&&(r&s.expiredLanes)===0||wr(s,r),y=d?i1(s,r):$f(s,r,!0),T=d;do{if(y===0){ko&&!d&&es(s,r,0,!1);break}else{if(u=s.current.alternate,T&&!e1(u)){y=$f(s,r,!1),T=!1;continue}if(y===2){if(T=r,s.errorRecoveryDisabledLanes&T)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var A=s;y=ra;var M=A.current.memoizedState.isDehydrated;if(M&&(Uo(A,C).flags|=256),C=$f(A,C,!1),C!==2){if(Bf&&!M){A.errorRecoveryDisabledLanes|=T,Vs|=T,y=4;break t}T=qe,qe=y,T!==null&&(qe===null?qe=T:qe.push.apply(qe,T))}y=C}if(T=!1,y!==2)continue}}if(y===1){Uo(s,0),es(s,r,0,!0);break}t:{switch(d=s,T=y,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:es(d,r,rn,!ji);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Wl+300-je(),10<y)){if(es(d,r,rn,!ji),rl(d,0,!0)!==0)break t;Ti=r,d.timeoutHandle=Pv(iv.bind(null,d,u,qe,Kl,Hf,r,rn,Vs,Oo,ji,T,"Throttled",-0,0),y);break t}iv(d,u,qe,Kl,Hf,r,rn,Vs,Oo,ji,T,null,-0,0)}}break}while(!0);Jn(s)}function iv(s,r,u,d,y,T,C,A,M,B,W,j,z,X){if(s.timeoutHandle=-1,j=r.subtreeFlags,j&8192||(j&16785408)===16785408){j={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},Jy(r,T,j);var ut=(T&62914560)===T?Wl-je():(T&4194048)===T?Zy-je():0;if(ut=F1(j,ut),ut!==null){Ti=T,s.cancelPendingCommit=ut(hv.bind(null,s,r,T,u,d,y,C,A,M,W,j,null,z,X)),es(s,T,C,!B);return}}hv(s,r,T,u,d,y,C,A,M)}function e1(s){for(var r=s;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],T=y.getSnapshot;y=y.value;try{if(!tn(T(),y))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function es(s,r,u,d){r&=~Gf,r&=~Vs,s.suspendedLanes|=r,s.pingedLanes&=~r,d&&(s.warmLanes|=r),d=s.expirationTimes;for(var y=r;0<y;){var T=31-Ze(y),C=1<<T;d[T]=-1,y&=~C}u!==0&&dm(s,u,r)}function jl(){return(Ot&6)===0?(la(0),!1):!0}function Xf(){if(bt!==null){if(Ut===0)var s=bt.return;else s=bt,ui=Ds=null,lf(s),wo=null,qr=0,s=bt;for(;s!==null;)ky(s.alternate,s),s=s.return;bt=null}}function Uo(s,r){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,_1(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Ti=0,Xf(),Ht=s,bt=u=ai(s.current,null),Mt=r,Ut=0,on=null,ji=!1,ko=wr(s,r),Bf=!1,Oo=rn=Gf=Vs=Qi=Zt=0,qe=ra=null,Hf=!1,(r&8)!==0&&(r|=r&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=r;0<d;){var y=31-Ze(d),T=1<<y;r|=s[y],d&=~T}return Si=r,vl(),u}function sv(s,r){_t=null,H.H=Qr,r===Ao||r===Al?(r=T0(),Ut=3):r===Jh?(r=T0(),Ut=4):Ut=r===Ef?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,on=r,bt===null&&(Zt=1,Bl(s,dn(r,s.current)))}function ov(){var s=nn.current;return s===null?!0:(Mt&4194048)===Mt?yn===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?s===yn:!1}function rv(){var s=H.H;return H.H=Qr,s===null?Qr:s}function av(){var s=H.A;return H.A=Zw,s}function Ql(){Zt=4,ji||(Mt&4194048)!==Mt&&nn.current!==null||(ko=!0),(Qi&134217727)===0&&(Vs&134217727)===0||Ht===null||es(Ht,Mt,rn,!1)}function $f(s,r,u){var d=Ot;Ot|=2;var y=rv(),T=av();(Ht!==s||Mt!==r)&&(Kl=null,Uo(s,r)),r=!1;var C=Zt;t:do try{if(Ut!==0&&bt!==null){var A=bt,M=on;switch(Ut){case 8:Xf(),C=6;break t;case 3:case 2:case 9:case 6:nn.current===null&&(r=!0);var B=Ut;if(Ut=0,on=null,Vo(s,A,M,B),u&&ko){C=0;break t}break;default:B=Ut,Ut=0,on=null,Vo(s,A,M,B)}}n1(),C=Zt;break}catch(W){sv(s,W)}while(!0);return r&&s.shellSuspendCounter++,ui=Ds=null,Ot=d,H.H=y,H.A=T,bt===null&&(Ht=null,Mt=0,vl()),C}function n1(){for(;bt!==null;)lv(bt)}function i1(s,r){var u=Ot;Ot|=2;var d=rv(),y=av();Ht!==s||Mt!==r?(Kl=null,Jl=je()+500,Uo(s,r)):ko=wr(s,r);t:do try{if(Ut!==0&&bt!==null){r=bt;var T=on;e:switch(Ut){case 1:Ut=0,on=null,Vo(s,r,T,1);break;case 2:case 9:if(v0(T)){Ut=0,on=null,uv(r);break}r=function(){Ut!==2&&Ut!==9||Ht!==s||(Ut=7),Jn(s)},T.then(r,r);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:v0(T)?(Ut=0,on=null,uv(r)):(Ut=0,on=null,Vo(s,r,T,7));break;case 5:var C=null;switch(bt.tag){case 26:C=bt.memoizedState;case 5:case 27:var A=bt;if(C?Wv(C):A.stateNode.complete){Ut=0,on=null;var M=A.sibling;if(M!==null)bt=M;else{var B=A.return;B!==null?(bt=B,Zl(B)):bt=null}break e}}Ut=0,on=null,Vo(s,r,T,5);break;case 6:Ut=0,on=null,Vo(s,r,T,6);break;case 8:Xf(),Zt=6;break t;default:throw Error(i(462))}}s1();break}catch(W){sv(s,W)}while(!0);return ui=Ds=null,H.H=d,H.A=y,Ot=u,bt!==null?0:(Ht=null,Mt=0,vl(),Zt)}function s1(){for(;bt!==null&&!wA();)lv(bt)}function lv(s){var r=Iy(s.alternate,s,Si);s.memoizedProps=s.pendingProps,r===null?Zl(s):bt=r}function uv(s){var r=s,u=r.alternate;switch(r.tag){case 15:case 0:r=Ay(u,r,r.pendingProps,r.type,void 0,Mt);break;case 11:r=Ay(u,r,r.pendingProps,r.type.render,r.ref,Mt);break;case 5:lf(r);default:ky(u,r),r=bt=a0(r,Si),r=Iy(u,r,Si)}s.memoizedProps=s.pendingProps,r===null?Zl(s):bt=r}function Vo(s,r,u,d){ui=Ds=null,lf(r),wo=null,qr=0;var y=r.return;try{if(Xw(s,y,r,u,Mt)){Zt=1,Bl(s,dn(u,s.current)),bt=null;return}}catch(T){if(y!==null)throw bt=y,T;Zt=1,Bl(s,dn(u,s.current)),bt=null;return}r.flags&32768?(Rt||d===1?s=!0:ko||(Mt&536870912)!==0?s=!1:(ji=s=!0,(d===2||d===9||d===3||d===6)&&(d=nn.current,d!==null&&d.tag===13&&(d.flags|=16384))),cv(r,s)):Zl(r)}function Zl(s){var r=s;do{if((r.flags&32768)!==0){cv(r,ji);return}s=r.return;var u=Jw(r.alternate,r,Si);if(u!==null){bt=u;return}if(r=r.sibling,r!==null){bt=r;return}bt=r=s}while(r!==null);Zt===0&&(Zt=5)}function cv(s,r){do{var u=Kw(s.alternate,s);if(u!==null){u.flags&=32767,bt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(s=s.sibling,s!==null)){bt=s;return}bt=s=u}while(s!==null);Zt=6,bt=null}function hv(s,r,u,d,y,T,C,A,M){s.cancelPendingCommit=null;do tu();while(ce!==0);if((Ot&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=kh,UA(s,u,T,C,A,M),s===Ht&&(bt=Ht=null,Mt=0),Lo=r,ts=s,Ti=u,zf=T,qf=y,tv=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,l1(nl,function(){return mv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=H.T,H.T=null,y=Q.p,Q.p=2,C=Ot,Ot|=4;try{jw(s,r,u)}finally{Ot=C,Q.p=y,H.T=d}}ce=1,fv(),dv(),pv()}}function fv(){if(ce===1){ce=0;var s=ts,r=Lo,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=H.T,H.T=null;var d=Q.p;Q.p=2;var y=Ot;Ot|=4;try{Xy(r,s);var T=od,C=Qm(s.containerInfo),A=T.focusedElem,M=T.selectionRange;if(C!==A&&A&&A.ownerDocument&&jm(A.ownerDocument.documentElement,A)){if(M!==null&&Dh(A)){var B=M.start,W=M.end;if(W===void 0&&(W=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(W,A.value.length);else{var j=A.ownerDocument||document,z=j&&j.defaultView||window;if(z.getSelection){var X=z.getSelection(),ut=A.textContent.length,dt=Math.min(M.start,ut),Gt=M.end===void 0?dt:Math.min(M.end,ut);!X.extend&&dt>Gt&&(C=Gt,Gt=dt,dt=C);var U=Km(A,dt),N=Km(A,Gt);if(U&&N&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==N.node||X.focusOffset!==N.offset)){var F=j.createRange();F.setStart(U.node,U.offset),X.removeAllRanges(),dt>Gt?(X.addRange(F),X.extend(N.node,N.offset)):(F.setEnd(N.node,N.offset),X.addRange(F))}}}}for(j=[],X=A;X=X.parentNode;)X.nodeType===1&&j.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<j.length;A++){var J=j[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}fu=!!sd,od=sd=null}finally{Ot=y,Q.p=d,H.T=u}}s.current=r,ce=2}}function dv(){if(ce===2){ce=0;var s=ts,r=Lo,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=H.T,H.T=null;var d=Q.p;Q.p=2;var y=Ot;Ot|=4;try{Gy(s,r.alternate,r)}finally{Ot=y,Q.p=d,H.T=u}}ce=3}}function pv(){if(ce===4||ce===3){ce=0,MA();var s=ts,r=Lo,u=Ti,d=tv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ce=5:(ce=0,Lo=ts=null,gv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Zi=null),ch(u),r=r.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Ar,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=H.T,y=Q.p,Q.p=2,H.T=null;try{for(var T=s.onRecoverableError,C=0;C<d.length;C++){var A=d[C];T(A.value,{componentStack:A.stack})}}finally{H.T=r,Q.p=y}}(Ti&3)!==0&&tu(),Jn(s),y=s.pendingLanes,(u&261930)!==0&&(y&42)!==0?s===Yf?aa++:(aa=0,Yf=s):aa=0,la(0)}}function gv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Hr(r)))}function tu(){return fv(),dv(),pv(),mv()}function mv(){if(ce!==5)return!1;var s=ts,r=zf;zf=0;var u=ch(Ti),d=H.T,y=Q.p;try{Q.p=32>u?32:u,H.T=null,u=qf,qf=null;var T=ts,C=Ti;if(ce=0,Lo=ts=null,Ti=0,(Ot&6)!==0)throw Error(i(331));var A=Ot;if(Ot|=4,jy(T.current),Wy(T,T.current,C,u),Ot=A,la(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Ar,T)}catch{}return!0}finally{Q.p=y,H.T=d,gv(s,r)}}function yv(s,r,u){r=dn(u,r),r=xf(s.stateNode,r,2),s=$i(s,r,2),s!==null&&(Mr(s,2),Jn(s))}function Vt(s,r,u){if(s.tag===3)yv(s,s,u);else for(;r!==null;){if(r.tag===3){yv(r,s,u);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Zi===null||!Zi.has(d))){s=dn(u,s),u=vy(2),d=$i(r,u,2),d!==null&&(Sy(u,d,r,s),Mr(d,2),Jn(d));break}}r=r.return}}function Wf(s,r,u){var d=s.pingCache;if(d===null){d=s.pingCache=new t1;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(u)||(Bf=!0,y.add(u),s=o1.bind(null,s,r,u),r.then(s,s))}function o1(s,r,u){var d=s.pingCache;d!==null&&d.delete(r),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ht===s&&(Mt&u)===u&&(Zt===4||Zt===3&&(Mt&62914560)===Mt&&300>je()-Wl?(Ot&2)===0&&Uo(s,0):Gf|=u,Oo===Mt&&(Oo=0)),Jn(s)}function vv(s,r){r===0&&(r=fm()),s=As(s,r),s!==null&&(Mr(s,r),Jn(s))}function r1(s){var r=s.memoizedState,u=0;r!==null&&(u=r.retryLane),vv(s,u)}function a1(s,r){var u=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),vv(s,u)}function l1(s,r){return rh(s,r)}var eu=null,Fo=null,Jf=!1,nu=!1,Kf=!1,ns=0;function Jn(s){s!==Fo&&s.next===null&&(Fo===null?eu=Fo=s:Fo=Fo.next=s),nu=!0,Jf||(Jf=!0,c1())}function la(s,r){if(!Kf&&nu){Kf=!0;do for(var u=!1,d=eu;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var T=0;else{var C=d.suspendedLanes,A=d.pingedLanes;T=(1<<31-Ze(42|s)+1)-1,T&=y&~(C&~A),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(u=!0,Cv(d,T))}else T=Mt,T=rl(d,d===Ht?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||wr(d,T)||(u=!0,Cv(d,T));d=d.next}while(u);Kf=!1}}function u1(){Sv()}function Sv(){nu=Jf=!1;var s=0;ns!==0&&T1()&&(s=ns);for(var r=je(),u=null,d=eu;d!==null;){var y=d.next,T=Tv(d,r);T===0?(d.next=null,u===null?eu=y:u.next=y,y===null&&(Fo=u)):(u=d,(s!==0||(T&3)!==0)&&(nu=!0)),d=y}ce!==0&&ce!==5||la(s),ns!==0&&(ns=0)}function Tv(s,r){for(var u=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var C=31-Ze(T),A=1<<C,M=y[C];M===-1?((A&u)===0||(A&d)!==0)&&(y[C]=LA(A,r)):M<=r&&(s.expiredLanes|=A),T&=~A}if(r=Ht,u=Mt,u=rl(s,s===r?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===r&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&ah(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||wr(s,u)){if(r=u&-u,r===s.callbackPriority)return r;switch(d!==null&&ah(d),ch(u)){case 2:case 8:u=cm;break;case 32:u=nl;break;case 268435456:u=hm;break;default:u=nl}return d=_v.bind(null,s),u=rh(u,d),s.callbackPriority=r,s.callbackNode=u,r}return d!==null&&d!==null&&ah(d),s.callbackPriority=2,s.callbackNode=null,2}function _v(s,r){if(ce!==0&&ce!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(tu()&&s.callbackNode!==u)return null;var d=Mt;return d=rl(s,s===Ht?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(nv(s,d,r),Tv(s,je()),s.callbackNode!=null&&s.callbackNode===u?_v.bind(null,s):null)}function Cv(s,r){if(tu())return null;nv(s,r,!0)}function c1(){C1(function(){(Ot&6)!==0?rh(um,u1):Sv()})}function jf(){if(ns===0){var s=Eo;s===0&&(s=il,il<<=1,(il&261888)===0&&(il=256)),ns=s}return ns}function xv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:cl(""+s)}function Ev(s,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,s.id&&u.setAttribute("form",s.id),r.parentNode.insertBefore(u,r),s=new FormData(s),u.parentNode.removeChild(u),s}function h1(s,r,u,d,y){if(r==="submit"&&u&&u.stateNode===y){var T=xv((y[Fe]||null).action),C=d.submitter;C&&(r=(r=C[Fe]||null)?xv(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var A=new pl("action","action",null,d,y);s.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ns!==0){var M=C?Ev(y,C):new FormData(y);yf(u,{pending:!0,data:M,method:y.method,action:T},null,M)}}else typeof T=="function"&&(A.preventDefault(),M=C?Ev(y,C):new FormData(y),yf(u,{pending:!0,data:M,method:y.method,action:T},T,M))},currentTarget:y}]})}}for(var Qf=0;Qf<Ph.length;Qf++){var Zf=Ph[Qf],f1=Zf.toLowerCase(),d1=Zf[0].toUpperCase()+Zf.slice(1);In(f1,"on"+d1)}In(e0,"onAnimationEnd"),In(n0,"onAnimationIteration"),In(i0,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Dw,"onTransitionRun"),In(Rw,"onTransitionStart"),In(Nw,"onTransitionCancel"),In(s0,"onTransitionEnd"),uo("onMouseEnter",["mouseout","mouseover"]),uo("onMouseLeave",["mouseout","mouseover"]),uo("onPointerEnter",["pointerout","pointerover"]),uo("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ua));function bv(s,r){r=(r&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],y=d.event;d=d.listeners;t:{var T=void 0;if(r)for(var C=d.length-1;0<=C;C--){var A=d[C],M=A.instance,B=A.currentTarget;if(A=A.listener,M!==T&&y.isPropagationStopped())break t;T=A,y.currentTarget=B;try{T(y)}catch(W){yl(W)}y.currentTarget=null,T=M}else for(C=0;C<d.length;C++){if(A=d[C],M=A.instance,B=A.currentTarget,A=A.listener,M!==T&&y.isPropagationStopped())break t;T=A,y.currentTarget=B;try{T(y)}catch(W){yl(W)}y.currentTarget=null,T=M}}}}function At(s,r){var u=r[hh];u===void 0&&(u=r[hh]=new Set);var d=s+"__bubble";u.has(d)||(Av(r,s,2,!1),u.add(d))}function td(s,r,u){var d=0;r&&(d|=4),Av(u,s,d,r)}var iu="_reactListening"+Math.random().toString(36).slice(2);function ed(s){if(!s[iu]){s[iu]=!0,Sm.forEach(function(u){u!=="selectionchange"&&(p1.has(u)||td(u,!1,s),td(u,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[iu]||(r[iu]=!0,td("selectionchange",!1,r))}}function Av(s,r,u,d){switch(eS(r)){case 2:var y=H1;break;case 8:y=z1;break;default:y=md}u=y.bind(null,r,u,s),y=void 0,!Th||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(r,u,{capture:!0,passive:y}):s.addEventListener(r,u,!0):y!==void 0?s.addEventListener(r,u,{passive:y}):s.addEventListener(r,u,!1)}function nd(s,r,u,d,y){var T=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var A=d.stateNode.containerInfo;if(A===y)break;if(C===4)for(C=d.return;C!==null;){var M=C.tag;if((M===3||M===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;A!==null;){if(C=ro(A),C===null)return;if(M=C.tag,M===5||M===6||M===26||M===27){d=T=C;continue t}A=A.parentNode}}d=d.return}Nm(function(){var B=T,W=vh(u),j=[];t:{var z=o0.get(s);if(z!==void 0){var X=pl,ut=s;switch(s){case"keypress":if(fl(u)===0)break t;case"keydown":case"keyup":X=aw;break;case"focusin":ut="focus",X=Eh;break;case"focusout":ut="blur",X=Eh;break;case"beforeblur":case"afterblur":X=Eh;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=JA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=cw;break;case e0:case n0:case i0:X=QA;break;case s0:X=fw;break;case"scroll":case"scrollend":X=$A;break;case"wheel":X=pw;break;case"copy":case"cut":case"paste":X=tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Lm;break;case"toggle":case"beforetoggle":X=mw}var dt=(r&4)!==0,Gt=!dt&&(s==="scroll"||s==="scrollend"),U=dt?z!==null?z+"Capture":null:z;dt=[];for(var N=B,F;N!==null;){var J=N;if(F=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||F===null||U===null||(J=Nr(N,U),J!=null&&dt.push(ca(N,J,F))),Gt)break;N=N.return}0<dt.length&&(z=new X(z,ut,null,u,W),j.push({event:z,listeners:dt}))}}if((r&7)===0){t:{if(z=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",z&&u!==yh&&(ut=u.relatedTarget||u.fromElement)&&(ro(ut)||ut[oo]))break t;if((X||z)&&(z=W.window===W?W:(z=W.ownerDocument)?z.defaultView||z.parentWindow:window,X?(ut=u.relatedTarget||u.toElement,X=B,ut=ut?ro(ut):null,ut!==null&&(Gt=a(ut),dt=ut.tag,ut!==Gt||dt!==5&&dt!==27&&dt!==6)&&(ut=null)):(X=null,ut=B),X!==ut)){if(dt=km,J="onMouseLeave",U="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(dt=Lm,J="onPointerLeave",U="onPointerEnter",N="pointer"),Gt=X==null?z:Rr(X),F=ut==null?z:Rr(ut),z=new dt(J,N+"leave",X,u,W),z.target=Gt,z.relatedTarget=F,J=null,ro(W)===B&&(dt=new dt(U,N+"enter",ut,u,W),dt.target=F,dt.relatedTarget=Gt,J=dt),Gt=J,X&&ut)e:{for(dt=g1,U=X,N=ut,F=0,J=U;J;J=dt(J))F++;J=0;for(var ft=N;ft;ft=dt(ft))J++;for(;0<F-J;)U=dt(U),F--;for(;0<J-F;)N=dt(N),J--;for(;F--;){if(U===N||N!==null&&U===N.alternate){dt=U;break e}U=dt(U),N=dt(N)}dt=null}else dt=null;X!==null&&wv(j,z,X,dt,!1),ut!==null&&Gt!==null&&wv(j,Gt,ut,dt,!0)}}t:{if(z=B?Rr(B):window,X=z.nodeName&&z.nodeName.toLowerCase(),X==="select"||X==="input"&&z.type==="file")var It=qm;else if(Hm(z))if(Ym)It=Aw;else{It=Ew;var ht=xw}else X=z.nodeName,!X||X.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?B&&mh(B.elementType)&&(It=qm):It=bw;if(It&&(It=It(s,B))){zm(j,It,u,W);break t}ht&&ht(s,z,B),s==="focusout"&&B&&z.type==="number"&&B.memoizedProps.value!=null&&gh(z,"number",z.value)}switch(ht=B?Rr(B):window,s){case"focusin":(Hm(ht)||ht.contentEditable==="true")&&(mo=ht,Rh=B,Fr=null);break;case"focusout":Fr=Rh=mo=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,Zm(j,u,W);break;case"selectionchange":if(Mw)break;case"keydown":case"keyup":Zm(j,u,W)}var Ct;if(Ah)t:{switch(s){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else go?Bm(s,u)&&(Dt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Dt="onCompositionStart");Dt&&(Um&&u.locale!=="ko"&&(go||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&go&&(Ct=Im()):(Bi=W,_h="value"in Bi?Bi.value:Bi.textContent,go=!0)),ht=su(B,Dt),0<ht.length&&(Dt=new Om(Dt,s,null,u,W),j.push({event:Dt,listeners:ht}),Ct?Dt.data=Ct:(Ct=Gm(u),Ct!==null&&(Dt.data=Ct)))),(Ct=vw?Sw(s,u):Tw(s,u))&&(Dt=su(B,"onBeforeInput"),0<Dt.length&&(ht=new Om("onBeforeInput","beforeinput",null,u,W),j.push({event:ht,listeners:Dt}),ht.data=Ct)),h1(j,s,B,u,W)}bv(j,r)})}function ca(s,r,u){return{instance:s,listener:r,currentTarget:u}}function su(s,r){for(var u=r+"Capture",d=[];s!==null;){var y=s,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=Nr(s,u),y!=null&&d.unshift(ca(s,y,T)),y=Nr(s,r),y!=null&&d.push(ca(s,y,T))),s.tag===3)return d;s=s.return}return[]}function g1(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function wv(s,r,u,d,y){for(var T=r._reactName,C=[];u!==null&&u!==d;){var A=u,M=A.alternate,B=A.stateNode;if(A=A.tag,M!==null&&M===d)break;A!==5&&A!==26&&A!==27||B===null||(M=B,y?(B=Nr(u,T),B!=null&&C.unshift(ca(u,B,M))):y||(B=Nr(u,T),B!=null&&C.push(ca(u,B,M)))),u=u.return}C.length!==0&&s.push({event:r,listeners:C})}var m1=/\r\n?/g,y1=/\u0000|\uFFFD/g;function Mv(s){return(typeof s=="string"?s:""+s).replace(m1,`
`).replace(y1,"")}function Dv(s,r){return r=Mv(r),Mv(s)===r}function Bt(s,r,u,d,y,T){switch(u){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ho(s,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ho(s,""+d);break;case"className":ll(s,"class",d);break;case"tabIndex":ll(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(s,u,d);break;case"style":Dm(s,d,T);break;case"data":if(r!=="object"){ll(s,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=cl(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(u==="formAction"?(r!=="input"&&Bt(s,r,"name",y.name,y,null),Bt(s,r,"formEncType",y.formEncType,y,null),Bt(s,r,"formMethod",y.formMethod,y,null),Bt(s,r,"formTarget",y.formTarget,y,null)):(Bt(s,r,"encType",y.encType,y,null),Bt(s,r,"method",y.method,y,null),Bt(s,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=cl(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=oi);break;case"onScroll":d!=null&&At("scroll",s);break;case"onScrollEnd":d!=null&&At("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=cl(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":At("beforetoggle",s),At("toggle",s),al(s,"popover",d);break;case"xlinkActuate":si(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":si(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":si(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":si(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":si(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":si(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":si(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":si(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":si(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":al(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=YA.get(u)||u,al(s,u,d))}}function id(s,r,u,d,y,T){switch(u){case"style":Dm(s,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof d=="string"?ho(s,d):(typeof d=="number"||typeof d=="bigint")&&ho(s,""+d);break;case"onScroll":d!=null&&At("scroll",s);break;case"onScrollEnd":d!=null&&At("scrollend",s);break;case"onClick":d!=null&&(s.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tm.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),r=u.slice(2,y?u.length-7:void 0),T=s[Fe]||null,T=T!=null?T[u]:null,typeof T=="function"&&s.removeEventListener(r,T,y),typeof d=="function")){typeof T!="function"&&T!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(r,d,y);break t}u in s?s[u]=d:d===!0?s.setAttribute(u,""):al(s,u,d)}}}function xe(s,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",s),At("load",s);var d=!1,y=!1,T;for(T in u)if(u.hasOwnProperty(T)){var C=u[T];if(C!=null)switch(T){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(s,r,T,C,u,null)}}y&&Bt(s,r,"srcSet",u.srcSet,u,null),d&&Bt(s,r,"src",u.src,u,null);return;case"input":At("invalid",s);var A=T=C=y=null,M=null,B=null;for(d in u)if(u.hasOwnProperty(d)){var W=u[d];if(W!=null)switch(d){case"name":y=W;break;case"type":C=W;break;case"checked":M=W;break;case"defaultChecked":B=W;break;case"value":T=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:Bt(s,r,d,W,u,null)}}bm(s,T,A,M,B,C,y,!1);return;case"select":At("invalid",s),d=C=T=null;for(y in u)if(u.hasOwnProperty(y)&&(A=u[y],A!=null))switch(y){case"value":T=A;break;case"defaultValue":C=A;break;case"multiple":d=A;default:Bt(s,r,y,A,u,null)}r=T,u=C,s.multiple=!!d,r!=null?co(s,!!d,r,!1):u!=null&&co(s,!!d,u,!0);return;case"textarea":At("invalid",s),T=y=d=null;for(C in u)if(u.hasOwnProperty(C)&&(A=u[C],A!=null))switch(C){case"value":d=A;break;case"defaultValue":y=A;break;case"children":T=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Bt(s,r,C,A,u,null)}wm(s,d,y,T);return;case"option":for(M in u)if(u.hasOwnProperty(M)&&(d=u[M],d!=null))switch(M){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Bt(s,r,M,d,u,null)}return;case"dialog":At("beforetoggle",s),At("toggle",s),At("cancel",s),At("close",s);break;case"iframe":case"object":At("load",s);break;case"video":case"audio":for(d=0;d<ua.length;d++)At(ua[d],s);break;case"image":At("error",s),At("load",s);break;case"details":At("toggle",s);break;case"embed":case"source":case"link":At("error",s),At("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in u)if(u.hasOwnProperty(B)&&(d=u[B],d!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(s,r,B,d,u,null)}return;default:if(mh(r)){for(W in u)u.hasOwnProperty(W)&&(d=u[W],d!==void 0&&id(s,r,W,d,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(d=u[A],d!=null&&Bt(s,r,A,d,u,null))}function v1(s,r,u,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,C=null,A=null,M=null,B=null,W=null;for(X in u){var j=u[X];if(u.hasOwnProperty(X)&&j!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=j;default:d.hasOwnProperty(X)||Bt(s,r,X,null,d,j)}}for(var z in d){var X=d[z];if(j=u[z],d.hasOwnProperty(z)&&(X!=null||j!=null))switch(z){case"type":T=X;break;case"name":y=X;break;case"checked":B=X;break;case"defaultChecked":W=X;break;case"value":C=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==j&&Bt(s,r,z,X,d,j)}}ph(s,C,A,M,B,W,T,y);return;case"select":X=C=A=z=null;for(T in u)if(M=u[T],u.hasOwnProperty(T)&&M!=null)switch(T){case"value":break;case"multiple":X=M;default:d.hasOwnProperty(T)||Bt(s,r,T,null,d,M)}for(y in d)if(T=d[y],M=u[y],d.hasOwnProperty(y)&&(T!=null||M!=null))switch(y){case"value":z=T;break;case"defaultValue":A=T;break;case"multiple":C=T;default:T!==M&&Bt(s,r,y,T,d,M)}r=A,u=C,d=X,z!=null?co(s,!!u,z,!1):!!d!=!!u&&(r!=null?co(s,!!u,r,!0):co(s,!!u,u?[]:"",!1));return;case"textarea":X=z=null;for(A in u)if(y=u[A],u.hasOwnProperty(A)&&y!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Bt(s,r,A,null,d,y)}for(C in d)if(y=d[C],T=u[C],d.hasOwnProperty(C)&&(y!=null||T!=null))switch(C){case"value":z=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&Bt(s,r,C,y,d,T)}Am(s,z,X);return;case"option":for(var ut in u)if(z=u[ut],u.hasOwnProperty(ut)&&z!=null&&!d.hasOwnProperty(ut))switch(ut){case"selected":s.selected=!1;break;default:Bt(s,r,ut,null,d,z)}for(M in d)if(z=d[M],X=u[M],d.hasOwnProperty(M)&&z!==X&&(z!=null||X!=null))switch(M){case"selected":s.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Bt(s,r,M,z,d,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in u)z=u[dt],u.hasOwnProperty(dt)&&z!=null&&!d.hasOwnProperty(dt)&&Bt(s,r,dt,null,d,z);for(B in d)if(z=d[B],X=u[B],d.hasOwnProperty(B)&&z!==X&&(z!=null||X!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,r));break;default:Bt(s,r,B,z,d,X)}return;default:if(mh(r)){for(var Gt in u)z=u[Gt],u.hasOwnProperty(Gt)&&z!==void 0&&!d.hasOwnProperty(Gt)&&id(s,r,Gt,void 0,d,z);for(W in d)z=d[W],X=u[W],!d.hasOwnProperty(W)||z===X||z===void 0&&X===void 0||id(s,r,W,z,d,X);return}}for(var U in u)z=u[U],u.hasOwnProperty(U)&&z!=null&&!d.hasOwnProperty(U)&&Bt(s,r,U,null,d,z);for(j in d)z=d[j],X=u[j],!d.hasOwnProperty(j)||z===X||z==null&&X==null||Bt(s,r,j,z,d,X)}function Rv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function S1(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var y=u[d],T=y.transferSize,C=y.initiatorType,A=y.duration;if(T&&A&&Rv(C)){for(C=0,A=y.responseEnd,d+=1;d<u.length;d++){var M=u[d],B=M.startTime;if(B>A)break;var W=M.transferSize,j=M.initiatorType;W&&Rv(j)&&(M=M.responseEnd,C+=W*(M<A?1:(A-B)/(M-B)))}if(--d,r+=8*(T+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var sd=null,od=null;function ou(s){return s.nodeType===9?s:s.ownerDocument}function Nv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function rd(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ad=null;function T1(){var s=window.event;return s&&s.type==="popstate"?s===ad?!1:(ad=s,!0):(ad=null,!1)}var Pv=typeof setTimeout=="function"?setTimeout:void 0,_1=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,C1=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(s){return kv.resolve(null).then(s).catch(x1)}:Pv;function x1(s){setTimeout(function(){throw s})}function is(s){return s==="head"}function Ov(s,r){var u=r,d=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(d===0){s.removeChild(y),zo(r);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")ha(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,ha(u);for(var T=u.firstChild;T;){var C=T.nextSibling,A=T.nodeName;T[Dr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||u.removeChild(T),T=C}}else u==="body"&&ha(s.ownerDocument.body);u=y}while(u);zo(r)}function Lv(s,r){var u=s;s=0;do{var d=u.nextSibling;if(u.nodeType===1?r?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(r?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=d}while(u)}function ld(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":ld(u),fh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function E1(s,r,u,d){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Dr])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=vn(s.nextSibling),s===null)break}return null}function b1(s,r,u){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=vn(s.nextSibling),s===null))return null;return s}function Uv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=vn(s.nextSibling),s===null))return null;return s}function ud(s){return s.data==="$?"||s.data==="$~"}function cd(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function A1(s,r){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||u.readyState!=="loading")r();else{var d=function(){r(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function vn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var hd=null;function Vv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(r===0)return vn(s.nextSibling);r--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||r++}s=s.nextSibling}return null}function Fv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(r===0)return s;r--}else u!=="/$"&&u!=="/&"||r++}s=s.previousSibling}return null}function Bv(s,r,u){switch(r=ou(u),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ha(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);fh(s)}var Sn=new Map,Gv=new Set;function ru(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _i=Q.d;Q.d={f:w1,r:M1,D:D1,C:R1,L:N1,m:I1,X:k1,S:P1,M:O1};function w1(){var s=_i.f(),r=jl();return s||r}function M1(s){var r=ao(s);r!==null&&r.tag===5&&r.type==="form"?sy(r):_i.r(s)}var Bo=typeof document>"u"?null:document;function Hv(s,r,u){var d=Bo;if(d&&typeof r=="string"&&r){var y=hn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Gv.has(y)||(Gv.add(y),s={rel:s,crossOrigin:u,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),xe(r,"link",s),pe(r),d.head.appendChild(r)))}}function D1(s){_i.D(s),Hv("dns-prefetch",s,null)}function R1(s,r){_i.C(s,r),Hv("preconnect",s,r)}function N1(s,r,u){_i.L(s,r,u);var d=Bo;if(d&&s&&r){var y='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+hn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+hn(u.imageSizes)+'"]')):y+='[href="'+hn(s)+'"]';var T=y;switch(r){case"style":T=Go(s);break;case"script":T=Ho(s)}Sn.has(T)||(s=v({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:s,as:r},u),Sn.set(T,s),d.querySelector(y)!==null||r==="style"&&d.querySelector(fa(T))||r==="script"&&d.querySelector(da(T))||(r=d.createElement("link"),xe(r,"link",s),pe(r),d.head.appendChild(r)))}}function I1(s,r){_i.m(s,r);var u=Bo;if(u&&s){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+hn(d)+'"][href="'+hn(s)+'"]',T=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ho(s)}if(!Sn.has(T)&&(s=v({rel:"modulepreload",href:s},r),Sn.set(T,s),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(da(T)))return}d=u.createElement("link"),xe(d,"link",s),pe(d),u.head.appendChild(d)}}}function P1(s,r,u){_i.S(s,r,u);var d=Bo;if(d&&s){var y=lo(d).hoistableStyles,T=Go(s);r=r||"default";var C=y.get(T);if(!C){var A={loading:0,preload:null};if(C=d.querySelector(fa(T)))A.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":r},u),(u=Sn.get(T))&&fd(s,u);var M=C=d.createElement("link");pe(M),xe(M,"link",s),M._p=new Promise(function(B,W){M.onload=B,M.onerror=W}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,au(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:A},y.set(T,C)}}}function k1(s,r){_i.X(s,r);var u=Bo;if(u&&s){var d=lo(u).hoistableScripts,y=Ho(s),T=d.get(y);T||(T=u.querySelector(da(y)),T||(s=v({src:s,async:!0},r),(r=Sn.get(y))&&dd(s,r),T=u.createElement("script"),pe(T),xe(T,"link",s),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(y,T))}}function O1(s,r){_i.M(s,r);var u=Bo;if(u&&s){var d=lo(u).hoistableScripts,y=Ho(s),T=d.get(y);T||(T=u.querySelector(da(y)),T||(s=v({src:s,async:!0,type:"module"},r),(r=Sn.get(y))&&dd(s,r),T=u.createElement("script"),pe(T),xe(T,"link",s),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(y,T))}}function zv(s,r,u,d){var y=(y=yt.current)?ru(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=Go(u.href),u=lo(y).hoistableStyles,d=u.get(r),d||(d={type:"style",instance:null,count:0,state:null},u.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Go(u.href);var T=lo(y).hoistableStyles,C=T.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,C),(T=y.querySelector(fa(s)))&&!T._p&&(C.instance=T,C.state.loading=5),Sn.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Sn.set(s,u),T||L1(y,s,u,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ho(u),u=lo(y).hoistableScripts,d=u.get(r),d||(d={type:"script",instance:null,count:0,state:null},u.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Go(s){return'href="'+hn(s)+'"'}function fa(s){return'link[rel="stylesheet"]['+s+"]"}function qv(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function L1(s,r,u,d){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=s.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),xe(r,"link",u),pe(r),s.head.appendChild(r))}function Ho(s){return'[src="'+hn(s)+'"]'}function da(s){return"script[async]"+s}function Yv(s,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var d=s.querySelector('style[data-href~="'+hn(u.href)+'"]');if(d)return r.instance=d,pe(d),d;var y=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),pe(d),xe(d,"style",y),au(d,u.precedence,s),r.instance=d;case"stylesheet":y=Go(u.href);var T=s.querySelector(fa(y));if(T)return r.state.loading|=4,r.instance=T,pe(T),T;d=qv(u),(y=Sn.get(y))&&fd(d,y),T=(s.ownerDocument||s).createElement("link"),pe(T);var C=T;return C._p=new Promise(function(A,M){C.onload=A,C.onerror=M}),xe(T,"link",d),r.state.loading|=4,au(T,u.precedence,s),r.instance=T;case"script":return T=Ho(u.src),(y=s.querySelector(da(T)))?(r.instance=y,pe(y),y):(d=u,(y=Sn.get(T))&&(d=v({},u),dd(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),pe(y),xe(y,"link",d),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,au(d,u.precedence,s));return r.instance}function au(s,r,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,T=y,C=0;C<d.length;C++){var A=d[C];if(A.dataset.precedence===r)T=A;else if(T!==y)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(s,r.firstChild))}function fd(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function dd(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var lu=null;function Xv(s,r,u){if(lu===null){var d=new Map,y=lu=new Map;y.set(u,d)}else y=lu,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var T=u[y];if(!(T[Dr]||T[Se]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=s+C;var A=d.get(C);A?A.push(T):d.set(C,[T])}}return d}function $v(s,r,u){s=s.ownerDocument||s,s.head.insertBefore(u,r==="title"?s.querySelector("head > title"):null)}function U1(s,r,u){if(u===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Wv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function V1(s,r,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Go(d.href),T=r.querySelector(fa(y));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=uu.bind(s),r.then(s,s)),u.state.loading|=4,u.instance=T,pe(T);return}T=r.ownerDocument||r,d=qv(d),(y=Sn.get(y))&&fd(d,y),T=T.createElement("link"),pe(T);var C=T;C._p=new Promise(function(A,M){C.onload=A,C.onerror=M}),xe(T,"link",d),u.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,r),(r=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=uu.bind(s),r.addEventListener("load",u),r.addEventListener("error",u))}}var pd=0;function F1(s,r){return s.stylesheets&&s.count===0&&hu(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var d=setTimeout(function(){if(s.stylesheets&&hu(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+r);0<s.imgBytes&&pd===0&&(pd=62500*S1());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hu(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>pd?50:800)+r);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function uu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hu(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cu=null;function hu(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cu=new Map,r.forEach(B1,s),cu=null,uu.call(s))}function B1(s,r){if(!(r.state.loading&4)){var u=cu.get(s);if(u)var d=u.get(null);else{u=new Map,cu.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var C=y[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),d=C)}d&&u.set(null,d)}y=r.instance,C=y.getAttribute("data-precedence"),T=u.get(C)||d,T===d&&u.set(null,y),u.set(C,y),this.count++,d=uu.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),T?T.parentNode.insertBefore(y,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var pa={$$typeof:R,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function G1(s,r,u,d,y,T,C,A,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lh(0),this.hiddenUpdates=lh(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Jv(s,r,u,d,y,T,C,A,M,B,W,j){return s=new G1(s,r,u,C,M,B,W,j,A),r=1,T===!0&&(r|=24),T=en(3,null,null,r),s.current=T,T.stateNode=s,r=Xh(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:d,isDehydrated:u,cache:r},Kh(T),s}function Kv(s){return s?(s=So,s):So}function jv(s,r,u,d,y,T){y=Kv(y),d.context===null?d.context=y:d.pendingContext=y,d=Xi(r),d.payload={element:u},T=T===void 0?null:T,T!==null&&(d.callback=T),u=$i(s,d,r),u!==null&&(Ye(u,s,r),Xr(u,s,r))}function Qv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<r?u:r}}function gd(s,r){Qv(s,r),(s=s.alternate)&&Qv(s,r)}function Zv(s){if(s.tag===13||s.tag===31){var r=As(s,67108864);r!==null&&Ye(r,s,67108864),gd(s,67108864)}}function tS(s){if(s.tag===13||s.tag===31){var r=an();r=uh(r);var u=As(s,r);u!==null&&Ye(u,s,r),gd(s,r)}}var fu=!0;function H1(s,r,u,d){var y=H.T;H.T=null;var T=Q.p;try{Q.p=2,md(s,r,u,d)}finally{Q.p=T,H.T=y}}function z1(s,r,u,d){var y=H.T;H.T=null;var T=Q.p;try{Q.p=8,md(s,r,u,d)}finally{Q.p=T,H.T=y}}function md(s,r,u,d){if(fu){var y=yd(d);if(y===null)nd(s,r,d,du,u),nS(s,d);else if(Y1(y,s,r,u,d))d.stopPropagation();else if(nS(s,d),r&4&&-1<q1.indexOf(s)){for(;y!==null;){var T=ao(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=_s(T.pendingLanes);if(C!==0){var A=T;for(A.pendingLanes|=2,A.entangledLanes|=2;C;){var M=1<<31-Ze(C);A.entanglements[1]|=M,C&=~M}Jn(T),(Ot&6)===0&&(Jl=je()+500,la(0))}}break;case 31:case 13:A=As(T,2),A!==null&&Ye(A,T,2),jl(),gd(T,2)}if(T=yd(d),T===null&&nd(s,r,d,du,u),T===y)break;y=T}y!==null&&d.stopPropagation()}else nd(s,r,d,null,u)}}function yd(s){return s=vh(s),vd(s)}var du=null;function vd(s){if(du=null,s=ro(s),s!==null){var r=a(s);if(r===null)s=null;else{var u=r.tag;if(u===13){if(s=l(r),s!==null)return s;s=null}else if(u===31){if(s=c(r),s!==null)return s;s=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return du=s,null}function eS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(DA()){case um:return 2;case cm:return 8;case nl:case RA:return 32;case hm:return 268435456;default:return 32}default:return 32}}var Sd=!1,ss=null,os=null,rs=null,ga=new Map,ma=new Map,as=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nS(s,r){switch(s){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ga.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(r.pointerId)}}function ya(s,r,u,d,y,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:u,eventSystemFlags:d,nativeEvent:T,targetContainers:[y]},r!==null&&(r=ao(r),r!==null&&Zv(r)),s):(s.eventSystemFlags|=d,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function Y1(s,r,u,d,y){switch(r){case"focusin":return ss=ya(ss,s,r,u,d,y),!0;case"dragenter":return os=ya(os,s,r,u,d,y),!0;case"mouseover":return rs=ya(rs,s,r,u,d,y),!0;case"pointerover":var T=y.pointerId;return ga.set(T,ya(ga.get(T)||null,s,r,u,d,y)),!0;case"gotpointercapture":return T=y.pointerId,ma.set(T,ya(ma.get(T)||null,s,r,u,d,y)),!0}return!1}function iS(s){var r=ro(s.target);if(r!==null){var u=a(r);if(u!==null){if(r=u.tag,r===13){if(r=l(u),r!==null){s.blockedOn=r,ym(s.priority,function(){tS(u)});return}}else if(r===31){if(r=c(u),r!==null){s.blockedOn=r,ym(s.priority,function(){tS(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var u=yd(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);yh=d,u.target.dispatchEvent(d),yh=null}else return r=ao(u),r!==null&&Zv(r),s.blockedOn=u,!1;r.shift()}return!0}function sS(s,r,u){pu(s)&&u.delete(r)}function X1(){Sd=!1,ss!==null&&pu(ss)&&(ss=null),os!==null&&pu(os)&&(os=null),rs!==null&&pu(rs)&&(rs=null),ga.forEach(sS),ma.forEach(sS)}function gu(s,r){s.blockedOn===r&&(s.blockedOn=null,Sd||(Sd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,X1)))}var mu=null;function oS(s){mu!==s&&(mu=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mu===s&&(mu=null);for(var r=0;r<s.length;r+=3){var u=s[r],d=s[r+1],y=s[r+2];if(typeof d!="function"){if(vd(d||u)===null)continue;break}var T=ao(u);T!==null&&(s.splice(r,3),r-=3,yf(T,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function zo(s){function r(M){return gu(M,s)}ss!==null&&gu(ss,s),os!==null&&gu(os,s),rs!==null&&gu(rs,s),ga.forEach(r),ma.forEach(r);for(var u=0;u<as.length;u++){var d=as[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<as.length&&(u=as[0],u.blockedOn===null);)iS(u),u.blockedOn===null&&as.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],T=u[d+1],C=y[Fe]||null;if(typeof T=="function")C||oS(u);else if(C){var A=null;if(T&&T.hasAttribute("formAction")){if(y=T,C=T[Fe]||null)A=C.formAction;else if(vd(y)!==null)continue}else A=C.action;typeof A=="function"?u[d+1]=A:(u.splice(d,3),d-=3),oS(u)}}}function rS(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Td(s){this._internalRoot=s}yu.prototype.render=Td.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var u=r.current,d=an();jv(u,d,s,r,null,null)},yu.prototype.unmount=Td.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;jv(s.current,2,null,s,null,null),jl(),r[oo]=null}};function yu(s){this._internalRoot=s}yu.prototype.unstable_scheduleHydration=function(s){if(s){var r=mm();s={blockedOn:null,target:s,priority:r};for(var u=0;u<as.length&&r!==0&&r<as[u].priority;u++);as.splice(u,0,s),u===0&&iS(s)}};var aS=t.version;if(aS!=="19.2.3")throw Error(i(527,aS,"19.2.3"));Q.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(r),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var $1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Ar=vu.inject($1),Qe=vu}catch{}}return Sa.createRoot=function(s,r){if(!o(s))throw Error(i(299));var u=!1,d="",y=py,T=gy,C=my;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=Jv(s,1,!1,null,null,u,d,null,y,T,C,rS),s[oo]=r.current,ed(s),new Td(r)},Sa.hydrateRoot=function(s,r,u){if(!o(s))throw Error(i(299));var d=!1,y="",T=py,C=gy,A=my,M=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.formState!==void 0&&(M=u.formState)),r=Jv(s,1,!0,r,u??null,d,y,M,T,C,A,rS),r.context=Kv(null),u=r.current,d=an(),d=uh(d),y=Xi(d),y.callback=null,$i(u,y,d),u=d,r.current.lanes=u,Mr(r,u),Jn(r),s[oo]=r.current,ed(s),new yu(r)},Sa.version="19.2.3",Sa}var yS;function sM(){if(yS)return xd.exports;yS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),xd.exports=iM(),xd.exports}var oM=sM();const rM=qC(oM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),vS=n=>{const t=lM(n);return t.charAt(0).toUpperCase()+t.slice(1)},YC=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),uM=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=Z.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:l,...c},h)=>Z.createElement("svg",{ref:h,...cM,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:YC("lucide",o),...!a&&!uM(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,p])=>Z.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(n,t)=>{const e=Z.forwardRef(({className:i,...o},a)=>Z.createElement(hM,{ref:a,iconNode:t,className:YC(`lucide-${aM(vS(n))}`,`lucide-${n}`,i),...o}));return e.displayName=vS(n),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dM=de("circle-alert",fM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SS=de("circle-check",pM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],XC=de("download",gM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Qu=de("flame",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],vM=de("house",yM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],TM=de("image",SM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],CM=de("layers",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],EM=de("palette",xM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],AM=de("pen-line",bM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],MM=de("plus",wM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RM=de("save",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qp=de("search",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],PM=de("share-2",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],OM=de("shield-alert",kM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],UM=de("trash-2",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],FM=de("type",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],GM=de("upload",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$C=de("x",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qM=de("zap",zM),YM="https://api.imgflip.com/get_memes",XM="https://api.memegen.link/templates",TS=[{id:"curated-038",name:"Gigachad",url:"https://i.imgflip.com/56p56k.jpg",width:452,height:580,box_count:2},{id:"curated-002",name:"Doge",url:"https://i.imgflip.com/4t0m5.jpg",width:620,height:620,box_count:5},{id:"curated-041",name:"Pepe the Frog",url:"https://i.imgflip.com/8p0a.jpg",width:500,height:382,box_count:2},{id:"curated-003",name:"Drake Hotline Bling",url:"https://i.imgflip.com/9ehk.jpg",width:1200,height:1200,box_count:2},{id:"curated-005",name:"Two Buttons",url:"https://i.imgflip.com/1g8my4.jpg",width:600,height:908,box_count:3},{id:"curated-006",name:"Change My Mind",url:"https://i.imgflip.com/24y43o.jpg",width:482,height:361,box_count:2},{id:"curated-007",name:"Batman Slapping Robin",url:"https://i.imgflip.com/9sw4.jpg",width:400,height:387,box_count:2},{id:"curated-008",name:"Bernie Sanders Once Again Asking",url:"https://i.imgflip.com/3si4bd.jpg",width:600,height:450,box_count:2},{id:"curated-009",name:"Woman Yelling at a Cat",url:"https://i.imgflip.com/345v97.jpg",width:680,height:438,box_count:2},{id:"curated-010",name:"This is Fine",url:"https://i.imgflip.com/wx965.jpg",width:500,height:282,box_count:2},{id:"curated-011",name:"Mocking Spongebob",url:"https://i.imgflip.com/1ot693.jpg",width:502,height:353,box_count:2},{id:"curated-012",name:"Disaster Girl",url:"https://i.imgflip.com/23ls.jpg",width:500,height:375,box_count:2},{id:"curated-013",name:"Success Kid",url:"https://i.imgflip.com/1bhk.jpg",width:500,height:500,box_count:2},{id:"curated-014",name:"Ancient Aliens",url:"https://i.imgflip.com/26am.jpg",width:500,height:437,box_count:2},{id:"curated-015",name:"Futurama Fry",url:"https://i.imgflip.com/1bgw.jpg",width:552,height:414,box_count:2},{id:"curated-016",name:"Roll Safe Think About It",url:"https://i.imgflip.com/1h7in3.jpg",width:702,height:395,box_count:2},{id:"curated-017",name:"Spider-Man Pointing",url:"https://i.imgflip.com/1tk9mo.jpg",width:800,height:450,box_count:2},{id:"curated-018",name:"Arthur Fist",url:"https://i.imgflip.com/186r6a.jpg",width:600,height:450,box_count:2},{id:"curated-019",name:"Hide the Pain Harold",url:"https://i.imgflip.com/gk2el.jpg",width:480,height:601,box_count:2},{id:"curated-020",name:"Buff Doge vs Cheems",url:"https://i.imgflip.com/43a45p.png",width:937,height:720,box_count:4},{id:"curated-021",name:"Distracted Boyfriend",url:"https://i.imgflip.com/1otk96.jpg",width:1200,height:800,box_count:3},{id:"curated-022",name:"Left Exit 12 Off Ramp",url:"https://i.imgflip.com/22bdq6.jpg",width:804,height:767,box_count:3},{id:"curated-023",name:"Tuxedo Winnie the Pooh",url:"https://i.imgflip.com/2ybua0.png",width:800,height:582,box_count:2},{id:"curated-024",name:"Surprised Pikachu",url:"https://i.imgflip.com/2k9pjj.jpg",width:1893,height:1893,box_count:3},{id:"curated-025",name:"Is This a Pigeon?",url:"https://i.imgflip.com/1v7bd3.jpg",width:1587,height:1425,box_count:3},{id:"curated-026",name:"Expanding Brain",url:"https://i.imgflip.com/1jwhww.jpg",width:857,height:1202,box_count:4},{id:"curated-027",name:"Panik Kalm Panik",url:"https://i.imgflip.com/3vxlyw.jpg",width:640,height:881,box_count:3},{id:"curated-031",name:"Leonardo DiCaprio Cheers",url:"https://i.imgflip.com/64sz4.jpg",width:600,height:399,box_count:2},{id:"curated-032",name:"One Does Not Simply",url:"https://i.imgflip.com/1bij.jpg",width:568,height:335,box_count:2},{id:"curated-033",name:"They're The Same Picture",url:"https://i.imgflip.com/271ps6.jpg",width:990,height:520,box_count:3},{id:"curated-035",name:"Gru's Plan",url:"https://i.imgflip.com/26jzes.jpg",width:700,height:449,box_count:4},{id:"curated-036",name:"Clown Applying Makeup",url:"https://i.imgflip.com/38el51.jpg",width:750,height:798,box_count:4},{id:"curated-037",name:"Trade Offer",url:"https://i.imgflip.com/519t6u.jpg",width:1200,height:1200,box_count:3},{id:"curated-039",name:"Monkey Puppet",url:"https://i.imgflip.com/261o3j.jpg",width:923,height:768,box_count:2},{id:"curated-040",name:"Waiting Skeleton",url:"https://i.imgflip.com/2fm6x.jpg",width:298,height:403,box_count:2}],WC=async()=>{try{const[n,t]=await Promise.allSettled([fetch(YM).then(a=>a.json()),fetch(XM).then(a=>a.json())]);let e=[];if(n.status==="fulfilled"&&n.value.success&&(e=[...n.value.data.memes]),t.status==="fulfilled"&&Array.isArray(t.value)){const a=t.value.map(l=>({id:`memegen-${l.id}`,name:l.name,url:l.blank,width:800,height:800,box_count:l.lines||2}));e=[...e,...a]}const i=[...TS,...e];return Array.from(new Map(i.map(a=>[a.name,a])).values())}catch(n){return console.error("Error fetching meme templates:",n),TS}};var $M={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WM,JM;function KM(){return{geminiUrl:WM,vertexUrl:JM}}function jM(n,t,e,i){var o,a;if(!(n!=null&&n.baseUrl)){const l=KM();return t?(o=l.vertexUrl)!==null&&o!==void 0?o:e:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ki{}function ot(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const a=t[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,t,e){for(let a=0;a<t.length-1;a++){const l=t[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(e))n[c]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const h=n[c];if(Array.isArray(e))for(let f=0;f<h.length;f++){const p=h[f];m(p,t.slice(a+1),e[f])}else for(const f of h)m(f,t.slice(a+1),e)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const h=n[c];m(h[0],t.slice(a+1),e);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=t[t.length-1],o=n[i];if(o!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===o)return;if(typeof o=="object"&&typeof e=="object"&&o!==null&&e!==null)Object.assign(o,e);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(n,e):n[i]=e}function g(n,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let i=0;i<t.length;i++){if(typeof n!="object"||n===null)return e;const o=t[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(c=>g(c,t.slice(i+1),e)):e}else return e}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return e;throw i}}function QM(n,t){for(const[e,i]of Object.entries(t)){const o=e.split("."),a=i.split("."),l=new Set;let c=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}np(n,o,a,0,l)}}function np(n,t,e,i,o){if(i>=t.length||typeof n!="object"||n===null)return;const a=t[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const h of c[l])np(h,t,e,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!o.has(f)),h={};for(const f of c)h[f]=l[f];for(const[f,p]of Object.entries(h)){const v=[];for(const S of e.slice(i))S==="*"?v.push(f):v.push(S);m(l,v,p)}for(const f of c)delete l[f]}}else{const l=n;a in l&&np(l[a],t,e,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZM(n){const t={},e=g(n,["operationName"]);e!=null&&m(t,["operationName"],e);const i=g(n,["resourceName"]);return i!=null&&m(t,["_url","resourceName"],i),t}function tD(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response","generateVideoResponse"]);return l!=null&&m(t,["response"],nD(l)),t}function eD(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response"]);return l!=null&&m(t,["response"],iD(l)),t}function nD(n){const t={},e=g(n,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>sD(l))),m(t,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=g(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function iD(n){const t={},e=g(n,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>oD(l))),m(t,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=g(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function sD(n){const t={},e=g(n,["video"]);return e!=null&&m(t,["video"],hD(e)),t}function oD(n){const t={},e=g(n,["_self"]);return e!=null&&m(t,["video"],fD(e)),t}function rD(n){const t={},e=g(n,["operationName"]);return e!=null&&m(t,["_url","operationName"],e),t}function aD(n){const t={},e=g(n,["operationName"]);return e!=null&&m(t,["_url","operationName"],e),t}function lD(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response"]);return l!=null&&m(t,["response"],uD(l)),t}function uD(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["parent"]);i!=null&&m(t,["parent"],i);const o=g(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function JC(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response"]);return l!=null&&m(t,["response"],cD(l)),t}function cD(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["parent"]);i!=null&&m(t,["parent"],i);const o=g(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function hD(n){const t={},e=g(n,["uri"]);e!=null&&m(t,["uri"],e);const i=g(n,["encodedVideo"]);i!=null&&m(t,["videoBytes"],Zp(i));const o=g(n,["encoding"]);return o!=null&&m(t,["mimeType"],o),t}function fD(n){const t={},e=g(n,["gcsUri"]);e!=null&&m(t,["uri"],e);const i=g(n,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],Zp(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _S;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_S||(_S={}));var CS;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(CS||(CS={}));var xS;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(xS||(xS={}));var En;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(En||(En={}));var ES;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ES||(ES={}));var bS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(bS||(bS={}));var AS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(AS||(AS={}));var wS;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(wS||(wS={}));var MS;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(MS||(MS={}));var DS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(DS||(DS={}));var RS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(RS||(RS={}));var NS;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(NS||(NS={}));var IS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(IS||(IS={}));var PS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(PS||(PS={}));var kS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(kS||(kS={}));var OS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(OS||(OS={}));var LS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(LS||(LS={}));var US;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(US||(US={}));var VS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(VS||(VS={}));var cc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(cc||(cc={}));var FS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(FS||(FS={}));var BS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(BS||(BS={}));var GS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(GS||(GS={}));var ip;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ip||(ip={}));var HS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(HS||(HS={}));var zS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(zS||(zS={}));var qS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(qS||(qS={}));var YS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(YS||(YS={}));var XS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(XS||(XS={}));var $S;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($S||($S={}));var WS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(WS||(WS={}));var JS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(JS||(JS={}));var KS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(KS||(KS={}));var jS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(jS||(jS={}));var QS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(QS||(QS={}));var ZS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ZS||(ZS={}));var tT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(tT||(tT={}));var eT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(eT||(eT={}));var nT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(nT||(nT={}));var iT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(iT||(iT={}));var sT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(sT||(sT={}));var oT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(oT||(oT={}));var rT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(rT||(rT={}));var aT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(aT||(aT={}));var lT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(lT||(lT={}));var uT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(uT||(uT={}));var cT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(cT||(cT={}));var hT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(hT||(hT={}));var fT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(fT||(fT={}));var dT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(dT||(dT={}));var pT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pT||(pT={}));var gT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(gT||(gT={}));var mT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mT||(mT={}));var yT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yT||(yT={}));var vT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(vT||(vT={}));var $o;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($o||($o={}));class sp{constructor(t){const e={};for(const i of t.headers.entries())e[i[0]]=i[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ta{get text(){var t,e,i,o,a,l,c,h;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const v=[];for(const S of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[_,x]of Object.entries(S))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(x!==null||x!==void 0)&&v.push(_);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;p=!0,f+=S.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,e,i,o,a,l,c,h;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const v of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,_]of Object.entries(v))S!=="inlineData"&&(_!==null||_!==void 0)&&p.push(S);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,e,i,o,a,l,c,h;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,e,i,o,a,l,c,h,f;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,e,i,o,a,l,c,h,f;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class ST{}class TT{}class dD{}class pD{}class gD{}class mD{}class _T{}class CT{}class xT{}class yD{}class hc{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const i=new hc;let o;const a=t;return e?o=eD(a):o=tD(a),Object.assign(i,o),i}}class ET{}class bT{}class AT{}class wT{}class vD{}class SD{}class TD{}class tg{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const i=new tg,a=lD(t);return Object.assign(i,a),i}}class _D{}class CD{}class xD{}class MT{}class ED{get text(){var t,e,i;let o="",a=!1;const l=[];for(const c of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[h,f]of Object.entries(c))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,o+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var t,e,i;let o="";const a=[];for(const l of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class bD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class eg{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const i=new eg,a=JC(t);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function KC(n,t){const e=kt(n,t);return e?e.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:e.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${e}`:e:""}function jC(n){return Array.isArray(n)?n.map(t=>fc(t)):[fc(n)]}function fc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function QC(n){const t=fc(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ZC(n){const t=fc(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function DT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tx(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>DT(t)):[DT(n)]}function op(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function RT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function NT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Me(n){if(n==null)throw new Error("ContentUnion is required");return op(n)?n:{role:"user",parts:tx(n)}}function ng(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const i=Me(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const e=Me(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Me(e)):[Me(t)]}function wn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(RT(n)||NT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Me(n)]}const t=[],e=[],i=op(n[0]);for(const o of n){const a=op(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(o);else{if(RT(o)||NT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(o)}}return i||t.push({role:"user",parts:tx(e)}),t}function AD(n,t){n.includes("null")&&(t.nullable=!0);const e=n.filter(i=>i!=="null");if(e.length===1)t.type=Object.values(En).includes(e[0].toUpperCase())?e[0].toUpperCase():En.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of e)t.anyOf.push({type:Object.values(En).includes(i.toUpperCase())?i.toUpperCase():En.TYPE_UNSPECIFIED})}}function ir(n){const t={},e=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,n=a[1]):a[1].type==="null"&&(t.nullable=!0,n=a[0])),n.type instanceof Array&&AD(n.type,t);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(En).includes(c.toUpperCase())?c.toUpperCase():En.TYPE_UNSPECIFIED}else if(e.includes(l))t[l]=ir(c);else if(i.includes(l)){const h=[];for(const f of c){if(f.type=="null"){t.nullable=!0;continue}h.push(ir(f))}t[l]=h}else if(o.includes(l)){const h={};for(const[f,p]of Object.entries(c))h[f]=ir(p);t[l]=h}else{if(l==="additionalProperties")continue;t[l]=c}return t}function ig(n){return ir(n)}function sg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function og(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function dr(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ir(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ir(t.response));return n}function pr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of n)t.push(e);return t}function wD(n,t,e,i=1){const o=!t.startsWith(`${e}/`)&&t.split("/").length===i;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}/${t}`:t:o?`${e}/${t}`:t}function Oi(n,t){if(typeof t!="string")throw new Error("name must be a string");return wD(n,t,"cachedContents")}function ex(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ys(n){return Zp(n)}function MD(n){return n!=null&&typeof n=="object"&&"name"in n}function DD(n){return n!=null&&typeof n=="object"&&"video"in n}function RD(n){return n!=null&&typeof n=="object"&&"uri"in n}function nx(n){var t;let e;if(MD(n)&&(e=n.name),!(RD(n)&&(e=n.uri,e===void 0))&&!(DD(n)&&(e=(t=n.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof n=="string"&&(e=n),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const o=e.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${e}`);e=o[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function ix(n,t){let e;return n.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function sx(n){for(const t of["models","tunedModels","publisherModels"])if(ND(n,t))return n[t];return[]}function ND(n,t){return n!==null&&typeof n=="object"&&t in n}function ID(n,t={}){const e=n,i={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(i.responseJsonSchema=e.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function PD(n,t={}){const e=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=ID(o,t);l.functionDeclarations&&e.push(...l.functionDeclarations)}return{functionDeclarations:e}}function ox(n,t){let e;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const i=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,o=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function kD(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function rx(n){if(typeof n!="object"||n===null)return{};const t=n,e=t.inlinedResponses;if(typeof e!="object"||e===null)return n;const o=e.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function gr(n,t){const e=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function ax(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OD(n){const t={},e=g(n,["responsesFile"]);e!=null&&m(t,["fileName"],e);const i=g(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>gR(l))),m(t,["inlinedResponses"],a)}const o=g(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["inlinedEmbedContentResponses"],a)}return t}function LD(n){const t={},e=g(n,["predictionsFormat"]);e!=null&&m(t,["format"],e);const i=g(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(t,["gcsUri"],i);const o=g(n,["bigqueryDestination","outputUri"]);return o!=null&&m(t,["bigqueryUri"],o),t}function UD(n){const t={},e=g(n,["format"]);e!=null&&m(t,["predictionsFormat"],e);const i=g(n,["gcsUri"]);i!=null&&m(t,["gcsDestination","outputUriPrefix"],i);const o=g(n,["bigqueryUri"]);if(o!=null&&m(t,["bigqueryDestination","outputUri"],o),g(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Zu(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata","displayName"]);i!=null&&m(t,["displayName"],i);const o=g(n,["metadata","state"]);o!=null&&m(t,["state"],ax(o));const a=g(n,["metadata","createTime"]);a!=null&&m(t,["createTime"],a);const l=g(n,["metadata","endTime"]);l!=null&&m(t,["endTime"],l);const c=g(n,["metadata","updateTime"]);c!=null&&m(t,["updateTime"],c);const h=g(n,["metadata","model"]);h!=null&&m(t,["model"],h);const f=g(n,["metadata","output"]);return f!=null&&m(t,["dest"],OD(rx(f))),t}function rp(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=g(n,["state"]);o!=null&&m(t,["state"],ax(o));const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["createTime"]);l!=null&&m(t,["createTime"],l);const c=g(n,["startTime"]);c!=null&&m(t,["startTime"],c);const h=g(n,["endTime"]);h!=null&&m(t,["endTime"],h);const f=g(n,["updateTime"]);f!=null&&m(t,["updateTime"],f);const p=g(n,["model"]);p!=null&&m(t,["model"],p);const v=g(n,["inputConfig"]);v!=null&&m(t,["src"],VD(v));const S=g(n,["outputConfig"]);S!=null&&m(t,["dest"],LD(rx(S)));const _=g(n,["completionStats"]);return _!=null&&m(t,["completionStats"],_),t}function VD(n){const t={},e=g(n,["instancesFormat"]);e!=null&&m(t,["format"],e);const i=g(n,["gcsSource","uris"]);i!=null&&m(t,["gcsUri"],i);const o=g(n,["bigquerySource","inputUri"]);return o!=null&&m(t,["bigqueryUri"],o),t}function FD(n,t){const e={};if(g(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=g(t,["fileName"]);i!=null&&m(e,["fileName"],i);const o=g(t,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>pR(n,l))),m(e,["requests","requests"],a)}return e}function BD(n){const t={},e=g(n,["format"]);e!=null&&m(t,["instancesFormat"],e);const i=g(n,["gcsUri"]);i!=null&&m(t,["gcsSource","uris"],i);const o=g(n,["bigqueryUri"]);if(o!=null&&m(t,["bigquerySource","inputUri"],o),g(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function GD(n){const t={},e=g(n,["data"]);if(e!=null&&m(t,["data"],e),g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function HD(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function zD(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function qD(n){const t={},e=g(n,["content"]);e!=null&&m(t,["content"],e);const i=g(n,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],YD(i));const o=g(n,["tokenCount"]);o!=null&&m(t,["tokenCount"],o);const a=g(n,["finishReason"]);a!=null&&m(t,["finishReason"],a);const l=g(n,["avgLogprobs"]);l!=null&&m(t,["avgLogprobs"],l);const c=g(n,["groundingMetadata"]);c!=null&&m(t,["groundingMetadata"],c);const h=g(n,["index"]);h!=null&&m(t,["index"],h);const f=g(n,["logprobsResult"]);f!=null&&m(t,["logprobsResult"],f);const p=g(n,["safetyRatings"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(_=>_)),m(t,["safetyRatings"],S)}const v=g(n,["urlContextMetadata"]);return v!=null&&m(t,["urlContextMetadata"],v),t}function YD(n){const t={},e=g(n,["citationSources"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["citations"],i)}return t}function lx(n){const t={},e=g(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(a=>CR(a))),m(t,["parts"],o)}const i=g(n,["role"]);return i!=null&&m(t,["role"],i),t}function XD(n,t){const e={},i=g(n,["displayName"]);if(t!==void 0&&i!=null&&m(t,["batch","displayName"],i),g(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function $D(n,t){const e={},i=g(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=g(n,["dest"]);return t!==void 0&&o!=null&&m(t,["outputConfig"],UD(kD(o))),e}function IT(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["src"]);o!=null&&m(e,["batch","inputConfig"],FD(n,ox(n,o)));const a=g(t,["config"]);return a!=null&&XD(a,e),e}function WD(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["model"],kt(n,i));const o=g(t,["src"]);o!=null&&m(e,["inputConfig"],BD(ox(n,o)));const a=g(t,["config"]);return a!=null&&$D(a,e),e}function JD(n,t){const e={},i=g(n,["displayName"]);return t!==void 0&&i!=null&&m(t,["batch","displayName"],i),e}function KD(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["src"]);o!=null&&m(e,["batch","inputConfig"],iR(n,o));const a=g(t,["config"]);return a!=null&&JD(a,e),e}function jD(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function QD(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function ZD(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["name"]);i!=null&&m(t,["name"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);return a!=null&&m(t,["error"],a),t}function tR(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["name"]);i!=null&&m(t,["name"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);return a!=null&&m(t,["error"],a),t}function eR(n,t){const e={},i=g(t,["contents"]);if(i!=null){let a=ng(n,i);Array.isArray(a)&&(a=a.map(l=>l)),m(e,["requests[]","request","content"],a)}const o=g(t,["config"]);return o!=null&&(m(e,["_self"],nR(o,e)),QM(e,{"requests[].*":"requests[].request.*"})),e}function nR(n,t){const e={},i=g(n,["taskType"]);t!==void 0&&i!=null&&m(t,["requests[]","taskType"],i);const o=g(n,["title"]);t!==void 0&&o!=null&&m(t,["requests[]","title"],o);const a=g(n,["outputDimensionality"]);if(t!==void 0&&a!=null&&m(t,["requests[]","outputDimensionality"],a),g(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function iR(n,t){const e={},i=g(t,["fileName"]);i!=null&&m(e,["file_name"],i);const o=g(t,["inlinedRequests"]);return o!=null&&m(e,["requests"],eR(n,o)),e}function sR(n){const t={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(n,["fileUri"]);e!=null&&m(t,["fileUri"],e);const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function oR(n){const t={},e=g(n,["id"]);e!=null&&m(t,["id"],e);const i=g(n,["args"]);i!=null&&m(t,["args"],i);const o=g(n,["name"]);if(o!=null&&m(t,["name"],o),g(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function rR(n){const t={},e=g(n,["mode"]);e!=null&&m(t,["mode"],e);const i=g(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),g(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function aR(n,t,e){const i={},o=g(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],lx(Me(o)));const a=g(t,["temperature"]);a!=null&&m(i,["temperature"],a);const l=g(t,["topP"]);l!=null&&m(i,["topP"],l);const c=g(t,["topK"]);c!=null&&m(i,["topK"],c);const h=g(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const f=g(t,["maxOutputTokens"]);f!=null&&m(i,["maxOutputTokens"],f);const p=g(t,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const v=g(t,["responseLogprobs"]);v!=null&&m(i,["responseLogprobs"],v);const S=g(t,["logprobs"]);S!=null&&m(i,["logprobs"],S);const _=g(t,["presencePenalty"]);_!=null&&m(i,["presencePenalty"],_);const x=g(t,["frequencyPenalty"]);x!=null&&m(i,["frequencyPenalty"],x);const E=g(t,["seed"]);E!=null&&m(i,["seed"],E);const b=g(t,["responseMimeType"]);b!=null&&m(i,["responseMimeType"],b);const w=g(t,["responseSchema"]);w!=null&&m(i,["responseSchema"],ig(w));const D=g(t,["responseJsonSchema"]);if(D!=null&&m(i,["responseJsonSchema"],D),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=g(t,["safetySettings"]);if(e!==void 0&&R!=null){let it=R;Array.isArray(it)&&(it=it.map(ct=>xR(ct))),m(e,["safetySettings"],it)}const k=g(t,["tools"]);if(e!==void 0&&k!=null){let it=pr(k);Array.isArray(it)&&(it=it.map(ct=>bR(dr(ct)))),m(e,["tools"],it)}const L=g(t,["toolConfig"]);if(e!==void 0&&L!=null&&m(e,["toolConfig"],ER(L)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=g(t,["cachedContent"]);e!==void 0&&Y!=null&&m(e,["cachedContent"],Oi(n,Y));const G=g(t,["responseModalities"]);G!=null&&m(i,["responseModalities"],G);const V=g(t,["mediaResolution"]);V!=null&&m(i,["mediaResolution"],V);const $=g(t,["speechConfig"]);if($!=null&&m(i,["speechConfig"],sg($)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const et=g(t,["thinkingConfig"]);et!=null&&m(i,["thinkingConfig"],et);const st=g(t,["imageConfig"]);st!=null&&m(i,["imageConfig"],dR(st));const at=g(t,["enableEnhancedCivicAnswers"]);return at!=null&&m(i,["enableEnhancedCivicAnswers"],at),i}function lR(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>qD(f))),m(t,["candidates"],h)}const o=g(n,["modelVersion"]);o!=null&&m(t,["modelVersion"],o);const a=g(n,["promptFeedback"]);a!=null&&m(t,["promptFeedback"],a);const l=g(n,["responseId"]);l!=null&&m(t,["responseId"],l);const c=g(n,["usageMetadata"]);return c!=null&&m(t,["usageMetadata"],c),t}function uR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function cR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],gr(n,i)),e}function hR(n){const t={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(n,["enableWidget"]);return e!=null&&m(t,["enableWidget"],e),t}function fR(n){const t={};if(g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(n,["timeRangeFilter"]);return e!=null&&m(t,["timeRangeFilter"],e),t}function dR(n){const t={},e=g(n,["aspectRatio"]);e!=null&&m(t,["aspectRatio"],e);const i=g(n,["imageSize"]);if(i!=null&&m(t,["imageSize"],i),g(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function pR(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["request","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let c=wn(o);Array.isArray(c)&&(c=c.map(h=>lx(h))),m(e,["request","contents"],c)}const a=g(t,["metadata"]);a!=null&&m(e,["metadata"],a);const l=g(t,["config"]);return l!=null&&m(e,["request","generationConfig"],aR(n,l,g(e,["request"],{}))),e}function gR(n){const t={},e=g(n,["response"]);e!=null&&m(t,["response"],lR(e));const i=g(n,["error"]);return i!=null&&m(t,["error"],i),t}function mR(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);if(t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),g(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function yR(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);t!==void 0&&o!=null&&m(t,["_query","pageToken"],o);const a=g(n,["filter"]);return t!==void 0&&a!=null&&m(t,["_query","filter"],a),e}function vR(n){const t={},e=g(n,["config"]);return e!=null&&mR(e,t),t}function SR(n){const t={},e=g(n,["config"]);return e!=null&&yR(e,t),t}function TR(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Zu(l))),m(t,["batchJobs"],a)}return t}function _R(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>rp(l))),m(t,["batchJobs"],a)}return t}function CR(n){const t={},e=g(n,["mediaResolution"]);e!=null&&m(t,["mediaResolution"],e);const i=g(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=g(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const a=g(n,["fileData"]);a!=null&&m(t,["fileData"],sR(a));const l=g(n,["functionCall"]);l!=null&&m(t,["functionCall"],oR(l));const c=g(n,["functionResponse"]);c!=null&&m(t,["functionResponse"],c);const h=g(n,["inlineData"]);h!=null&&m(t,["inlineData"],GD(h));const f=g(n,["text"]);f!=null&&m(t,["text"],f);const p=g(n,["thought"]);p!=null&&m(t,["thought"],p);const v=g(n,["thoughtSignature"]);v!=null&&m(t,["thoughtSignature"],v);const S=g(n,["videoMetadata"]);return S!=null&&m(t,["videoMetadata"],S),t}function xR(n){const t={},e=g(n,["category"]);if(e!=null&&m(t,["category"],e),g(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=g(n,["threshold"]);return i!=null&&m(t,["threshold"],i),t}function ER(n){const t={},e=g(n,["functionCallingConfig"]);e!=null&&m(t,["functionCallingConfig"],rR(e));const i=g(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function bR(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(v=>v)),m(t,["functionDeclarations"],p)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=g(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const a=g(n,["fileSearch"]);a!=null&&m(t,["fileSearch"],a);const l=g(n,["codeExecution"]);if(l!=null&&m(t,["codeExecution"],l),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],hR(c));const h=g(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],fR(h));const f=g(n,["urlContext"]);return f!=null&&m(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mi;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Mi||(Mi={}));class io{constructor(t,e,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,i,o)}init(t,e,i){var o,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=e.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AR extends ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new io(Mi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=IT(this.apiClient,t),i=e._url,o=ot("{model}:batchGenerateContent",i),c=e.batch.inputConfig.requests,h=c.requests,f=[];for(const p of h){const v=Object.assign({},p);if(v.systemInstruction){const S=v.systemInstruction;delete v.systemInstruction;const _=v.request;_.systemInstruction=S,v.request=_}f.push(v)}return c.requests=f,delete e.config,delete e._url,delete e._query,{path:o,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const i=e?Object.assign({},e):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(t),l=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(l)i.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=WD(this.apiClient,t);return c=ot("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>rp(p))}else{const f=IT(this.apiClient,t);return c=ot("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Zu(p))}}async createEmbeddingsInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KD(this.apiClient,t);return a=ot("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Zu(h))}}async get(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=cR(this.apiClient,t);return c=ot("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>rp(p))}else{const f=uR(this.apiClient,t);return c=ot("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Zu(p))}}async cancel(t){var e,i,o,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=zD(this.apiClient,t);l=ot("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=HD(this.apiClient,t);l=ot("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=SR(t);return c=ot("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=_R(p),S=new MT;return Object.assign(S,v),S})}else{const f=vR(t);return c=ot("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=TR(p),S=new MT;return Object.assign(S,v),S})}}async delete(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=QD(this.apiClient,t);return c=ot("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>tR(p))}else{const f=jD(this.apiClient,t);return c=ot("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>ZD(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(n){const t={},e=g(n,["data"]);if(e!=null&&m(t,["data"],e),g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function PT(n){const t={},e=g(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(a=>KR(a))),m(t,["parts"],o)}const i=g(n,["role"]);return i!=null&&m(t,["role"],i),t}function MR(n,t){const e={},i=g(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=g(n,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=g(n,["displayName"]);t!==void 0&&a!=null&&m(t,["displayName"],a);const l=g(n,["contents"]);if(t!==void 0&&l!=null){let p=wn(l);Array.isArray(p)&&(p=p.map(v=>PT(v))),m(t,["contents"],p)}const c=g(n,["systemInstruction"]);t!==void 0&&c!=null&&m(t,["systemInstruction"],PT(Me(c)));const h=g(n,["tools"]);if(t!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>QR(v))),m(t,["tools"],p)}const f=g(n,["toolConfig"]);if(t!==void 0&&f!=null&&m(t,["toolConfig"],jR(f)),g(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function DR(n,t){const e={},i=g(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=g(n,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=g(n,["displayName"]);t!==void 0&&a!=null&&m(t,["displayName"],a);const l=g(n,["contents"]);if(t!==void 0&&l!=null){let v=wn(l);Array.isArray(v)&&(v=v.map(S=>S)),m(t,["contents"],v)}const c=g(n,["systemInstruction"]);t!==void 0&&c!=null&&m(t,["systemInstruction"],Me(c));const h=g(n,["tools"]);if(t!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(S=>ZR(S))),m(t,["tools"],v)}const f=g(n,["toolConfig"]);t!==void 0&&f!=null&&m(t,["toolConfig"],f);const p=g(n,["kmsKeyName"]);return t!==void 0&&p!=null&&m(t,["encryption_spec","kmsKeyName"],p),e}function RR(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["model"],KC(n,i));const o=g(t,["config"]);return o!=null&&MR(o,e),e}function NR(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["model"],KC(n,i));const o=g(t,["config"]);return o!=null&&DR(o,e),e}function IR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],Oi(n,i)),e}function PR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],Oi(n,i)),e}function kR(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function OR(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function LR(n){const t={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(n,["fileUri"]);e!=null&&m(t,["fileUri"],e);const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function UR(n){const t={},e=g(n,["id"]);e!=null&&m(t,["id"],e);const i=g(n,["args"]);i!=null&&m(t,["args"],i);const o=g(n,["name"]);if(o!=null&&m(t,["name"],o),g(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VR(n){const t={},e=g(n,["mode"]);e!=null&&m(t,["mode"],e);const i=g(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),g(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function FR(n){const t={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=g(n,["description"]);e!=null&&m(t,["description"],e);const i=g(n,["name"]);i!=null&&m(t,["name"],i);const o=g(n,["parameters"]);o!=null&&m(t,["parameters"],o);const a=g(n,["parametersJsonSchema"]);a!=null&&m(t,["parametersJsonSchema"],a);const l=g(n,["response"]);l!=null&&m(t,["response"],l);const c=g(n,["responseJsonSchema"]);return c!=null&&m(t,["responseJsonSchema"],c),t}function BR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],Oi(n,i)),e}function GR(n,t){const e={},i=g(t,["name"]);return i!=null&&m(e,["_url","name"],Oi(n,i)),e}function HR(n){const t={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(n,["enableWidget"]);return e!=null&&m(t,["enableWidget"],e),t}function zR(n){const t={};if(g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(n,["timeRangeFilter"]);return e!=null&&m(t,["timeRangeFilter"],e),t}function qR(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),e}function YR(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),e}function XR(n){const t={},e=g(n,["config"]);return e!=null&&qR(e,t),t}function $R(n){const t={},e=g(n,["config"]);return e!=null&&YR(e,t),t}function WR(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["cachedContents"],a)}return t}function JR(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["cachedContents"],a)}return t}function KR(n){const t={},e=g(n,["mediaResolution"]);e!=null&&m(t,["mediaResolution"],e);const i=g(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=g(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const a=g(n,["fileData"]);a!=null&&m(t,["fileData"],LR(a));const l=g(n,["functionCall"]);l!=null&&m(t,["functionCall"],UR(l));const c=g(n,["functionResponse"]);c!=null&&m(t,["functionResponse"],c);const h=g(n,["inlineData"]);h!=null&&m(t,["inlineData"],wR(h));const f=g(n,["text"]);f!=null&&m(t,["text"],f);const p=g(n,["thought"]);p!=null&&m(t,["thought"],p);const v=g(n,["thoughtSignature"]);v!=null&&m(t,["thoughtSignature"],v);const S=g(n,["videoMetadata"]);return S!=null&&m(t,["videoMetadata"],S),t}function jR(n){const t={},e=g(n,["functionCallingConfig"]);e!=null&&m(t,["functionCallingConfig"],VR(e));const i=g(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function QR(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(v=>v)),m(t,["functionDeclarations"],p)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=g(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const a=g(n,["fileSearch"]);a!=null&&m(t,["fileSearch"],a);const l=g(n,["codeExecution"]);if(l!=null&&m(t,["codeExecution"],l),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],HR(c));const h=g(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],zR(h));const f=g(n,["urlContext"]);return f!=null&&m(t,["urlContext"],f),t}function ZR(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let v=e;Array.isArray(v)&&(v=v.map(S=>FR(S))),m(t,["functionDeclarations"],v)}const i=g(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=g(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const a=g(n,["computerUse"]);if(a!=null&&m(t,["computerUse"],a),g(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(n,["codeExecution"]);l!=null&&m(t,["codeExecution"],l);const c=g(n,["enterpriseWebSearch"]);c!=null&&m(t,["enterpriseWebSearch"],c);const h=g(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const f=g(n,["googleSearch"]);f!=null&&m(t,["googleSearch"],f);const p=g(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function t2(n,t){const e={},i=g(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=g(n,["expireTime"]);return t!==void 0&&o!=null&&m(t,["expireTime"],o),e}function e2(n,t){const e={},i=g(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=g(n,["expireTime"]);return t!==void 0&&o!=null&&m(t,["expireTime"],o),e}function n2(n,t){const e={},i=g(t,["name"]);i!=null&&m(e,["_url","name"],Oi(n,i));const o=g(t,["config"]);return o!=null&&t2(o,e),e}function i2(n,t){const e={},i=g(t,["name"]);i!=null&&m(e,["_url","name"],Oi(n,i));const o=g(t,["config"]);return o!=null&&e2(o,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s2 extends ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new io(Mi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(e),e)}async create(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=NR(this.apiClient,t);return c=ot("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=RR(this.apiClient,t);return c=ot("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=GR(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=BR(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=PR(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=OR(p),S=new AT;return Object.assign(S,v),S})}else{const f=IR(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=kR(p),S=new AT;return Object.assign(S,v),S})}}async update(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=i2(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=n2(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=$R(t);return c=ot("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=JR(p),S=new wT;return Object.assign(S,v),S})}else{const f=XR(t);return c=ot("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=WR(p),S=new wT;return Object.assign(S,v),S})}}}function dc(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(e[i[o]]=n[i[o]]);return e}function kT(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(n){return this instanceof vt?(this.v=n,this):new vt(n)}function Hn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(_){return function(x){return Promise.resolve(x).then(_,v)}}function c(_,x){i[_]&&(o[_]=function(E){return new Promise(function(b,w){a.push([_,E,b,w])>1||h(_,E)})},x&&(o[_]=x(o[_])))}function h(_,x){try{f(i[_](x))}catch(E){S(a[0][3],E)}}function f(_){_.value instanceof vt?Promise.resolve(_.value.v).then(p,v):S(a[0][2],_)}function p(_){h("next",_)}function v(_){h("throw",_)}function S(_,x){_(x),a.shift(),a.length&&h(a[0][0],a[0][1])}}function zn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof kT=="function"?kT(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=n[a]&&function(l){return new Promise(function(c,h){l=n[a](l),o(c,h,l.done,l.value)})}}function o(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o2(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:ux(e)}function ux(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function r2(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function OT(n){if(n===void 0||n.length===0)return[];const t=[],e=n.length;let i=0;for(;i<e;)if(n[i].role==="user")t.push(n[i]),i++;else{const o=[];let a=!0;for(;i<e&&n[i].role==="model";)o.push(n[i]),a&&!ux(n[i])&&(a=!1),i++;a?t.push(...o):t.pop()}return t}class a2{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new l2(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class l2{constructor(t,e,i,o={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),r2(a)}async sendMessage(t){var e;await this.sendPromise;const i=Me(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,l,c;const h=await o,f=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,p=h.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let S=[];p!=null&&(S=(c=p.slice(v))!==null&&c!==void 0?c:[]);const _=f?[f]:[];this.recordHistory(i,_,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var e;await this.sendPromise;const i=Me(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(t=!1){const e=t?OT(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return Hn(this,arguments,function*(){var o,a,l,c,h,f;const p=[];try{for(var v=!0,S=zn(t),_;_=yield vt(S.next()),o=_.done,!o;v=!0){c=_.value,v=!1;const x=c;if(o2(x)){const E=(f=(h=x.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;E!==void 0&&p.push(E)}yield yield vt(x)}}catch(x){a={error:x}}finally{try{!v&&!o&&(l=S.return)&&(yield vt(l.call(S)))}finally{if(a)throw a.error}}this.recordHistory(e,p)})}recordHistory(t,e,i){let o=[];e.length>0&&e.every(a=>a.role!==void 0)?o=e:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...OT(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,kc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u2(n){const t={},e=g(n,["file"]);return e!=null&&m(t,["file"],e),t}function c2(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function h2(n){const t={},e=g(n,["name"]);return e!=null&&m(t,["_url","file"],nx(e)),t}function f2(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function d2(n){const t={},e=g(n,["name"]);return e!=null&&m(t,["_url","file"],nx(e)),t}function p2(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),e}function g2(n){const t={},e=g(n,["config"]);return e!=null&&p2(e,t),t}function m2(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["files"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y2 extends ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new io(Mi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=g2(t);return a=ot("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const f=m2(h),p=new _D;return Object.assign(p,f),p})}}async createInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=u2(t);return a=ot("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=c2(h),p=new CD;return Object.assign(p,f),p})}}async get(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=d2(t);return a=ot("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=h2(t);return a=ot("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const f=f2(h),p=new xD;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tc(n){const t={},e=g(n,["data"]);if(e!=null&&m(t,["data"],e),g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function v2(n){const t={},e=g(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(a=>k2(a))),m(t,["parts"],o)}const i=g(n,["role"]);return i!=null&&m(t,["role"],i),t}function S2(n){const t={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(n,["fileUri"]);e!=null&&m(t,["fileUri"],e);const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function T2(n){const t={},e=g(n,["id"]);e!=null&&m(t,["id"],e);const i=g(n,["args"]);i!=null&&m(t,["args"],i);const o=g(n,["name"]);if(o!=null&&m(t,["name"],o),g(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function _2(n){const t={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=g(n,["description"]);e!=null&&m(t,["description"],e);const i=g(n,["name"]);i!=null&&m(t,["name"],i);const o=g(n,["parameters"]);o!=null&&m(t,["parameters"],o);const a=g(n,["parametersJsonSchema"]);a!=null&&m(t,["parametersJsonSchema"],a);const l=g(n,["response"]);l!=null&&m(t,["response"],l);const c=g(n,["responseJsonSchema"]);return c!=null&&m(t,["responseJsonSchema"],c),t}function C2(n){const t={},e=g(n,["modelSelectionConfig"]);e!=null&&m(t,["modelConfig"],e);const i=g(n,["responseJsonSchema"]);i!=null&&m(t,["responseJsonSchema"],i);const o=g(n,["audioTimestamp"]);o!=null&&m(t,["audioTimestamp"],o);const a=g(n,["candidateCount"]);a!=null&&m(t,["candidateCount"],a);const l=g(n,["enableAffectiveDialog"]);l!=null&&m(t,["enableAffectiveDialog"],l);const c=g(n,["frequencyPenalty"]);c!=null&&m(t,["frequencyPenalty"],c);const h=g(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const f=g(n,["maxOutputTokens"]);f!=null&&m(t,["maxOutputTokens"],f);const p=g(n,["mediaResolution"]);p!=null&&m(t,["mediaResolution"],p);const v=g(n,["presencePenalty"]);v!=null&&m(t,["presencePenalty"],v);const S=g(n,["responseLogprobs"]);S!=null&&m(t,["responseLogprobs"],S);const _=g(n,["responseMimeType"]);_!=null&&m(t,["responseMimeType"],_);const x=g(n,["responseModalities"]);x!=null&&m(t,["responseModalities"],x);const E=g(n,["responseSchema"]);E!=null&&m(t,["responseSchema"],E);const b=g(n,["routingConfig"]);b!=null&&m(t,["routingConfig"],b);const w=g(n,["seed"]);w!=null&&m(t,["seed"],w);const D=g(n,["speechConfig"]);D!=null&&m(t,["speechConfig"],D);const R=g(n,["stopSequences"]);R!=null&&m(t,["stopSequences"],R);const k=g(n,["temperature"]);k!=null&&m(t,["temperature"],k);const L=g(n,["thinkingConfig"]);L!=null&&m(t,["thinkingConfig"],L);const Y=g(n,["topK"]);Y!=null&&m(t,["topK"],Y);const G=g(n,["topP"]);if(G!=null&&m(t,["topP"],G),g(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function x2(n){const t={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(n,["enableWidget"]);return e!=null&&m(t,["enableWidget"],e),t}function E2(n){const t={};if(g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(n,["timeRangeFilter"]);return e!=null&&m(t,["timeRangeFilter"],e),t}function b2(n,t){const e={},i=g(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const o=g(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const a=g(n,["temperature"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","temperature"],a);const l=g(n,["topP"]);t!==void 0&&l!=null&&m(t,["setup","generationConfig","topP"],l);const c=g(n,["topK"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","topK"],c);const h=g(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(n,["mediaResolution"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","mediaResolution"],f);const p=g(n,["seed"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","seed"],p);const v=g(n,["speechConfig"]);t!==void 0&&v!=null&&m(t,["setup","generationConfig","speechConfig"],og(v));const S=g(n,["thinkingConfig"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","thinkingConfig"],S);const _=g(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],_);const x=g(n,["systemInstruction"]);t!==void 0&&x!=null&&m(t,["setup","systemInstruction"],v2(Me(x)));const E=g(n,["tools"]);if(t!==void 0&&E!=null){let Y=pr(E);Array.isArray(Y)&&(Y=Y.map(G=>L2(dr(G)))),m(t,["setup","tools"],Y)}const b=g(n,["sessionResumption"]);t!==void 0&&b!=null&&m(t,["setup","sessionResumption"],O2(b));const w=g(n,["inputAudioTranscription"]);t!==void 0&&w!=null&&m(t,["setup","inputAudioTranscription"],w);const D=g(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&m(t,["setup","outputAudioTranscription"],D);const R=g(n,["realtimeInputConfig"]);t!==void 0&&R!=null&&m(t,["setup","realtimeInputConfig"],R);const k=g(n,["contextWindowCompression"]);t!==void 0&&k!=null&&m(t,["setup","contextWindowCompression"],k);const L=g(n,["proactivity"]);if(t!==void 0&&L!=null&&m(t,["setup","proactivity"],L),g(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function A2(n,t){const e={},i=g(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],C2(i));const o=g(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const a=g(n,["temperature"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","temperature"],a);const l=g(n,["topP"]);t!==void 0&&l!=null&&m(t,["setup","generationConfig","topP"],l);const c=g(n,["topK"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","topK"],c);const h=g(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(n,["mediaResolution"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","mediaResolution"],f);const p=g(n,["seed"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","seed"],p);const v=g(n,["speechConfig"]);t!==void 0&&v!=null&&m(t,["setup","generationConfig","speechConfig"],og(v));const S=g(n,["thinkingConfig"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","thinkingConfig"],S);const _=g(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],_);const x=g(n,["systemInstruction"]);t!==void 0&&x!=null&&m(t,["setup","systemInstruction"],Me(x));const E=g(n,["tools"]);if(t!==void 0&&E!=null){let G=pr(E);Array.isArray(G)&&(G=G.map(V=>U2(dr(V)))),m(t,["setup","tools"],G)}const b=g(n,["sessionResumption"]);t!==void 0&&b!=null&&m(t,["setup","sessionResumption"],b);const w=g(n,["inputAudioTranscription"]);t!==void 0&&w!=null&&m(t,["setup","inputAudioTranscription"],w);const D=g(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&m(t,["setup","outputAudioTranscription"],D);const R=g(n,["realtimeInputConfig"]);t!==void 0&&R!=null&&m(t,["setup","realtimeInputConfig"],R);const k=g(n,["contextWindowCompression"]);t!==void 0&&k!=null&&m(t,["setup","contextWindowCompression"],k);const L=g(n,["proactivity"]);t!==void 0&&L!=null&&m(t,["setup","proactivity"],L);const Y=g(n,["explicitVadSignal"]);return t!==void 0&&Y!=null&&m(t,["setup","explicitVadSignal"],Y),e}function w2(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["setup","model"],kt(n,i));const o=g(t,["config"]);return o!=null&&m(e,["config"],b2(o,e)),e}function M2(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["setup","model"],kt(n,i));const o=g(t,["config"]);return o!=null&&m(e,["config"],A2(o,e)),e}function D2(n){const t={},e=g(n,["musicGenerationConfig"]);return e!=null&&m(t,["musicGenerationConfig"],e),t}function R2(n){const t={},e=g(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["weightedPrompts"],i)}return t}function N2(n){const t={},e=g(n,["media"]);if(e!=null){let f=jC(e);Array.isArray(f)&&(f=f.map(p=>tc(p))),m(t,["mediaChunks"],f)}const i=g(n,["audio"]);i!=null&&m(t,["audio"],tc(ZC(i)));const o=g(n,["audioStreamEnd"]);o!=null&&m(t,["audioStreamEnd"],o);const a=g(n,["video"]);a!=null&&m(t,["video"],tc(QC(a)));const l=g(n,["text"]);l!=null&&m(t,["text"],l);const c=g(n,["activityStart"]);c!=null&&m(t,["activityStart"],c);const h=g(n,["activityEnd"]);return h!=null&&m(t,["activityEnd"],h),t}function I2(n){const t={},e=g(n,["media"]);if(e!=null){let f=jC(e);Array.isArray(f)&&(f=f.map(p=>p)),m(t,["mediaChunks"],f)}const i=g(n,["audio"]);i!=null&&m(t,["audio"],ZC(i));const o=g(n,["audioStreamEnd"]);o!=null&&m(t,["audioStreamEnd"],o);const a=g(n,["video"]);a!=null&&m(t,["video"],QC(a));const l=g(n,["text"]);l!=null&&m(t,["text"],l);const c=g(n,["activityStart"]);c!=null&&m(t,["activityStart"],c);const h=g(n,["activityEnd"]);return h!=null&&m(t,["activityEnd"],h),t}function P2(n){const t={},e=g(n,["setupComplete"]);e!=null&&m(t,["setupComplete"],e);const i=g(n,["serverContent"]);i!=null&&m(t,["serverContent"],i);const o=g(n,["toolCall"]);o!=null&&m(t,["toolCall"],o);const a=g(n,["toolCallCancellation"]);a!=null&&m(t,["toolCallCancellation"],a);const l=g(n,["usageMetadata"]);l!=null&&m(t,["usageMetadata"],V2(l));const c=g(n,["goAway"]);c!=null&&m(t,["goAway"],c);const h=g(n,["sessionResumptionUpdate"]);h!=null&&m(t,["sessionResumptionUpdate"],h);const f=g(n,["voiceActivityDetectionSignal"]);return f!=null&&m(t,["voiceActivityDetectionSignal"],f),t}function k2(n){const t={},e=g(n,["mediaResolution"]);e!=null&&m(t,["mediaResolution"],e);const i=g(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=g(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const a=g(n,["fileData"]);a!=null&&m(t,["fileData"],S2(a));const l=g(n,["functionCall"]);l!=null&&m(t,["functionCall"],T2(l));const c=g(n,["functionResponse"]);c!=null&&m(t,["functionResponse"],c);const h=g(n,["inlineData"]);h!=null&&m(t,["inlineData"],tc(h));const f=g(n,["text"]);f!=null&&m(t,["text"],f);const p=g(n,["thought"]);p!=null&&m(t,["thought"],p);const v=g(n,["thoughtSignature"]);v!=null&&m(t,["thoughtSignature"],v);const S=g(n,["videoMetadata"]);return S!=null&&m(t,["videoMetadata"],S),t}function O2(n){const t={},e=g(n,["handle"]);if(e!=null&&m(t,["handle"],e),g(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function L2(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(v=>v)),m(t,["functionDeclarations"],p)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=g(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const a=g(n,["fileSearch"]);a!=null&&m(t,["fileSearch"],a);const l=g(n,["codeExecution"]);if(l!=null&&m(t,["codeExecution"],l),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],x2(c));const h=g(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],E2(h));const f=g(n,["urlContext"]);return f!=null&&m(t,["urlContext"],f),t}function U2(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let v=e;Array.isArray(v)&&(v=v.map(S=>_2(S))),m(t,["functionDeclarations"],v)}const i=g(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=g(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const a=g(n,["computerUse"]);if(a!=null&&m(t,["computerUse"],a),g(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(n,["codeExecution"]);l!=null&&m(t,["codeExecution"],l);const c=g(n,["enterpriseWebSearch"]);c!=null&&m(t,["enterpriseWebSearch"],c);const h=g(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const f=g(n,["googleSearch"]);f!=null&&m(t,["googleSearch"],f);const p=g(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function V2(n){const t={},e=g(n,["promptTokenCount"]);e!=null&&m(t,["promptTokenCount"],e);const i=g(n,["cachedContentTokenCount"]);i!=null&&m(t,["cachedContentTokenCount"],i);const o=g(n,["candidatesTokenCount"]);o!=null&&m(t,["responseTokenCount"],o);const a=g(n,["toolUsePromptTokenCount"]);a!=null&&m(t,["toolUsePromptTokenCount"],a);const l=g(n,["thoughtsTokenCount"]);l!=null&&m(t,["thoughtsTokenCount"],l);const c=g(n,["totalTokenCount"]);c!=null&&m(t,["totalTokenCount"],c);const h=g(n,["promptTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(x=>x)),m(t,["promptTokensDetails"],_)}const f=g(n,["cacheTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(x=>x)),m(t,["cacheTokensDetails"],_)}const p=g(n,["candidatesTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(x=>x)),m(t,["responseTokensDetails"],_)}const v=g(n,["toolUsePromptTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(x=>x)),m(t,["toolUsePromptTokensDetails"],_)}const S=g(n,["trafficType"]);return S!=null&&m(t,["trafficType"],S),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F2(n){const t={},e=g(n,["data"]);if(e!=null&&m(t,["data"],e),g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function B2(n){const t={},e=g(n,["content"]);e!=null&&m(t,["content"],e);const i=g(n,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],G2(i));const o=g(n,["tokenCount"]);o!=null&&m(t,["tokenCount"],o);const a=g(n,["finishReason"]);a!=null&&m(t,["finishReason"],a);const l=g(n,["avgLogprobs"]);l!=null&&m(t,["avgLogprobs"],l);const c=g(n,["groundingMetadata"]);c!=null&&m(t,["groundingMetadata"],c);const h=g(n,["index"]);h!=null&&m(t,["index"],h);const f=g(n,["logprobsResult"]);f!=null&&m(t,["logprobsResult"],f);const p=g(n,["safetyRatings"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(_=>_)),m(t,["safetyRatings"],S)}const v=g(n,["urlContextMetadata"]);return v!=null&&m(t,["urlContextMetadata"],v),t}function G2(n){const t={},e=g(n,["citationSources"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["citations"],i)}return t}function H2(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let a=wn(o);Array.isArray(a)&&(a=a.map(l=>l)),m(e,["contents"],a)}return e}function z2(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["tokensInfo"],o)}return t}function q2(n){const t={},e=g(n,["values"]);e!=null&&m(t,["values"],e);const i=g(n,["statistics"]);return i!=null&&m(t,["statistics"],Y2(i)),t}function Y2(n){const t={},e=g(n,["truncated"]);e!=null&&m(t,["truncated"],e);const i=g(n,["token_count"]);return i!=null&&m(t,["tokenCount"],i),t}function Oc(n){const t={},e=g(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(a=>tI(a))),m(t,["parts"],o)}const i=g(n,["role"]);return i!=null&&m(t,["role"],i),t}function X2(n){const t={},e=g(n,["controlType"]);e!=null&&m(t,["controlType"],e);const i=g(n,["enableControlImageComputation"]);return i!=null&&m(t,["computeControl"],i),t}function $2(n){const t={};if(g(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function W2(n,t){const e={},i=g(n,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],Me(i));const o=g(n,["tools"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>dx(c))),m(t,["tools"],l)}const a=g(n,["generationConfig"]);return t!==void 0&&a!=null&&m(t,["generationConfig"],FN(a)),e}function J2(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let l=wn(o);Array.isArray(l)&&(l=l.map(c=>Oc(c))),m(e,["contents"],l)}const a=g(t,["config"]);return a!=null&&$2(a),e}function K2(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let l=wn(o);Array.isArray(l)&&(l=l.map(c=>c)),m(e,["contents"],l)}const a=g(t,["config"]);return a!=null&&W2(a,e),e}function j2(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["totalTokens"]);i!=null&&m(t,["totalTokens"],i);const o=g(n,["cachedContentTokenCount"]);return o!=null&&m(t,["cachedContentTokenCount"],o),t}function Q2(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["totalTokens"]);return i!=null&&m(t,["totalTokens"],i),t}function Z2(n,t){const e={},i=g(t,["model"]);return i!=null&&m(e,["_url","name"],kt(n,i)),e}function tN(n,t){const e={},i=g(t,["model"]);return i!=null&&m(e,["_url","name"],kt(n,i)),e}function eN(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function nN(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}function iN(n,t){const e={},i=g(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=g(n,["negativePrompt"]);t!==void 0&&o!=null&&m(t,["parameters","negativePrompt"],o);const a=g(n,["numberOfImages"]);t!==void 0&&a!=null&&m(t,["parameters","sampleCount"],a);const l=g(n,["aspectRatio"]);t!==void 0&&l!=null&&m(t,["parameters","aspectRatio"],l);const c=g(n,["guidanceScale"]);t!==void 0&&c!=null&&m(t,["parameters","guidanceScale"],c);const h=g(n,["seed"]);t!==void 0&&h!=null&&m(t,["parameters","seed"],h);const f=g(n,["safetyFilterLevel"]);t!==void 0&&f!=null&&m(t,["parameters","safetySetting"],f);const p=g(n,["personGeneration"]);t!==void 0&&p!=null&&m(t,["parameters","personGeneration"],p);const v=g(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&m(t,["parameters","includeSafetyAttributes"],v);const S=g(n,["includeRaiReason"]);t!==void 0&&S!=null&&m(t,["parameters","includeRaiReason"],S);const _=g(n,["language"]);t!==void 0&&_!=null&&m(t,["parameters","language"],_);const x=g(n,["outputMimeType"]);t!==void 0&&x!=null&&m(t,["parameters","outputOptions","mimeType"],x);const E=g(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&m(t,["parameters","outputOptions","compressionQuality"],E);const b=g(n,["addWatermark"]);t!==void 0&&b!=null&&m(t,["parameters","addWatermark"],b);const w=g(n,["labels"]);t!==void 0&&w!=null&&m(t,["labels"],w);const D=g(n,["editMode"]);t!==void 0&&D!=null&&m(t,["parameters","editMode"],D);const R=g(n,["baseSteps"]);return t!==void 0&&R!=null&&m(t,["parameters","editConfig","baseSteps"],R),e}function sN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["prompt"]);o!=null&&m(e,["instances[0]","prompt"],o);const a=g(t,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>rI(h))),m(e,["instances[0]","referenceImages"],c)}const l=g(t,["config"]);return l!=null&&iN(l,e),e}function oN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Lc(a))),m(t,["generatedImages"],o)}return t}function rN(n,t){const e={},i=g(n,["taskType"]);t!==void 0&&i!=null&&m(t,["requests[]","taskType"],i);const o=g(n,["title"]);t!==void 0&&o!=null&&m(t,["requests[]","title"],o);const a=g(n,["outputDimensionality"]);if(t!==void 0&&a!=null&&m(t,["requests[]","outputDimensionality"],a),g(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function aN(n,t){const e={},i=g(n,["taskType"]);t!==void 0&&i!=null&&m(t,["instances[]","task_type"],i);const o=g(n,["title"]);t!==void 0&&o!=null&&m(t,["instances[]","title"],o);const a=g(n,["outputDimensionality"]);t!==void 0&&a!=null&&m(t,["parameters","outputDimensionality"],a);const l=g(n,["mimeType"]);t!==void 0&&l!=null&&m(t,["instances[]","mimeType"],l);const c=g(n,["autoTruncate"]);return t!==void 0&&c!=null&&m(t,["parameters","autoTruncate"],c),e}function lN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let c=ng(n,o);Array.isArray(c)&&(c=c.map(h=>h)),m(e,["requests[]","content"],c)}const a=g(t,["config"]);a!=null&&rN(a,e);const l=g(t,["model"]);return l!==void 0&&m(e,["requests[]","model"],kt(n,l)),e}function uN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let l=ng(n,o);Array.isArray(l)&&(l=l.map(c=>c)),m(e,["instances[]","content"],l)}const a=g(t,["config"]);return a!=null&&aN(a,e),e}function cN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["embeddings"],a)}const o=g(n,["metadata"]);return o!=null&&m(t,["metadata"],o),t}function hN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>q2(l))),m(t,["embeddings"],a)}const o=g(n,["metadata"]);return o!=null&&m(t,["metadata"],o),t}function fN(n){const t={},e=g(n,["endpoint"]);e!=null&&m(t,["name"],e);const i=g(n,["deployedModelId"]);return i!=null&&m(t,["deployedModelId"],i),t}function dN(n){const t={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(n,["fileUri"]);e!=null&&m(t,["fileUri"],e);const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function pN(n){const t={},e=g(n,["id"]);e!=null&&m(t,["id"],e);const i=g(n,["args"]);i!=null&&m(t,["args"],i);const o=g(n,["name"]);if(o!=null&&m(t,["name"],o),g(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function gN(n){const t={},e=g(n,["mode"]);e!=null&&m(t,["mode"],e);const i=g(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),g(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function mN(n){const t={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=g(n,["description"]);e!=null&&m(t,["description"],e);const i=g(n,["name"]);i!=null&&m(t,["name"],i);const o=g(n,["parameters"]);o!=null&&m(t,["parameters"],o);const a=g(n,["parametersJsonSchema"]);a!=null&&m(t,["parametersJsonSchema"],a);const l=g(n,["response"]);l!=null&&m(t,["response"],l);const c=g(n,["responseJsonSchema"]);return c!=null&&m(t,["responseJsonSchema"],c),t}function yN(n,t,e){const i={},o=g(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],Oc(Me(o)));const a=g(t,["temperature"]);a!=null&&m(i,["temperature"],a);const l=g(t,["topP"]);l!=null&&m(i,["topP"],l);const c=g(t,["topK"]);c!=null&&m(i,["topK"],c);const h=g(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const f=g(t,["maxOutputTokens"]);f!=null&&m(i,["maxOutputTokens"],f);const p=g(t,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const v=g(t,["responseLogprobs"]);v!=null&&m(i,["responseLogprobs"],v);const S=g(t,["logprobs"]);S!=null&&m(i,["logprobs"],S);const _=g(t,["presencePenalty"]);_!=null&&m(i,["presencePenalty"],_);const x=g(t,["frequencyPenalty"]);x!=null&&m(i,["frequencyPenalty"],x);const E=g(t,["seed"]);E!=null&&m(i,["seed"],E);const b=g(t,["responseMimeType"]);b!=null&&m(i,["responseMimeType"],b);const w=g(t,["responseSchema"]);w!=null&&m(i,["responseSchema"],ig(w));const D=g(t,["responseJsonSchema"]);if(D!=null&&m(i,["responseJsonSchema"],D),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=g(t,["safetySettings"]);if(e!==void 0&&R!=null){let it=R;Array.isArray(it)&&(it=it.map(ct=>aI(ct))),m(e,["safetySettings"],it)}const k=g(t,["tools"]);if(e!==void 0&&k!=null){let it=pr(k);Array.isArray(it)&&(it=it.map(ct=>pI(dr(ct)))),m(e,["tools"],it)}const L=g(t,["toolConfig"]);if(e!==void 0&&L!=null&&m(e,["toolConfig"],dI(L)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=g(t,["cachedContent"]);e!==void 0&&Y!=null&&m(e,["cachedContent"],Oi(n,Y));const G=g(t,["responseModalities"]);G!=null&&m(i,["responseModalities"],G);const V=g(t,["mediaResolution"]);V!=null&&m(i,["mediaResolution"],V);const $=g(t,["speechConfig"]);if($!=null&&m(i,["speechConfig"],sg($)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const et=g(t,["thinkingConfig"]);et!=null&&m(i,["thinkingConfig"],et);const st=g(t,["imageConfig"]);st!=null&&m(i,["imageConfig"],qN(st));const at=g(t,["enableEnhancedCivicAnswers"]);return at!=null&&m(i,["enableEnhancedCivicAnswers"],at),i}function vN(n,t,e){const i={},o=g(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],Me(o));const a=g(t,["temperature"]);a!=null&&m(i,["temperature"],a);const l=g(t,["topP"]);l!=null&&m(i,["topP"],l);const c=g(t,["topK"]);c!=null&&m(i,["topK"],c);const h=g(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const f=g(t,["maxOutputTokens"]);f!=null&&m(i,["maxOutputTokens"],f);const p=g(t,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const v=g(t,["responseLogprobs"]);v!=null&&m(i,["responseLogprobs"],v);const S=g(t,["logprobs"]);S!=null&&m(i,["logprobs"],S);const _=g(t,["presencePenalty"]);_!=null&&m(i,["presencePenalty"],_);const x=g(t,["frequencyPenalty"]);x!=null&&m(i,["frequencyPenalty"],x);const E=g(t,["seed"]);E!=null&&m(i,["seed"],E);const b=g(t,["responseMimeType"]);b!=null&&m(i,["responseMimeType"],b);const w=g(t,["responseSchema"]);w!=null&&m(i,["responseSchema"],ig(w));const D=g(t,["responseJsonSchema"]);D!=null&&m(i,["responseJsonSchema"],D);const R=g(t,["routingConfig"]);R!=null&&m(i,["routingConfig"],R);const k=g(t,["modelSelectionConfig"]);k!=null&&m(i,["modelConfig"],k);const L=g(t,["safetySettings"]);if(e!==void 0&&L!=null){let H=L;Array.isArray(H)&&(H=H.map(Q=>Q)),m(e,["safetySettings"],H)}const Y=g(t,["tools"]);if(e!==void 0&&Y!=null){let H=pr(Y);Array.isArray(H)&&(H=H.map(Q=>dx(dr(Q)))),m(e,["tools"],H)}const G=g(t,["toolConfig"]);e!==void 0&&G!=null&&m(e,["toolConfig"],G);const V=g(t,["labels"]);e!==void 0&&V!=null&&m(e,["labels"],V);const $=g(t,["cachedContent"]);e!==void 0&&$!=null&&m(e,["cachedContent"],Oi(n,$));const et=g(t,["responseModalities"]);et!=null&&m(i,["responseModalities"],et);const st=g(t,["mediaResolution"]);st!=null&&m(i,["mediaResolution"],st);const at=g(t,["speechConfig"]);at!=null&&m(i,["speechConfig"],sg(at));const it=g(t,["audioTimestamp"]);it!=null&&m(i,["audioTimestamp"],it);const ct=g(t,["thinkingConfig"]);ct!=null&&m(i,["thinkingConfig"],ct);const Et=g(t,["imageConfig"]);if(Et!=null&&m(i,["imageConfig"],YN(Et)),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function LT(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let l=wn(o);Array.isArray(l)&&(l=l.map(c=>Oc(c))),m(e,["contents"],l)}const a=g(t,["config"]);return a!=null&&m(e,["generationConfig"],yN(n,a,e)),e}function UT(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["contents"]);if(o!=null){let l=wn(o);Array.isArray(l)&&(l=l.map(c=>c)),m(e,["contents"],l)}const a=g(t,["config"]);return a!=null&&m(e,["generationConfig"],vN(n,a,e)),e}function VT(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>B2(f))),m(t,["candidates"],h)}const o=g(n,["modelVersion"]);o!=null&&m(t,["modelVersion"],o);const a=g(n,["promptFeedback"]);a!=null&&m(t,["promptFeedback"],a);const l=g(n,["responseId"]);l!=null&&m(t,["responseId"],l);const c=g(n,["usageMetadata"]);return c!=null&&m(t,["usageMetadata"],c),t}function FT(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),m(t,["candidates"],f)}const o=g(n,["createTime"]);o!=null&&m(t,["createTime"],o);const a=g(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const l=g(n,["promptFeedback"]);l!=null&&m(t,["promptFeedback"],l);const c=g(n,["responseId"]);c!=null&&m(t,["responseId"],c);const h=g(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function SN(n,t){const e={};if(g(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(n,["numberOfImages"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=g(n,["aspectRatio"]);t!==void 0&&o!=null&&m(t,["parameters","aspectRatio"],o);const a=g(n,["guidanceScale"]);if(t!==void 0&&a!=null&&m(t,["parameters","guidanceScale"],a),g(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(n,["safetyFilterLevel"]);t!==void 0&&l!=null&&m(t,["parameters","safetySetting"],l);const c=g(n,["personGeneration"]);t!==void 0&&c!=null&&m(t,["parameters","personGeneration"],c);const h=g(n,["includeSafetyAttributes"]);t!==void 0&&h!=null&&m(t,["parameters","includeSafetyAttributes"],h);const f=g(n,["includeRaiReason"]);t!==void 0&&f!=null&&m(t,["parameters","includeRaiReason"],f);const p=g(n,["language"]);t!==void 0&&p!=null&&m(t,["parameters","language"],p);const v=g(n,["outputMimeType"]);t!==void 0&&v!=null&&m(t,["parameters","outputOptions","mimeType"],v);const S=g(n,["outputCompressionQuality"]);if(t!==void 0&&S!=null&&m(t,["parameters","outputOptions","compressionQuality"],S),g(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=g(n,["imageSize"]);if(t!==void 0&&_!=null&&m(t,["parameters","sampleImageSize"],_),g(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function TN(n,t){const e={},i=g(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=g(n,["negativePrompt"]);t!==void 0&&o!=null&&m(t,["parameters","negativePrompt"],o);const a=g(n,["numberOfImages"]);t!==void 0&&a!=null&&m(t,["parameters","sampleCount"],a);const l=g(n,["aspectRatio"]);t!==void 0&&l!=null&&m(t,["parameters","aspectRatio"],l);const c=g(n,["guidanceScale"]);t!==void 0&&c!=null&&m(t,["parameters","guidanceScale"],c);const h=g(n,["seed"]);t!==void 0&&h!=null&&m(t,["parameters","seed"],h);const f=g(n,["safetyFilterLevel"]);t!==void 0&&f!=null&&m(t,["parameters","safetySetting"],f);const p=g(n,["personGeneration"]);t!==void 0&&p!=null&&m(t,["parameters","personGeneration"],p);const v=g(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&m(t,["parameters","includeSafetyAttributes"],v);const S=g(n,["includeRaiReason"]);t!==void 0&&S!=null&&m(t,["parameters","includeRaiReason"],S);const _=g(n,["language"]);t!==void 0&&_!=null&&m(t,["parameters","language"],_);const x=g(n,["outputMimeType"]);t!==void 0&&x!=null&&m(t,["parameters","outputOptions","mimeType"],x);const E=g(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&m(t,["parameters","outputOptions","compressionQuality"],E);const b=g(n,["addWatermark"]);t!==void 0&&b!=null&&m(t,["parameters","addWatermark"],b);const w=g(n,["labels"]);t!==void 0&&w!=null&&m(t,["labels"],w);const D=g(n,["imageSize"]);t!==void 0&&D!=null&&m(t,["parameters","sampleImageSize"],D);const R=g(n,["enhancePrompt"]);return t!==void 0&&R!=null&&m(t,["parameters","enhancePrompt"],R),e}function _N(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["prompt"]);o!=null&&m(e,["instances[0]","prompt"],o);const a=g(t,["config"]);return a!=null&&SN(a,e),e}function CN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["prompt"]);o!=null&&m(e,["instances[0]","prompt"],o);const a=g(t,["config"]);return a!=null&&TN(a,e),e}function xN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>ON(l))),m(t,["generatedImages"],a)}const o=g(n,["positivePromptSafetyAttributes"]);return o!=null&&m(t,["positivePromptSafetyAttributes"],hx(o)),t}function EN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Lc(l))),m(t,["generatedImages"],a)}const o=g(n,["positivePromptSafetyAttributes"]);return o!=null&&m(t,["positivePromptSafetyAttributes"],fx(o)),t}function bN(n,t){const e={},i=g(n,["numberOfVideos"]);if(t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i),g(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=g(n,["durationSeconds"]);if(t!==void 0&&o!=null&&m(t,["parameters","durationSeconds"],o),g(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=g(n,["aspectRatio"]);t!==void 0&&a!=null&&m(t,["parameters","aspectRatio"],a);const l=g(n,["resolution"]);t!==void 0&&l!=null&&m(t,["parameters","resolution"],l);const c=g(n,["personGeneration"]);if(t!==void 0&&c!=null&&m(t,["parameters","personGeneration"],c),g(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=g(n,["negativePrompt"]);t!==void 0&&h!=null&&m(t,["parameters","negativePrompt"],h);const f=g(n,["enhancePrompt"]);if(t!==void 0&&f!=null&&m(t,["parameters","enhancePrompt"],f),g(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=g(n,["lastFrame"]);t!==void 0&&p!=null&&m(t,["instances[0]","lastFrame"],Uc(p));const v=g(n,["referenceImages"]);if(t!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(_=>wI(_))),m(t,["instances[0]","referenceImages"],S)}if(g(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function AN(n,t){const e={},i=g(n,["numberOfVideos"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=g(n,["outputGcsUri"]);t!==void 0&&o!=null&&m(t,["parameters","storageUri"],o);const a=g(n,["fps"]);t!==void 0&&a!=null&&m(t,["parameters","fps"],a);const l=g(n,["durationSeconds"]);t!==void 0&&l!=null&&m(t,["parameters","durationSeconds"],l);const c=g(n,["seed"]);t!==void 0&&c!=null&&m(t,["parameters","seed"],c);const h=g(n,["aspectRatio"]);t!==void 0&&h!=null&&m(t,["parameters","aspectRatio"],h);const f=g(n,["resolution"]);t!==void 0&&f!=null&&m(t,["parameters","resolution"],f);const p=g(n,["personGeneration"]);t!==void 0&&p!=null&&m(t,["parameters","personGeneration"],p);const v=g(n,["pubsubTopic"]);t!==void 0&&v!=null&&m(t,["parameters","pubsubTopic"],v);const S=g(n,["negativePrompt"]);t!==void 0&&S!=null&&m(t,["parameters","negativePrompt"],S);const _=g(n,["enhancePrompt"]);t!==void 0&&_!=null&&m(t,["parameters","enhancePrompt"],_);const x=g(n,["generateAudio"]);t!==void 0&&x!=null&&m(t,["parameters","generateAudio"],x);const E=g(n,["lastFrame"]);t!==void 0&&E!=null&&m(t,["instances[0]","lastFrame"],Yn(E));const b=g(n,["referenceImages"]);if(t!==void 0&&b!=null){let R=b;Array.isArray(R)&&(R=R.map(k=>MI(k))),m(t,["instances[0]","referenceImages"],R)}const w=g(n,["mask"]);t!==void 0&&w!=null&&m(t,["instances[0]","mask"],AI(w));const D=g(n,["compressionQuality"]);return t!==void 0&&D!=null&&m(t,["parameters","compressionQuality"],D),e}function wN(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response","generateVideoResponse"]);return l!=null&&m(t,["response"],NN(l)),t}function MN(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response"]);return l!=null&&m(t,["response"],IN(l)),t}function DN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["prompt"]);o!=null&&m(e,["instances[0]","prompt"],o);const a=g(t,["image"]);a!=null&&m(e,["instances[0]","image"],Uc(a));const l=g(t,["video"]);l!=null&&m(e,["instances[0]","video"],px(l));const c=g(t,["source"]);c!=null&&PN(c,e);const h=g(t,["config"]);return h!=null&&bN(h,e),e}function RN(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["prompt"]);o!=null&&m(e,["instances[0]","prompt"],o);const a=g(t,["image"]);a!=null&&m(e,["instances[0]","image"],Yn(a));const l=g(t,["video"]);l!=null&&m(e,["instances[0]","video"],gx(l));const c=g(t,["source"]);c!=null&&kN(c,e);const h=g(t,["config"]);return h!=null&&AN(h,e),e}function NN(n){const t={},e=g(n,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>UN(l))),m(t,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=g(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function IN(n){const t={},e=g(n,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>VN(l))),m(t,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=g(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function PN(n,t){const e={},i=g(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=g(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],Uc(o));const a=g(n,["video"]);return t!==void 0&&a!=null&&m(t,["instances[0]","video"],px(a)),e}function kN(n,t){const e={},i=g(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=g(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],Yn(o));const a=g(n,["video"]);return t!==void 0&&a!=null&&m(t,["instances[0]","video"],gx(a)),e}function ON(n){const t={},e=g(n,["_self"]);e!=null&&m(t,["image"],XN(e));const i=g(n,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const o=g(n,["_self"]);return o!=null&&m(t,["safetyAttributes"],hx(o)),t}function Lc(n){const t={},e=g(n,["_self"]);e!=null&&m(t,["image"],cx(e));const i=g(n,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const o=g(n,["_self"]);o!=null&&m(t,["safetyAttributes"],fx(o));const a=g(n,["prompt"]);return a!=null&&m(t,["enhancedPrompt"],a),t}function LN(n){const t={},e=g(n,["_self"]);e!=null&&m(t,["mask"],cx(e));const i=g(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["labels"],o)}return t}function UN(n){const t={},e=g(n,["video"]);return e!=null&&m(t,["video"],EI(e)),t}function VN(n){const t={},e=g(n,["_self"]);return e!=null&&m(t,["video"],bI(e)),t}function FN(n){const t={},e=g(n,["modelSelectionConfig"]);e!=null&&m(t,["modelConfig"],e);const i=g(n,["responseJsonSchema"]);i!=null&&m(t,["responseJsonSchema"],i);const o=g(n,["audioTimestamp"]);o!=null&&m(t,["audioTimestamp"],o);const a=g(n,["candidateCount"]);a!=null&&m(t,["candidateCount"],a);const l=g(n,["enableAffectiveDialog"]);l!=null&&m(t,["enableAffectiveDialog"],l);const c=g(n,["frequencyPenalty"]);c!=null&&m(t,["frequencyPenalty"],c);const h=g(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const f=g(n,["maxOutputTokens"]);f!=null&&m(t,["maxOutputTokens"],f);const p=g(n,["mediaResolution"]);p!=null&&m(t,["mediaResolution"],p);const v=g(n,["presencePenalty"]);v!=null&&m(t,["presencePenalty"],v);const S=g(n,["responseLogprobs"]);S!=null&&m(t,["responseLogprobs"],S);const _=g(n,["responseMimeType"]);_!=null&&m(t,["responseMimeType"],_);const x=g(n,["responseModalities"]);x!=null&&m(t,["responseModalities"],x);const E=g(n,["responseSchema"]);E!=null&&m(t,["responseSchema"],E);const b=g(n,["routingConfig"]);b!=null&&m(t,["routingConfig"],b);const w=g(n,["seed"]);w!=null&&m(t,["seed"],w);const D=g(n,["speechConfig"]);D!=null&&m(t,["speechConfig"],D);const R=g(n,["stopSequences"]);R!=null&&m(t,["stopSequences"],R);const k=g(n,["temperature"]);k!=null&&m(t,["temperature"],k);const L=g(n,["thinkingConfig"]);L!=null&&m(t,["thinkingConfig"],L);const Y=g(n,["topK"]);Y!=null&&m(t,["topK"],Y);const G=g(n,["topP"]);if(G!=null&&m(t,["topP"],G),g(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function BN(n,t){const e={},i=g(t,["model"]);return i!=null&&m(e,["_url","name"],kt(n,i)),e}function GN(n,t){const e={},i=g(t,["model"]);return i!=null&&m(e,["_url","name"],kt(n,i)),e}function HN(n){const t={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(n,["enableWidget"]);return e!=null&&m(t,["enableWidget"],e),t}function zN(n){const t={};if(g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(n,["timeRangeFilter"]);return e!=null&&m(t,["timeRangeFilter"],e),t}function qN(n){const t={},e=g(n,["aspectRatio"]);e!=null&&m(t,["aspectRatio"],e);const i=g(n,["imageSize"]);if(i!=null&&m(t,["imageSize"],i),g(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function YN(n){const t={},e=g(n,["aspectRatio"]);e!=null&&m(t,["aspectRatio"],e);const i=g(n,["imageSize"]);i!=null&&m(t,["imageSize"],i);const o=g(n,["outputMimeType"]);o!=null&&m(t,["imageOutputOptions","mimeType"],o);const a=g(n,["outputCompressionQuality"]);return a!=null&&m(t,["imageOutputOptions","compressionQuality"],a),t}function XN(n){const t={},e=g(n,["bytesBase64Encoded"]);e!=null&&m(t,["imageBytes"],ys(e));const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function cx(n){const t={},e=g(n,["gcsUri"]);e!=null&&m(t,["gcsUri"],e);const i=g(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],ys(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function Uc(n){const t={};if(g(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=g(n,["imageBytes"]);e!=null&&m(t,["bytesBase64Encoded"],ys(e));const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function Yn(n){const t={},e=g(n,["gcsUri"]);e!=null&&m(t,["gcsUri"],e);const i=g(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],ys(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function $N(n,t,e){const i={},o=g(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=g(t,["filter"]);e!==void 0&&l!=null&&m(e,["_query","filter"],l);const c=g(t,["queryBase"]);return e!==void 0&&c!=null&&m(e,["_url","models_url"],ix(n,c)),i}function WN(n,t,e){const i={},o=g(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=g(t,["filter"]);e!==void 0&&l!=null&&m(e,["_query","filter"],l);const c=g(t,["queryBase"]);return e!==void 0&&c!=null&&m(e,["_url","models_url"],ix(n,c)),i}function JN(n,t){const e={},i=g(t,["config"]);return i!=null&&$N(n,i,e),e}function KN(n,t){const e={},i=g(t,["config"]);return i!=null&&WN(n,i,e),e}function jN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["_self"]);if(o!=null){let a=sx(o);Array.isArray(a)&&(a=a.map(l=>ap(l))),m(t,["models"],a)}return t}function QN(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["_self"]);if(o!=null){let a=sx(o);Array.isArray(a)&&(a=a.map(l=>lp(l))),m(t,["models"],a)}return t}function ZN(n){const t={},e=g(n,["maskMode"]);e!=null&&m(t,["maskMode"],e);const i=g(n,["segmentationClasses"]);i!=null&&m(t,["maskClasses"],i);const o=g(n,["maskDilation"]);return o!=null&&m(t,["dilation"],o),t}function ap(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=g(n,["description"]);o!=null&&m(t,["description"],o);const a=g(n,["version"]);a!=null&&m(t,["version"],a);const l=g(n,["_self"]);l!=null&&m(t,["tunedModelInfo"],gI(l));const c=g(n,["inputTokenLimit"]);c!=null&&m(t,["inputTokenLimit"],c);const h=g(n,["outputTokenLimit"]);h!=null&&m(t,["outputTokenLimit"],h);const f=g(n,["supportedGenerationMethods"]);f!=null&&m(t,["supportedActions"],f);const p=g(n,["temperature"]);p!=null&&m(t,["temperature"],p);const v=g(n,["maxTemperature"]);v!=null&&m(t,["maxTemperature"],v);const S=g(n,["topP"]);S!=null&&m(t,["topP"],S);const _=g(n,["topK"]);_!=null&&m(t,["topK"],_);const x=g(n,["thinking"]);return x!=null&&m(t,["thinking"],x),t}function lp(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=g(n,["description"]);o!=null&&m(t,["description"],o);const a=g(n,["versionId"]);a!=null&&m(t,["version"],a);const l=g(n,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>fN(S))),m(t,["endpoints"],v)}const c=g(n,["labels"]);c!=null&&m(t,["labels"],c);const h=g(n,["_self"]);h!=null&&m(t,["tunedModelInfo"],mI(h));const f=g(n,["defaultCheckpointId"]);f!=null&&m(t,["defaultCheckpointId"],f);const p=g(n,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>S)),m(t,["checkpoints"],v)}return t}function tI(n){const t={},e=g(n,["mediaResolution"]);e!=null&&m(t,["mediaResolution"],e);const i=g(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=g(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const a=g(n,["fileData"]);a!=null&&m(t,["fileData"],dN(a));const l=g(n,["functionCall"]);l!=null&&m(t,["functionCall"],pN(l));const c=g(n,["functionResponse"]);c!=null&&m(t,["functionResponse"],c);const h=g(n,["inlineData"]);h!=null&&m(t,["inlineData"],F2(h));const f=g(n,["text"]);f!=null&&m(t,["text"],f);const p=g(n,["thought"]);p!=null&&m(t,["thought"],p);const v=g(n,["thoughtSignature"]);v!=null&&m(t,["thoughtSignature"],v);const S=g(n,["videoMetadata"]);return S!=null&&m(t,["videoMetadata"],S),t}function eI(n){const t={},e=g(n,["productImage"]);return e!=null&&m(t,["image"],Yn(e)),t}function nI(n,t){const e={},i=g(n,["numberOfImages"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=g(n,["baseSteps"]);t!==void 0&&o!=null&&m(t,["parameters","baseSteps"],o);const a=g(n,["outputGcsUri"]);t!==void 0&&a!=null&&m(t,["parameters","storageUri"],a);const l=g(n,["seed"]);t!==void 0&&l!=null&&m(t,["parameters","seed"],l);const c=g(n,["safetyFilterLevel"]);t!==void 0&&c!=null&&m(t,["parameters","safetySetting"],c);const h=g(n,["personGeneration"]);t!==void 0&&h!=null&&m(t,["parameters","personGeneration"],h);const f=g(n,["addWatermark"]);t!==void 0&&f!=null&&m(t,["parameters","addWatermark"],f);const p=g(n,["outputMimeType"]);t!==void 0&&p!=null&&m(t,["parameters","outputOptions","mimeType"],p);const v=g(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&m(t,["parameters","outputOptions","compressionQuality"],v);const S=g(n,["enhancePrompt"]);t!==void 0&&S!=null&&m(t,["parameters","enhancePrompt"],S);const _=g(n,["labels"]);return t!==void 0&&_!=null&&m(t,["labels"],_),e}function iI(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["source"]);o!=null&&oI(o,e);const a=g(t,["config"]);return a!=null&&nI(a,e),e}function sI(n){const t={},e=g(n,["predictions"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>Lc(o))),m(t,["generatedImages"],i)}return t}function oI(n,t){const e={},i=g(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=g(n,["personImage"]);t!==void 0&&o!=null&&m(t,["instances[0]","personImage","image"],Yn(o));const a=g(n,["productImages"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>eI(c))),m(t,["instances[0]","productImages"],l)}return e}function rI(n){const t={},e=g(n,["referenceImage"]);e!=null&&m(t,["referenceImage"],Yn(e));const i=g(n,["referenceId"]);i!=null&&m(t,["referenceId"],i);const o=g(n,["referenceType"]);o!=null&&m(t,["referenceType"],o);const a=g(n,["maskImageConfig"]);a!=null&&m(t,["maskImageConfig"],ZN(a));const l=g(n,["controlImageConfig"]);l!=null&&m(t,["controlImageConfig"],X2(l));const c=g(n,["styleImageConfig"]);c!=null&&m(t,["styleImageConfig"],c);const h=g(n,["subjectImageConfig"]);return h!=null&&m(t,["subjectImageConfig"],h),t}function hx(n){const t={},e=g(n,["safetyAttributes","categories"]);e!=null&&m(t,["categories"],e);const i=g(n,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const o=g(n,["contentType"]);return o!=null&&m(t,["contentType"],o),t}function fx(n){const t={},e=g(n,["safetyAttributes","categories"]);e!=null&&m(t,["categories"],e);const i=g(n,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const o=g(n,["contentType"]);return o!=null&&m(t,["contentType"],o),t}function aI(n){const t={},e=g(n,["category"]);if(e!=null&&m(t,["category"],e),g(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=g(n,["threshold"]);return i!=null&&m(t,["threshold"],i),t}function lI(n){const t={},e=g(n,["image"]);return e!=null&&m(t,["image"],Yn(e)),t}function uI(n,t){const e={},i=g(n,["mode"]);t!==void 0&&i!=null&&m(t,["parameters","mode"],i);const o=g(n,["maxPredictions"]);t!==void 0&&o!=null&&m(t,["parameters","maxPredictions"],o);const a=g(n,["confidenceThreshold"]);t!==void 0&&a!=null&&m(t,["parameters","confidenceThreshold"],a);const l=g(n,["maskDilation"]);t!==void 0&&l!=null&&m(t,["parameters","maskDilation"],l);const c=g(n,["binaryColorThreshold"]);t!==void 0&&c!=null&&m(t,["parameters","binaryColorThreshold"],c);const h=g(n,["labels"]);return t!==void 0&&h!=null&&m(t,["labels"],h),e}function cI(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["source"]);o!=null&&fI(o,e);const a=g(t,["config"]);return a!=null&&uI(a,e),e}function hI(n){const t={},e=g(n,["predictions"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>LN(o))),m(t,["generatedMasks"],i)}return t}function fI(n,t){const e={},i=g(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=g(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],Yn(o));const a=g(n,["scribbleImage"]);return t!==void 0&&a!=null&&m(t,["instances[0]","scribble"],lI(a)),e}function dI(n){const t={},e=g(n,["functionCallingConfig"]);e!=null&&m(t,["functionCallingConfig"],gN(e));const i=g(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function pI(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(v=>v)),m(t,["functionDeclarations"],p)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=g(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const a=g(n,["fileSearch"]);a!=null&&m(t,["fileSearch"],a);const l=g(n,["codeExecution"]);if(l!=null&&m(t,["codeExecution"],l),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],HN(c));const h=g(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],zN(h));const f=g(n,["urlContext"]);return f!=null&&m(t,["urlContext"],f),t}function dx(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let v=e;Array.isArray(v)&&(v=v.map(S=>mN(S))),m(t,["functionDeclarations"],v)}const i=g(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=g(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const a=g(n,["computerUse"]);if(a!=null&&m(t,["computerUse"],a),g(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(n,["codeExecution"]);l!=null&&m(t,["codeExecution"],l);const c=g(n,["enterpriseWebSearch"]);c!=null&&m(t,["enterpriseWebSearch"],c);const h=g(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const f=g(n,["googleSearch"]);f!=null&&m(t,["googleSearch"],f);const p=g(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function gI(n){const t={},e=g(n,["baseModel"]);e!=null&&m(t,["baseModel"],e);const i=g(n,["createTime"]);i!=null&&m(t,["createTime"],i);const o=g(n,["updateTime"]);return o!=null&&m(t,["updateTime"],o),t}function mI(n){const t={},e=g(n,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&m(t,["baseModel"],e);const i=g(n,["createTime"]);i!=null&&m(t,["createTime"],i);const o=g(n,["updateTime"]);return o!=null&&m(t,["updateTime"],o),t}function yI(n,t){const e={},i=g(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=g(n,["description"]);t!==void 0&&o!=null&&m(t,["description"],o);const a=g(n,["defaultCheckpointId"]);return t!==void 0&&a!=null&&m(t,["defaultCheckpointId"],a),e}function vI(n,t){const e={},i=g(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=g(n,["description"]);t!==void 0&&o!=null&&m(t,["description"],o);const a=g(n,["defaultCheckpointId"]);return t!==void 0&&a!=null&&m(t,["defaultCheckpointId"],a),e}function SI(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","name"],kt(n,i));const o=g(t,["config"]);return o!=null&&yI(o,e),e}function TI(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["config"]);return o!=null&&vI(o,e),e}function _I(n,t){const e={},i=g(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=g(n,["safetyFilterLevel"]);t!==void 0&&o!=null&&m(t,["parameters","safetySetting"],o);const a=g(n,["personGeneration"]);t!==void 0&&a!=null&&m(t,["parameters","personGeneration"],a);const l=g(n,["includeRaiReason"]);t!==void 0&&l!=null&&m(t,["parameters","includeRaiReason"],l);const c=g(n,["outputMimeType"]);t!==void 0&&c!=null&&m(t,["parameters","outputOptions","mimeType"],c);const h=g(n,["outputCompressionQuality"]);t!==void 0&&h!=null&&m(t,["parameters","outputOptions","compressionQuality"],h);const f=g(n,["enhanceInputImage"]);t!==void 0&&f!=null&&m(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=g(n,["imagePreservationFactor"]);t!==void 0&&p!=null&&m(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=g(n,["labels"]);t!==void 0&&v!=null&&m(t,["labels"],v);const S=g(n,["numberOfImages"]);t!==void 0&&S!=null&&m(t,["parameters","sampleCount"],S);const _=g(n,["mode"]);return t!==void 0&&_!=null&&m(t,["parameters","mode"],_),e}function CI(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["_url","model"],kt(n,i));const o=g(t,["image"]);o!=null&&m(e,["instances[0]","image"],Yn(o));const a=g(t,["upscaleFactor"]);a!=null&&m(e,["parameters","upscaleConfig","upscaleFactor"],a);const l=g(t,["config"]);return l!=null&&_I(l,e),e}function xI(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Lc(a))),m(t,["generatedImages"],o)}return t}function EI(n){const t={},e=g(n,["uri"]);e!=null&&m(t,["uri"],e);const i=g(n,["encodedVideo"]);i!=null&&m(t,["videoBytes"],ys(i));const o=g(n,["encoding"]);return o!=null&&m(t,["mimeType"],o),t}function bI(n){const t={},e=g(n,["gcsUri"]);e!=null&&m(t,["uri"],e);const i=g(n,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],ys(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function AI(n){const t={},e=g(n,["image"]);e!=null&&m(t,["_self"],Yn(e));const i=g(n,["maskMode"]);return i!=null&&m(t,["maskMode"],i),t}function wI(n){const t={},e=g(n,["image"]);e!=null&&m(t,["image"],Uc(e));const i=g(n,["referenceType"]);return i!=null&&m(t,["referenceType"],i),t}function MI(n){const t={},e=g(n,["image"]);e!=null&&m(t,["image"],Yn(e));const i=g(n,["referenceType"]);return i!=null&&m(t,["referenceType"],i),t}function px(n){const t={},e=g(n,["uri"]);e!=null&&m(t,["uri"],e);const i=g(n,["videoBytes"]);i!=null&&m(t,["encodedVideo"],ys(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["encoding"],o),t}function gx(n){const t={},e=g(n,["uri"]);e!=null&&m(t,["gcsUri"],e);const i=g(n,["videoBytes"]);i!=null&&m(t,["bytesBase64Encoded"],ys(i));const o=g(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(n,t){const e={},i=g(n,["displayName"]);return t!==void 0&&i!=null&&m(t,["displayName"],i),e}function RI(n){const t={},e=g(n,["config"]);return e!=null&&DI(e,t),t}function NI(n,t){const e={},i=g(n,["force"]);return t!==void 0&&i!=null&&m(t,["_query","force"],i),e}function II(n){const t={},e=g(n,["name"]);e!=null&&m(t,["_url","name"],e);const i=g(n,["config"]);return i!=null&&NI(i,t),t}function PI(n){const t={},e=g(n,["name"]);return e!=null&&m(t,["_url","name"],e),t}function kI(n,t){const e={},i=g(n,["customMetadata"]);if(t!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["customMetadata"],a)}const o=g(n,["chunkingConfig"]);return t!==void 0&&o!=null&&m(t,["chunkingConfig"],o),e}function OI(n){const t={},e=g(n,["name"]);e!=null&&m(t,["name"],e);const i=g(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=g(n,["done"]);o!=null&&m(t,["done"],o);const a=g(n,["error"]);a!=null&&m(t,["error"],a);const l=g(n,["response"]);return l!=null&&m(t,["response"],UI(l)),t}function LI(n){const t={},e=g(n,["fileSearchStoreName"]);e!=null&&m(t,["_url","file_search_store_name"],e);const i=g(n,["fileName"]);i!=null&&m(t,["fileName"],i);const o=g(n,["config"]);return o!=null&&kI(o,t),t}function UI(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["parent"]);i!=null&&m(t,["parent"],i);const o=g(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function VI(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),e}function FI(n){const t={},e=g(n,["config"]);return e!=null&&VI(e,t),t}function BI(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["fileSearchStores"],a)}return t}function mx(n,t){const e={},i=g(n,["mimeType"]);t!==void 0&&i!=null&&m(t,["mimeType"],i);const o=g(n,["displayName"]);t!==void 0&&o!=null&&m(t,["displayName"],o);const a=g(n,["customMetadata"]);if(t!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),m(t,["customMetadata"],c)}const l=g(n,["chunkingConfig"]);return t!==void 0&&l!=null&&m(t,["chunkingConfig"],l),e}function GI(n){const t={},e=g(n,["fileSearchStoreName"]);e!=null&&m(t,["_url","file_search_store_name"],e);const i=g(n,["config"]);return i!=null&&mx(i,t),t}function HI(n){const t={},e=g(n,["sdkHttpResponse"]);return e!=null&&m(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zI="Content-Type",qI="X-Server-Timeout",YI="User-Agent",up="x-goog-api-client",XI="1.34.0",$I=`google-genai-sdk/${XI}`,WI="v1beta1",JI="v1beta";class KI{constructor(t){var e,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:WI,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:JI,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,i){const o=[this.getRequestUrlInternal(e)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,i);if(t.queryParams)for(const[l,c]of Object.entries(t.queryParams))o.searchParams.append(l,String(c));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,o.toString(),t.abortSignal),this.unaryApiCall(o,a,t.httpMethod)}patchHttpOptions(t,e){const i=JSON.parse(JSON.stringify(t));for(const[o,a]of Object.entries(e))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,o.toString(),t.abortSignal),this.streamApiCall(o,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,i,o){if(e&&e.timeout||o){const a=new AbortController,l=a.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const c=setTimeout(()=>a.abort(),e.timeout);c&&typeof c.unref=="function"&&c.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),t.signal=l}return e&&e.extraBody!==null&&jI(t,e.extraBody),t.headers=await this.getHeadersInternal(e,i),t}async unaryApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async o=>(await BT(o),new sp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async o=>(await BT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return Hn(this,arguments,function*(){var i;const o=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield vt(o.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(p,{stream:!0});try{const x=JSON.parse(v);if("error"in x){const E=JSON.parse(JSON.stringify(x.error)),b=E.status,w=E.code,D=`got status: ${b}. ${JSON.stringify(x)}`;if(w>=400&&w<600)throw new kc({message:D,status:w})}}catch(x){if(x.name==="ApiError")throw x}l+=v;let S=-1,_=0;for(;;){S=-1,_=0;for(const b of h){const w=l.indexOf(b);w!==-1&&(S===-1||w<S)&&(S=w,_=b.length)}if(S===-1)break;const x=l.substring(0,S);l=l.substring(S+_);const E=x.trim();if(E.startsWith(c)){const b=E.substring(c.length).trim();try{const w=new Response(b,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield vt(new sp(w))}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},e=$I+" "+this.clientOptions.userAgentExtra;return t[YI]=e,t[up]=e,t[zI]="application/json",t}async getHeadersInternal(t,e){const i=new Headers;if(t&&t.headers){for(const[o,a]of Object.entries(t.headers))i.append(o,a);t.timeout&&t.timeout>0&&i.append(qI,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,e),i}getFileName(t){var e;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(e=i.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),i}async uploadFile(t,e){var i;const o={};e!=null&&(o.mimeType=e.mimeType,o.name=e.name,o.displayName=e.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,l=await a.stat(t);o.sizeBytes=String(l.size);const c=(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=c;const h={file:o},f=this.getFileName(t),p=ot("upload/v1beta/files",h._url),v=await this.fetchUploadUrl(p,o.sizeBytes,o.mimeType,f,h,e==null?void 0:e.httpOptions);return a.upload(t,v,this)}async uploadFileToFileSearchStore(t,e,i){var o;const a=this.clientOptions.uploader,l=await a.stat(e),c=String(l.size),h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(e),v={};i!=null&&mx(i,v);const S=await this.fetchUploadUrl(f,c,h,p,v,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(e,S,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,i,o,a,l){var c;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const f=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function BT(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const e=n.status;let i;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw e>=400&&e<600?new kc({message:o,status:e}):new Error(o)}}function jI(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))e=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],p=c[h];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[h]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[h]=f)}return c}const o=i(e,t);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QI="mcp_used/unknown";let ZI=!1;function yx(n){for(const t of n)if(tP(t)||typeof t=="object"&&"inputSchema"in t)return!0;return ZI}function vx(n){var t;const e=(t=n[up])!==null&&t!==void 0?t:"";n[up]=(e+` ${QI}`).trimStart()}function tP(n){return n!==null&&typeof n=="object"&&n instanceof rg}function eP(n){return Hn(this,arguments,function*(e,i=100){let o,a=0;for(;a<i;){const l=yield vt(e.listTools({cursor:o}));for(const c of l.tools)yield yield vt(c),a++;if(!l.nextCursor)break;o=l.nextCursor}})}class rg{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new rg(t,e)}async initialize(){var t,e,i,o;if(this.mcpTools.length>0)return;const a={},l=[];for(const p of this.mcpClients)try{for(var c=!0,h=(e=void 0,zn(eP(p))),f;f=await h.next(),t=f.done,!t;c=!0){o=f.value,c=!1;const v=o;l.push(v);const S=v.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=p}}catch(v){e={error:v}}finally{try{!c&&!t&&(i=h.return)&&await i.call(h)}finally{if(e)throw e.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),PD(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,a);e.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function nP(n,t,e){const i=new bD;let o;e.data instanceof Blob?o=JSON.parse(await e.data.text()):o=JSON.parse(e.data),Object.assign(i,o),t(i)}class iP{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i}async connect(t){var e,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=rP(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(R=>{f=R}),v=t.callbacks,S=function(){f({})},_=this.apiClient,x={onopen:S,onmessage:R=>{nP(_,v.onmessage,R)},onerror:(e=v==null?void 0:v.onerror)!==null&&e!==void 0?e:function(R){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(R){}},E=this.webSocketFactory.create(h,oP(l),x);E.connect(),await p;const D={setup:{model:kt(this.apiClient,t.model)}};return E.send(JSON.stringify(D)),new sP(E,this.apiClient)}}class sP{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=R2(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=D2(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl($o.PLAY)}pause(){this.sendPlaybackControl($o.PAUSE)}stop(){this.sendPlaybackControl($o.STOP)}resetContext(){this.sendPlaybackControl($o.RESET_CONTEXT)}close(){this.conn.close()}}function oP(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function rP(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lP(n,t,e){const i=new ED;let o;e.data instanceof Blob?o=await e.data.text():e.data instanceof ArrayBuffer?o=new TextDecoder().decode(e.data):o=e.data;const a=JSON.parse(o);if(n.isVertexAI()){const l=P2(a);Object.assign(i,l)}else Object.assign(i,a);t(i)}class uP{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i,this.music=new iP(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,i,o,a,l,c;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();t.config&&t.config.tools&&yx(t.config.tools)&&vx(v);const S=dP(v);if(this.apiClient.isVertexAI())p=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,p);else{const $=this.apiClient.getApiKey();let et="BidiGenerateContent",st="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),et="BidiGenerateContentConstrained",st="access_token"),p=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${et}?${st}=${$}`}let _=()=>{};const x=new Promise($=>{_=$}),E=t.callbacks,b=function(){var $;($=E==null?void 0:E.onopen)===null||$===void 0||$.call(E),_({})},w=this.apiClient,D={onopen:b,onmessage:$=>{lP(w,E.onmessage,$)},onerror:(e=E==null?void 0:E.onerror)!==null&&e!==void 0?e:function($){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function($){}},R=this.webSocketFactory.create(p,fP(S),D);R.connect(),await x;let k=kt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const $=this.apiClient.getProject(),et=this.apiClient.getLocation();k=`projects/${$}/locations/${et}/`+k}let L={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[cc.AUDIO]}:t.config.responseModalities=[cc.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],G=[];for(const $ of Y)if(this.isCallableTool($)){const et=$;G.push(await et.tool())}else G.push($);G.length>0&&(t.config.tools=G);const V={model:k,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?L=M2(this.apiClient,V):L=w2(this.apiClient,V),delete L.config,R.send(JSON.stringify(L)),new hP(R,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const cP={turnComplete:!0};class hP{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let i=[];try{i=wn(e.turns),t.isVertexAI()||(i=i.map(o=>Oc(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let i=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?i=e.functionResponses:i=[e.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(aP)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},cP),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:I2(t)}:e={realtimeInput:N2(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function fP(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function dP(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GT=10;function HT(n){var t,e,i;if(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const l of(e=n==null?void 0:n.tools)!==null&&e!==void 0?e:[])if(sr(l)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function sr(n){return"callTool"in n&&typeof n.callTool=="function"}function pP(n){var t,e,i;return(i=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(o=>sr(o)))!==null&&i!==void 0?i:!1}function zT(n){var t;const e=[];return!((t=n==null?void 0:n.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((i,o)=>{if(sr(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&e.push(o)}),e}function qT(n){var t;return!(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gP extends ki{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var i,o,a,l,c;const h=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!pP(e)||HT(e.config))return await this.generateContentInternal(h);const f=zT(e);if(f.length>0){const E=f.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let p,v;const S=wn(h.contents),_=(a=(o=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:GT;let x=0;for(;x<_&&(p=await this.generateContentInternal(h),!(!p.functionCalls||p.functionCalls.length===0));){const E=p.candidates[0].content,b=[];for(const w of(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(sr(w)){const R=await w.callTool(p.functionCalls);b.push(...R)}x++,v={role:"user",parts:b},h.contents=wn(h.contents),h.contents.push(E),h.contents.push(v),qT(h.config)&&(S.push(E),S.push(v))}return qT(h.config)&&(p.automaticFunctionCallingHistory=S),p},this.generateContentStream=async e=>{var i,o,a,l,c;if(this.maybeMoveToResponseJsonSchem(e),HT(e.config)){const v=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(v)}const h=zT(e);if(h.length>0){const v=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(a=(o=(i=e==null?void 0:e.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,p=(c=(l=e==null?void 0:e.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(i=>{var o;let a;const l=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async e=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new io(Mi.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async e=>{const i={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(i.referenceImages=e.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async e=>{let i={numberOfImages:1,mode:"upscale"};e.config&&(i=Object.assign(Object.assign({},i),e.config));const o={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async e=>{var i,o,a,l,c,h;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=e.video)===null||i===void 0)&&i.uri&&(!((o=e.video)===null||o===void 0)&&o.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((l=(a=e.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(c=e.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,i,o;const a=(e=t.config)===null||e===void 0?void 0:e.tools;if(!a)return t;const l=await Promise.all(a.map(async h=>sr(h)?await h.tool():h)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(c.config.tools=l,t.config&&t.config.tools&&yx(t.config.tools)){const h=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),vx(f),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(t){var e,i,o;const a=new Map;for(const l of(i=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&i!==void 0?i:[])if(sr(l)){const c=l,h=await c.tool();for(const f of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,c)}}return a}async processAfcStream(t){var e,i,o;const a=(o=(i=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:GT;let l=!1,c=0;const h=await this.initAfcToolsMap(t);return(function(f,p,v){return Hn(this,arguments,function*(){for(var S,_,x,E,b,w;c<a;){l&&(c++,l=!1);const L=yield vt(f.processParamsMaybeAddMcpUsage(v)),Y=yield vt(f.generateContentStreamInternal(L)),G=[],V=[];try{for(var D=!0,R=(_=void 0,zn(Y)),k;k=yield vt(R.next()),S=k.done,!S;D=!0){E=k.value,D=!1;const $=E;if(yield yield vt($),$.candidates&&(!((b=$.candidates[0])===null||b===void 0)&&b.content)){V.push($.candidates[0].content);for(const et of(w=$.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&et.functionCall){if(!et.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(et.functionCall.name)){const st=yield vt(p.get(et.functionCall.name).callTool([et.functionCall]));G.push(...st)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${et.functionCall.name}`)}}}}catch($){_={error:$}}finally{try{!D&&!S&&(x=R.return)&&(yield vt(x.call(R)))}finally{if(_)throw _.error}}if(G.length>0){l=!0;const $=new Ta;$.candidates=[{content:{role:"user",parts:G}}],yield yield vt($);const et=[];et.push(...V),et.push({role:"user",parts:G});const st=wn(v.contents).concat(et);v.contents=st}else break}})})(this,h,t)}async generateContentInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=UT(this.apiClient,t);return c=ot("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=FT(p),S=new Ta;return Object.assign(S,v),S})}else{const f=LT(this.apiClient,t);return c=ot("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=VT(p),S=new Ta;return Object.assign(S,v),S})}}async generateContentStreamInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=UT(this.apiClient,t);return c=ot("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return Hn(this,arguments,function*(){var S,_,x,E;try{for(var b=!0,w=zn(v),D;D=yield vt(w.next()),S=D.done,!S;b=!0){E=D.value,b=!1;const R=E,k=FT(yield vt(R.json()));k.sdkHttpResponse={headers:R.headers};const L=new Ta;Object.assign(L,k),yield yield vt(L)}}catch(R){_={error:R}}finally{try{!b&&!S&&(x=w.return)&&(yield vt(x.call(w)))}finally{if(_)throw _.error}}})})}else{const f=LT(this.apiClient,t);return c=ot("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(v){return Hn(this,arguments,function*(){var S,_,x,E;try{for(var b=!0,w=zn(v),D;D=yield vt(w.next()),S=D.done,!S;b=!0){E=D.value,b=!1;const R=E,k=VT(yield vt(R.json()));k.sdkHttpResponse={headers:R.headers};const L=new Ta;Object.assign(L,k),yield yield vt(L)}}catch(R){_={error:R}}finally{try{!b&&!S&&(x=w.return)&&(yield vt(x.call(w)))}finally{if(_)throw _.error}}})})}}async embedContent(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=uN(this.apiClient,t);return c=ot("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=hN(p),S=new ST;return Object.assign(S,v),S})}else{const f=lN(this.apiClient,t);return c=ot("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=cN(p),S=new ST;return Object.assign(S,v),S})}}async generateImagesInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=CN(this.apiClient,t);return c=ot("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=EN(p),S=new TT;return Object.assign(S,v),S})}else{const f=_N(this.apiClient,t);return c=ot("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=xN(p),S=new TT;return Object.assign(S,v),S})}}async editImageInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=sN(this.apiClient,t);return a=ot("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const f=oN(h),p=new dD;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=CI(this.apiClient,t);return a=ot("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const f=xI(h),p=new pD;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=iI(this.apiClient,t);return a=ot("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=sI(h),p=new gD;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cI(this.apiClient,t);return a=ot("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=hI(h),p=new mD;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=GN(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>lp(p))}else{const f=BN(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>ap(p))}}async listInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=KN(this.apiClient,t);return c=ot("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=QN(p),S=new _T;return Object.assign(S,v),S})}else{const f=JN(this.apiClient,t);return c=ot("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=jN(p),S=new _T;return Object.assign(S,v),S})}}async update(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=TI(this.apiClient,t);return c=ot("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>lp(p))}else{const f=SI(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>ap(p))}}async delete(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=tN(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=nN(p),S=new CT;return Object.assign(S,v),S})}else{const f=Z2(this.apiClient,t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=eN(p),S=new CT;return Object.assign(S,v),S})}}async countTokens(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=K2(this.apiClient,t);return c=ot("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=Q2(p),S=new xT;return Object.assign(S,v),S})}else{const f=J2(this.apiClient,t);return c=ot("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=j2(p),S=new xT;return Object.assign(S,v),S})}}async computeTokens(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=H2(this.apiClient,t);return a=ot("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const f=z2(h),p=new yD;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=RN(this.apiClient,t);return c=ot("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=MN(p),S=new hc;return Object.assign(S,v),S})}else{const f=DN(this.apiClient,t);return c=ot("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>{const v=wN(p),S=new hc;return Object.assign(S,v),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mP extends ki{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=e.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:o,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=e.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:o,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=aD(t);return c=ot("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=rD(t);return c=ot("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ZM(t);return a=ot("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yP(n){const t={},e=g(n,["data"]);if(e!=null&&m(t,["data"],e),g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function vP(n){const t={},e=g(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(a=>wP(a))),m(t,["parts"],o)}const i=g(n,["role"]);return i!=null&&m(t,["role"],i),t}function SP(n,t,e){const i={},o=g(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=g(t,["newSessionExpireTime"]);e!==void 0&&a!=null&&m(e,["newSessionExpireTime"],a);const l=g(t,["uses"]);e!==void 0&&l!=null&&m(e,["uses"],l);const c=g(t,["liveConnectConstraints"]);e!==void 0&&c!=null&&m(e,["bidiGenerateContentSetup"],AP(n,c));const h=g(t,["lockAdditionalFields"]);return e!==void 0&&h!=null&&m(e,["fieldMask"],h),i}function TP(n,t){const e={},i=g(t,["config"]);return i!=null&&m(e,["config"],SP(n,i,e)),e}function _P(n){const t={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(n,["fileUri"]);e!=null&&m(t,["fileUri"],e);const i=g(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function CP(n){const t={},e=g(n,["id"]);e!=null&&m(t,["id"],e);const i=g(n,["args"]);i!=null&&m(t,["args"],i);const o=g(n,["name"]);if(o!=null&&m(t,["name"],o),g(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xP(n){const t={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(n,["enableWidget"]);return e!=null&&m(t,["enableWidget"],e),t}function EP(n){const t={};if(g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(n,["timeRangeFilter"]);return e!=null&&m(t,["timeRangeFilter"],e),t}function bP(n,t){const e={},i=g(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const o=g(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const a=g(n,["temperature"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","temperature"],a);const l=g(n,["topP"]);t!==void 0&&l!=null&&m(t,["setup","generationConfig","topP"],l);const c=g(n,["topK"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","topK"],c);const h=g(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(n,["mediaResolution"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","mediaResolution"],f);const p=g(n,["seed"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","seed"],p);const v=g(n,["speechConfig"]);t!==void 0&&v!=null&&m(t,["setup","generationConfig","speechConfig"],og(v));const S=g(n,["thinkingConfig"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","thinkingConfig"],S);const _=g(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],_);const x=g(n,["systemInstruction"]);t!==void 0&&x!=null&&m(t,["setup","systemInstruction"],vP(Me(x)));const E=g(n,["tools"]);if(t!==void 0&&E!=null){let Y=pr(E);Array.isArray(Y)&&(Y=Y.map(G=>DP(dr(G)))),m(t,["setup","tools"],Y)}const b=g(n,["sessionResumption"]);t!==void 0&&b!=null&&m(t,["setup","sessionResumption"],MP(b));const w=g(n,["inputAudioTranscription"]);t!==void 0&&w!=null&&m(t,["setup","inputAudioTranscription"],w);const D=g(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&m(t,["setup","outputAudioTranscription"],D);const R=g(n,["realtimeInputConfig"]);t!==void 0&&R!=null&&m(t,["setup","realtimeInputConfig"],R);const k=g(n,["contextWindowCompression"]);t!==void 0&&k!=null&&m(t,["setup","contextWindowCompression"],k);const L=g(n,["proactivity"]);if(t!==void 0&&L!=null&&m(t,["setup","proactivity"],L),g(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function AP(n,t){const e={},i=g(t,["model"]);i!=null&&m(e,["setup","model"],kt(n,i));const o=g(t,["config"]);return o!=null&&m(e,["config"],bP(o,e)),e}function wP(n){const t={},e=g(n,["mediaResolution"]);e!=null&&m(t,["mediaResolution"],e);const i=g(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=g(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const a=g(n,["fileData"]);a!=null&&m(t,["fileData"],_P(a));const l=g(n,["functionCall"]);l!=null&&m(t,["functionCall"],CP(l));const c=g(n,["functionResponse"]);c!=null&&m(t,["functionResponse"],c);const h=g(n,["inlineData"]);h!=null&&m(t,["inlineData"],yP(h));const f=g(n,["text"]);f!=null&&m(t,["text"],f);const p=g(n,["thought"]);p!=null&&m(t,["thought"],p);const v=g(n,["thoughtSignature"]);v!=null&&m(t,["thoughtSignature"],v);const S=g(n,["videoMetadata"]);return S!=null&&m(t,["videoMetadata"],S),t}function MP(n){const t={},e=g(n,["handle"]);if(e!=null&&m(t,["handle"],e),g(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function DP(n){const t={},e=g(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(v=>v)),m(t,["functionDeclarations"],p)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=g(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const a=g(n,["fileSearch"]);a!=null&&m(t,["fileSearch"],a);const l=g(n,["codeExecution"]);if(l!=null&&m(t,["codeExecution"],l),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],xP(c));const h=g(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],EP(h));const f=g(n,["urlContext"]);return f!=null&&m(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RP(n){const t=[];for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${e}.${a}`);t.push(...o)}else t.push(e)}return t.join(",")}function NP(n,t){let e=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,e=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(e){const a=RP(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];o.length>0&&(c=o.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class IP extends ki{constructor(t){super(),this.apiClient=t}async create(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=TP(this.apiClient,t);a=ot("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=NP(c,t.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PP(n,t){const e={},i=g(n,["force"]);return t!==void 0&&i!=null&&m(t,["_query","force"],i),e}function kP(n){const t={},e=g(n,["name"]);e!=null&&m(t,["_url","name"],e);const i=g(n,["config"]);return i!=null&&PP(i,t),t}function OP(n){const t={},e=g(n,["name"]);return e!=null&&m(t,["_url","name"],e),t}function LP(n,t){const e={},i=g(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=g(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),e}function UP(n){const t={},e=g(n,["parent"]);e!=null&&m(t,["_url","parent"],e);const i=g(n,["config"]);return i!=null&&LP(i,t),t}function VP(n){const t={},e=g(n,["sdkHttpResponse"]);e!=null&&m(t,["sdkHttpResponse"],e);const i=g(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=g(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FP extends ki{constructor(t){super(),this.apiClient=t,this.list=async e=>new io(Mi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:e.parent,config:i.config}),await this.listInternal(e),e)}async get(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OP(t);return a=ot("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var e,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kP(t);o=ot("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=UP(t);return a=ot("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=VP(h),p=new vD;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BP extends ki{constructor(t,e=new FP(t)){super(),this.apiClient=t,this.documents=e,this.list=async(i={})=>new io(Mi.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RI(t);return a=ot("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=PI(t);return a=ot("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var e,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=II(t);o=ot("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=FI(t);return a=ot("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=BI(h),p=new SD;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=GI(t);return a=ot("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=HI(h),p=new TD;return Object.assign(p,f),p})}}async importFile(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=LI(t);return a=ot("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const f=OI(h),p=new tg;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sx=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Sx=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),e=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^e()&15>>+i/4).toString(16))};const GP=()=>Sx();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const hp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dn extends Error{}class Le extends Dn{constructor(t,e,i,o){super(`${Le.makeMessage(t,e,i)}`),this.status=t,this.headers=o,this.error=e}static makeMessage(t,e,i){const o=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,e,i,o){if(!t||!o)return new Vc({message:i,cause:hp(e)});const a=e;return t===400?new _x(t,a,i,o):t===401?new Cx(t,a,i,o):t===403?new xx(t,a,i,o):t===404?new Ex(t,a,i,o):t===409?new bx(t,a,i,o):t===422?new Ax(t,a,i,o):t===429?new wx(t,a,i,o):t>=500?new Mx(t,a,i,o):new Le(t,a,i,o)}}class fp extends Le{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Vc extends Le{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class Tx extends Vc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class _x extends Le{}class Cx extends Le{}class xx extends Le{}class Ex extends Le{}class bx extends Le{}class Ax extends Le{}class wx extends Le{}class Mx extends Le{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HP=/^[a-z][a-z0-9+.-]*:/i,zP=n=>HP.test(n);let dp=n=>(dp=Array.isArray,dp(n));const qP=dp;let YP=qP;const YT=YP;function XP(n){if(!n)return!0;for(const t in n)return!1;return!0}function $P(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const WP=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Dn(`${n} must be an integer`);if(t<0)throw new Dn(`${n} must be a positive integer`);return t},JP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KP=n=>new Promise(t=>setTimeout(t,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const QP=()=>{var n,t,e,i,o;const a=jP();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":$T(Deno.build.os),"X-Stainless-Arch":XT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":$T((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":XT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const l=ZP();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of n){const i=e.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,l=i[3]||0;return{browser:t,version:`${o}.${a}.${l}`}}}return null}const XT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",$T=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Su;const tk=()=>Su??(Su=QP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ek(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Dx(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function nk(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Dx({start(){},async pull(e){const{done:i,value:o}=await t.next();i?e.close():e.enqueue(o)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function Rx(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ik(n){var t,e;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((e=(t=n[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sk=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nx=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((n=t==null?void 0:t.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function wd(n,t,e){return Nx(),new File(n,t??"unknown_file",e)}function ok(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const rk=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ix=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",ak=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Ix(n),lk=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function uk(n,t,e){if(Nx(),n=await n,ak(n))return n instanceof File?n:wd([await n.arrayBuffer()],n.name);if(lk(n)){const o=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),wd(await pp(o),t,e)}const i=await pp(n);if(t||(t=ok(n)),!(e!=null&&e.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(e=Object.assign(Object.assign({},e),{type:o}))}return wd(i,t,e)}async function pp(n){var t,e,i,o,a;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(Ix(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(rk(n))try{for(var c=!0,h=zn(n),f;f=await h.next(),t=f.done,!t;c=!0){o=f.value,c=!1;const p=o;l.push(...await pp(p))}}catch(p){e={error:p}}finally{try{!c&&!t&&(i=h.return)&&await i.call(h)}finally{if(e)throw e.error}}else{const p=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${p?`; constructor: ${p}`:""}${ck(n)}`)}return l}function ck(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Px{constructor(t){this._client=t}}Px._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kx(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const WT=Object.freeze(Object.create(null)),hk=(n=kx)=>(function(e,...i){if(e.length===1)return e[0];let o=!1;const a=[],l=e.reduce((p,v,S)=>{var _,x,E;/[?#]/.test(v)&&(o=!0);const b=i[S];let w=(o?encodeURIComponent:n)(""+b);return S!==i.length&&(b==null||typeof b=="object"&&b.toString===((E=Object.getPrototypeOf((x=Object.getPrototypeOf((_=b.hasOwnProperty)!==null&&_!==void 0?_:WT))!==null&&x!==void 0?x:WT))===null||E===void 0?void 0:E.toString))&&(w=b+"",a.push({start:p.length+v.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),p+v+(S===i.length?"":w)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(c))!==null;)a.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(a.sort((p,v)=>p.start-v.start),a.length>0){let p=0;const v=a.reduce((S,_)=>{const x=" ".repeat(_.start-p),E="^".repeat(_.length);return p=_.start+_.length,S+x+E},"");throw new Dn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${l}
${v}`)}return l}),Tu=hk(kx);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox extends Px{create(t,e){var i;const{api_version:o=this._client.apiVersion}=t,a=dc(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new Dn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Dn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Tu`/${o}/interactions`,Object.assign(Object.assign({body:a},e),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,e={},i){const{api_version:o=this._client.apiVersion}=e??{};return this._client.delete(Tu`/${o}/interactions/${t}`,i)}cancel(t,e={},i){const{api_version:o=this._client.apiVersion}=e??{};return this._client.post(Tu`/${o}/interactions/${t}/cancel`,i)}get(t,e={},i){var o;const a=e??{},{api_version:l=this._client.apiVersion}=a,c=dc(a,["api_version"]);return this._client.get(Tu`/${l}/interactions/${t}`,Object.assign(Object.assign({query:c},i),{stream:(o=e==null?void 0:e.stream)!==null&&o!==void 0?o:!1}))}}Ox._key=Object.freeze(["interactions"]);class Lx extends Ox{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(n){let t=0;for(const o of n)t+=o.length;const e=new Uint8Array(t);let i=0;for(const o of n)e.set(o,i),i+=o.length;return e}let _u;function ag(n){let t;return(_u??(t=new globalThis.TextEncoder,_u=t.encode.bind(t)))(n)}let Cu;function JT(n){let t;return(Cu??(t=new globalThis.TextDecoder,Cu=t.decode.bind(t)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?ag(t):t;this.buffer=fk([this.buffer,e]);const i=[];let o;for(;(o=dk(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(JT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,l=JT(this.buffer.subarray(0,a));i.push(l),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Fc.NEWLINE_CHARS=new Set([`
`,"\r"]);Fc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dk(n,t){for(let o=t??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function pk(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pc={off:0,error:200,warn:300,info:400,debug:500},KT=(n,t,e)=>{if(n){if($P(pc,n))return n;Ie(e).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(pc))}`)}};function ba(){}function xu(n,t,e){return!t||pc[n]>pc[e]?ba:t[n].bind(t)}const gk={error:ba,warn:ba,info:ba,debug:ba};let jT=new WeakMap;function Ie(n){var t;const e=n.logger,i=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!e)return gk;const o=jT.get(e);if(o&&o[0]===i)return o[1];const a={error:xu("error",e,i),warn:xu("warn",e,i),info:xu("info",e,i),debug:xu("debug",e,i)};return jT.set(e,[i,a]),a}const Gs=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wo{constructor(t,e,i){this.iterator=t,this.controller=e,this.client=i}static fromSSEResponse(t,e,i){let o=!1;const a=i?Ie(i):console;function l(){return Hn(this,arguments,function*(){var h,f,p,v;if(o)throw new Dn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var _=!0,x=zn(mk(t,e)),E;E=yield vt(x.next()),h=E.done,!h;_=!0){v=E.value,_=!1;const b=v;if(!S)if(b.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield vt(JSON.parse(b.data))}catch(w){throw a.error("Could not parse message into JSON:",b.data),a.error("From chunk:",b.raw),w}}}catch(b){f={error:b}}finally{try{!_&&!h&&(p=x.return)&&(yield vt(p.call(x)))}finally{if(f)throw f.error}}S=!0}catch(b){if(cp(b))return yield vt(void 0);throw b}finally{S||e.abort()}})}return new Wo(l,e,i)}static fromReadableStream(t,e,i){let o=!1;function a(){return Hn(this,arguments,function*(){var h,f,p,v;const S=new Fc,_=Rx(t);try{for(var x=!0,E=zn(_),b;b=yield vt(E.next()),h=b.done,!h;x=!0){v=b.value,x=!1;const w=v;for(const D of S.decode(w))yield yield vt(D)}}catch(w){f={error:w}}finally{try{!x&&!h&&(p=E.return)&&(yield vt(p.call(E)))}finally{if(f)throw f.error}}for(const w of S.flush())yield yield vt(w)})}function l(){return Hn(this,arguments,function*(){var h,f,p,v;if(o)throw new Dn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var _=!0,x=zn(a()),E;E=yield vt(x.next()),h=E.done,!h;_=!0){v=E.value,_=!1;const b=v;S||b&&(yield yield vt(JSON.parse(b)))}}catch(b){f={error:b}}finally{try{!_&&!h&&(p=x.return)&&(yield vt(p.call(x)))}finally{if(f)throw f.error}}S=!0}catch(b){if(cp(b))return yield vt(void 0);throw b}finally{S||e.abort()}})}return new Wo(l,e,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const l=i.next();t.push(l),e.push(l)}return a.shift()}});return[new Wo(()=>o(t),this.controller,this.client),new Wo(()=>o(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return Dx({async start(){e=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await e.next();if(a)return i.close();const l=ag(JSON.stringify(o)+`
`);i.enqueue(l)}catch(o){i.error(o)}},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}}function mk(n,t){return Hn(this,arguments,function*(){var i,o,a,l;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Dn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Dn("Attempted to iterate over a response with no body");const c=new vk,h=new Fc,f=Rx(n.body);try{for(var p=!0,v=zn(yk(f)),S;S=yield vt(v.next()),i=S.done,!i;p=!0){l=S.value,p=!1;const _=l;for(const x of h.decode(_)){const E=c.decode(x);E&&(yield yield vt(E))}}}catch(_){o={error:_}}finally{try{!p&&!i&&(a=v.return)&&(yield vt(a.call(v)))}finally{if(o)throw o.error}}for(const _ of h.flush()){const x=c.decode(_);x&&(yield yield vt(x))}})}function yk(n){return Hn(this,arguments,function*(){var e,i,o,a;let l=new Uint8Array;try{for(var c=!0,h=zn(n),f;f=yield vt(h.next()),e=f.done,!e;c=!0){a=f.value,c=!1;const p=a;if(p==null)continue;const v=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?ag(p):p;let S=new Uint8Array(l.length+v.length);S.set(l),S.set(v,l.length),l=S;let _;for(;(_=pk(l))!==-1;)yield yield vt(l.slice(0,_)),l=l.slice(_)}}catch(p){i={error:p}}finally{try{!c&&!e&&(o=h.return)&&(yield vt(o.call(h)))}finally{if(i)throw i.error}}l.length>0&&(yield yield vt(l))})}class vk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,i,o]=Sk(t,":");return o.startsWith(" ")&&(o=o.substring(1)),e==="event"?this.event=o:e==="data"&&this.data.push(o),null}}function Sk(n,t){const e=n.indexOf(t);return e!==-1?[n.substring(0,e),t,n.substring(e+t.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Tk(n,t){const{response:e,requestLogID:i,retryOfRequestLogID:o,startTime:a}=t,l=await(async()=>{var c;if(t.options.stream)return Ie(n).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,n):Wo.fromSSEResponse(e,t.controller,n);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const h=e.headers.get("content-type"),f=(c=h==null?void 0:h.split(";")[0])===null||c===void 0?void 0:c.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await e.json():await e.text()})();return Ie(n).debug(`[${i}] response parsed`,Gs({retryOfRequestLogID:o,url:e.url,status:e.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lg extends Promise{constructor(t,e,i=Tk){super(o=>{o(null)}),this.responsePromise=e,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new lg(this.client,this.responsePromise,async(e,i)=>t(await this.parseResponse(e,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ux=Symbol("brand.privateNullableHeaders");function*_k(n){if(!n)return;if(Ux in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let t=!1,e;n instanceof Headers?e=n.entries():YT(n)?e=n:(t=!0,e=Object.entries(n??{}));for(let i of e){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=YT(i[1])?i[1]:[i[1]];let l=!1;for(const c of a)c!==void 0&&(t&&!l&&(l=!0,yield[o,null]),yield[o,c])}}const _a=n=>{const t=new Headers,e=new Set;for(const i of n){const o=new Set;for(const[a,l]of _k(i)){const c=a.toLowerCase();o.has(c)||(t.delete(a),o.add(c)),l===null?(t.delete(a),e.add(c)):(t.append(a,l),e.delete(c))}}return{[Ux]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Md=n=>{var t,e,i,o,a,l;if(typeof globalThis.process<"u")return(i=(e=(t=$M)===null||t===void 0?void 0:t[n])===null||e===void 0?void 0:e.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vx;class Bc{constructor(t){var e,i,o,a,l,c,h,{baseURL:f=Md("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(e=Md("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:v="v1beta"}=t,S=dc(t,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:p,apiVersion:v},S),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(i=_.timeout)!==null&&i!==void 0?i:Bc.DEFAULT_TIMEOUT,this.logger=(o=_.logger)!==null&&o!==void 0?o:console;const x="warn";this.logLevel=x,this.logLevel=(l=(a=KT(_.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:KT(Md("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:x,this.fetchOptions=_.fetchOptions,this.maxRetries=(c=_.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=_.fetch)!==null&&h!==void 0?h:ek(),this.encoder=sk,this._options=_,this.apiKey=p,this.apiVersion=v,this.clientAdapter=_.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=_a([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return _a([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return _a([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,i])=>typeof i<"u").map(([e,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(e)}=`;throw new Dn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Yo}`}defaultIdempotencyKey(){return`stainless-node-retry-${GP()}`}makeStatusError(t,e,i,o){return Le.generate(t,e,i,o)}buildURL(t,e,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=zP(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return XP(l)||(e=Object.assign(Object.assign({},l),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(a.search=this.stringifyQuery(e)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:i}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:e},o)))}request(t,e=null){return new lg(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,i){var o,a,l;const c=await t,h=(o=c.maxRetries)!==null&&o!==void 0?o:this.maxRetries;e==null&&(e=h),await this.prepareOptions(c);const{req:f,url:p,timeout:v}=await this.buildRequest(c,{retryCount:h-e});await this.prepareRequest(f,{url:p,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,x=Date.now();if(Ie(this).debug(`[${S}] sending request`,Gs({retryOfRequestLogID:i,method:c.method,url:p,options:c,headers:f.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new fp;const E=new AbortController,b=await this.fetchWithTimeout(p,f,v,E).catch(hp),w=Date.now();if(b instanceof globalThis.Error){const R=`retrying, ${e} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new fp;const k=cp(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(e)return Ie(this).info(`[${S}] connection ${k?"timed out":"failed"} - ${R}`),Ie(this).debug(`[${S}] connection ${k?"timed out":"failed"} (${R})`,Gs({retryOfRequestLogID:i,url:p,durationMs:w-x,message:b.message})),this.retryRequest(c,e,i??S);throw Ie(this).info(`[${S}] connection ${k?"timed out":"failed"} - error; no more retries left`),Ie(this).debug(`[${S}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Gs({retryOfRequestLogID:i,url:p,durationMs:w-x,message:b.message})),k?new Tx:new Vc({cause:b})}const D=`[${S}${_}] ${f.method} ${p} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-x}ms`;if(!b.ok){const R=await this.shouldRetry(b);if(e&&R){const $=`retrying, ${e} attempts remaining`;return await ik(b.body),Ie(this).info(`${D} - ${$}`),Ie(this).debug(`[${S}] response error (${$})`,Gs({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:w-x})),this.retryRequest(c,e,i??S,b.headers)}const k=R?"error; no more retries left":"error; not retryable";Ie(this).info(`${D} - ${k}`);const L=await b.text().catch($=>hp($).message),Y=JP(L),G=Y?void 0:L;throw Ie(this).debug(`[${S}] response error (${k})`,Gs({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,message:G,durationMs:Date.now()-x})),this.makeStatusError(b.status,Y,G,b.headers)}return Ie(this).info(D),Ie(this).debug(`[${S}] response start`,Gs({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:w-x})),{response:b,options:c,controller:E,requestLogID:S,retryOfRequestLogID:i,startTime:x}}async fetchWithTimeout(t,e,i,o){const a=e||{},{signal:l,method:c}=a,h=dc(a,["signal","method"]);l&&l.addEventListener("abort",()=>o.abort());const f=setTimeout(()=>o.abort(),i),p=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:o.signal},p?{duplex:"half"}:{}),{method:"GET"}),h);c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(f)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,i,o){var a;let l;const c=o==null?void 0:o.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const h=o==null?void 0:o.get("retry-after");if(h&&!l){const f=parseFloat(h);Number.isNaN(f)?l=Date.parse(h)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(e,f)}return await KP(l),this.makeRequest(t,e-1,i)}calculateDefaultRetryTimeoutMillis(t,e){const a=e-t,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(t,{retryCount:e=0}={}){var i,o,a;const l=Object.assign({},t),{method:c,path:h,query:f,defaultBaseURL:p}=l,v=this.buildURL(h,f,p);"timeout"in l&&WP("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:_}=this.buildBody({options:l}),x=await this.buildHeaders({options:t,method:c,bodyHeaders:S,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:x},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:l.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let c=_a([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),tk()),this._options.defaultHeaders,i,t.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=_a([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:nk(t)}:this.encoder({body:t,headers:i})}}Bc.DEFAULT_TIMEOUT=6e4;class ye extends Bc{constructor(){super(...arguments),this.interactions=new Lx(this)}}Vx=ye;ye.GeminiNextGenAPIClient=Vx;ye.GeminiNextGenAPIClientError=Dn;ye.APIError=Le;ye.APIConnectionError=Vc;ye.APIConnectionTimeoutError=Tx;ye.APIUserAbortError=fp;ye.NotFoundError=Ex;ye.ConflictError=bx;ye.RateLimitError=wx;ye.BadRequestError=_x;ye.AuthenticationError=Cx;ye.InternalServerError=Mx;ye.PermissionDeniedError=xx;ye.UnprocessableEntityError=Ax;ye.toFile=uk;ye.Interactions=Lx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ck(n,t){const e={},i=g(n,["name"]);return i!=null&&m(e,["_url","name"],i),e}function xk(n,t){const e={},i=g(n,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Ek(n,t){const e={},i=g(n,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bk(n,t){const e={},i=g(n,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Ak(n,t,e){const i={};if(g(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=g(n,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&m(t,["displayName"],o),g(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(n,["epochCount"]);t!==void 0&&a!=null&&m(t,["tuningTask","hyperparameters","epochCount"],a);const l=g(n,["learningRateMultiplier"]);if(l!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=g(n,["batchSize"]);t!==void 0&&c!=null&&m(t,["tuningTask","hyperparameters","batchSize"],c);const h=g(n,["learningRate"]);if(t!==void 0&&h!=null&&m(t,["tuningTask","hyperparameters","learningRate"],h),g(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function wk(n,t,e){const i={};let o=g(e,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const _=g(n,["validationDataset"]);t!==void 0&&_!=null&&m(t,["supervisedTuningSpec"],QT(_))}else if(o==="PREFERENCE_TUNING"){const _=g(n,["validationDataset"]);t!==void 0&&_!=null&&m(t,["preferenceOptimizationSpec"],QT(_))}const a=g(n,["tunedModelDisplayName"]);t!==void 0&&a!=null&&m(t,["tunedModelDisplayName"],a);const l=g(n,["description"]);t!==void 0&&l!=null&&m(t,["description"],l);let c=g(e,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=g(n,["epochCount"]);t!==void 0&&_!=null&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(c==="PREFERENCE_TUNING"){const _=g(n,["epochCount"]);t!==void 0&&_!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let h=g(e,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=g(n,["learningRateMultiplier"]);t!==void 0&&_!=null&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(h==="PREFERENCE_TUNING"){const _=g(n,["learningRateMultiplier"]);t!==void 0&&_!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let f=g(e,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const _=g(n,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(f==="PREFERENCE_TUNING"){const _=g(n,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&m(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let p=g(e,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const _=g(n,["adapterSize"]);t!==void 0&&_!=null&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(p==="PREFERENCE_TUNING"){const _=g(n,["adapterSize"]);t!==void 0&&_!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(g(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=g(n,["labels"]);t!==void 0&&v!=null&&m(t,["labels"],v);const S=g(n,["beta"]);return t!==void 0&&S!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function Mk(n,t){const e={},i=g(n,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=g(n,["preTunedModel"]);o!=null&&m(e,["preTunedModel"],o);const a=g(n,["trainingDataset"]);a!=null&&Fk(a);const l=g(n,["config"]);return l!=null&&Ak(l,e),e}function Dk(n,t){const e={},i=g(n,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=g(n,["preTunedModel"]);o!=null&&m(e,["preTunedModel"],o);const a=g(n,["trainingDataset"]);a!=null&&Bk(a,e,t);const l=g(n,["config"]);return l!=null&&wk(l,e,t),e}function Rk(n,t){const e={},i=g(n,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Nk(n,t){const e={},i=g(n,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Ik(n,t,e){const i={},o=g(n,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=g(n,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(n,["filter"]);return t!==void 0&&l!=null&&m(t,["_query","filter"],l),i}function Pk(n,t,e){const i={},o=g(n,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=g(n,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(n,["filter"]);return t!==void 0&&l!=null&&m(t,["_query","filter"],l),i}function kk(n,t){const e={},i=g(n,["config"]);return i!=null&&Ik(i,e),e}function Ok(n,t){const e={},i=g(n,["config"]);return i!=null&&Pk(i,e),e}function Lk(n,t){const e={},i=g(n,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=g(n,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const a=g(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fx(c))),m(e,["tuningJobs"],l)}return e}function Uk(n,t){const e={},i=g(n,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=g(n,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const a=g(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>gp(c))),m(e,["tuningJobs"],l)}return e}function Vk(n,t){const e={},i=g(n,["name"]);i!=null&&m(e,["model"],i);const o=g(n,["name"]);return o!=null&&m(e,["endpoint"],o),e}function Fk(n,t){const e={};if(g(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=g(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["examples","examples"],o)}return e}function Bk(n,t,e){const i={};let o=g(e,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=g(n,["gcsUri"]);t!==void 0&&l!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=g(n,["gcsUri"]);t!==void 0&&l!=null&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=g(e,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=g(n,["vertexDatasetResource"]);t!==void 0&&l!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=g(n,["vertexDatasetResource"]);t!==void 0&&l!=null&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(g(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Fx(n,t){const e={},i=g(n,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=g(n,["name"]);o!=null&&m(e,["name"],o);const a=g(n,["state"]);a!=null&&m(e,["state"],ex(a));const l=g(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=g(n,["tuningTask","startTime"]);c!=null&&m(e,["startTime"],c);const h=g(n,["tuningTask","completeTime"]);h!=null&&m(e,["endTime"],h);const f=g(n,["updateTime"]);f!=null&&m(e,["updateTime"],f);const p=g(n,["description"]);p!=null&&m(e,["description"],p);const v=g(n,["baseModel"]);v!=null&&m(e,["baseModel"],v);const S=g(n,["_self"]);return S!=null&&m(e,["tunedModel"],Vk(S)),e}function gp(n,t){const e={},i=g(n,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=g(n,["name"]);o!=null&&m(e,["name"],o);const a=g(n,["state"]);a!=null&&m(e,["state"],ex(a));const l=g(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=g(n,["startTime"]);c!=null&&m(e,["startTime"],c);const h=g(n,["endTime"]);h!=null&&m(e,["endTime"],h);const f=g(n,["updateTime"]);f!=null&&m(e,["updateTime"],f);const p=g(n,["error"]);p!=null&&m(e,["error"],p);const v=g(n,["description"]);v!=null&&m(e,["description"],v);const S=g(n,["baseModel"]);S!=null&&m(e,["baseModel"],S);const _=g(n,["tunedModel"]);_!=null&&m(e,["tunedModel"],_);const x=g(n,["preTunedModel"]);x!=null&&m(e,["preTunedModel"],x);const E=g(n,["supervisedTuningSpec"]);E!=null&&m(e,["supervisedTuningSpec"],E);const b=g(n,["preferenceOptimizationSpec"]);b!=null&&m(e,["preferenceOptimizationSpec"],b);const w=g(n,["tuningDataStats"]);w!=null&&m(e,["tuningDataStats"],w);const D=g(n,["encryptionSpec"]);D!=null&&m(e,["encryptionSpec"],D);const R=g(n,["partnerModelTuningSpec"]);R!=null&&m(e,["partnerModelTuningSpec"],R);const k=g(n,["customBaseModel"]);k!=null&&m(e,["customBaseModel"],k);const L=g(n,["experiment"]);L!=null&&m(e,["experiment"],L);const Y=g(n,["labels"]);Y!=null&&m(e,["labels"],Y);const G=g(n,["outputUri"]);G!=null&&m(e,["outputUri"],G);const V=g(n,["pipelineJob"]);V!=null&&m(e,["pipelineJob"],V);const $=g(n,["serviceAccount"]);$!=null&&m(e,["serviceAccount"],$);const et=g(n,["tunedModelDisplayName"]);et!=null&&m(e,["tunedModelDisplayName"],et);const st=g(n,["veoTuningSpec"]);return st!=null&&m(e,["veoTuningSpec"],st),e}function Gk(n,t){const e={},i=g(n,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=g(n,["name"]);o!=null&&m(e,["name"],o);const a=g(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=g(n,["done"]);l!=null&&m(e,["done"],l);const c=g(n,["error"]);return c!=null&&m(e,["error"],c),e}function QT(n,t){const e={},i=g(n,["gcsUri"]);i!=null&&m(e,["validationDatasetUri"],i);const o=g(n,["vertexDatasetResource"]);return o!=null&&m(e,["validationDatasetUri"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hk extends ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new io(Mi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var i;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const o={tunedModelName:e.baseModel};!((i=e.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=e.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},e),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},e);return await this.tuneInternal(o)}else{const o=Object.assign({},e),a=await this.tuneMldevInternal(o);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:ip.JOB_STATE_QUEUED}}}}async getInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Nk(t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>gp(p))}else{const f=Rk(t);return c=ot("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>Fx(p))}}async listInternal(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Ok(t);return c=ot("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=Uk(p),S=new ET;return Object.assign(S,v),S})}else{const f=kk(t);return c=ot("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=Lk(p),S=new ET;return Object.assign(S,v),S})}}async cancel(t){var e,i,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=xk(t);return c=ot("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=bk(p),S=new bT;return Object.assign(S,v),S})}else{const f=Ck(t);return c=ot("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const v=Ek(p),S=new bT;return Object.assign(S,v),S})}}async tuneInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dk(t,t);return a=ot("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>gp(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mk(t);return a=ot("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>Gk(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zk{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qk=1024*1024*8,Yk=3,Xk=1e3,$k=2,gc="x-goog-upload-status";async function Wk(n,t,e){var i;const o=await Bx(n,t,e),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Jk(n,t,e){var i;const o=await Bx(n,t,e),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=JC(a),c=new eg;return Object.assign(c,l),c}async function Bx(n,t,e){var i,o;let a=0,l=0,c=new sp(new Response),h="upload";for(a=n.size;l<a;){const f=Math.min(qk,a-l),p=n.slice(l,l+f);l+f>=a&&(h+=", finalize");let v=0,S=Xk;for(;v<Yk&&(c=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[gc]));)v++,await jk(S),S=S*$k;if(l+=f,((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[gc])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Kk(n){return{size:n.size,type:n.type}}function jk(n){return new Promise(t=>setTimeout(t,n))}class Qk{async upload(t,e,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Wk(t,e,i)}async uploadToFileSearchStore(t,e,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Jk(t,e,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Kk(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zk{create(t,e,i){return new tO(t,e,i)}}class tO{constructor(t,e,i){this.url=t,this.headers=e,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZT="x-goog-api-key";class eO{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(ZT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(ZT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nO="gl-node/";class iO{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new ye({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const i=jM(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new eO(this.apiKey);this.apiClient=new KI({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:nO+"web",uploader:new Qk,downloader:new zk}),this.models=new gP(this.apiClient),this.live=new uP(this.apiClient,o,new Zk),this.batches=new AR(this.apiClient),this.chats=new a2(this.models,this.apiClient),this.caches=new s2(this.apiClient),this.files=new y2(this.apiClient),this.operations=new mP(this.apiClient),this.authTokens=new IP(this.apiClient),this.tunings=new Hk(this.apiClient),this.fileSearchStores=new BP(this.apiClient)}}const sO=["skibidi","rizz","gyatt","sigma","ohio","fanum","tax","mewing","mog","griddy","pog","ratio","brainrot","sus","bussin","cap","fr","ong","grimace","kai","cenat","baby","gronk"],oO=async(n,t)=>{let e=0;const i=[],o=n.name.toLowerCase();sO.forEach(a=>{o.includes(a)&&(e+=15,i.push(`Filename: ${a}`))});try{const a=new Image;a.src=t,await new Promise(c=>a.onload=c),a.height/a.width>1.7&&(e+=10,i.push("Vertical Format"))}catch{console.warn("Visual heuristic check failed.")}try{const a=new iO({apiKey:"PLACEHOLDER_API_KEY"}),l=t.split(",")[1],c=await a.models.generateContent({model:"gemini-2.5-flash-preview-09-2025",contents:[{parts:[{inlineData:{mimeType:n.type||"image/jpeg",data:l}},{text:"Analyze this image for 'brain rot' or 'Gen Alpha' meme content (e.g., Skibidi Toilet, Rizz, Sigma, Ohio, GigaChad, etc.). Provide a 'brain rot score' from 0-100 and identify specific tags. Be strict about recognizing characters like Skibidi Toilet."}]}],config:{responseMimeType:"application/json",responseSchema:{type:En.OBJECT,properties:{score:{type:En.INTEGER,description:"A score from 0 to 100 representing brain rot level"},aiTags:{type:En.ARRAY,items:{type:En.STRING},description:"Specific meme elements or characters identified"}},required:["score","aiTags"]}}}),h=JSON.parse(c.text||"{}"),f=Math.min(Math.max(h.score||0,e),100),p=Array.from(new Set([...i,...h.aiTags||[]]));return{score:f,tags:p,isRot:f>=50}}catch(a){return console.error("AI Analysis failed, falling back to heuristics:",a),{score:Math.min(e,100),tags:i,isRot:e>=50}}},rO=({templates:n,onSelect:t})=>{const[e,i]=Z.useState(""),[o,a]=Z.useState(!1),[l,c]=Z.useState(new Set),h=v=>{c(S=>new Set([...S,v]))},f=n.filter(v=>!l.has(v.id)&&v.name.toLowerCase().includes(e.toLowerCase())),p=async v=>{var _;const S=(_=v.target.files)==null?void 0:_[0];if(S){a(!0);const x=new FileReader;x.onload=async E=>{var R;const b=(R=E.target)==null?void 0:R.result,w=await oO(S,b),D={id:`custom-${Date.now()}`,name:w.isRot?` ROT: ${S.name}`:S.name,url:b,width:800,height:800,box_count:0};a(!1),t(D,w)},x.readAsDataURL(S)}};return O.jsxs("div",{className:"px-4 py-6",children:[O.jsxs("div",{className:"mb-8",children:[O.jsx("h1",{className:"text-4xl font-black mb-2 tracking-tighter",children:"Forge Gallery"}),O.jsx("div",{className:"flex items-center justify-between mb-6",children:O.jsx("p",{className:"text-slate-400 text-sm font-medium italic",children:"for the great meme reset ..."})}),O.jsxs("div",{className:"flex gap-3",children:[O.jsxs("div",{className:"relative flex-1 group",children:[O.jsx(Qp,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-blue-500 transition-colors"}),O.jsx("input",{type:"text",placeholder:"Search templates...",value:e,onChange:v=>i(v.target.value),className:"w-full pl-12 pr-4 py-4 glass rounded-2xl outline-none border-white/5 focus:border-blue-500/50 transition-all font-medium text-white"})]}),O.jsxs("label",{className:`flex items-center justify-center p-4 glass rounded-2xl cursor-pointer hover:bg-white/10 transition-all active:scale-95 border-blue-500/30 border-dashed border-2 ${o?"animate-pulse opacity-50":""}`,children:[o?O.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent animate-spin rounded-full"}):O.jsx(GM,{className:"w-6 h-6 text-blue-400"}),O.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:p,disabled:o})]})]})]}),O.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e===""&&f.length>0&&O.jsxs("div",{onClick:()=>t(f[0]),className:"col-span-2 aspect-[2/1] glass rounded-3xl overflow-hidden relative group cursor-pointer border-blue-500/20",children:[O.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/40 to-purple-600/40 z-10"}),O.jsxs("div",{className:"absolute inset-0 z-20 p-6 flex flex-col justify-end",children:[O.jsxs("div",{className:"flex items-center gap-2 text-blue-300 font-bold text-xs uppercase tracking-widest mb-1",children:[O.jsx(qM,{className:"w-4 h-4",fill:"currentColor"})," Staff Pick"]}),O.jsx("h3",{className:"text-2xl font-black leading-tight",children:f[0].name})]}),O.jsx("img",{src:f[0].url,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",alt:"Featured",onError:()=>h(f[0].id)})]}),f.map((v,S)=>e===""&&S===0?null:O.jsxs("div",{onClick:()=>t(v),className:"group relative aspect-square glass rounded-2xl overflow-hidden cursor-pointer active:scale-95 transition-all duration-300 shadow-xl border-white/5 hover:border-white/20",children:[O.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"}),O.jsx("img",{src:v.url,alt:v.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105",loading:"lazy",onError:()=>h(v.id)}),O.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:O.jsx("span",{className:"text-[10px] font-black uppercase tracking-tight leading-tight",children:v.name})})]},v.id)),f.length===0&&O.jsxs("div",{className:"col-span-full py-20 text-center",children:[O.jsx(dM,{className:"w-12 h-12 text-slate-800 mx-auto mb-4"}),O.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest",children:"No matching memes found"}),O.jsx("p",{className:"text-slate-600 text-xs mt-2",children:"Try searching for something else or upload your own."})]})]})]})};function P(n,t,e){return(t=(function(i){var o=(function(a,l){if(typeof a!="object"||!a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var h=c.call(a,l);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(a)})(i,"string");return typeof o=="symbol"?o:o+""})(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class t_{constructor(){P(this,"browserShadowBlurConstant",1),P(this,"DPI",96),P(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),P(this,"perfLimitSizeTotal",2097152),P(this,"maxCacheSideLimit",4096),P(this,"minCacheSideLimit",256),P(this,"disableStyleCopyPaste",!1),P(this,"enableGLFiltering",!0),P(this,"textureSize",4096),P(this,"forceGLPutImageData",!1),P(this,"cachesBoundsOfCurve",!1),P(this,"fontPaths",{}),P(this,"NUM_FRACTION_DIGITS",4)}}const Nt=new class extends t_{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths={...this.fontPaths,...n}}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const t=new t_,e=(n==null?void 0:n.reduce((i,o)=>(i[o]=t[o],i),{}))||t;this.configure(e)}},fs=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return console[n]("fabric",...e)};class Qn extends Error{constructor(t,e){super(`fabric: ${t}`,e)}}class aO extends Qn{constructor(t){super(`${t} 'options.signal' is in 'aborted' state`)}}class lO{}class uO extends lO{testPrecision(t,e){const i=`precision ${e} float;
void main(){}`,o=t.createShader(t.FRAGMENT_SHADER);return!!o&&(t.shaderSource(o,i),t.compileShader(o),!!t.getShaderParameter(o,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(i=>this.testPrecision(e,i)),e.getExtension("WEBGL_lose_context").loseContext(),fs("log",`WebGL: max texture size ${this.maxTextureSize}`))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const cO={};let e_;const ii=()=>e_||(e_={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new uO,dispose(){},copyPasteData:cO}),mr=()=>ii().document,Gc=()=>ii().window,Gx=()=>{var n;return Math.max((n=Nt.devicePixelRatio)!==null&&n!==void 0?n:Gc().devicePixelRatio,1)},Da=new class{constructor(){P(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(n){let{fontFamily:t,fontStyle:e,fontWeight:i}=n;t=t.toLowerCase();const o=this.charWidthsCache;o.has(t)||o.set(t,new Map);const a=o.get(t),l=`${e.toLowerCase()}_${(i+"").toLowerCase()}`;return a.has(l)||a.set(l,new Map),a.get(l)}clearFontCache(n){n?this.charWidthsCache.delete((n||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(n){const{perfLimitSizeTotal:t}=Nt,e=Math.sqrt(t*n);return[Math.floor(e),Math.floor(t/e)]}},mp="7.1.0";function ec(){}const Wa=Math.PI/2,hO=Math.PI/4,lr=2*Math.PI,ug=Math.PI/180,Ue=Object.freeze([1,0,0,1,0,0]),cg=16,us=.4477152502,xt="center",Lt="left",We="top",yp="bottom",ie="right",Je="none",hg=/\r?\n/,Hx="moving",Hc="scaling",zx="rotating",fg="rotate",qx="skewing",Ua="resizing",fO="modifyPoly",dO="modifyPath",mc="changed",zc="scale",Ke="scaleX",Rn="scaleY",yr="skewX",vr="skewY",me="fill",un="stroke",yc="modified",zs="ltr",xi="rtl",vp="normal",qo="json",Dd="svg",lt=new class{constructor(){this[qo]=new Map,this[Dd]=new Map}has(n){return this[qo].has(n)}getClass(n){const t=this[qo].get(n);if(!t)throw new Qn(`No class registered for ${n}`);return t}setClass(n,t){t?this[qo].set(t,n):(this[qo].set(n.type,n),this[qo].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Dd].get(n)}setSVGClass(n,t){this[Dd].set(t??n.type.toLowerCase(),n)}},vc=new class extends Array{remove(n){const t=this.indexOf(n);t>-1&&this.splice(t,1)}cancelAll(){const n=this.splice(0);return n.forEach(t=>t.abort()),n}cancelByCanvas(n){if(!n)return[];const t=this.filter(e=>{var i;return e.target===n||typeof e.target=="object"&&((i=e.target)===null||i===void 0?void 0:i.canvas)===n});return t.forEach(e=>e.abort()),t}cancelByTarget(n){if(!n)return[];const t=this.filter(e=>e.target===n);return t.forEach(e=>e.abort()),t}};class pO{constructor(){P(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(i=>{let[o,a]=i;this.on(o,a)}),()=>this.off(t);if(e){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(e),()=>this.off(i,e)}return()=>!1}once(t,e){if(typeof t=="object"){const i=[];return Object.entries(t).forEach(o=>{let[a,l]=o;i.push(this.once(a,l))}),()=>i.forEach(o=>o())}if(e){const i=this.on(t,function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];e.call(this,...a),i()});return i}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const i=this.__eventListeners[t],o=i.indexOf(e);o>-1&&i.splice(o,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach(i=>{let[o,a]=i;this._removeEventListener(o,a)}):this._removeEventListener(t,e)}fire(t,e){var i;if(!this.__eventListeners)return;const o=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(o)for(let a=0;a<o.length;a++)o[a].call(this,e||{})}}const Xo=(n,t)=>{const e=n.indexOf(t);return e!==-1&&n.splice(e,1),n},Di=n=>{if(n===0)return 1;switch(Math.abs(n)/Wa){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Ri=n=>{if(n===0)return 0;const t=n/Wa,e=Math.sign(n);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(n)};class q{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new q(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new q(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new q(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new q(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new q(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new q(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new q(this.x/t.x,this.y/t.y)}scalarDivide(t){return new q(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new q(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new q(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new q(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return`${this.x},${this.y}`}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}clone(){return new q(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dg;const i=Ri(t),o=Di(t),a=this.subtract(e);return new q(a.x*o-a.y*i,a.x*i+a.y*o).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new q(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const dg=new q(0,0),nc=n=>!!n&&Array.isArray(n._objects);function Yx(n){class t extends n{constructor(){super(...arguments),P(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];const l=this._objects.push(...o);return o.forEach(c=>this._onObjectAdded(c)),l}insertAt(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return this._objects.splice(i,0,...a),a.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const i=this._objects,o=[];for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return l.forEach(h=>{const f=i.indexOf(h);f!==-1&&(i.splice(f,1),o.push(h),this._onObjectRemoved(h))}),o}forEachObject(i){this.getObjects().forEach((o,a,l)=>i(o,a,l))}getObjects(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...o))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,o){return!!this._objects.includes(i)||!!o&&this._objects.some(a=>a instanceof t&&a.contains(i,!0))}complexity(){return this._objects.reduce((i,o)=>i+=o.complexity?o.complexity():0,0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(Xo(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(Xo(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,o){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==0){const l=this.findNewLowerIndex(i,a,o);return Xo(this._objects,i),this._objects.splice(l,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,o){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==this._objects.length-1){const l=this.findNewUpperIndex(i,a,o);return Xo(this._objects,i),this._objects.splice(l,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,o){return i!==this._objects[o]&&(Xo(this._objects,i),this._objects.splice(o,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,o,a){let l;if(a){l=o;for(let c=o-1;c>=0;--c)if(i.isOverlapping(this._objects[c])){l=c;break}}else l=o-1;return l}findNewUpperIndex(i,o,a){let l;if(a){l=o;for(let c=o+1;c<this._objects.length;++c)if(i.isOverlapping(this._objects[c])){l=c;break}}else l=o+1;return l}collectObjects(i){let{left:o,top:a,width:l,height:c}=i,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],p=new q(o,a),v=p.add(new q(l,c));for(let S=this._objects.length-1;S>=0;S--){const _=this._objects[S];_.selectable&&_.visible&&(h&&_.intersectsWithRect(p,v)||_.isContainedWithinRect(p,v)||h&&_.containsPoint(p)||h&&_.containsPoint(v))&&f.push(_)}return f}}return t}class Xx extends pO{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function ic(n){return Gc().requestAnimationFrame(n)}function gO(n){return Gc().cancelAnimationFrame(n)}let mO=0;const ds=()=>mO++,Ni=()=>{const n=mr().createElement("canvas");if(!n||n.getContext===void 0)throw new Qn("Failed to create `canvas` element");return n},yO=()=>mr().createElement("img"),Nn=n=>{const t=Ni();return t.width=n.width,t.height=n.height,t},$x=(n,t,e)=>n.toDataURL(`image/${t}`,e),Wx=(n,t,e)=>new Promise((i,o)=>{n.toBlob(i,`image/${t}`,e)}),se=n=>n*ug,ps=n=>n/ug,vO=n=>n.every((t,e)=>t===Ue[e]),Xe=(n,t,e)=>new q(n).transform(t,e),Gn=n=>{const t=1/(n[0]*n[3]-n[1]*n[2]),e=[t*n[3],-t*n[1],-t*n[2],t*n[0],0,0],{x:i,y:o}=new q(n[4],n[5]).transform(e,!0);return e[4]=-i,e[5]=-o,e},be=(n,t,e)=>[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],e?0:n[0]*t[4]+n[2]*t[5]+n[4],e?0:n[1]*t[4]+n[3]*t[5]+n[5]],pg=(n,t)=>n.reduceRight((e,i)=>i&&e?be(i,e,t):i||e,void 0)||Ue.concat(),Jx=n=>{let[t,e]=n;return Math.atan2(e,t)},Sc=n=>{const t=Jx(n),e=Math.pow(n[0],2)+Math.pow(n[1],2),i=Math.sqrt(e),o=(n[0]*n[3]-n[2]*n[1])/i,a=Math.atan2(n[0]*n[2]+n[1]*n[3],e);return{angle:ps(t),scaleX:i,scaleY:o,skewX:ps(a),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Ja=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Sr(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=se(n),o=Di(i),a=Ri(i);return[o,a,-a,o,t?t-(o*t-a*e):0,e?e-(a*t+o*e):0]}const gg=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},Kx=n=>Math.tan(se(n)),jx=n=>[1,0,Kx(n),1,0,0],Qx=n=>[1,Kx(n),0,1,0,0],qc=n=>{let{scaleX:t=1,scaleY:e=1,flipX:i=!1,flipY:o=!1,skewX:a=0,skewY:l=0}=n,c=gg(i?-t:t,o?-e:e);return a&&(c=be(c,jx(a),!0)),l&&(c=be(c,Qx(l),!0)),c},SO=n=>{const{translateX:t=0,translateY:e=0,angle:i=0}=n;let o=Ja(t,e);i&&(o=be(o,Sr({angle:i})));const a=qc(n);return vO(a)||(o=be(o,a)),o},sc=function(n){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(i,o){if(t&&t.aborted)return o(new aO("loadImage"));const a=yO();let l;t&&(l=function(h){a.src="",o(h)},t.addEventListener("abort",l,{once:!0}));const c=function(){a.onload=a.onerror=null,l&&(t==null||t.removeEventListener("abort",l)),i(a)};n?(a.onload=c,a.onerror=function(){l&&(t==null||t.removeEventListener("abort",l)),o(new Qn(`Error loading ${a.src}`))},e&&(a.crossOrigin=e),a.src=n):c()})},Va=function(n){let{signal:t,reviver:e=ec}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((i,o)=>{const a=[];t&&t.addEventListener("abort",o,{once:!0}),Promise.all(n.map(l=>lt.getClass(l.type).fromObject(l,{signal:t}).then(c=>(e(l,c),a.push(c),c)))).then(i).catch(l=>{a.forEach(c=>{c.dispose&&c.dispose()}),o(l)}).finally(()=>{t&&t.removeEventListener("abort",o)})})},Yc=function(n){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,i)=>{const o=[];t&&t.addEventListener("abort",i,{once:!0});const a=Object.values(n).map(c=>c&&c.type&&lt.has(c.type)?Va([c],{signal:t}).then(h=>{let[f]=h;return o.push(f),f}):c),l=Object.keys(n);Promise.all(a).then(c=>c.reduce((h,f,p)=>(h[l[p]]=f,h),{})).then(e).catch(c=>{o.forEach(h=>{h.dispose&&h.dispose()}),i(c)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},Tr=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{})},mg=(n,t)=>Object.keys(n).reduce((e,i)=>(t(n[i],i,n)&&(e[i]=n[i]),e),{}),qt=(n,t)=>parseFloat(Number(n).toFixed(t)),Fa=n=>"matrix("+n.map(t=>qt(t,Nt.NUM_FRACTION_DIGITS)).join(" ")+")",xn=n=>!!n&&n.toLive!==void 0,n_=n=>!!n&&typeof n.toObject=="function",i_=n=>!!n&&n.offsetX!==void 0&&"source"in n,qs=n=>!!n&&"multiSelectionStacking"in n;function Zx(n){const t=n&&Bn(n);let e=0,i=0;if(!n||!t)return{left:e,top:i};let o=n;const a=t.documentElement,l=t.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===t?(e=l.scrollLeft||a.scrollLeft||0,i=l.scrollTop||a.scrollTop||0):(e+=o.scrollLeft||0,i+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:e,top:i}}const Bn=n=>n.ownerDocument||null,tE=n=>{var t;return((t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},eE=function(n,t,e){let{width:i,height:o}=e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=i,n.height=o,a>1&&(n.setAttribute("width",(i*a).toString()),n.setAttribute("height",(o*a).toString()),t.scale(a,a))},Sp=(n,t)=>{let{width:e,height:i}=t;e&&(n.style.width=typeof e=="number"?`${e}px`:e),i&&(n.style.height=typeof i=="number"?`${i}px`:i)};function s_(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Je,n}class nE{constructor(t){P(this,"_originalCanvasStyle",void 0),P(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(i=t)&&i.getContext!==void 0?t:t&&mr().getElementById(t)||Ni();var i;if(e.hasAttribute("data-fabric"))throw new Qn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:i}=t;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width",`${e}`),o.setAttribute("height",`${i}`),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:i,ctx:o}=this.lower;eE(i,o,t,e)}setCSSDimensions(t){Sp(this.lower.el,t)}calcOffset(){return(function(t){var e;const i=t&&Bn(t),o={left:0,top:0};if(!i)return o;const a=((e=tE(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};o.left+=parseInt(a.borderLeftWidth,10)||0,o.top+=parseInt(a.borderTopWidth,10)||0,o.left+=parseInt(a.paddingLeft,10)||0,o.top+=parseInt(a.paddingTop,10)||0;let l={left:0,top:0};const c=i.documentElement;t.getBoundingClientRect!==void 0&&(l=t.getBoundingClientRect());const h=Zx(t);return{left:l.left+h.left-(c.clientLeft||0)+o.left,top:l.top+h.top-(c.clientTop||0)+o.top}})(this.lower.el)}dispose(){ii().dispose(this.lower.el),delete this.lower}}const TO={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Ue],patternQuality:"best"};class Ka extends Yx(Xx){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return Ka.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new nE(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];const a=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(fs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Gx():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const o={width:this.width,height:this.height,...t};this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const i=t,o=[...this.viewportTransform],a=Xe(t,Gn(o));o[0]=e,o[3]=e;const l=Xe(a,o);o[4]+=i.x-l.x,o[5]+=i.y-l.y,this.setViewportTransform(o)}setZoom(t){this.zoomToPoint(new q(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new q(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ic(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,i=Gn(this.viewportTransform),o=Xe({x:0,y:0},i),a=Xe({x:t,y:e},i),l=o.min(a),c=o.max(a);return this.vptCoords={tl:l,tr:new q(c.x,l.y),bl:new q(l.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&(gO(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const i=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality=this.patternQuality,this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,o)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let i=0,o=e.length;i<o;++i)e[i]&&e[i].render(t)}_renderBackgroundOrOverlay(t,e){const i=this[`${e}Color`],o=this[`${e}Image`],a=this.viewportTransform,l=this[`${e}Vpt`];if(!i&&!o)return;const c=xn(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=c?i.toLive(t):i,l&&t.transform(...a),c){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const h=i.gradientTransform||i.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(o){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&t.transform(...a),o.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenterPoint(){return new q(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new q(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new q(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new q(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new q(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Xe(this.getCenterPoint(),Gn(this.viewportTransform))}_centerObject(t,e){t.setXY(e,xt,xt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const i=this.clipPath,o=i&&!i.excludeFromExport?this._toObject(i,t,e):null;return{version:mp,...Tr(this,e),objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,t,e)),...this.__serializeBgOverlay(t,e),...o?{clipPath:o}:null}}_toObject(t,e,i){let o;this.includeDefaultValues||(o=t.includeDefaultValues,t.includeDefaultValues=!1);const a=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=!!o),a}__serializeBgOverlay(t,e){const i={},o=this.backgroundImage,a=this.overlayImage,l=this.backgroundColor,c=this.overlayColor;return xn(l)?l.excludeFromExport||(i.background=l.toObject(e)):l&&(i.background=l),xn(c)?c.excludeFromExport||(i.overlay=c.toObject(e)):c&&(i.overlay=c),o&&!o.excludeFromExport&&(i.backgroundImage=this._toObject(o,t,e)),a&&!a.excludeFromExport&&(i.overlayImage=this._toObject(a,t,e)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push(`<g clip-path="url(#${this.clipPath.clipPathId})" >
`),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const i=e.width||`${this.width}`,o=e.height||`${this.height}`,a=Nt.NUM_FRACTION_DIGITS,l=e.viewBox;let c;if(l)c=`viewBox="${l.x} ${l.y} ${l.width} ${l.height}" `;else if(this.svgViewportTransformation){const h=this.viewportTransform;c=`viewBox="${qt(-h[4]/h[0],a)} ${qt(-h[5]/h[3],a)} ${qt(this.width/h[0],a)} ${qt(this.height/h[3],a)}" `}else c=`viewBox="0 0 ${this.width} ${this.height}" `;t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',o,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",mp,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId=`CLIPPATH_${ds()}`,`<clipPath id="${e.clipPathId}" >
${e.toClipPathSVG(t.reviver)}</clipPath>
`):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this[`${t}Color`];if(xn(e)){const i=this[`${t}Vpt`],o=this.viewportTransform,a={isType:()=>!1,width:this.width/(i?o[0]:1),height:this.height/(i?o[3]:1)};return e.toSVG(a,{additionalTransform:i?Fa(o):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},i=Nt.fontPaths;this._objects.forEach(function a(l){t.push(l),nc(l)&&l._objects.forEach(a)}),t.forEach(a=>{if(!(l=a)||typeof l._renderText!="function")return;var l;const{styles:c,fontFamily:h}=a;!e[h]&&i[h]&&(e[h]=!0,c&&Object.values(c).forEach(f=>{Object.values(f).forEach(p=>{let{fontFamily:v=""}=p;!e[v]&&i[v]&&(e[v]=!0)})}))});const o=Object.keys(e).map(a=>`		@font-face {
			font-family: '${a}';
			src: url('${i[a]}');
		}
`).join("");return o?`	<style type="text/css"><![CDATA[
${o}]]></style>
`:""}_setSVGObjects(t,e){this.forEachObject(i=>{i.excludeFromExport||this._setSVGObject(t,i,e)})}_setSVGObject(t,e,i){t.push(e.toSVG(i))}_setSVGBgOverlayImage(t,e,i){const o=this[e];o&&!o.excludeFromExport&&o.toSVG&&t.push(o.toSVG(i))}_setSVGBgOverlayColor(t,e){const i=this[`${e}Color`];if(i)if(xn(i)){const o=i.repeat||"",a=this.width,l=this.height,c=this[`${e}Vpt`]?Fa(Gn(this.viewportTransform)):"";t.push(`<rect transform="${c} translate(${a/2},${l/2})" x="${i.offsetX-a/2}" y="${i.offsetY-l/2}" width="${o!=="repeat-y"&&o!=="no-repeat"||!i_(i)?a:i.source.width}" height="${o!=="repeat-x"&&o!=="no-repeat"||!i_(i)?l:i.source.height}" fill="url(#SVGID_${i.id})"></rect>
`)}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Qn("`json` is undefined"));const{objects:o=[],...a}=typeof t=="string"?JSON.parse(t):t,{backgroundImage:l,background:c,overlayImage:h,overlay:f,clipPath:p}=a,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Va(o,{reviver:e,signal:i}),Yc({backgroundImage:l,backgroundColor:c,overlayImage:h,overlayColor:f,clipPath:p},{signal:i})]).then(S=>{let[_,x]=S;return this.clear(),this.add(..._),this.set(a),this.set(x),this.renderOnAddRemove=v,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Nn(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:o=1,enableRetinaScaling:a=!1}=t,l=o*(a?this.getRetinaScaling():1);return $x(this.toCanvasElement(l,t),e,i)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:o=1,enableRetinaScaling:a=!1}=t,l=o*(a?this.getRetinaScaling():1);return Wx(this.toCanvasElement(l,t),e,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:i,left:o,top:a,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(e||this.width)*t,h=(i||this.height)*t,f=this.getZoom(),p=this.width,v=this.height,S=this.skipControlsDrawing,_=f*t,x=this.viewportTransform,E=[_,0,0,_,(x[4]-(o||0))*t,(x[5]-(a||0))*t],b=this.enableRetinaScaling,w=Nn({width:c,height:h}),D=l?this._objects.filter(R=>l(R)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=E,this.width=c,this.height=h,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),D),this.viewportTransform=x,this.width=p,this.height=v,this.calcViewportBoundaries(),this.enableRetinaScaling=b,this.skipControlsDrawing=S,w}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),vc.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const i=()=>{this.destroy(),t(!0)};i.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return`#<Canvas (${this.complexity()}): { objects: ${this._objects.length} }>`}}P(Ka,"ownDefaults",TO);const _O=["touchstart","touchmove","touchend"],CO=n=>{const t=Zx(n.target),e=(function(i){const o=i.changedTouches;return o&&o[0]?o[0]:i})(n);return new q(e.clientX+t.left,e.clientY+t.top)},Tp=n=>_O.includes(n.type)||n.pointerType==="touch",o_=n=>{n.preventDefault(),n.stopPropagation()},wi=n=>{let t=0,e=0,i=0,o=0;for(let a=0,l=n.length;a<l;a++){const{x:c,y:h}=n[a];(c>i||!a)&&(i=c),(c<t||!a)&&(t=c),(h>o||!a)&&(o=h),(h<e||!a)&&(e=h)}return{left:t,top:e,width:i-t,height:o-e}},xO=(n,t)=>Tc(n,be(t,n.calcOwnMatrix())),Tc=(n,t)=>{const{translateX:e,translateY:i,scaleX:o,scaleY:a,...l}=Sc(t),c=new q(e,i);n.flipX=!1,n.flipY=!1,Object.assign(n,l),n.set({scaleX:o,scaleY:a}),n.setPositionByOrigin(c,xt,xt)},EO=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},iE=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),yg=(n,t,e)=>{const i=n/2,o=t/2,a=[new q(-i,-o),new q(i,-o),new q(-i,o),new q(i,o)].map(c=>c.transform(e)),l=wi(a);return new q(l.width,l.height)},Xc=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ue;return be(Gn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue),n)},ur=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ue;return n.transform(Xc(t,e))},bO=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ue;return n.transform(Xc(t,e),!0)},AO=(n,t,e)=>{const i=Xc(t,e);return Tc(n,be(i,n.calcOwnMatrix())),i},wO={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Pe=n=>typeof n=="string"?wO[n]:n-.5,MO=new q(1,0),sE=new q,oE=(n,t)=>n.rotate(t),_c=(n,t)=>new q(t).subtract(n),_p=n=>n.distanceFrom(sE),Cp=(n,t)=>Math.atan2(Ra(n,t),DO(n,t)),rE=n=>Cp(MO,n),vg=n=>n.eq(sE)?n:n.scalarDivide(_p(n)),aE=function(n){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return vg(new q(-n.y,n.x).scalarMultiply(t?1:-1))},Ra=(n,t)=>n.x*t.y-n.y*t.x,DO=(n,t)=>n.x*t.x+n.y*t.y,r_=(n,t,e)=>{if(n.eq(t)||n.eq(e))return!0;const i=Ra(t,e),o=Ra(t,n),a=Ra(e,n);return i>=0?o>=0&&a<=0:!(o<=0&&a>=0)},Cc="not-allowed";function lE(n){return Pe(n.originX)===Pe(xt)&&Pe(n.originY)===Pe(xt)}function a_(n){return .5-Pe(n)}const qn=(n,t)=>n[t],uE=(n,t,e,i)=>({e:n,transform:t,pointer:new q(e,i)});function cE(n,t,e){const i=e,o=ur(n.getCenterPoint(),n.canvas.viewportTransform,void 0),a=rE(_c(o,i))+lr;return Math.round(a%lr/hO)}function Sg(n,t,e,i,o){var a;let{target:l,corner:c}=n;const h=l.controls[c],f=((a=l.canvas)===null||a===void 0?void 0:a.getZoom())||1,p=l.padding/f,v=(function(S,_,x,E){const b=S.getRelativeCenterPoint(),w=x!==void 0&&E!==void 0?S.translateToGivenOrigin(b,xt,xt,x,E):new q(S.left,S.top);return(S.angle?_.rotate(-se(S.angle),b):_).subtract(w)})(l,new q(i,o),t,e);return v.x>=p&&(v.x-=p),v.x<=-p&&(v.x+=p),v.y>=p&&(v.y-=p),v.y<=p&&(v.y+=p),v.x-=h.offsetX,v.y-=h.offsetY,v}const xc=n=>n.replace(/\s+/g," "),l_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Rd=(n,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n),u_=(n,t,e,i)=>{n/=255,t/=255,e/=255;const o=Math.max(n,t,e),a=Math.min(n,t,e);let l,c;const h=(o+a)/2;if(o===a)l=c=0;else{const f=o-a;switch(c=h>.5?f/(2-o-a):f/(o+a),o){case n:l=(t-e)/f+(t<e?6:0);break;case t:l=(e-n)/f+2;break;case e:l=(n-t)/f+4}l/=6}return[Math.round(360*l),Math.round(100*c),Math.round(100*h),i]},c_=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Eu=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),h_=n=>{let[t,e,i,o=1]=n;const a=Math.round(.3*t+.59*e+.11*i);return[a,a,a,o]};class zt{constructor(t){if(P(this,"isUnrecognised",!1),t)if(t instanceof zt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,i,o,a=1]=t;this.setSource([e,i,o,a])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in l_&&(t=l_[t]),t==="transparent"?[255,255,255,0]:zt.sourceFromHex(t)||zt.sourceFromRgb(t)||zt.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,i]=this.getSource();return`rgb(${t},${e},${i})`}toRgba(){return`rgba(${this.getSource().join(",")})`}toHsl(){const[t,e,i]=u_(...this.getSource());return`hsl(${t},${e}%,${i}%)`}toHsla(){const[t,e,i,o]=u_(...this.getSource());return`hsla(${t},${e}%,${i}%,${o})`}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,i,o]=this.getSource();return`${Eu(t)}${Eu(e)}${Eu(i)}${Eu(Math.round(255*o))}`}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(h_(this.getSource())),this}toBlackWhite(t){const[e,,,i]=h_(this.getSource()),o=e<(t||127)?0:255;return this.setSource([o,o,o,i]),this}overlayWith(t){t instanceof zt||(t=new zt(t));const e=this.getSource(),i=t.getSource(),[o,a,l]=e.map((c,h)=>Math.round(.5*c+.5*i[h]));return this.setSource([o,a,l,e[3]]),this}static fromRgb(t){return zt.fromRgba(t)}static fromRgba(t){return new zt(zt.sourceFromRgb(t))}static sourceFromRgb(t){const e=xc(t).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(e){const[i,o,a]=e.slice(1,4).map(l=>{const c=parseFloat(l);return l.endsWith("%")?Math.round(2.55*c):c});return[i,o,a,c_(e[4])]}}static fromHsl(t){return zt.fromHsla(t)}static fromHsla(t){return new zt(zt.sourceFromHsl(t))}static sourceFromHsl(t){const e=xc(t).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!e)return;const i=(zt.parseAngletoDegrees(e[1])%360+360)%360/360,o=parseFloat(e[2])/100,a=parseFloat(e[3])/100;let l,c,h;if(o===0)l=c=h=a;else{const f=a<=.5?a*(o+1):a+o-a*o,p=2*a-f;l=Rd(p,f,i+1/3),c=Rd(p,f,i),h=Rd(p,f,i-1/3)}return[Math.round(255*l),Math.round(255*c),Math.round(255*h),c_(e[4])]}static fromHex(t){return new zt(zt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let i;i=e.length<=4?e.split("").map(h=>h+h):e.match(/.{2}/g);const[o,a,l,c=255]=i.map(h=>parseInt(h,16));return[o,a,l,c/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),i=parseFloat(e);return e.includes("rad")?ps(i):e.includes("turn")?360*i:i}}const or=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cg;const e=/\D{0,2}$/.exec(n),i=parseFloat(n),o=Nt.DPI;switch(e==null?void 0:e[0]){case"mm":return i*o/25.4;case"cm":return i*o/2.54;case"in":return i*o;case"pt":return i*o/72;case"pc":return i*o/72*12;case"em":return i*t;default:return i}},RO=n=>{const[t,e]=n.trim().split(" "),[i,o]=(a=t)&&a!==Je?[a.slice(1,4),a.slice(5,8)]:a===Je?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:e||"meet",alignX:i,alignY:o}},Ba=function(n,t){let e,i,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e=`url(#SVGID_${t.id})`;else{const a=new zt(t),l=a.getAlpha();e=a.toRgb(),l!==1&&(i=l.toString())}else e="none";return o?`${n}: ${e}; ${i?`${n}-opacity: ${i}; `:""}`:`${n}="${e}" ${i?`${n}-opacity="${i}" `:""}`};class hE{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):Je,a=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",p=this.visible?"":" visibility: hidden;",v=t?"":this.getSvgFilter(),S=Ba(me,this.fill);return[Ba(un,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",h,"; ",S,"fill-rule: ",e,"; ","opacity: ",f,";",v,p].join("")}getSvgFilter(){return this.shadow?`filter: url(#SVGID_${this.shadow.id});`:""}getSvgCommons(){return[this.id?`id="${this.id}" `:"",this.clipPath?`clip-path="url(#${this.clipPath.clipPathId})" `:""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix();return`${`transform="${Fa(i)}`}${e}" `}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=t.indexOf("COMMON_PARTS");return t[a]=o,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:i,withShadow:o,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=e?"":`style="${this.getSvgStyles()}" `,c=o?`style="${this.getSvgFilter()}" `:"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=h&&h.absolutePositioned,v=this.stroke,S=this.fill,_=this.shadow,x=[],E=t.indexOf("COMMON_PARTS");let b;h&&(h.clipPathId=`CLIPPATH_${ds()}`,b=`<clipPath id="${h.clipPathId}" >
${h.toClipPathSVG(i)}</clipPath>
`),p&&x.push("<g ",c,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),p?"":c+this.getSvgCommons(),` >
`);const w=[l,f,e?"":this.addPaintOrder()," ",a?`transform="${a}" `:""].join("");return t[E]=w,xn(S)&&x.push(S.toSVG(this)),xn(v)&&x.push(v.toSVG(this)),_&&x.push(_.toSVG(this)),h&&x.push(b),x.push(t.join("")),x.push(`</g>
`),p&&x.push(`</g>
`),i?i(x.join("")):x.join("")}addPaintOrder(){return this.paintFirst!==me?` paint-order="${this.paintFirst}" `:""}}function $c(n){return new RegExp("^("+n.join("|")+")\\b","i")}const eo="textDecorationThickness",fE=["fontSize","fontWeight","fontFamily","fontStyle"],dE=["underline","overline","linethrough"],pE=[...fE,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],gE=[...pE,...dE,"textBackgroundColor","direction",eo],NO=[...fE,...dE,un,"strokeWidth",me,"deltaY","textBackgroundColor",eo],IO={_reNewline:hg,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:vp,fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Lt,fontStyle:vp,lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Lt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:zs,CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[eo]:66.667},Zn="justify",Ec="justify-left",Na="justify-right",Ia="justify-center",no=String.raw`[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?`,PO=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+no+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+no+"))?\\s+(.*)"),kO={cx:Lt,x:Lt,r:"radius",cy:We,y:We,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":eo},Nd="font-size",Id="clip-path";$c(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);$c(["symbol","image","marker","pattern","view","svg"]);const f_=$c(["symbol","g","a","svg","clipPath","defs"]),d_="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",p_=new RegExp("(?:\\s|^)"+d_+d_+"("+no+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class ti{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof t=="string"?ti.parseShadow(t):t;Object.assign(this,ti.ownDefaults,e),this.id=ds()}static parseShadow(t){const e=t.trim(),[,i=0,o=0,a=0]=(p_.exec(e)||[]).map(l=>parseFloat(l)||0);return{color:(e.replace(p_,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:o,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=oE(new q(this.offsetX,this.offsetY),se(-t.angle)),i=new zt(this.color);let o=40,a=40;return t.width&&t.height&&(o=100*qt((Math.abs(e.x)+this.blur)/t.width,Nt.NUM_FRACTION_DIGITS)+20,a=100*qt((Math.abs(e.y)+this.blur)/t.height,Nt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),`<filter id="SVGID_${this.id}" y="-${a}%" height="${100+2*a}%" x="-${o}%" width="${100+2*o}%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="${qt(this.blur?this.blur/2:0,Nt.NUM_FRACTION_DIGITS)}"></feGaussianBlur>
	<feOffset dx="${qt(e.x,Nt.NUM_FRACTION_DIGITS)}" dy="${qt(e.y,Nt.NUM_FRACTION_DIGITS)}" result="oBlur" ></feOffset>
	<feFlood flood-color="${i.toRgb()}" flood-opacity="${i.getAlpha()}"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=ti.ownDefaults;return this.includeDefaultValues?t:mg(t,(i,o)=>i!==e[o])}static async fromObject(t){return new this(t)}}P(ti,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),P(ti,"type","shadow"),lt.setClass(ti,"shadow");const cr=(n,t,e)=>Math.max(n,Math.min(t,e)),OO=[We,Lt,Ke,Rn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",yr,vr],Li=[me,un,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],LO={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:xt,originY:xt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:me,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},UO=(n,t,e,i)=>-e*Math.cos(n/i*Wa)+e+t,VO=()=>!1;class Tg{constructor(t){let{startValue:e,byValue:i,duration:o=500,delay:a=0,easing:l=UO,onStart:c=ec,onChange:h=ec,onComplete:f=ec,abort:p=VO,target:v}=t;P(this,"_state","pending"),P(this,"durationProgress",0),P(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=a,this.easing=l,this._onStart=c,this._onChange=h,this._onComplete=f,this._abort=p,this.target=v,this.startValue=e,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ic(t),this.delay):ic(t)}tick(t){const e=(t||+new Date)-this.startTime,i=Math.min(e,this.duration);this.durationProgress=i/this.duration;const{value:o,valueProgress:a}=this.calculate(i);this.value=Object.freeze(o),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ic(this.tick)))}register(){vc.push(this)}unregister(){vc.remove(this)}abort(){this._state="aborted",this.unregister()}}class FO extends Tg{constructor(t){let{startValue:e=0,endValue:i=100,...o}=t;super({...o,startValue:e,byValue:i-e})}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}class BO extends Tg{constructor(t){let{startValue:e=[0],endValue:i=[100],...o}=t;super({...o,startValue:e,byValue:i.map((a,l)=>a-e[l])})}calculate(t){const e=this.startValue.map((i,o)=>this.easing(t,i,this.byValue[o],this.duration,o));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const GO=(n,t,e,i)=>t+e*(1-Math.cos(n/i*Wa)),Pd=n=>n&&((t,e,i)=>n(new zt(t).toRgba(),e,i));class HO extends Tg{constructor(t){let{startValue:e,endValue:i,easing:o=GO,onChange:a,onComplete:l,abort:c,...h}=t;const f=new zt(e).getSource(),p=new zt(i).getSource();super({...h,startValue:f,byValue:p.map((v,S)=>v-f[S]),easing:o,onChange:Pd(a),onComplete:Pd(l),abort:Pd(c)})}calculate(t){const[e,i,o,a]=this.startValue.map((c,h)=>this.easing(t,c,this.byValue[h],this.duration,h)),l=[...[e,i,o].map(Math.round),cr(0,a,1)];return{value:l,valueProgress:l.map((c,h)=>this.byValue[h]!==0?Math.abs((c-this.startValue[h])/this.byValue[h]):0).find(c=>c!==0)||0}}}function mE(n){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(n)?new BO(n):new FO(n);return t.start(),t}function zO(n){const t=new HO(n);return t.start(),t}class Kt{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.points=this.points.concat(e.filter(o=>!this.includes(o))),this}static isPointContained(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(i))return t.eq(e);if(e.x===i.x)return t.x===e.x&&(o||t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y));if(e.y===i.y)return t.y===e.y&&(o||t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x));{const a=_c(e,i),l=_c(e,t).divide(a);return o?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(t,e){const i=new q(t).setX(Math.min(t.x-1,...e.map(a=>a.x)));let o=0;for(let a=0;a<e.length;a++){const l=this.intersectSegmentSegment(e[a],e[(a+1)%e.length],t,i);if(l.includes(t))return!0;o+=+(l.status==="Intersection")}return o%2==1}static intersectLineLine(t,e,i,o){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const c=e.x-t.x,h=e.y-t.y,f=o.x-i.x,p=o.y-i.y,v=t.x-i.x,S=t.y-i.y,_=f*S-p*v,x=c*S-h*v,E=p*c-f*h;if(E!==0){const b=_/E,w=x/E;return(a||0<=b&&b<=1)&&(l||0<=w&&w<=1)?new Kt("Intersection").append(new q(t.x+b*c,t.y+b*h)):new Kt}if(_===0||x===0){const b=a||l||Kt.isPointContained(t,i,o)||Kt.isPointContained(e,i,o)||Kt.isPointContained(i,t,e)||Kt.isPointContained(o,t,e);return new Kt(b?"Coincident":void 0)}return new Kt("Parallel")}static intersectSegmentLine(t,e,i,o){return Kt.intersectLineLine(t,e,i,o,!1,!0)}static intersectSegmentSegment(t,e,i,o){return Kt.intersectLineLine(t,e,i,o,!1,!1)}static intersectLinePolygon(t,e,i){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Kt,l=i.length;for(let c,h,f,p=0;p<l;p++){if(c=i[p],h=i[(p+1)%l],f=Kt.intersectLineLine(t,e,c,h,o,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(t,e,i){return Kt.intersectLinePolygon(t,e,i,!1)}static intersectPolygonPolygon(t,e){const i=new Kt,o=t.length,a=[];for(let l=0;l<o;l++){const c=t[l],h=t[(l+1)%o],f=Kt.intersectSegmentPolygon(c,h,e);f.status==="Coincident"?(a.push(f),i.append(c,h)):i.append(...f.points)}return a.length>0&&a.length===t.length?new Kt("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,e,i){const o=e.min(i),a=e.max(i),l=new q(a.x,o.y),c=new q(o.x,a.y);return Kt.intersectPolygonPolygon(t,[o,l,a,c])}}class qO extends Xx{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Xe(t,this.group.calcTransformMatrix()):t}setXY(t,e,i){this.group&&(t=Xe(t,Gn(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,i)}getRelativeXY(){return new q(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:i,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),a=[t,e,i,o];if(this.group){const l=this.group.calcTransformMatrix();return a.map(c=>Xe(c,l))}return a}intersectsWithRect(t,e){return Kt.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Kt.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:i,top:o,width:a,height:l}=this.getBoundingRect();return i>=t.x&&i+a<=e.x&&o>=t.y&&o+l<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Kt.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(i=>i.x<=e.x&&i.x>=t.x&&i.y<=e.y&&i.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(i=>(i.x>=e.x||i.x<=t.x)&&(i.y>=e.y||i.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return wi(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Ke,t),this._set(Rn,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?ps(Jx(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||Ue.concat()}calcACoords(){const t=Sr({angle:this.angle}),{x:e,y:i}=this.getRelativeCenterPoint(),o=Ja(e,i),a=be(o,t),l=this._getTransformedDimensions(),c=l.x/2,h=l.y/2;return{tl:Xe({x:-c,y:-h},a),tr:Xe({x:c,y:-h},a),bl:Xe({x:-c,y:h},a),br:Xe({x:c,y:h},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Pe(this.originX),Pe(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const i=this.transformMatrixKey(t),o=this.matrixCache;return o&&o.key.every((a,l)=>a===i[l])?o.value:(this.group&&(e=be(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:i,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key.every((l,c)=>l===t[c]))return e.value;const i=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=SO(o);return this.ownMatrixCache={key:t,value:a},a}_getNonTransformedDimensions(){return new q(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth,...t},i=e.strokeWidth;let o=i,a=0;this.strokeUniform&&(o=0,a=i);const l=e.width+o,c=e.height+o;let h;return h=e.skewX===0&&e.skewY===0?new q(l*e.scaleX,c*e.scaleY):yg(l,c,qc(e)),h.scalarAdd(a)}translateToGivenOrigin(t,e,i,o,a){let l=t.x,c=t.y;const h=Pe(o)-Pe(e),f=Pe(a)-Pe(i);if(h||f){const p=this._getTransformedDimensions();l+=h*p.x,c+=f*p.y}return new q(l,c)}translateToCenterPoint(t,e,i){if(e===xt&&i===xt)return t;const o=this.translateToGivenOrigin(t,e,i,xt,xt);return this.angle?o.rotate(se(this.angle),t):o}translateToOriginPoint(t,e,i){const o=this.translateToGivenOrigin(t,xt,xt,e,i);return this.angle?o.rotate(se(this.angle),t):o}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Xe(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new q(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.getPositionByOrigin(t,e)}getPositionByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,i){const o=this.translateToCenterPoint(t,e,i),a=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.getPositionByOrigin(Lt,We)}positionByLeftTop(t){return this.setPositionByOrigin(t,Lt,We)}}let Ci=class oc extends qO{static getDefaults(){return oc.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){fs("warn","Setting type has no effect",t)}constructor(t){super(),P(this,"_cacheContext",null),Object.assign(this,oc.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Ni(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,i=t.height,o=Nt.maxCacheSideLimit,a=Nt.minCacheSideLimit;if(e<=o&&i<=o&&e*i<=Nt.perfLimitSizeTotal)return e<a&&(t.width=a),i<a&&(t.height=a),t;const l=e/i,[c,h]=Da.limitDimsByArea(l),f=cr(a,c,o),p=cr(a,h,o);return e>f&&(t.zoomX/=e/f,t.width=f,t.capped=!0),i>p&&(t.zoomY/=i/p,t.height=p,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),i=e.x*t.x/this.scaleX,o=e.y*t.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(o+2),zoomX:t.x,zoomY:t.y,x:i,y:o}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:i,height:o,zoomX:a,zoomY:l,x:c,y:h}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=i!==t.width||o!==t.height,p=this.zoomX!==a||this.zoomY!==l;if(!t||!e)return!1;if(f||p){i!==t.width||o!==t.height?(t.width=i,t.height=o):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const v=c/2,S=h/2;return this.cacheTranslationX=Math.round(t.width/2-v)+v,this.cacheTranslationY=Math.round(t.height/2-S)+S,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(a,l),this.zoomX=a,this.zoomY=l,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new q(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=Sc(this.calcTransformMatrix());return new q(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(e*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==Ke&&t!==Rn||(e=this._constrainScale(e)),t===Ke&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof ti||(e=new ti(e));const i=this[t]!==e;return this[t]=e,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:i,cacheTranslationX:o,cacheTranslationY:a}=this,{width:l,height:c}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:i,cacheTranslationX:o,cacheTranslationY:a,width:l,height:c,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return!!this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return!!this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===un&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,i){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.restore()}drawObject(t,e,i){const o=this.fill,a=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,i),this.fill=o,this.stroke=a}createClipPathLayer(t,e){const i=Nn(e),o=i.getContext("2d");if(o.translate(e.cacheTranslationX,e.cacheTranslationY),o.scale(e.zoomX,e.zoomY),t._cacheCanvas=i,e.parentClipPaths.forEach(a=>{a.transform(o)}),e.parentClipPaths.push(t),t.absolutePositioned){const a=Gn(this.calcTransformMatrix());o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return t.transform(o),t.drawObject(o,!0,e),i}_drawClipPath(t,e,i){if(!e)return;e._transformDone=!0;const o=this.createClipPathLayer(e,i);this.drawClipPathOnCache(t,e,o)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,i=this._cacheContext;return!(!e||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,xn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:i}=e;i&&(xn(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,i=this.canvas,o=this.getCanvasRetinaScaling(),[a,,,l]=(i==null?void 0:i.viewportTransform)||Ue,c=a*o,h=l*o,f=e.nonScaling?new q(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Nt.browserShadowBlurConstant*(c+h)*(f.x+f.y)/4,t.shadowOffsetX=e.offsetX*c*f.x,t.shadowOffsetY=e.offsetY*h*f.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!xn(e))return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,o=-this.width/2+e.offsetX||0,a=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,o,a):t.transform(1,0,0,1,o,a),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:o,offsetY:a}}_renderPaintInOrder(t){this.paintFirst===un?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var i;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),l=o.x/this.scaleX/a,c=o.y/this.scaleY/a,h=Nn({width:Math.ceil(l),height:Math.ceil(c)}),f=h.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(l,0),f.lineTo(l,c),f.lineTo(0,c),f.closePath(),f.translate(l/2,c/2),f.scale(o.zoomX/this.scaleX/a,o.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,e),f.fillStyle=e.toLive(t),f.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(a*this.scaleX/o.zoomX,a*this.scaleY/o.zoomY),t.strokeStyle=(i=f.createPattern(h,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new q(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(lt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=iE(this),i=this.group,o=this.shadow,a=Math.abs,l=t.enableRetinaScaling?Gx():1,c=(t.multiplier||1)*l,h=t.canvasProvider||(D=>new Ka(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&EO(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&AO(this,this.getViewportTransform()),this.setCoords();const f=Ni(),p=this.getBoundingRect(),v=this.shadow,S=new q;if(v){const D=v.blur,R=v.nonScaling?new q(1,1):this.getObjectScaling();S.x=2*Math.round(a(v.offsetX)+D)*a(R.x),S.y=2*Math.round(a(v.offsetY)+D)*a(R.y)}const _=p.width+S.x,x=p.height+S.y;f.width=Math.ceil(_),f.height=Math.ceil(x);const E=h(f);t.format==="jpeg"&&(E.backgroundColor="#fff"),this.setPositionByOrigin(new q(E.width/2,E.height/2),xt,xt);const b=this.canvas;E._objects=[this],this.set("canvas",E),this.setCoords();const w=E.toCanvasElement(c||1,t);return this.set("canvas",b),this.shadow=o,i&&(this.group=i),this.set(e),this.setCoords(),E._objects=[],E.destroy(),w}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $x(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wx(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:i,originY:o}=this;if(e){const{x:a,y:l}=this.getRelativeCenterPoint();this.originX=xt,this.originY=xt,this.left=a,this.top=l}if(this.set("angle",t),e){const{x:a,y:l}=this.getPositionByOrigin(i,o);this.left=a,this.top=l,this.originX=i,this.originY=o}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){vc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&ii().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((i,o)=>{let[a,l]=o;return i[a]=this._animate(a,l,e),i},{})}_animate(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=t.split("."),a=this.constructor.colorProperties.includes(o[o.length-1]),{abort:l,startValue:c,onChange:h,onComplete:f}=i,p={...i,target:this,startValue:c??o.reduce((v,S)=>v[S],this),endValue:e,abort:l==null?void 0:l.bind(this),onChange:(v,S,_)=>{o.reduce((x,E,b)=>(b===o.length-1&&(x[E]=v),x[E]),this),h&&h(v,S,_)},onComplete:(v,S,_)=>{this.setCoords(),f&&f(v,S,_)}};return a?zO(p):mE(p)}isDescendantOf(t){const{parent:e,group:i}=this;return e===t||i===t||!!e&&e.isDescendantOf(t)||!!i&&i!==e&&i.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),i=t.getAncestors();if(e.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let o,a=0;a<e.length;a++){if(o=e[a],o===t)return{fork:[this,...e.slice(0,a)],otherFork:[],common:e.slice(a)};for(let l=0;l<i.length;l++){if(this===i[l])return{fork:[],otherFork:[t,...i.slice(0,l)],common:[this,...e]};if(o===i[l])return{fork:[this,...e.slice(0,a)],otherFork:[t,...i.slice(0,l)],common:e.slice(a)}}}return{fork:[this,...e],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const i=e.common[0]||this.canvas;if(!i)return;const o=e.fork.pop(),a=e.otherFork.pop(),l=i._objects.indexOf(o),c=i._objects.indexOf(a);return l>-1&&l>c}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(oc.customProperties,this.constructor.customProperties||[]);let e;const i=Nt.NUM_FRACTION_DIGITS,{clipPath:o,fill:a,stroke:l,shadow:c,strokeDashArray:h,left:f,top:p,originX:v,originY:S,width:_,height:x,strokeWidth:E,strokeLineCap:b,strokeDashOffset:w,strokeLineJoin:D,strokeUniform:R,strokeMiterLimit:k,scaleX:L,scaleY:Y,angle:G,flipX:V,flipY:$,opacity:et,visible:st,backgroundColor:at,fillRule:it,paintFirst:ct,globalCompositeOperation:Et,skewX:H,skewY:Q}=this;o&&!o.excludeFromExport&&(e=o.toObject(t.concat("inverted","absolutePositioned")));const tt=St=>qt(St,i),gt={...Tr(this,t),type:this.constructor.type,version:mp,originX:v,originY:S,left:tt(f),top:tt(p),width:tt(_),height:tt(x),fill:n_(a)?a.toObject():a,stroke:n_(l)?l.toObject():l,strokeWidth:tt(E),strokeDashArray:h&&h.concat(),strokeLineCap:b,strokeDashOffset:w,strokeLineJoin:D,strokeUniform:R,strokeMiterLimit:tt(k),scaleX:tt(L),scaleY:tt(Y),angle:tt(G),flipX:V,flipY:$,opacity:tt(et),shadow:c&&c.toObject(),visible:st,backgroundColor:at,fillRule:it,paintFirst:ct,globalCompositeOperation:Et,skewX:tt(H),skewY:tt(Q),...e?{clipPath:e}:null};return this.includeDefaultValues?gt:this._removeDefaultValues(gt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return mg(t,(o,a)=>{if(a===Lt||a===We||a==="type")return!0;const l=i[a];return o!==l&&!(Array.isArray(o)&&Array.isArray(l)&&o.length===0&&l.length===0)})}toString(){return`#<${this.constructor.type}>`}static _fromObject(t){let{type:e,...i}=t,{extraParam:o,...a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yc(i,a).then(l=>o?(delete l[o],new this(i[o],l)):new this(l))}static fromObject(t,e){return this._fromObject(t,e)}};P(Ci,"stateProperties",OO),P(Ci,"cacheProperties",Li),P(Ci,"ownDefaults",LO),P(Ci,"type","FabricObject"),P(Ci,"colorProperties",[me,un,"backgroundColor"]),P(Ci,"customProperties",[]),lt.setClass(Ci),lt.setClass(Ci,"object");const yE=(n,t)=>{var e;const{transform:{target:i}}=t;(e=i.canvas)===null||e===void 0||e.fire(`object:${n}`,{...t,target:i}),i.fire(n,t)},_r=(n,t,e)=>(i,o,a,l)=>{const c=t(i,o,a,l);return c&&yE(n,{...uE(i,o,a,l),...e}),c};function Cr(n){return(t,e,i,o)=>{const{target:a,originX:l,originY:c}=e,h=a.getPositionByOrigin(l,c),f=n(t,e,i,o);return a.setPositionByOrigin(h,e.originX,e.originY),f}}const YO=(n,t,e,i)=>(o,a,l,c)=>{const h=Sg(a,a.originX,a.originY,l,c)[e],f=Pe(a[t]);if(f===0||f>0&&h<0||f<0&&h>0){const{target:p}=a,v=p.strokeWidth/(p.strokeUniform?p[i]:1),S=lE(a)?2:1,_=p[n],x=Math.abs(h*S/p[i])-v;return p.set(n,Math.max(x,1)),_!==p[n]}return!1},XO=YO("width","originX","x","scaleX"),g_=_r(Ua,Cr(XO));function $O(n,t,e,i,o){n.save();const{stroke:a,xSize:l,ySize:c,opName:h}=this.commonRenderProps(n,t,e,o,i);let f=l;l>c?n.scale(1,c/l):c>l&&(f=c,n.scale(l/c,1)),n.beginPath(),n.arc(0,0,f/2,0,lr,!1),n[h](),a&&n.stroke(),n.restore()}function WO(n,t,e,i,o){n.save();const{stroke:a,xSize:l,ySize:c,opName:h}=this.commonRenderProps(n,t,e,o,i),f=l/2,p=c/2;n[`${h}Rect`](-f,-p,l,c),a&&n.strokeRect(-f,-p,l,c),n.restore()}class Un{constructor(t){P(this,"visible",!0),P(this,"actionName",zc),P(this,"angle",0),P(this,"x",0),P(this,"y",0),P(this,"offsetX",0),P(this,"offsetY",0),P(this,"sizeX",0),P(this,"sizeY",0),P(this,"touchSizeX",0),P(this,"touchSizeY",0),P(this,"cursorStyle","crosshair"),P(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,i,o){var a;let{tl:l,tr:c,br:h,bl:f}=o;return((a=e.canvas)===null||a===void 0?void 0:a.getActiveObject())===e&&e.isControlVisible(t)&&Kt.isPointInPolygon(i,[l,c,h,f])}getActionHandler(t,e,i){return this.actionHandler}getMouseDownHandler(t,e,i){return this.mouseDownHandler}getMouseUpHandler(t,e,i){return this.mouseUpHandler}cursorStyleHandler(t,e,i,o){return e.cursorStyle}getActionName(t,e,i){return e.actionName}getVisibility(t,e){var i,o;return(i=(o=t._controlsVisibility)===null||o===void 0?void 0:o[e])!==null&&i!==void 0?i:this.visible}setVisibility(t,e,i){this.visible=t}positionHandler(t,e,i,o){return new q(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,i,o,a,l){const c=pg([Ja(i,o),Sr({angle:t}),gg((a?this.touchSizeX:this.sizeX)||e,(a?this.touchSizeY:this.sizeY)||e)]);return{tl:new q(-.5,-.5).transform(c),tr:new q(.5,-.5).transform(c),br:new q(.5,.5).transform(c),bl:new q(-.5,.5).transform(c)}}commonRenderProps(t,e,i,o){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const{cornerSize:l,cornerColor:c,transparentCorners:h,cornerStrokeColor:f}=a,p=l||o.cornerSize,v=this.sizeX||p,S=this.sizeY||p,_=h!==void 0?h:o.transparentCorners,x=_?un:me,E=f||o.cornerStrokeColor,b=!_&&!!E;return t.fillStyle=c||o.cornerColor||"",t.strokeStyle=E||"",t.translate(e,i),t.rotate(se(o.getTotalAngle())),{stroke:b,xSize:v,ySize:S,transparentCorners:_,opName:x}}render(t,e,i,o,a){((o=o||{}).cornerStyle||a.cornerStyle)==="circle"?$O.call(this,t,e,i,o,a):WO.call(this,t,e,i,o,a)}}const JO=(n,t,e)=>e.lockRotation?Cc:t.cursorStyle,KO=_r(zx,Cr((n,t,e,i)=>{let{target:o,ex:a,ey:l,theta:c,originX:h,originY:f}=t;const p=o.getPositionByOrigin(h,f);if(qn(o,"lockRotation"))return!1;const v=Math.atan2(l-p.y,a-p.x),S=Math.atan2(i-p.y,e-p.x);let _=ps(S-v+c);if(o.snapAngle&&o.snapAngle>0){const E=o.snapAngle,b=o.snapThreshold||E,w=Math.ceil(_/E)*E,D=Math.floor(_/E)*E;Math.abs(_-D)<b?_=D:Math.abs(_-w)<b&&(_=w)}_<0&&(_=360+_),_%=360;const x=o.angle!==_;return o.angle=_,x}));function vE(n,t){const e=t.canvas,i=n[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function SE(n,t,e){const i=qn(n,"lockScalingX"),o=qn(n,"lockScalingY");if(i&&o||!t&&(i||o)&&e||i&&t==="x"||o&&t==="y")return!0;const{width:a,height:l,strokeWidth:c}=n;return a===0&&c===0&&t!=="y"||l===0&&c===0&&t!=="x"}const jO=["e","se","s","sw","w","nw","n","ne","e"],Aa=(n,t,e,i)=>{const o=vE(n,e);if(SE(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",o))return Cc;const a=cE(e,0,i);return`${jO[a]}-resize`};function _g(n,t,e,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=t.target,l=o.by,c=vE(n,a);let h,f,p,v,S,_;if(SE(a,l,c))return!1;if(t.gestureScale)f=t.scaleX*t.gestureScale,p=t.scaleY*t.gestureScale;else{if(h=Sg(t,t.originX,t.originY,e,i),S=l!=="y"?Math.sign(h.x||t.signX||1):1,_=l!=="x"?Math.sign(h.y||t.signY||1):1,t.signX||(t.signX=S),t.signY||(t.signY=_),qn(a,"lockScalingFlip")&&(t.signX!==S||t.signY!==_))return!1;if(v=a._getTransformedDimensions(),c&&!l){const b=Math.abs(h.x)+Math.abs(h.y),{original:w}=t,D=b/(Math.abs(v.x*w.scaleX/a.scaleX)+Math.abs(v.y*w.scaleY/a.scaleY));f=w.scaleX*D,p=w.scaleY*D}else f=Math.abs(h.x*a.scaleX/v.x),p=Math.abs(h.y*a.scaleY/v.y);lE(t)&&(f*=2,p*=2),t.signX!==S&&l!=="y"&&(t.originX=a_(t.originX),f*=-1,t.signX=S),t.signY!==_&&l!=="x"&&(t.originY=a_(t.originY),p*=-1,t.signY=_)}const x=a.scaleX,E=a.scaleY;return l?(l==="x"&&a.set(Ke,f),l==="y"&&a.set(Rn,p)):(!qn(a,"lockScalingX")&&a.set(Ke,f),!qn(a,"lockScalingY")&&a.set(Rn,p)),x!==a.scaleX||E!==a.scaleY}const bu=_r(Hc,Cr((n,t,e,i)=>_g(n,t,e,i))),QO=_r(Hc,Cr((n,t,e,i)=>_g(n,t,e,i,{by:"x"}))),ZO=_r(Hc,Cr((n,t,e,i)=>_g(n,t,e,i,{by:"y"}))),kd={x:{counterAxis:"y",scale:Ke,skew:yr,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Rn,skew:vr,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},tL=["ns","nesw","ew","nwse"],eL=(n,t,e,i)=>{if(t.x!==0&&qn(e,"lockSkewingY")||t.y!==0&&qn(e,"lockSkewingX"))return Cc;const o=cE(e,0,i)%4;return`${tL[o]}-resize`};function TE(n,t,e,i,o){const{target:a}=e,{counterAxis:l,origin:c,lockSkewing:h,skew:f,flip:p}=kd[n];if(qn(a,h))return!1;const{origin:v,flip:S}=kd[l],_=Pe(e[v])*(a[S]?-1:1),x=-Math.sign(_)*(a[p]?-1:1),E=.5*-((a[f]===0&&Sg(e,xt,xt,i,o)[n]>0||a[f]>0?1:-1)*x)+.5;return _r(qx,Cr((w,D,R,k)=>(function(L,Y,G){let{target:V,ex:$,ey:et,skewingSide:st,...at}=Y;const{skew:it}=kd[L],ct=G.subtract(new q($,et)).divide(new q(V.scaleX,V.scaleY))[L],Et=V[it],H=at[it],Q=Math.tan(se(H)),tt=L==="y"?V._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:V._getTransformedDimensions({scaleX:1,scaleY:1}).y,gt=2*ct*st/Math.max(tt,1)+Q,St=ps(Math.atan(gt));V.set(it,St);const I=Et!==V[it];if(I&&L==="y"){const{skewX:K,scaleX:nt}=V,rt=V._getTransformedDimensions({skewY:Et}),mt=V._getTransformedDimensions(),yt=K!==0?rt.x/mt.x:1;yt!==1&&V.set(Ke,yt*nt)}return I})(n,D,new q(R,k))))(t,{...e,[c]:E,skewingSide:x},i,o)}const nL=(n,t,e,i)=>TE("x",n,t,e,i),iL=(n,t,e,i)=>TE("y",n,t,e,i);function Wc(n,t){return n[t.canvas.altActionKey]}const Au=(n,t,e)=>{const i=Wc(n,e);return t.x===0?i?yr:Rn:t.y===0?i?vr:Ke:""},Jo=(n,t,e,i)=>Wc(n,e)?eL(0,t,e,i):Aa(n,t,e,i),m_=(n,t,e,i)=>Wc(n,t.target)?iL(n,t,e,i):QO(n,t,e,i),y_=(n,t,e,i)=>Wc(n,t.target)?nL(n,t,e,i):ZO(n,t,e,i),_E=()=>({ml:new Un({x:-.5,y:0,cursorStyleHandler:Jo,actionHandler:m_,getActionName:Au}),mr:new Un({x:.5,y:0,cursorStyleHandler:Jo,actionHandler:m_,getActionName:Au}),mb:new Un({x:0,y:.5,cursorStyleHandler:Jo,actionHandler:y_,getActionName:Au}),mt:new Un({x:0,y:-.5,cursorStyleHandler:Jo,actionHandler:y_,getActionName:Au}),tl:new Un({x:-.5,y:-.5,cursorStyleHandler:Aa,actionHandler:bu}),tr:new Un({x:.5,y:-.5,cursorStyleHandler:Aa,actionHandler:bu}),bl:new Un({x:-.5,y:.5,cursorStyleHandler:Aa,actionHandler:bu}),br:new Un({x:.5,y:.5,cursorStyleHandler:Aa,actionHandler:bu}),mtr:new Un({x:0,y:-.5,actionHandler:KO,cursorStyleHandler:JO,offsetY:-40,withConnection:!0,actionName:fg})}),sL=()=>({mr:new Un({x:.5,y:0,actionHandler:g_,cursorStyleHandler:Jo,actionName:Ua}),ml:new Un({x:-.5,y:0,actionHandler:g_,cursorStyleHandler:Jo,actionName:Ua})}),oL=()=>({..._E(),...sL()});class Ga extends Ci{static getDefaults(){return{...super.getDefaults(),...Ga.ownDefaults}}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Ga.ownDefaults),this.setOptions(t)}static createControls(){return{controls:_E()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,i=e.target,o=e.action;if(this===i&&o&&o.startsWith(zc))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let o=i.length-1;o>=0;o--){const[a,l]=i[o],c=this.controls[a];if(c.shouldActivate(a,this,t,e?l.touchCorner:l.corner))return this.__corner=a,{key:a,control:c,coord:this.oCoords[a]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),i=Ja(e.x,e.y),o=Sr({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=be(i,o),l=be(t,a),c=be(l,[1/t[0],0,0,1/t[3],0,0]),h=this.group?Sc(this.calcTransformMatrix()):void 0;h&&(h.scaleX=Math.abs(h.scaleX),h.scaleY=Math.abs(h.scaleY));const f=this._calculateCurrentDimensions(h),p={};return this.forEachControl((v,S)=>{const _=v.positionHandler(f,c,this,v);p[S]=Object.assign(_,this._calcCornerCoords(v,_))}),p}_calcCornerCoords(t,e){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),o=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/o[0],1/o[3]),t.rotate(se(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o={hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray,...i};t.save(),t.strokeStyle=o.borderColor,this._setLineDash(t,o.borderDashArray),this.strokeBorders(t,e),o.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:o}=this,a={hasBorders:i,hasControls:o,...e},l=this.getViewportTransform(),c=a.hasBorders,h=a.hasControls,f=be(l,this.calcTransformMatrix()),p=Sc(f);t.save(),t.translate(p.translateX,p.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(p.angle-=180),t.rotate(se(this.group?p.angle:this.angle)),c&&this.drawBorders(t,p,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,i){let o;if(i&&i.forActiveSelection||this.group){const a=yg(this.width,this.height,qc(e)),l=this.isStrokeAccountedForInDimensions()?dg:(this.strokeUniform?new q().scalarAdd(this.canvas?this.canvas.getZoom():1):new q(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);o=a.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,o,i)}drawControlsConnectingLines(t,e){let i=!1;t.beginPath(),this.forEachControl((o,a)=>{o.withConnection&&o.getVisibility(this,a)&&(i=!0,t.moveTo(o.x*e.x,o.y*e.y),t.lineTo(o.x*e.x+o.offsetX,o.y*e.y+o.offsetY))}),i&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:a,cornerColor:l}=this,c={cornerStrokeColor:o,cornerDashArray:a,cornerColor:l,...e};t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=c.cornerColor,this.transparentCorners||(t.strokeStyle=c.cornerStrokeColor),this._setLineDash(t,c.cornerDashArray),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const p=this.oCoords[f];h.render(t,p.x,p.y,c,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[i,o]=e;return this.setControlVisible(i,o)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e);const o=this.width+4,a=this.height+4;return e.clearRect(-o/2,-a/2,o,a),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function CE(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),n}P(Ga,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Re extends Ga{}CE(Re,[hE]),lt.setClass(Re),lt.setClass(Re,"object");const rL=(n,t,e,i)=>{const o=2*(i=Math.round(i))+1,{data:a}=n.getImageData(t-i,e-i,o,o);for(let l=3;l<a.length;l+=4)if(a[l]>0)return!1;return!0};class xE{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new q(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new q(1/this.options.scaleX,1/this.options.scaleY):new q(1,1)}createSideVector(t,e){const i=_c(t,e);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,e,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new q(t);return e.y+=e.x*Math.tan(se(this.options.skewY)),e.x+=e.y*Math.tan(se(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const aL=new q;class rr extends xE{static getOrthogonalRotationFactor(t,e){const i=e?Cp(t,e):rE(t);return Math.abs(i)<Wa?-1:1}constructor(t,e,i,o){super(o),P(this,"AB",void 0),P(this,"AC",void 0),P(this,"alpha",void 0),P(this,"bisector",void 0),this.A=new q(t),this.B=new q(e),this.C=new q(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Cp(this.AB,this.AC),this.bisector=vg(oE(this.AB.eq(aL)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(t,e),a=aE(o),l=rr.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,i*l)}projectBevel(){const t=[];return(this.alpha%lr===0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),i=1/Math.sin(e/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),a=this.options.strokeUniform?_p(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return _p(o)/this.strokeProjectionMagnitude<=a&&t.push(this.applySkew(this.A.add(o))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const i=[],o=new q(rr.getOrthogonalRotationFactor(this.bisector),rr.getOrthogonalRotationFactor(new q(this.bisector.y,this.bisector.x)));return[new q(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new q(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(a=>{r_(a,t,e)&&i.push(this.A.add(a))}),i}projectRoundWithSkew(t,e){const i=[],{skewX:o,skewY:a,scaleX:l,scaleY:c,strokeUniform:h}=this.options,f=new q(Math.tan(se(o)),Math.tan(se(a))),p=this.strokeProjectionMagnitude,v=h?p/c/Math.sqrt(1/c**2+1/l**2*f.y**2):p/Math.sqrt(1+f.y**2),S=new q(Math.sqrt(Math.max(p**2-v**2,0)),v),_=h?p/Math.sqrt(1+f.x**2*(1/c)**2/(1/l+1/l*f.x*f.y)**2):p/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),x=new q(_,Math.sqrt(Math.max(p**2-_**2,0)));return[x,x.scalarMultiply(-1),S,S.scalarMultiply(-1)].map(E=>this.applySkew(h?E.multiply(this.strokeUniformScalar):E)).forEach(E=>{r_(E,t,e)&&i.push(this.applySkew(this.A).add(E))}),i}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%lr===0,i=this.applySkew(this.A),o=t[e?0:2].subtract(i),a=t[e?1:0].subtract(i),l=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=Ra(o,l)>0,h=c?o:a,f=c?a:o;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,f)):t.push(...this.projectRoundNoSkew(h,f)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class v_ extends xE{constructor(t,e,i){super(i),this.A=new q(t),this.T=new q(e)}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(t,e);return this.scaleUnitVector(aE(o),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new q(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new rr(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new q(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(vg(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(i);t.push(o.add(e),o.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const lL=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(n.length===0)return i;const o=n.reduce((a,l)=>(a[a.length-1].eq(l)||a.push(new q(l)),a),[new q(n[0])]);if(o.length===1)e=!0;else if(!e){const a=o[0],l=((c,h)=>{for(let f=c.length-1;f>=0;f--)if(h(c[f],f,c))return f;return-1})(o,c=>!c.eq(a));o.splice(l+1)}return o.forEach((a,l,c)=>{let h,f;l===0?(f=c[1],h=e?a:c[c.length-1]):l===c.length-1?(h=c[l-1],f=e?a:c[0]):(h=c[l-1],f=c[l+1]),e&&c.length===1?i.push(...new v_(a,a,t).project()):!e||l!==0&&l!==c.length-1?i.push(...new rr(a,h,f,t).project()):i.push(...new v_(a,l===0?f:h,t).project())}),i},Cg=n=>{const t={};return Object.keys(n).forEach(e=>{t[e]={},Object.keys(n[e]).forEach(i=>{t[e][i]={...n[e][i]}})}),t},uL=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Ca;const xg=n=>{if(Ca||Ca||(Ca="Intl"in Gc()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Ca){const t=Ca.segment(n);return Array.from(t).map(e=>{let{segment:i}=e;return i})}return cL(n)},cL=n=>{const t=[];for(let e,i=0;i<n.length;i++)(e=hL(n,i))!==!1&&t.push(e);return t},hL=(n,t)=>{const e=n.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return n.charAt(t);if(55296<=e&&e<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(t+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=n.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1},Eg=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==t.fill||n.stroke!==t.stroke||n.strokeWidth!==t.strokeWidth||n.fontSize!==t.fontSize||n.fontFamily!==t.fontFamily||n.fontWeight!==t.fontWeight||n.fontStyle!==t.fontStyle||n.textDecorationThickness!==t.textDecorationThickness||n.textBackgroundColor!==t.textBackgroundColor||n.deltaY!==t.deltaY||e&&(n.overline!==t.overline||n.underline!==t.underline||n.linethrough!==t.linethrough)},fL=(n,t)=>{const e=t.split(`
`),i=[];let o=-1,a={};n=Cg(n);for(let l=0;l<e.length;l++){const c=xg(e[l]);if(n[l])for(let h=0;h<c.length;h++){o++;const f=n[l][h];f&&Object.keys(f).length>0&&(Eg(a,f,!0)?i.push({start:o,end:o+1,style:f}):i[i.length-1].end++),a=f||{}}else o+=c.length,a={}}return i},dL=(n,t)=>{if(!Array.isArray(n))return Cg(n);const e=t.split(hg),i={};let o=-1,a=0;for(let l=0;l<e.length;l++){const c=xg(e[l]);for(let h=0;h<c.length;h++)o++,n[a]&&n[a].start<=o&&o<n[a].end&&(i[l]=i[l]||{},i[l][h]={...n[a].style},o===n[a].end-1&&a++)}return i},vs=["display","transform",me,"fill-opacity","fill-rule","opacity",un,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function S_(n,t){const e=n.nodeName,i=n.getAttribute("class"),o=n.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+e,"i"),t=t.replace(l,""),o&&t.length&&(l=new RegExp("#"+o+a,"i"),t=t.replace(l,"")),i&&t.length){const c=i.split(" ");for(let h=c.length;h--;)l=new RegExp("\\."+c[h]+a,"i"),t=t.replace(l,"")}return t.length===0}function pL(n,t){let e=!0;const i=S_(n,t.pop());return i&&t.length&&(e=(function(o,a){let l,c=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&a.length;)c&&(l=a.pop()),c=S_(o=o.parentElement,l);return a.length===0})(n,t)),i&&e&&t.length===0}function gL(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={};for(const i in t)pL(n,i.split(" "))&&(e={...e,...t[i]});return e}const mL=n=>{var t;return(t=kO[n])!==null&&t!==void 0?t:n},yL=new RegExp(`(${no})`,"gi"),ke=`(${no})`,vL=String.raw`(skewX)\(${ke}\)`,SL=String.raw`(skewY)\(${ke}\)`,TL=String.raw`(rotate)\(${ke}(?: ${ke} ${ke})?\)`,_L=String.raw`(scale)\(${ke}(?: ${ke})?\)`,CL=String.raw`(translate)\(${ke}(?: ${ke})?\)`,bg=`(?:${String.raw`(matrix)\(${ke} ${ke} ${ke} ${ke} ${ke} ${ke}\)`}|${CL}|${TL}|${_L}|${vL}|${SL})`,xL=`(?:${bg}*)`,EL=String.raw`^\s*(?:${xL}?)\s*$`,bL=new RegExp(EL),AL=new RegExp(bg),wL=new RegExp(bg,"g");function xp(n){const t=[];if(!(n=(e=>xc(e.replace(yL," $1 ").replace(/,/gi," ")))(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!bL.test(n))return[...Ue];for(const e of n.matchAll(wL)){const i=AL.exec(e[0]);if(!i)continue;let o=Ue;const a=i.filter(x=>!!x),[,l,...c]=a,[h,f,p,v,S,_]=c.map(x=>parseFloat(x));switch(l){case"translate":o=Ja(h,f);break;case fg:o=Sr({angle:h},{x:f,y:p});break;case zc:o=gg(h,f);break;case yr:o=jx(h);break;case vr:o=Qx(h);break;case"matrix":o=[h,f,p,v,S,_]}t.push(o)}return pg(t)}function ML(n,t,e,i){const o=Array.isArray(t);let a,l=t;if(n!==me&&n!==un||t!==Je){if(n==="strokeUniform")return t==="non-scaling-stroke";if(n==="strokeDashArray")l=t===Je?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")l=e&&e.transformMatrix?be(e.transformMatrix,xp(t)):xp(t);else if(n==="visible")l=t!==Je&&t!=="hidden",e&&e.visible===!1&&(l=!1);else if(n==="opacity")l=parseFloat(t),e&&e.opacity!==void 0&&(l*=e.opacity);else if(n==="textAnchor")l=t==="start"?Lt:t==="end"?ie:xt;else if(n==="charSpacing"||n===eo)a=or(t,i)/i*1e3;else if(n==="paintFirst"){const c=t.indexOf(me),h=t.indexOf(un);l=me,(c>-1&&h>-1&&h<c||c===-1&&h>-1)&&(l=un)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return t;if(n==="imageSmoothing")return t==="optimizeQuality";a=o?t.map(or):or(t,i)}}else l="";return!o&&isNaN(a)?l:a}function DL(n,t){n.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[i,o]=e.split(":");t[i.trim().toLowerCase()]=o.trim()})}function RL(n){const t={},e=n.getAttribute("style");return e&&(typeof e=="string"?DL(e,t):(function(i,o){Object.entries(i).forEach(a=>{let[l,c]=a;c!==void 0&&(o[l.toLowerCase()]=c)})})(e,t)),t}const NL={stroke:"strokeOpacity",fill:"fillOpacity"};function Ui(n,t,e){if(!n)return{};let i,o={},a=cg;n.parentNode&&f_.test(n.parentNode.nodeName)&&(o=Ui(n.parentElement,t,e),o.fontSize&&(i=a=or(o.fontSize)));const l={...t.reduce((f,p)=>{const v=n.getAttribute(p);return v&&(f[p]=v),f},{}),...gL(n,e),...RL(n)};l[Id]&&n.setAttribute(Id,l[Id]),l[Nd]&&(i=or(l[Nd],a),l[Nd]=`${i}`);const c={};for(const f in l){const p=mL(f),v=ML(p,l[f],o,i);c[p]=v}c&&c.font&&(function(f,p){const v=f.match(PO);if(!v)return;const S=v[1],_=v[3],x=v[4],E=v[5],b=v[6];S&&(p.fontStyle=S),_&&(p.fontWeight=isNaN(parseFloat(_))?_:parseFloat(_)),x&&(p.fontSize=or(x)),b&&(p.fontFamily=b),E&&(p.lineHeight=E===vp?1:E)})(c.font,c);const h={...o,...c};return f_.test(n.nodeName)?h:(function(f){const p=Re.getDefaults();return Object.entries(NL).forEach(v=>{let[S,_]=v;if(f[_]===void 0||f[S]==="")return;if(f[S]===void 0){if(!p[S])return;f[S]=p[S]}if(f[S].indexOf("url(")===0)return;const x=new zt(f[S]);f[S]=x.setAlpha(qt(x.getAlpha()*f[_],2)).toRgba()}),f})(h)}const EE=["rx","ry"];class jn extends Re{static getDefaults(){return{...super.getDefaults(),...jn.ownDefaults}}constructor(t){super(),Object.assign(this,jn.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,o=-e/2,a=-i/2,l=this.rx?Math.min(this.rx,e/2):0,c=this.ry?Math.min(this.ry,i/2):0,h=l!==0||c!==0;t.beginPath(),t.moveTo(o+l,a),t.lineTo(o+e-l,a),h&&t.bezierCurveTo(o+e-us*l,a,o+e,a+us*c,o+e,a+c),t.lineTo(o+e,a+i-c),h&&t.bezierCurveTo(o+e,a+i-us*c,o+e-us*l,a+i,o+e-l,a+i),t.lineTo(o+l,a+i),h&&t.bezierCurveTo(o+us*l,a+i,o,a+i-us*c,o,a+i-c),t.lineTo(o,a+c),h&&t.bezierCurveTo(o,a+us*c,o+us*l,a,o+l,a),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...EE,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:o}=this;return["<rect ","COMMON_PARTS",`x="${-t/2}" y="${-e/2}" rx="${i}" ry="${o}" width="${t}" height="${e}" />
`]}static async fromElement(t,e,i){const{left:o=0,top:a=0,width:l=0,height:c=0,visible:h=!0,...f}=Ui(t,this.ATTRIBUTE_NAMES,i);return new this({...e,...f,left:o,top:a,width:l,height:c,visible:!!(h&&l&&c)})}}P(jn,"type","Rect"),P(jn,"cacheProperties",[...Li,...EE]),P(jn,"ownDefaults",{rx:0,ry:0}),P(jn,"ATTRIBUTE_NAMES",[...vs,"x","y","rx","ry","width","height"]),lt.setClass(jn),lt.setSVGClass(jn);const Ai="initialization",bc="added",Ag="removed",Ac="imperative",bE=(n,t)=>{const{strokeUniform:e,strokeWidth:i,width:o,height:a,group:l}=t,c=l&&l!==n?Xc(l.calcTransformMatrix(),n.calcTransformMatrix()):null,h=c?t.getRelativeCenterPoint().transform(c):t.getRelativeCenterPoint(),f=!t.isStrokeAccountedForInDimensions(),p=e&&f?bO(new q(i,i),void 0,n.calcTransformMatrix()):dg,v=!e&&f?i:0,S=yg(o+v,a+v,pg([c,t.calcOwnMatrix()],!0)).add(p).scalarDivide(2);return[h.subtract(S),h.add(S)]};class Jc{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:i,strategy:o}=t;return e===Ai||e===Ac||!!i&&o!==i}shouldLayoutClipPath(t){let{type:e,target:{clipPath:i}}=t;return e!==Ai&&i&&!i.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:i,target:o}=e;if(i===Ac&&e.overrides)return e.overrides;if(t.length===0)return;const{left:a,top:l,width:c,height:h}=wi(t.map(v=>bE(o,v)).reduce((v,S)=>v.concat(S),[])),f=new q(c,h),p=new q(a,l).add(f.scalarDivide(2));if(i===Ai){const v=this.getInitialSize(e,{size:f,center:p});return{center:p,relativeCorrection:new q(0,0),size:v}}return{center:p.transform(o.calcOwnMatrix()),size:f}}}P(Jc,"type","strategy");class Ep extends Jc{shouldPerformLayout(t){return!0}}P(Ep,"type","fit-content"),lt.setClass(Ep);const AE="layoutManager";class Ha{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Ep;P(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e={bubbles:!0,strategy:this.strategy,...t,prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}};this.onBeforeLayout(e);const i=this.getLayoutResult(e);i&&this.commitLayout(e,i),this.onAfterLayout(e,i),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:i}=e;return[yc,Hx,Ua,zx,Hc,qx,mc,fO,dO].map(o=>t.on(o,a=>this.performLayout(o===yc?{type:"object_modified",trigger:o,e:a,target:i}:{type:"object_modifying",trigger:o,e:a,target:i})))}subscribe(t,e){this.unsubscribe(t,e);const i=this.attachHandlers(t,e);this._subscriptions.set(t,i)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(i=>i()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:i}=t,{canvas:o}=e;if(i===Ai||i===bc?this.subscribeTargets(t):i===Ag&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),o&&o.fire("object:layout:before",{target:e,context:t}),i===Ac&&t.deep){const{strategy:a,...l}=t;e.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout({...l,bubbles:!1,target:c}))}}getLayoutResult(t){const{target:e,strategy:i,type:o}=t,a=i.calcLayoutResult(t,e.getObjects());if(!a)return;const l=o===Ai?new q:e.getRelativeCenterPoint(),{center:c,correction:h=new q,relativeCorrection:f=new q}=a,p=l.subtract(c).add(h).transform(o===Ai?Ue:Gn(e.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:l,nextCenter:c,offset:p}}commitLayout(t,e){const{target:i}=t,{result:{size:o},nextCenter:a}=e;var l,c;i.set({width:o.x,height:o.y}),this.layoutObjects(t,e),t.type===Ai?i.set({left:(l=t.x)!==null&&l!==void 0?l:a.x+o.x*Pe(i.originX),top:(c=t.y)!==null&&c!==void 0?c:a.y+o.y*Pe(i.originY)}):(i.setPositionByOrigin(a,xt,xt),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,e){const{target:i}=t;i.forEachObject(o=>{o.group===i&&this.layoutObject(t,e,o)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,i.clipPath)}layoutObject(t,e,i){let{offset:o}=e;i.set({left:i.left+o.x,top:i.top+o.y})}onAfterLayout(t,e){const{target:i,strategy:o,bubbles:a,prevStrategy:l,...c}=t,{canvas:h}=i;i.fire("layout:after",{context:t,result:e}),h&&h.fire("object:layout:after",{context:t,result:e,target:i});const f=i.parent;a&&f!=null&&f.layoutManager&&((c.path||(c.path=[])).push(i),f.layoutManager.performLayout({...c,target:f})),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(i=>i())),t.clear()}toObject(){return{type:AE,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}lt.setClass(Ha,AE);class IL extends Ha{performLayout(){}}class Qs extends Yx(Re){static getDefaults(){return{...super.getDefaults(),...Qs.ownDefaults}}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),P(this,"_activeObjects",[]),P(this,"__objectSelectionTracker",void 0),P(this,"__objectSelectionDisposer",void 0),Object.assign(this,Qs.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(i=e.layoutManager)!==null&&i!==void 0?i:new Ha,this.layoutManager.performLayout({type:Ai,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(fs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(fs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,i,o)=>this.canEnterGroup(e)&&o.indexOf(e)===i)}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const o=this._filterObjectsBeforeEnteringGroup(e),a=super.add(...o);return this._onAfterObjectsChange(bc,o),a}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];const a=this._filterObjectsBeforeEnteringGroup(i),l=super.insertAt(t,...a);return this._onAfterObjectsChange(bc,a),l}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(Ag,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const i=this[t];return super._set(t,e),t==="canvas"&&i!==e&&(this._objects||[]).forEach(o=>{o._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:i}=e;const o=this._activeObjects;if(t)o.push(i),this._set("dirty",!0);else if(o.length>0){const a=o.indexOf(i);a>-1&&(o.splice(a,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&Tc(t,be(Gn(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(Tc(t,be(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=Re.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,i){this._renderBackground(t);for(let a=0;a<this._objects.length;a++){var o;const l=this._objects[a];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&l.group!==this?(t.save(),t.transform(...Gn(this.calcTransformMatrix())),l.render(t),t.restore()):l.group===this&&l.render(t)}this._drawClipPath(t,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout({target:this,type:Ac,...t})}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const i=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const a=o.includeDefaultValues;o.includeDefaultValues=i;const l=o[t||"toObject"](e);return o.includeDefaultValues=a,l})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return{...super.toObject(["subTargetCheck","interactive",...t]),...e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{},objects:this.__serializeObjects("toObject",t)}}toString(){return`#<Group: (${this.complexity()})>`}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=jn.prototype._toSVG.call(this),i=e.indexOf("COMMON_PARTS");e[i]='for="group" ';const o=e.join("");return t?t(o):o}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&e.push("		",i);for(let o=0;o<this._objects.length;o++)e.push("		",this._objects[o].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?`opacity: ${this.opacity};`:"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],i=this._createSVGBgRect(t);i&&e.push("	",i);for(let o=0;o<this._objects.length;o++)e.push("	",this._objects[o].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:i,objects:o=[],layoutManager:a,...l}=t;return Promise.all([Va(o,e),Yc(l,e)]).then(c=>{let[h,f]=c;const p=new this(h,{...l,...f,layoutManager:new IL});if(a){const v=lt.getClass(a.type),S=lt.getClass(a.strategy);p.layoutManager=new v(new S)}else p.layoutManager=new Ha;return p.layoutManager.subscribeTargets({type:Ai,target:p,targets:p.getObjects()}),p.setCoords(),p})}}P(Qs,"type","Group"),P(Qs,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),lt.setClass(Qs);const PL=(n,t)=>Math.min(t.width/n.width,t.height/n.height),kL=(n,t)=>Math.max(t.width/n.width,t.height/n.height),bp="\\s*,?\\s*",xa=`${bp}(${no})`,OL=`${xa}${xa}${xa}${bp}([01])${bp}([01])${xa}${xa}`,LL={m:"l",M:"L"},UL=(n,t,e,i,o,a,l,c,h,f,p)=>{const v=Di(n),S=Ri(n),_=Di(t),x=Ri(t),E=e*o*_-i*a*x+l,b=i*o*_+e*a*x+c;return["C",f+h*(-e*o*S-i*a*v),p+h*(-i*o*S+e*a*v),E+h*(e*o*x+i*a*_),b+h*(i*o*x-e*a*_),E,b]},T_=(n,t,e,i)=>{const o=Math.atan2(t,n),a=Math.atan2(i,e);return a>=o?a-o:2*Math.PI-(o-a)};function __(n,t,e,i,o,a,l,c){let h;if(Nt.cachesBoundsOfCurve&&(h=[...arguments].join(),Da.boundsOfCurveCache[h]))return Da.boundsOfCurveCache[h];const f=Math.sqrt,p=Math.abs,v=[],S=[[0,0],[0,0]];let _=6*n-12*e+6*o,x=-3*n+9*e-9*o+3*l,E=3*e-3*n;for(let k=0;k<2;++k){if(k>0&&(_=6*t-12*i+6*a,x=-3*t+9*i-9*a+3*c,E=3*i-3*t),p(x)<1e-12){if(p(_)<1e-12)continue;const $=-E/_;0<$&&$<1&&v.push($);continue}const L=_*_-4*E*x;if(L<0)continue;const Y=f(L),G=(-_+Y)/(2*x);0<G&&G<1&&v.push(G);const V=(-_-Y)/(2*x);0<V&&V<1&&v.push(V)}let b=v.length;const w=b,D=wE(n,t,e,i,o,a,l,c);for(;b--;){const{x:k,y:L}=D(v[b]);S[0][b]=k,S[1][b]=L}S[0][w]=n,S[1][w]=t,S[0][w+1]=l,S[1][w+1]=c;const R=[new q(Math.min(...S[0]),Math.min(...S[1])),new q(Math.max(...S[0]),Math.max(...S[1]))];return Nt.cachesBoundsOfCurve&&(Da.boundsOfCurveCache[h]=R),R}const VL=(n,t,e)=>{let[i,o,a,l,c,h,f,p]=e;const v=((S,_,x,E,b,w,D)=>{if(x===0||E===0)return[];let R=0,k=0,L=0;const Y=Math.PI,G=D*ug,V=Ri(G),$=Di(G),et=.5*(-$*S-V*_),st=.5*(-$*_+V*S),at=x**2,it=E**2,ct=st**2,Et=et**2,H=at*it-at*ct-it*Et;let Q=Math.abs(x),tt=Math.abs(E);if(H<0){const Ve=Math.sqrt(1-H/(at*it));Q*=Ve,tt*=Ve}else L=(b===w?-1:1)*Math.sqrt(H/(at*ct+it*Et));const gt=L*Q*st/tt,St=-L*tt*et/Q,I=$*gt-V*St+.5*S,K=V*gt+$*St+.5*_;let nt=T_(1,0,(et-gt)/Q,(st-St)/tt),rt=T_((et-gt)/Q,(st-St)/tt,(-et-gt)/Q,(-st-St)/tt);w===0&&rt>0?rt-=2*Y:w===1&&rt<0&&(rt+=2*Y);const mt=Math.ceil(Math.abs(rt/Y*2)),yt=[],wt=rt/mt,ve=8/3*Math.sin(wt/4)*Math.sin(wt/4)/Math.sin(wt/2);let Yt=nt+wt;for(let Ve=0;Ve<mt;Ve++)yt[Ve]=UL(nt,Yt,$,V,Q,tt,I,K,ve,R,k),R=yt[Ve][5],k=yt[Ve][6],nt=Yt,Yt+=wt;return yt})(f-n,p-t,o,a,c,h,l);for(let S=0,_=v.length;S<_;S++)v[S][1]+=n,v[S][2]+=t,v[S][3]+=n,v[S][4]+=t,v[S][5]+=n,v[S][6]+=t;return v},FL=n=>{let t=0,e=0,i=0,o=0;const a=[];let l,c=0,h=0;for(const f of n){const p=[...f];let v;switch(p[0]){case"l":p[1]+=t,p[2]+=e;case"L":t=p[1],e=p[2],v=["L",t,e];break;case"h":p[1]+=t;case"H":t=p[1],v=["L",t,e];break;case"v":p[1]+=e;case"V":e=p[1],v=["L",t,e];break;case"m":p[1]+=t,p[2]+=e;case"M":t=p[1],e=p[2],i=p[1],o=p[2],v=["M",t,e];break;case"c":p[1]+=t,p[2]+=e,p[3]+=t,p[4]+=e,p[5]+=t,p[6]+=e;case"C":c=p[3],h=p[4],t=p[5],e=p[6],v=["C",p[1],p[2],c,h,t,e];break;case"s":p[1]+=t,p[2]+=e,p[3]+=t,p[4]+=e;case"S":l==="C"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=p[3],e=p[4],v=["C",c,h,p[1],p[2],t,e],c=v[3],h=v[4];break;case"q":p[1]+=t,p[2]+=e,p[3]+=t,p[4]+=e;case"Q":c=p[1],h=p[2],t=p[3],e=p[4],v=["Q",c,h,t,e];break;case"t":p[1]+=t,p[2]+=e;case"T":l==="Q"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=p[1],e=p[2],v=["Q",c,h,t,e];break;case"a":p[6]+=t,p[7]+=e;case"A":VL(t,e,p).forEach(S=>a.push(S)),t=p[6],e=p[7];break;case"z":case"Z":t=i,e=o,v=["Z"]}v?(a.push(v),l=v[0]):l=""}return a},wc=(n,t,e,i)=>Math.sqrt((e-n)**2+(i-t)**2),wE=(n,t,e,i,o,a,l,c)=>h=>{const f=h**3,p=(_=>3*_**2*(1-_))(h),v=(_=>3*_*(1-_)**2)(h),S=(_=>(1-_)**3)(h);return new q(l*f+o*p+e*v+n*S,c*f+a*p+i*v+t*S)},ME=n=>n**2,DE=n=>2*n*(1-n),RE=n=>(1-n)**2,BL=(n,t,e,i,o,a,l,c)=>h=>{const f=ME(h),p=DE(h),v=RE(h),S=3*(v*(e-n)+p*(o-e)+f*(l-o)),_=3*(v*(i-t)+p*(a-i)+f*(c-a));return Math.atan2(_,S)},GL=(n,t,e,i,o,a)=>l=>{const c=ME(l),h=DE(l),f=RE(l);return new q(o*c+e*h+n*f,a*c+i*h+t*f)},HL=(n,t,e,i,o,a)=>l=>{const c=1-l,h=2*(c*(e-n)+l*(o-e)),f=2*(c*(i-t)+l*(a-i));return Math.atan2(f,h)},C_=(n,t,e)=>{let i=new q(t,e),o=0;for(let a=1;a<=100;a+=1){const l=n(a/100);o+=wc(i.x,i.y,l.x,l.y),i=l}return o},zL=(n,t)=>{let e,i=0,o=0,a={x:n.x,y:n.y},l={...a},c=.01,h=0;const f=n.iterator,p=n.angleFinder;for(;o<t&&c>1e-4;)l=f(i),h=i,e=wc(a.x,a.y,l.x,l.y),e+o>t?(i-=c,c/=2):(a=l,i+=c,o+=e);return{...l,angle:p(h)}},NE=n=>{let t,e,i=0,o=0,a=0,l=0,c=0;const h=[];for(const f of n){const p={x:o,y:a,command:f[0],length:0};switch(f[0]){case"M":e=p,e.x=l=o=f[1],e.y=c=a=f[2];break;case"L":e=p,e.length=wc(o,a,f[1],f[2]),o=f[1],a=f[2];break;case"C":t=wE(o,a,f[1],f[2],f[3],f[4],f[5],f[6]),e=p,e.iterator=t,e.angleFinder=BL(o,a,f[1],f[2],f[3],f[4],f[5],f[6]),e.length=C_(t,o,a),o=f[5],a=f[6];break;case"Q":t=GL(o,a,f[1],f[2],f[3],f[4]),e=p,e.iterator=t,e.angleFinder=HL(o,a,f[1],f[2],f[3],f[4]),e.length=C_(t,o,a),o=f[3],a=f[4];break;case"Z":e=p,e.destX=l,e.destY=c,e.length=wc(o,a,l,c),o=l,a=c}i+=e.length,h.push(e)}return h.push({length:i,x:o,y:a}),h},qL=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NE(n),i=0;for(;t-e[i].length>0&&i<e.length-2;)t-=e[i].length,i++;const o=e[i],a=t/o.length,l=n[i];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return{...new q(o.x,o.y).lerp(new q(o.destX,o.destY),a),angle:Math.atan2(o.destY-o.y,o.destX-o.x)};case"L":return{...new q(o.x,o.y).lerp(new q(l[1],l[2]),a),angle:Math.atan2(l[2]-o.y,l[1]-o.x)};case"C":case"Q":return zL(o,t)}},YL=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),x_=new RegExp(OL,"g"),XL=new RegExp(no,"gi"),$L={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},WL=n=>{var t;const e=[],i=(t=n.match(YL))!==null&&t!==void 0?t:[];for(const o of i){const a=o[0];if(a==="z"||a==="Z"){e.push([a]);continue}const l=$L[a.toLowerCase()];let c=[];if(a==="a"||a==="A"){x_.lastIndex=0;for(let h=null;h=x_.exec(o);)c.push(...h.slice(1))}else c=o.match(XL)||[];for(let h=0;h<c.length;h+=l){const f=new Array(l),p=LL[a];f[0]=h>0&&p?p:a;for(let v=0;v<l;v++)f[v+1]=parseFloat(c[h+v]);e.push(f)}}return e},JL=(n,t)=>n.map(e=>e.map((i,o)=>o===0||t===void 0?i:qt(i,t)).join(" ")).join(" ");function Ap(n,t){const e=n.style;e&&Object.entries(t).forEach(i=>{let[o,a]=i;return e.setProperty(o,a)})}class KL extends nE{constructor(t){let{allowTouchScrolling:e=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),P(this,"upper",void 0),P(this,"container",void 0);const{el:o}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:e}),this.applyCanvasStyle(a,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(i),o.parentNode&&o.parentNode.replaceChild(l,o),l.append(o,a),this.container=l}createUpperCanvas(){const{el:t}=this.lower,e=Ni();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=mr().createElement("div");return t.setAttribute("data-fabric","wrapper"),Ap(t,{position:"relative"}),s_(t),t}applyCanvasStyle(t,e){const{styles:i,allowTouchScrolling:o}=e;Ap(t,{...i,"touch-action":o?"manipulation":Je}),s_(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:i,ctx:o}=this.upper;eE(i,o,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Sp(this.upper.el,t),Sp(this.container,t)}cleanupDOM(t){const e=this.container,{el:i}=this.lower,{el:o}=this.upper;super.cleanupDOM(t),e.removeChild(o),e.removeChild(i),e.parentNode&&e.parentNode.replaceChild(i,e)}dispose(){super.dispose(),ii().dispose(this.upper.el),delete this.upper,delete this.container}}const jL=(n,t,e,i)=>{const{target:o,offsetX:a,offsetY:l}=t,c=e-a,h=i-l,f=!qn(o,"lockMovementX")&&o.left!==c,p=!qn(o,"lockMovementY")&&o.top!==h;return f&&o.set(Lt,c),p&&o.set(We,h),(f||p)&&yE(Hx,uE(n,t,e,i)),f||p};class Kc extends Ka{constructor(){super(...arguments),P(this,"_hoveredTargets",[]),P(this,"_currentTransform",null),P(this,"_groupSelector",null),P(this,"contextTopDirty",!1)}static getDefaults(){return{...super.getDefaults(),...Kc.ownDefaults}}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new KL(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),i=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,i){const o=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-e+o,-i+o),a.transform(...this.viewportTransform);const l=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(a),t.selectionBackgroundColor=l,a.restore();const c=Math.round(o*this.getRetinaScaling());return rL(a,c,c,c)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(i=>!!i&&t[i]===!0):t[e])}_shouldClearSelection(t,e){const i=this.getActiveObjects(),o=this._activeObject;return!!(!e||e&&o&&i.length>1&&i.indexOf(e)===-1&&o!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&o&&o!==e)}_shouldCenterTransform(t,e,i){if(!t)return;let o;return e===zc||e===Ke||e===Rn||e===Ua?o=this.centeredScaling||t.centeredScaling:e===fg&&(o=this.centeredRotation||t.centeredRotation),o?!i:i}_getOriginFromCorner(t,e){const i={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?i.x=ie:["mr","tr","br"].includes(e)&&(i.x=Lt),["tl","mt","tr"].includes(e)?i.y=yp:["bl","mb","br"].includes(e)&&(i.y=We)),i}_setupCurrentTransform(t,e,i){var o;const a=e.group?ur(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:l="",control:c}=e.getActiveControl()||{},h=i&&c?(o=c.getActionHandler(t,e,c))===null||o===void 0?void 0:o.bind(c):jL,f=((V,$,et,st)=>{if(!$||!V)return"drag";const at=st.controls[$];return at.getActionName(et,at,st)})(i,l,t,e),p=t[this.centeredKey],v=this._shouldCenterTransform(e,f,p)?{x:xt,y:xt}:this._getOriginFromCorner(e,l),{scaleX:S,scaleY:_,skewX:x,skewY:E,left:b,top:w,angle:D,width:R,height:k,cropX:L,cropY:Y}=e,G={target:e,action:f,actionHandler:h,actionPerformed:!1,corner:l,scaleX:S,scaleY:_,skewX:x,skewY:E,offsetX:a.x-b,offsetY:a.y-w,originX:v.x,originY:v.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:se(D),width:R,height:k,shiftKey:t.shiftKey,altKey:p,original:{...iE(e),originX:v.x,originY:v.y,cropX:L,cropY:Y}};this._currentTransform=G,this.fire("before:transform",{e:t,transform:G})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:i,deltaX:o,deltaY:a}=this._groupSelector,l=new q(e,i).transform(this.viewportTransform),c=new q(e+o,i+a).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,c.x),p=Math.min(l.y,c.y),v=Math.max(l.x,c.x),S=Math.max(l.y,c.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,p,v-f,S-p)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=h,p+=h,v-=h,S-=h,Re.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,p,v-f,S-p))}findTarget(t){if(this._targetInfo)return this._targetInfo;if(this.skipTargetFind)return{subTargets:[],currentSubTargets:[]};const e=this.getScenePoint(t),i=this._activeObject,o=this.getActiveObjects(),a=this.searchPossibleTargets(this._objects,e),{subTargets:l,container:c,target:h}=a,f={...a,currentSubTargets:l,currentContainer:c,currentTarget:h};if(!i)return f;const p={...this.searchPossibleTargets([i],e),currentSubTargets:l,currentContainer:c,currentTarget:h};return i.findControl(this.getViewportPoint(t),Tp(t))?{...p,target:i}:p.target&&(o.length>1||!this.preserveObjectStacking||this.preserveObjectStacking&&t[this.altSelectionKey])?p:f}_pointIsInObjectSelectionArea(t,e){let i=t.getCoords();const o=this.getZoom(),a=t.padding/o;if(a){const[l,c,h,f]=i,p=Math.atan2(c.y-l.y,c.x-l.x),v=Di(p)*a,S=Ri(p)*a,_=v+S,x=v-S;i=[new q(l.x-x,l.y-_),new q(c.x+_,c.y-x),new q(h.x+x,h.y+_),new q(f.x-_,f.y+x)]}return Kt.isPointInPolygon(e,i)}_checkTarget(t,e){if(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;{const i=e.transform(this.viewportTransform);if(!this.isTargetTransparent(t,i.x,i.y))return!0}}return!1}_searchPossibleTargets(t,e,i){let o=t.length;for(;o--;){const a=t[o];if(this._checkTarget(a,e)){if(nc(a)&&a.subTargetCheck){const{target:l}=this._searchPossibleTargets(a._objects,e,i);l&&i.push(l)}return{target:a,subTargets:i}}}return{subTargets:[]}}searchPossibleTargets(t,e){const i=this._searchPossibleTargets(t,e,[]);i.container=i.target;const{container:o,subTargets:a}=i;if(o&&nc(o)&&o.interactive&&a[0]){for(let l=a.length-1;l>0;l--){const c=a[l];if(!nc(c)||!c.interactive)return i.target=c,i}return i.target=a[0],i}return i}getViewportPoint(t){return this._viewportPoint?this._viewportPoint:this._getPointerImpl(t,!0)}getScenePoint(t){return this._scenePoint?this._scenePoint:this._getPointerImpl(t)}_getPointerImpl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,o=i.getBoundingClientRect();let a=CO(t),l=o.width||0,c=o.height||0;l&&c||(We in o&&yp in o&&(c=Math.abs(o.top-o.bottom)),ie in o&&Lt in o&&(l=Math.abs(o.right-o.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,e||(a=ur(a,void 0,this.viewportTransform));const h=this.getRetinaScaling();h!==1&&(a.x/=h,a.y/=h);const f=l===0||c===0?new q(1,1):new q(i.width/l,i.height/c);return a.multiply(f)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ni(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return qs(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let i=!1,o=!1;const a=this.getActiveObjects(),l=[],c=[];t.forEach(h=>{a.includes(h)||(i=!0,h.fire("deselected",{e,target:h}),c.push(h))}),a.forEach(h=>{t.includes(h)||(i=!0,h.fire("selected",{e,target:h}),l.push(h))}),t.length>0&&a.length>0?(o=!0,i&&this.fire("selection:updated",{e,selected:l,deselected:c})):a.length>0?(o=!0,this.fire("selection:created",{e,selected:l})):t.length>0&&(o=!0,this.fire("selection:cleared",{e,deselected:c})),o&&(this._objectsToRender=void 0)}setActiveObject(t,e){const i=this.getActiveObjects(),o=this._setActiveObject(t,e);return this._fireSelectionEvents(i,e),o}_setActiveObject(t,e){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,qs(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),qs(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),i=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const o=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),o}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,i=e.target,o={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),e.actionPerformed&&(this.fire("object:modified",o),i.fire(yc,o))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;qs(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,i){const o=this._realizeGroupTransformOnObject(t),a=super._toObject(t,e,i);return t.set(o),a}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&qs(e)&&this._activeObject===e){const i=Tr(t,["angle","flipX","flipY",Lt,Ke,Rn,yr,vr,We]);return xO(t,e.calcOwnMatrix()),i}return{}}_setSVGObject(t,e,i){const o=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,i),e.set(o)}}P(Kc,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!0,fireRightClick:!0,fireMiddleClick:!0,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!0});class QL{constructor(t){P(this,"targets",[]),P(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:o}=t.getActiveObject()||{};o&&o.focus()},i=t.upperCanvasEl;i.addEventListener("click",e),this.__disposer=()=>i.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),Xo(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const ln={passive:!1},Fs=(n,t)=>({viewportPoint:n.getViewportPoint(t),scenePoint:n.getScenePoint(t)}),cs=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.addEventListener(...e)},Tn=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.removeEventListener(...e)},ZL={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class wp extends Kc{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),P(this,"_isClick",void 0),P(this,"textEditingManager",new QL(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(cs)}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,o=this._getEventPrefix();t(tE(i),"resize",this._onResize),t(i,o+"down",this._onMouseDown),t(i,`${o}move`,this._onMouseMove,ln),t(i,`${o}out`,this._onMouseOut),t(i,`${o}enter`,this._onMouseEnter),t(i,"wheel",this._onMouseWheel,{passive:!1}),t(i,"contextmenu",this._onContextMenu),e||(t(i,"click",this._onClick),t(i,"dblclick",this._onClick)),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,ln)}removeListeners(){this.addOrRemove(Tn);const t=this._getEventPrefix(),e=Bn(this.upperCanvasEl);Tn(e,`${t}up`,this._onMouseUp),Tn(e,"touchend",this._onTouchEnd,ln),Tn(e,`${t}move`,this._onMouseMove,ln),Tn(e,"touchmove",this._onMouseMove,ln),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_onMouseOut(t){const e=this._hoveredTarget,i={e:t,...Fs(this,t)};this.fire("mouse:out",{...i,target:e}),this._hoveredTarget=void 0,e&&e.fire("mouseout",{...i}),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",{...i,target:o}),o&&o.fire("mouseout",{...i})}),this._hoveredTargets=[]}_onMouseEnter(t){const{target:e}=this.findTarget(t);this._currentTransform||e||(this.fire("mouse:over",{e:t,...Fs(this,t)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const i={e:t,target:e};return this.fire("dragstart",i),e.fire("dragstart",i),void cs(this.upperCanvasEl,"drag",this._onDragProgress)}o_(t)}_renderDragEffects(t,e,i){let o=!1;const a=this._dropTarget;a&&a!==e&&a!==i&&(a.clearContextTop(),o=!0),e==null||e.clearContextTop(),i!==e&&(i==null||i.clearContextTop());const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),e&&(l.save(),e.transform(l),e.renderDragSourceEffect(t),l.restore(),o=!0),i&&(l.save(),i.transform(l),i.renderDropTargetEffect(t),l.restore(),o=!0),l.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(t){const{currentSubTargets:e}=this.findTarget(t),i=!!t.dataTransfer&&t.dataTransfer.dropEffect!==Je,o=i?this._activeObject:void 0,a={e:t,target:this._dragSource,subTargets:e,dragSource:this._dragSource,didDrop:i,dropTarget:o};Tn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",a),this._dragSource&&this._dragSource.fire("dragend",a),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}_onDragOver(t){const e="dragover",{currentContainer:i,currentSubTargets:o}=this.findTarget(t),a=this._dragSource,l={e:t,target:i,subTargets:o,dragSource:a,canDrop:!1,dropTarget:void 0};let c;this.fire(e,l),this._fireEnterLeaveEvents(t,i,l),i&&(i.canDrop(t)&&(c=i),i.fire(e,l));for(let h=0;h<o.length;h++){const f=o[h];f.canDrop(t)&&(c=f),f.fire(e,l)}this._renderDragEffects(t,a,c),this._dropTarget=c}_onDragEnter(t){const{currentContainer:e,currentSubTargets:i}=this.findTarget(t),o={e:t,target:e,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,e,o)}_onDragLeave(t){const{currentSubTargets:e}=this.findTarget(t),i={e:t,target:this._draggedoverTarget,subTargets:e,dragSource:this._dragSource};this.fire("dragleave",i),this._fireEnterLeaveEvents(t,void 0,i),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this._hoveredTargets=[]}_onDrop(t){const{currentContainer:e,currentSubTargets:i}=this.findTarget(t),o=this._basicEventHandler("drop:before",{e:t,target:e,subTargets:i,dragSource:this._dragSource,...Fs(this,t)});o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(t){const{target:e,subTargets:i}=this.findTarget(t),o=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:i});return this.stopContextMenu&&o_(t),this._basicEventHandler("contextmenu",o),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}fireEventFromPointerEvent(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._cacheTransformEventData(t);const{target:a,subTargets:l}=this.findTarget(t),c={e:t,target:a,subTargets:l,...Fs(this,t),transform:this._currentTransform,...o};this.fire(e,c),a&&a.fire(i,c);for(let h=0;h<l.length;h++)l[h]!==a&&l[h].fire(i,c);this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){this._cacheTransformEventData(t);let e=!this.allowTouchScrolling;const i=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t);const{target:o}=this.findTarget(t);(this.isDrawingMode||i&&o===i)&&(e=!0),e&&t.preventDefault();const a=this.upperCanvasEl,l=this._getEventPrefix(),c=Bn(a);cs(c,"touchend",this._onTouchEnd,ln),e&&cs(c,"touchmove",this._onMouseMove,ln),Tn(a,`${l}down`,this._onMouseDown),this._resetTransformEventData()}_onMouseDown(t){this._cacheTransformEventData(t),this.__onMouseDown(t);const e=this.upperCanvasEl,i=this._getEventPrefix();Tn(e,`${i}move`,this._onMouseMove,ln);const o=Bn(e);cs(o,`${i}up`,this._onMouseUp),cs(o,`${i}move`,this._onMouseMove,ln),this._resetTransformEventData()}_onTouchEnd(t){if(t.touches.length>0)return;this._cacheTransformEventData(t),this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),i=Bn(this.upperCanvasEl);Tn(i,"touchend",this._onTouchEnd,ln),Tn(i,"touchmove",this._onMouseMove,ln),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{cs(this.upperCanvasEl,`${e}down`,this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this._cacheTransformEventData(t),this.__onMouseUp(t);const e=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const o=Bn(this.upperCanvasEl);Tn(o,`${i}up`,this._onMouseUp),Tn(o,`${i}move`,this._onMouseMove,ln),cs(e,`${i}move`,this._onMouseMove,ln)}this._resetTransformEventData()}_onMouseMove(t){this._cacheTransformEventData(t);const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t),this._resetTransformEventData()}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._handleEvent(t,"up:before");const i=this._currentTransform,o=this._isClick,{target:a}=this.findTarget(t),{button:l}=t;if(l)return void((this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(t,"up"));if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let c,h,f=!1;if(i&&(this._finalizeCurrentTransform(t),f=i.actionPerformed),!o){const p=a===this._activeObject;this.handleSelection(t),f||(f=this._shouldRender(a)||!p&&a===this._activeObject)}if(a){const p=a.findControl(this.getViewportPoint(t),Tp(t)),{key:v,control:S}=p||{};if(h=v,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,t),f=!0;else if(S){const _=S.getMouseUpHandler(t,a,S);_&&(c=this.getScenePoint(t),_.call(S,t,i,c.x,c.y))}a.isMoving=!1}if(i&&(i.target!==a||i.corner!==h)){const p=i.target&&i.target.controls[i.corner],v=p&&p.getMouseUpHandler(t,i.target,p);c=c||this.getScenePoint(t),v&&v.call(p,t,i,c.x,c.y)}this._setCursorFromEvent(t,a),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():o||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:i,subTargets:o=[]}=e;this.fire(t,e),i&&i.fire(t,e);for(let a=0;a<o.length;a++)o[a]!==i&&o[a].fire(t,e);return e}_handleEvent(t,e,i){const{target:o,subTargets:a}=this.findTarget(t),l={e:t,target:o,subTargets:a,...Fs(this,t),transform:this._currentTransform,...e==="down:before"||e==="down"?i:{}};e!=="up:before"&&e!=="up"||(l.isClick=this._isClick),this.fire(`mouse:${e}`,l),o&&o.fire(`mouse${e}`,l);for(let c=0;c<a.length;c++)a[c]!==o&&a[c].fire(`mouse${e}`,l)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._handleEvent(t,"down:before");let{target:e}=this.findTarget(t),i=!!e&&e===this._activeObject;const{button:o}=t;if(o)return void((this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"down",{alreadySelected:i}));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let a=this._shouldRender(e),l=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,l=!0,a=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const c=this.getScenePoint(t);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(i=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const c=e.findControl(this.getViewportPoint(t),Tp(t));if(e===this._activeObject&&(c||!l)){this._setupCurrentTransform(t,e,i);const h=c?c.control:void 0,f=this.getScenePoint(t),p=h&&h.getMouseDownHandler(t,e,h);p&&p.call(h,t,this._currentTransform,f.x,f.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:i}),a&&this.requestRenderAll()}_resetTransformEventData(){this._targetInfo=this._viewportPoint=this._scenePoint=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._viewportPoint=this.getViewportPoint(t),this._scenePoint=ur(this._viewportPoint,void 0,this.viewportTransform),this._targetInfo=this.findTarget(t),this._currentTransform&&(this._targetInfo.target=this._currentTransform.target)}__onMouseMove(t){if(this._isClick=!1,this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const i=this.getScenePoint(t);e.deltaX=i.x-e.x,e.deltaY=i.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const{target:i}=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move")}_fireOverOutEvents(t,e){const{_hoveredTarget:i,_hoveredTargets:o}=this,{subTargets:a}=this.findTarget(t),l=Math.max(o.length,a.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:i,fireCanvas:!0});for(let c=0;c<l;c++)a[c]===e||o[c]&&o[c]===i||this.fireSyntheticInOutEvents("mouse",{e:t,target:a[c],oldTarget:o[c]});this._hoveredTarget=e,this._hoveredTargets=a}_fireEnterLeaveEvents(t,e,i){const o=this._draggedoverTarget,a=this._hoveredTargets,{subTargets:l}=this.findTarget(t),c=Math.max(a.length,l.length);this.fireSyntheticInOutEvents("drag",{...i,target:e,oldTarget:o,fireCanvas:!0});for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("drag",{...i,target:l[h],oldTarget:a[h]});this._draggedoverTarget=e}fireSyntheticInOutEvents(t,e){let{target:i,oldTarget:o,fireCanvas:a,e:l,...c}=e;const{targetIn:h,targetOut:f,canvasIn:p,canvasOut:v}=ZL[t],S=o!==i;if(o&&S){const _={...c,e:l,target:o,nextTarget:i,...Fs(this,l)};a&&this.fire(v,_),o.fire(f,_)}if(i&&S){const _={...c,e:l,target:i,previousTarget:o,...Fs(this,l)};a&&this.fire(p,_),i.fire(h,_)}}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,o=i.target,a=o.group?ur(e,void 0,o.group.calcTransformMatrix()):e;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,a),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,i){const{action:o,actionHandler:a,target:l}=e,c=!!a&&a(t,e,i.x,i.y);c&&l.setCoords(),o==="drag"&&c&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||c}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let i=e.hoverCursor||this.hoverCursor;const o=qs(this._activeObject)?this._activeObject:null,a=(!o||e.group!==o)&&e.findControl(this.getViewportPoint(t));if(a){const{control:l,coord:c}=a;this.setCursor(l.cursorStyleHandler(t,l,e,c))}else{if(e.subTargetCheck){const{subTargets:l}=this.findTarget(t);l.concat().reverse().forEach(c=>{i=c.hoverCursor||i})}this.setCursor(i)}}handleMultiSelection(t,e){const i=this._activeObject,o=qs(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(i!==e||o)&&(o||!e.isDescendantOf(i)&&!i.isDescendantOf(e))&&!e.onSelect({e:t})&&!i.getActiveControl()){if(o){const a=i.getObjects();let l=[];if(e===i){const c=this.getScenePoint(t);let h=this.searchPossibleTargets(a,c);if(h.target?(e=h.target,l=h.subTargets):(h=this.searchPossibleTargets(this._objects,c),e=h.target,l=h.subTargets),!e||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=l,i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=l),this._fireSelectionEvents(a,t)}else{i.isEditing&&i.exitEditing();const a=new(lt.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(i,e),this._hoveredTarget=a,this._setActiveObject(a,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:i,deltaX:o,deltaY:a}=this._groupSelector,l=new q(e,i),c=l.add(new q(o,a)),h=l.min(c),f=l.max(c).subtract(h),p=this.collectObjects({left:h.x,top:h.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),v=l.eq(c)?p[0]?[p[0]]:[]:p.length>1?p.filter(S=>!S.onSelect({e:t})).reverse():p;if(v.length===1)this.setActiveObject(v[0],t);else if(v.length>1){const S=lt.getClass("ActiveSelection");this.setActiveObject(new S(v,{canvas:this}),t)}return this._groupSelector=null,!0}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;const{upper:i}=this.elements;i.ctx=void 0;const o=super.toCanvasElement(t,e);return i.ctx=i.el.getContext("2d"),o}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const IE={x1:0,y1:0,x2:0,y2:0},tU={...IE,r1:0,r2:0},Ko=(n,t)=>isNaN(n)&&typeof t=="number"?t:n;function PE(n){return n&&/%$/.test(n)&&Number.isFinite(parseFloat(n))}function kE(n,t){const e=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(PE(n)?100:1):NaN;return cr(0,Ko(e,t),1)}const eU=/\s*;\s*/,nU=/\s*:\s*/;function iU(n,t){let e,i;const o=n.getAttribute("style");if(o){const l=o.split(eU);l[l.length-1]===""&&l.pop();for(let c=l.length;c--;){const[h,f]=l[c].split(nU).map(p=>p.trim());h==="stop-color"?e=f:h==="stop-opacity"&&(i=f)}}e=e||n.getAttribute("stop-color")||"rgb(0,0,0)",i=Ko(parseFloat(i||n.getAttribute("stop-opacity")||""),1);const a=new zt(e);return a.setAlpha(a.getAlpha()*i*t),{offset:kE(n.getAttribute("offset"),0),color:a.toRgba()}}function sU(n,t){const e=[],i=n.getElementsByTagName("stop"),o=kE(t,1);for(let a=i.length;a--;)e.push(iU(i[a],o));return e}function OE(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function LE(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function On(n,t){return n.getAttribute(t)}function oU(n,t){return(function(e,i){let o,{width:a,height:l,gradientUnits:c}=i;return Object.entries(e).reduce((h,f)=>{let[p,v]=f;if(v==="Infinity")o=1;else if(v==="-Infinity")o=0;else{const S=typeof v=="string";o=S?parseFloat(v):v,S&&PE(v)&&(o*=.01,c==="pixels"&&(p!=="x1"&&p!=="x2"&&p!=="r2"||(o*=a),p!=="y1"&&p!=="y2"||(o*=l)))}return h[p]=o,h},{})})(OE(n)==="linear"?(function(e){return{x1:On(e,"x1")||0,y1:On(e,"y1")||0,x2:On(e,"x2")||"100%",y2:On(e,"y2")||0}})(n):(function(e){return{x1:On(e,"fx")||On(e,"cx")||"50%",y1:On(e,"fy")||On(e,"cy")||"50%",r1:0,x2:On(e,"cx")||"50%",y2:On(e,"cy")||"50%",r2:On(e,"r")||"50%"}})(n),{...t,gradientUnits:LE(n)})}class wa{constructor(t){const{type:e="linear",gradientUnits:i="pixels",coords:o={},colorStops:a=[],offsetX:l=0,offsetY:c=0,gradientTransform:h,id:f}=t||{};Object.assign(this,{type:e,gradientUnits:i,coords:{...e==="radial"?tU:IE,...o},colorStops:a,offsetX:l,offsetY:c,gradientTransform:h,id:f?`${f}_${ds()}`:ds()})}addColorStop(t){for(const e in t)this.colorStops.push({offset:parseFloat(e),color:t[e]});return this}toObject(t){return{...Tr(this,t),type:this.type,coords:{...this.coords},colorStops:this.colorStops.map(e=>({...e})),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0}}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],o=this.gradientTransform?this.gradientTransform.concat():Ue.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(v=>({...v})).sort((v,S)=>v.offset-S.offset);let c=-this.offsetX,h=-this.offsetY;var f;a==="objectBoundingBox"?(c/=t.width,h/=t.height):(c+=t.width/2,h+=t.height/2),(f=t)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(c-=t.pathOffset.x,h-=t.pathOffset.y),o[4]-=c,o[5]-=h;const p=[`id="SVGID_${this.id}"`,`gradientUnits="${a}"`,`gradientTransform="${e?e+" ":""}${Fa(o)}"`,""].join(" ");if(this.type==="linear"){const{x1:v,y1:S,x2:_,y2:x}=this.coords;i.push("<linearGradient ",p,' x1="',v,'" y1="',S,'" x2="',_,'" y2="',x,`">
`)}else if(this.type==="radial"){const{x1:v,y1:S,x2:_,y2:x,r1:E,r2:b}=this.coords,w=E>b;i.push("<radialGradient ",p,' cx="',w?v:_,'" cy="',w?S:x,'" r="',w?E:b,'" fx="',w?_:v,'" fy="',w?x:S,`">
`),w&&(l.reverse(),l.forEach(R=>{R.offset=1-R.offset}));const D=Math.min(E,b);if(D>0){const R=D/Math.max(E,b);l.forEach(k=>{k.offset+=R*(1-k.offset)})}}return l.forEach(v=>{let{color:S,offset:_}=v;i.push(`<stop offset="${100*_}%" style="stop-color:${S};"/>
`)}),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:e,y1:i,x2:o,y2:a,r1:l,r2:c}=this.coords,h=this.type==="linear"?t.createLinearGradient(e,i,o,a):t.createRadialGradient(e,i,l,o,a,c);return this.colorStops.forEach(f=>{let{color:p,offset:v}=f;h.addColorStop(v,p)}),h}static async fromObject(t){const{colorStops:e,gradientTransform:i}=t;return new this({...t,colorStops:e?e.map(o=>({...o})):void 0,gradientTransform:i?[...i]:void 0})}static fromElement(t,e,i){const o=LE(t),a=e._findCenterFromElement();return new this({id:t.getAttribute("id")||void 0,type:OE(t),coords:oU(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:sU(t,i.opacity),gradientUnits:o,gradientTransform:xp(t.getAttribute("gradientTransform")||""),...o==="pixels"?{offsetX:e.width/2-a.x,offsetY:e.height/2-a.y}:{offsetX:0,offsetY:0}})}}P(wa,"type","Gradient"),lt.setClass(wa,"gradient"),lt.setClass(wa,"linear"),lt.setClass(wa,"radial");class Od{get type(){return"pattern"}set type(t){fs("warn","Setting type has no effect",t)}constructor(t){P(this,"repeat","repeat"),P(this,"offsetX",0),P(this,"offsetY",0),P(this,"crossOrigin",""),this.id=ds(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:i}=this;return{...Tr(this,t),type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:i,offsetX:qt(this.offsetX,Nt.NUM_FRACTION_DIGITS),offsetY:qt(this.offsetY,Nt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null}}toSVG(t){let{width:e,height:i}=t;const{source:o,repeat:a,id:l}=this,c=Ko(this.offsetX/e,0),h=Ko(this.offsetY/i,0);return[`<pattern id="SVGID_${l}" x="${c}" y="${h}" width="${a==="repeat-y"||a==="no-repeat"?1+Math.abs(c||0):Ko(o.width/e,0)}" height="${a==="repeat-x"||a==="no-repeat"?1+Math.abs(h||0):Ko(o.height/i,0)}">`,`<image x="0" y="0" width="${o.width}" height="${o.height}" xlink:href="${this.sourceToString()}"></image>`,"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:i,source:o,patternTransform:a,...l}=t;const c=await sc(o,{...e,crossOrigin:l.crossOrigin});return new this({...l,patternTransform:a&&a.slice(0),source:c})}}P(Od,"type","Pattern"),lt.setClass(Od),lt.setClass(Od,"pattern");class Ys extends Re{constructor(t){let{path:e,left:i,top:o,...a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ys.ownDefaults),this.setOptions(a),this._setPath(t||[],!0),typeof i=="number"&&this.set(Lt,i),typeof o=="number"&&this.set(We,o)}_setPath(t,e){this.path=FL(Array.isArray(t)?t:WL(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new q(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const o of this.path)switch(o[0]){case"L":t.lineTo(o[1]+e,o[2]+i);break;case"M":t.moveTo(o[1]+e,o[2]+i);break;case"C":t.bezierCurveTo(o[1]+e,o[2]+i,o[3]+e,o[4]+i,o[5]+e,o[6]+i);break;case"Q":t.quadraticCurveTo(o[1]+e,o[2]+i,o[3]+e,o[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return`#<Path (${this.complexity()}): { "top": ${this.top}, "left": ${this.left} }>`}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(t),path:this.path.map(e=>e.slice())}}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){return["<path ","COMMON_PARTS",`d="${JL(this.path,Nt.NUM_FRACTION_DIGITS)}" stroke-linecap="round" />
`]}_getOffsetTransform(){const t=Nt.NUM_FRACTION_DIGITS;return` translate(${qt(-this.pathOffset.x,t)}, ${qt(-this.pathOffset.y,t)})`}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:i,pathOffset:o}=this._calcDimensions();this.set({width:e,height:i,pathOffset:o}),t&&this.setPositionByOrigin(o,xt,xt)}_calcBoundsFromPath(){const t=[];let e=0,i=0,o=0,a=0;for(const l of this.path)switch(l[0]){case"L":o=l[1],a=l[2],t.push({x:e,y:i},{x:o,y:a});break;case"M":o=l[1],a=l[2],e=o,i=a;break;case"C":t.push(...__(o,a,l[1],l[2],l[3],l[4],l[5],l[6])),o=l[5],a=l[6];break;case"Q":t.push(...__(o,a,l[1],l[2],l[1],l[2],l[3],l[4])),o=l[3],a=l[4];break;case"Z":o=e,a=i}return wi(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return{...t,pathOffset:new q(t.left+t.width/2,t.top+t.height/2)}}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,i){const{d:o,...a}=Ui(t,this.ATTRIBUTE_NAMES,i);return new this(o,{...a,...e,left:void 0,top:void 0})}}P(Ys,"type","Path"),P(Ys,"cacheProperties",[...Li,"path","fillRule"]),P(Ys,"ATTRIBUTE_NAMES",[...vs,"d"]),lt.setClass(Ys),lt.setSVGClass(Ys);const UE=["radius","startAngle","endAngle","counterClockwise"];class Ei extends Re{static getDefaults(){return{...super.getDefaults(),...Ei.ownDefaults}}constructor(t){super(),Object.assign(this,Ei.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,se(this.startAngle),se(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Ke)}getRadiusY(){return this.get("radius")*this.get(Rn)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...UE,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',`${this.radius}`,`" />
`];{const{radius:e}=this,i=se(this.startAngle),o=se(this.endAngle),a=Di(i)*e,l=Ri(i)*e,c=Di(o)*e,h=Ri(o)*e;return[`<path d="M ${a} ${l} A ${e} ${e} 0 ${t>180?1:0} ${this.counterClockwise?0:1} ${c} ${h}" `,"COMMON_PARTS",` />
`]}}static async fromElement(t,e,i){const{left:o=0,top:a=0,radius:l=0,...c}=Ui(t,this.ATTRIBUTE_NAMES,i);return new this({...c,radius:l,left:o-l,top:a-l})}static fromObject(t){return super._fromObject(t)}}P(Ei,"type","Circle"),P(Ei,"cacheProperties",[...Li,...UE]),P(Ei,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),P(Ei,"ATTRIBUTE_NAMES",["cx","cy","r",...vs]),lt.setClass(Ei),lt.setSVGClass(Ei);const Mp=["x1","x2","y1","y2"];class Xs extends Re{constructor(){let[t,e,i,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Xs.ownDefaults),this.setOptions(a),this.x1=t,this.x2=i,this.y1=e,this.y2=o,this._setWidthHeight();const{left:l,top:c}=a;typeof l=="number"&&this.set(Lt,l),typeof c=="number"&&this.set(We,c)}_setWidthHeight(){const{x1:t,y1:e,x2:i,y2:o}=this;this.width=Math.abs(i-t),this.height=Math.abs(o-e);const{left:a,top:l,width:c,height:h}=wi([{x:t,y:e},{x:i,y:o}]),f=new q(a+c/2,l+h/2);this.setPositionByOrigin(f,xt,xt)}_set(t,e){return super._set(t,e),Mp.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var o;xn(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new q((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(t),...this.calcLinePoints()}}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:i,y2:o,width:a,height:l}=this,c=t<=e?-1:1,h=i<=o?-1:1;return{x1:c*a/2,x2:c*-a/2,y1:h*l/2,y2:h*-l/2}}_toSVG(){const{x1:t,x2:e,y1:i,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",`x1="${t}" y1="${i}" x2="${e}" y2="${o}" />
`]}static async fromElement(t,e,i){const{x1:o=0,y1:a=0,x2:l=0,y2:c=0,...h}=Ui(t,this.ATTRIBUTE_NAMES,i);return new this([o,a,l,c],h)}static fromObject(t){let{x1:e,y1:i,x2:o,y2:a,...l}=t;return this._fromObject({...l,points:[e,i,o,a]},{extraParam:"points"})}}P(Xs,"type","Line"),P(Xs,"cacheProperties",[...Li,...Mp]),P(Xs,"ATTRIBUTE_NAMES",vs.concat(Mp)),lt.setClass(Xs),lt.setSVGClass(Xs);class $s extends Re{static getDefaults(){return{...super.getDefaults(),...$s.ownDefaults}}constructor(t){super(),Object.assign(this,$s.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',`${-t} ${e},0 ${-e},${t} ${e}`,'" />']}}P($s,"type","Triangle"),P($s,"ownDefaults",{width:100,height:100}),lt.setClass($s),lt.setSVGClass($s);const VE=["rx","ry"];class bi extends Re{static getDefaults(){return{...super.getDefaults(),...bi.ownDefaults}}constructor(t){super(),Object.assign(this,bi.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(Ke)}getRy(){return this.get("ry")*this.get(Rn)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...VE,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",`cx="0" cy="0" rx="${this.rx}" ry="${this.ry}" />
`]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,lr,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,i){const o=Ui(t,this.ATTRIBUTE_NAMES,i);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}P(bi,"type","Ellipse"),P(bi,"cacheProperties",[...Li,...VE]),P(bi,"ownDefaults",{rx:0,ry:0}),P(bi,"ATTRIBUTE_NAMES",[...vs,"cx","cy","rx","ry"]),lt.setClass(bi),lt.setSVGClass(bi);const FE={exactBoundingBox:!1};class Fn extends Re{static getDefaults(){return{...super.getDefaults(),...Fn.ownDefaults}}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),P(this,"strokeDiff",void 0),Object.assign(this,Fn.ownDefaults),this.setOptions(e),this.points=t;const{left:i,top:o}=e;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(Lt,i),typeof o=="number"&&this.set(We,o)}isOpen(){return!0}_projectStrokeOnPoints(t){return lL(this.points,t,this.isOpen())}_calcDimensions(t){t={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth,...t||{}};const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(f=>f.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new q,strokeOffset:new q,strokeDiff:new q};const i=wi(e),o=qc({...t,scaleX:1,scaleY:1}),a=wi(this.points.map(f=>Xe(f,o,!0))),l=new q(this.scaleX,this.scaleY);let c=i.left+i.width/2,h=i.top+i.height/2;return this.exactBoundingBox&&(c-=h*Math.tan(se(this.skewX)),h-=c*Math.tan(se(this.skewY))),{...i,pathOffset:new q(c,h),strokeOffset:new q(a.left,a.top).subtract(new q(i.left,i.top)).multiply(l),strokeDiff:new q(i.width,i.height).subtract(new q(a.width,a.height)).multiply(l)}}_findCenterFromElement(){const t=wi(this.points);return new q(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:i,width:o,height:a,pathOffset:l,strokeOffset:c,strokeDiff:h}=this._calcDimensions();this.set({width:o,height:a,pathOffset:l,strokeOffset:c,strokeDiff:h}),t&&this.setPositionByOrigin(new q(e+o/2,i+a/2),xt,xt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new q(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(t).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var e,i;const{width:c,height:h}=this._calcDimensions(t);l=new q((e=t.width)!==null&&e!==void 0?e:c,(i=t.height)!==null&&i!==void 0?i:h)}else{var o,a;l=new q((o=t.width)!==null&&o!==void 0?o:this.width,(a=t.height)!==null&&a!==void 0?a:this.height)}return l.multiply(new q(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const i=this.initialized&&this[t]!==e,o=super._set(t,e);return this.exactBoundingBox&&i&&((t===Ke||t===Rn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),o}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(t),points:this.points.map(e=>{let{x:i,y:o}=e;return{x:i,y:o}})}}_toSVG(){const t=[],e=this.pathOffset.x,i=this.pathOffset.y,o=Nt.NUM_FRACTION_DIGITS;for(let a=0,l=this.points.length;a<l;a++)t.push(qt(this.points[a].x-e,o),",",qt(this.points[a].y-i,o)," ");return[`<${this.constructor.type.toLowerCase()} `,"COMMON_PARTS",`points="${t.join("")}" />
`]}_render(t){const e=this.points.length,i=this.pathOffset.x,o=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-o);for(let a=0;a<e;a++){const l=this.points[a];t.lineTo(l.x-i,l.y-o)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,i){const o=(function(h){if(!h)return[];const f=h.replace(/,/g," ").trim().split(/\s+/),p=[];for(let v=0;v<f.length;v+=2)p.push({x:parseFloat(f[v]),y:parseFloat(f[v+1])});return p})(t.getAttribute("points")),{left:a,top:l,...c}=Ui(t,this.ATTRIBUTE_NAMES,i);return new this(o,{...c,...e})}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}P(Fn,"ownDefaults",FE),P(Fn,"type","Polyline"),P(Fn,"layoutProperties",[yr,vr,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),P(Fn,"cacheProperties",[...Li,"points"]),P(Fn,"ATTRIBUTE_NAMES",[...vs]),lt.setClass(Fn),lt.setSVGClass(Fn);class wu extends Fn{isOpen(){return!1}}P(wu,"ownDefaults",FE),P(wu,"type","Polygon"),lt.setClass(wu),lt.setSVGClass(wu);class BE extends Re{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const i in e)for(const o in e[i])for(const a in e[i][o])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const i=e===void 0?this.styles:{0:this.styles[e]};for(const o in i)for(const a in i[o])if(i[o][a][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let i,o,a=0,l=!0,c=0;for(const h in e){i=0;for(const f in e[h]){const p=e[h][f]||{};a++,p[t]!==void 0?(o?p[t]!==o&&(l=!1):o=p[t],p[t]===this[t]&&delete p[t]):l=!1,Object.keys(p).length!==0?i++:delete e[h][f]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)c+=this._textLines[h].length;l&&a===c&&(this[t]=o,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let i,o,a;for(o in e){for(a in i=e[o],i)delete i[a][t],Object.keys(i[a]).length===0&&delete i[a];Object.keys(i).length===0&&delete e[o]}}_extendStyles(t,e){const{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const a=mg({...this._getStyleDeclaration(i,o),...e},l=>l!==void 0);this._setStyleDeclaration(i,o,a)}getSelectionStyles(t,e,i){const o=[];for(let a=t;a<(e||t);a++)o.push(this.getStyleAtPosition(a,i));return o}getStyleAtPosition(t,e){const{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(i,o):this._getStyleDeclaration(i,o)}setSelectionStyles(t,e,i){for(let o=e;o<(i||e);o++)this._extendStyles(o,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var i;const o=this.styles&&this.styles[t];return o&&(i=o[e])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,e){return{...Tr(this,this.constructor._styleProperties),...this._getStyleDeclaration(t,e)}}_setStyleDeclaration(t,e,i){this.styles[t][e]=i}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}P(BE,"_styleProperties",NO);const rU=/  +/g,aU=/"/g;function Ld(n,t,e,i,o){return`		${(function(a,l){let{left:c,top:h,width:f,height:p}=l,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nt.NUM_FRACTION_DIGITS;const S=Ba(me,a,!1),[_,x,E,b]=[c,h,f,p].map(w=>qt(w,v));return`<rect ${S} x="${_}" y="${x}" width="${E}" height="${b}"></rect>`})(n,{left:t,top:e,width:i,height:o})}
`}let Ud;class we extends BE{static getDefaults(){return{...super.getDefaults(),...we.ownDefaults}}constructor(t,e){super(),P(this,"__charBounds",[]),Object.assign(this,we.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=NE(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Zn)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,i,o,a,l,c;for(let h=0,f=this._textLines.length;h<f;h++)if((this.textAlign===Zn||h!==f-1&&!this.isEndOfWrapping(h))&&(o=0,a=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(c=this.textLines[h].match(this._reSpacesAndTabs)))){i=c.length,t=(this.width-e)/i;for(let p=0;p<=a.length;p++)l=this.__charBounds[h][p],this._reSpaceAndTab.test(a[p])?(l.width+=t,l.kernedWidth+=t,l.left+=o,o+=t):l.left+=o}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const i=e?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<i.length;o++){if(t<=i[o].length)return{lineIndex:o,charIndex:t};t-=i[o].length+this.missingNewlineOffset(o,e)}return{lineIndex:o-1,charIndex:i[o-1].length<t?i[o-1].length:t}}toString(){return`#<Text (${this.complexity()}): { "text": "${this.text}", "fontFamily": "${this.fontFamily}" }>`}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===un?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case xt:t.textBaseline="middle";break;case"ascender":t.textBaseline=We;break;case"descender":t.textBaseline=yp}t.font=this._getFontDeclaration(e,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,i=this._textLines.length;e<i;e++){const o=this.getLineWidth(e);o>t&&(t=o)}return t}_renderTextLine(t,e,i,o,a,l){this._renderChars(t,e,i,o,a,l)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,i=this._getLeftOffset();let o=this._getTopOffset();for(let a=0,l=this._textLines.length;a<l;a++){const c=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){o+=c;continue}const h=this._textLines[a].length,f=this._getLineLeftOffset(a);let p,v,S=0,_=0,x=this.getValueOfPropertyAt(a,0,"textBackgroundColor");const E=this.getHeightOfLineImpl(a);for(let b=0;b<h;b++){const w=this.__charBounds[a][b];v=this.getValueOfPropertyAt(a,b,"textBackgroundColor"),this.path?(t.save(),t.translate(w.renderLeft,w.renderTop),t.rotate(w.angle),t.fillStyle=v,v&&t.fillRect(-w.width/2,-E*(1-this._fontSizeFraction),w.width,E),t.restore()):v!==x?(p=i+f+_,this.direction===xi&&(p=this.width-p-S),t.fillStyle=x,x&&t.fillRect(p,o,S,E),_=w.left,S=w.width,x=v):S+=w.kernedWidth}v&&!this.path&&(p=i+f+_,this.direction===xi&&(p=this.width-p-S),t.fillStyle=v,t.fillRect(p,o,S,E)),o+=c}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,i,o){const a=Da.getFontCache(e),l=this._getFontDeclaration(e),c=i?i+t:t,h=i&&l===this._getFontDeclaration(o),f=e.fontSize/this.CACHE_FONT_SIZE;let p,v,S,_;if(i&&a.has(i)&&(S=a.get(i)),a.has(t)&&(_=p=a.get(t)),h&&a.has(c)&&(v=a.get(c),_=v-S),p===void 0||S===void 0||v===void 0){const x=(function(){return Ud||(Ud=Nn({width:0,height:0}).getContext("2d")),Ud})();this._setTextStyles(x,e,!0),p===void 0&&(_=p=x.measureText(t).width,a.set(t,p)),S===void 0&&h&&i&&(S=x.measureText(i).width,a.set(i,S)),h&&v===void 0&&(v=x.measureText(c).width,a.set(c,v),_=v-S)}return{width:p*f,kernedWidth:_*f}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,i,o=0;const a=this.pathSide===ie,l=this.path,c=this._textLines[t],h=c.length,f=new Array(h);this.__charBounds[t]=f;for(let p=0;p<h;p++){const v=c[p];i=this._getGraphemeBox(v,t,p,e),f[p]=i,o+=i.kernedWidth,e=v}if(f[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let p=0;const v=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case Lt:p=a?v-o:0;break;case xt:p=(v-o)/2;break;case ie:p=a?0:v-o}p+=this.pathStartOffset*(a?-1:1);for(let S=a?h-1:0;a?S>=0:S<h;a?S--:S++)i=f[S],p>v?p%=v:p<0&&(p+=v),this._setGraphemeOnPath(p,i),p+=i.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(t,e){const i=t+e.kernedWidth/2,o=this.path,a=qL(o.path,i,o.segmentsInfo);e.renderLeft=a.x-o.pathOffset.x,e.renderTop=a.y-o.pathOffset.y,e.angle=a.angle+(this.pathSide===ie?Math.PI:0)}_getGraphemeBox(t,e,i,o,a){const l=this.getCompleteStyleDeclaration(e,i),c=o?this.getCompleteStyleDeclaration(e,i-1):{},h=this._measureChar(t,l,o,c);let f,p=h.kernedWidth,v=h.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),v+=f,p+=f);const S={width:v,left:0,height:l.fontSize,kernedWidth:p,deltaY:l.deltaY};if(i>0&&!a){const _=this.__charBounds[e][i-1];S.left=_.left+_.width+h.kernedWidth-h.width}return S}getHeightOfLineImpl(t){const e=this.__lineHeights;if(e[t])return e[t];let i=this.getHeightOfChar(t,0);for(let o=1,a=this._textLines[t].length;o<a;o++)i=Math.max(this.getHeightOfChar(t,o),i);return e[t]=i*this._fontSizeMult}getHeightOfLine(t){return this.getHeightOfLineImpl(t)*this.lineHeight}calcTextHeight(){let t=0;for(let e=0,i=this._textLines.length;e<i;e++)t+=e===i-1?this.getHeightOfLineImpl(e):this.getHeightOfLine(e);return t}_getLeftOffset(){return this.direction===zs?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let i=0;const o=this._getLeftOffset(),a=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++)this._renderTextLine(e,t,this._textLines[l],o+this._getLineLeftOffset(l),a+i+this.getHeightOfLineImpl(l),l),i+=this.getHeightOfLine(l);t.restore()}_renderTextFill(t){(this.fill||this.styleHas(me))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,i,o,a,l){const c=this.textAlign.includes(Zn),h=this.path,f=!c&&this.charSpacing===0&&this.isEmptyStyles(l)&&!h,p=this.direction===zs,v=this.direction===zs?1:-1,S=e.direction;let _,x,E,b,w,D="",R=0;if(e.save(),S!==this.direction&&(e.canvas.setAttribute("dir",p?zs:xi),e.direction=p?zs:xi,e.textAlign=p?Lt:ie),a-=this.getHeightOfLineImpl(l)*this._fontSizeFraction,f)return this._renderChar(t,e,l,0,i.join(""),o,a),void e.restore();for(let k=0,L=i.length-1;k<=L;k++)b=k===L||this.charSpacing||h,D+=i[k],E=this.__charBounds[l][k],R===0?(o+=v*(E.kernedWidth-E.width),R+=E.width):R+=E.kernedWidth,c&&!b&&this._reSpaceAndTab.test(i[k])&&(b=!0),b||(_=_||this.getCompleteStyleDeclaration(l,k),x=this.getCompleteStyleDeclaration(l,k+1),b=Eg(_,x,!1)),b&&(h?(e.save(),e.translate(E.renderLeft,E.renderTop),e.rotate(E.angle),this._renderChar(t,e,l,k,D,-R/2,0),e.restore()):(w=o,this._renderChar(t,e,l,k,D,w,a)),D="",_=x,o+=v*R,R=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,i=this.height+this.strokeWidth,o=Nn({width:e,height:i}),a=o.getContext("2d");return o.width=e,o.height=i,a.beginPath(),a.moveTo(0,0),a.lineTo(e,0),a.lineTo(e,i),a.lineTo(0,i),a.closePath(),a.translate(e/2,i/2),a.fillStyle=t.toLive(a),this._applyPatternGradientTransform(a,t),a.fill(),a.createPattern(o,"no-repeat")}handleFiller(t,e,i){let o,a;return xn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(o=-this.width/2,a=-this.height/2,t.translate(o,a),t[e]=this._applyPatternGradientTransformText(i),{offsetX:o,offsetY:a}):(t[e]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:i,strokeWidth:o}=e;return t.lineWidth=o,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,e){let{fill:i}=e;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,e,i,o,a,l,c){const h=this._getStyleDeclaration(i,o),f=this.getCompleteStyleDeclaration(i,o),p=t==="fillText"&&f.fill,v=t==="strokeText"&&f.stroke&&f.strokeWidth;if(v||p){if(e.save(),e.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(c+=h.deltaY),p){const S=this._setFillStyles(e,f);e.fillText(a,l-S.offsetX,c-S.offsetY)}if(v){const S=this._setStrokeStyles(e,f);e.strokeText(a,l-S.offsetX,c-S.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,i){const o=this.get2DCursorLocation(t,!0),a=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),l=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),c={fontSize:a*i.size,deltaY:l+a*i.baseline};this.setSelectionStyles(c,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),i=this.width-e,o=this.textAlign,a=this.direction,l=this.isEndOfWrapping(t);let c=0;return o===Zn||o===Ia&&!l||o===Na&&!l||o===Ec&&!l?0:(o===xt&&(c=i/2),o===ie&&(c=i),o===Ia&&(c=i/2),o===Na&&(c=i),a===xi&&(o===ie||o===Na?c=0:o===Lt||o===Ec?c=-i:o!==xt&&o!==Ia||(c=-i/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,i){var o;return(o=this._getStyleDeclaration(t,e)[i])!==null&&o!==void 0?o:this[i]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let i=this._getTopOffset();const o=this._getLeftOffset(),a=this.path,l=this._getWidthOfCharSpacing(),c=e==="linethrough"?.5:e==="overline"?1:0,h=this.offsets[e];for(let f=0,p=this._textLines.length;f<p;f++){const v=this.getHeightOfLine(f);if(!this[e]&&!this.styleHas(e,f)){i+=v;continue}const S=this._textLines[f],_=v/this.lineHeight,x=this._getLineLeftOffset(f);let E=0,b=0,w=this.getValueOfPropertyAt(f,0,e),D=this.getValueOfPropertyAt(f,0,me),R=this.getValueOfPropertyAt(f,0,eo),k=w,L=D,Y=R;const G=i+_*(1-this._fontSizeFraction);let V=this.getHeightOfChar(f,0),$=this.getValueOfPropertyAt(f,0,"deltaY");for(let at=0,it=S.length;at<it;at++){const ct=this.__charBounds[f][at];k=this.getValueOfPropertyAt(f,at,e),L=this.getValueOfPropertyAt(f,at,me),Y=this.getValueOfPropertyAt(f,at,eo);const Et=this.getHeightOfChar(f,at),H=this.getValueOfPropertyAt(f,at,"deltaY");if(a&&k&&L){const Q=this.fontSize*Y/1e3;t.save(),t.fillStyle=D,t.translate(ct.renderLeft,ct.renderTop),t.rotate(ct.angle),t.fillRect(-ct.kernedWidth/2,h*Et+H-c*Q,ct.kernedWidth,Q),t.restore()}else if((k!==w||L!==D||Et!==V||Y!==R||H!==$)&&b>0){const Q=this.fontSize*R/1e3;let tt=o+x+E;this.direction===xi&&(tt=this.width-tt-b),w&&D&&R&&(t.fillStyle=D,t.fillRect(tt,G+h*V+$-c*Q,b,Q)),E=ct.left,b=ct.width,w=k,R=Y,D=L,V=Et,$=H}else b+=ct.kernedWidth}let et=o+x+E;this.direction===xi&&(et=this.width-et-b),t.fillStyle=L;const st=this.fontSize*Y/1e3;k&&L&&Y&&t.fillRect(et,G+h*V+$-c*st,b-l,st),i+=v}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const l=t.includes("'")||t.includes('"')||t.includes(",")||we.genericFonts.includes(t.toLowerCase())?t:`"${t}"`;return[e,i,`${a?this.CACHE_FONT_SIZE:o}px`,l].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return xg(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),i=new Array(e.length),o=[`
`];let a=[];for(let l=0;l<e.length;l++)i[l]=this.graphemeSplit(e[l]),a=a.concat(i[l],o);return a.pop(),{_unwrappedLines:i,lines:e,graphemeText:a,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject([...gE,...t]),styles:fL(this.styles,this.text),...this.path?{path:this.path.toObject()}:{}}}set(t,e){const{textLayoutProperties:i}=this.constructor;super.set(t,e);let o=!1,a=!1;if(typeof t=="object")for(const l in t)l==="path"&&this.setPathInfo(),o=o||i.includes(l),a=a||l==="path";else o=i.includes(t),a=t==="path";return a&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,i){const o=Ui(t,we.ATTRIBUTE_NAMES,i),{textAnchor:a=Lt,textDecoration:l="",dx:c=0,dy:h=0,top:f=0,left:p=0,fontSize:v=cg,strokeWidth:S=1,..._}={...e,...o},x=new this(xc(t.textContent||"").trim(),{left:p+c,top:f+h,underline:l.includes("underline"),overline:l.includes("overline"),linethrough:l.includes("line-through"),strokeWidth:0,fontSize:v,..._}),E=x.getScaledHeight()/x.height,b=((x.height+x.strokeWidth)*x.lineHeight-x.height)*E,w=x.getScaledHeight()+b;let D=0;return a===xt&&(D=x.getScaledWidth()/2),a===ie&&(D=x.getScaledWidth()),x.set({left:x.left-D,top:x.top-(w-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:S}),x}static fromObject(t){return this._fromObject({...t,styles:dL(t.styles||{},t.text)},{extraParam:"text"})}}P(we,"textLayoutProperties",pE),P(we,"cacheProperties",[...Li,...gE]),P(we,"ownDefaults",IO),P(we,"type","Text"),P(we,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),P(we,"ATTRIBUTE_NAMES",vs.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),CE(we,[class extends hE{_toSVG(){const n=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(n){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Fa(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:t,textSpans:e}=n;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',`font-family="${this.fontFamily.replace(aU,"'")}" `,`font-size="${this.fontSize}" `,this.fontStyle?`font-style="${this.fontStyle}" `:"",this.fontWeight?`font-weight="${this.fontWeight}" `:"",i?`text-decoration="${i}" `:"",this.direction==="rtl"?`direction="${this.direction}" `:"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(n,t){const e=[],i=[];let o,a=n;this.backgroundColor&&i.push(...Ld(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,c=this._textLines.length;l<c;l++)o=this._getLineLeftOffset(l),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(i,l,t+o,a),this._setSVGTextLineText(e,l,t+o,a),a+=this.getHeightOfLine(l);return{textSpans:e,textBgRects:i}}_createTextCharSpan(n,t,e,i,o){const a=Nt.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(t,n!==n.trim()||!!n.match(rU)),c=l?`style="${l}"`:"",h=t.deltaY,f=h?` dy="${qt(h,a)}" `:"",{angle:p,renderLeft:v,renderTop:S,width:_}=o;let x="";if(v!==void 0){const E=_/2;p&&(x=` rotate="${qt(ps(p),a)}"`);const b=Sr({angle:ps(p)});b[4]=v,b[5]=S;const w=new q(-E,0).transform(b);e=w.x,i=w.y}return`<tspan x="${qt(e,a)}" y="${qt(i,a)}" ${f}${x}${c}>${uL(n)}</tspan>`}_setSVGTextLineText(n,t,e,i){const o=this.getHeightOfLine(t),a=this.textAlign.includes(Zn),l=this._textLines[t];let c,h,f,p,v,S="",_=0;i+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let x=0,E=l.length-1;x<=E;x++)v=x===E||this.charSpacing||this.path,S+=l[x],f=this.__charBounds[t][x],_===0?(e+=f.kernedWidth-f.width,_+=f.width):_+=f.kernedWidth,a&&!v&&this._reSpaceAndTab.test(l[x])&&(v=!0),v||(c=c||this.getCompleteStyleDeclaration(t,x),h=this.getCompleteStyleDeclaration(t,x+1),v=Eg(c,h,!0)),v&&(p=this._getStyleDeclaration(t,x),n.push(this._createTextCharSpan(S,p,e,i,f)),S="",c=h,this.direction==="rtl"?e-=_:e+=_,_=0)}_setSVGTextLineBg(n,t,e,i){const o=this._textLines[t],a=this.getHeightOfLine(t)/this.lineHeight;let l,c=0,h=0,f=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let p=0;p<o.length;p++){const{left:v,width:S,kernedWidth:_}=this.__charBounds[t][p];l=this.getValueOfPropertyAt(t,p,"textBackgroundColor"),l!==f?(f&&n.push(...Ld(f,e+h,i,c,a)),h=v,c=S,f=l):c+=_}l&&n.push(...Ld(f,e+h,i,c,a))}getSvgStyles(n){return`${super.getSvgStyles(n)} text-decoration-thickness: ${qt(this.textDecorationThickness*this.getObjectScaling().y/10,Nt.NUM_FRACTION_DIGITS)}%; white-space: pre;`}getSvgSpanStyles(n,t){const{fontFamily:e,strokeWidth:i,stroke:o,fill:a,fontSize:l,fontStyle:c,fontWeight:h,textDecorationThickness:f,linethrough:p,overline:v,underline:S}=n,_=this.getSvgTextDecoration({underline:S??this.underline,overline:v??this.overline,linethrough:p??this.linethrough}),x=f||this.textDecorationThickness;return[o?Ba(un,o):"",i?`stroke-width: ${i}; `:"",e?`font-family: ${e.includes("'")||e.includes('"')?e:`'${e}'`}; `:"",l?`font-size: ${l}px; `:"",c?`font-style: ${c}; `:"",h?`font-weight: ${h}; `:"",_?`text-decoration: ${_}; text-decoration-thickness: ${qt(x*this.getObjectScaling().y/10,Nt.NUM_FRACTION_DIGITS)}%; `:"",a?Ba(me,a):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(t=>n[t.replace("-","")]).join(" ")}}]),lt.setClass(we),lt.setSVGClass(we);class lU{constructor(t){P(this,"target",void 0),P(this,"__mouseDownInPlace",!1),P(this,"__dragStartFired",!1),P(this,"__isDraggingOver",!1),P(this,"__dragStartSelection",void 0),P(this,"__dragImageDisposer",void 0),P(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(i=>i()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,i=e.getSelectionStartFromPointer(t);return e.isEditing&&i>=e.selectionStart&&i<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var i;let{selectionStart:o,selectionEnd:a}=e;const l=this.target,c=l.canvas,h=new q(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(o),p=new q(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),v=c.getScenePoint(t).subtract(p),S=l.getCanvasRetinaScaling(),_=l.getBoundingRect(),x=p.subtract(new q(_.left,_.top)),E=c.viewportTransform,b=x.add(v).transform(E,!0),w=l.backgroundColor,D=Cg(l.styles);l.backgroundColor="";const R={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(R,0,o),l.setSelectionStyles(R,a,l.text.length),l.dirty=!0;const k=l.toCanvasElement({enableRetinaScaling:c.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=w,l.styles=D,l.dirty=!0,Ap(k,{position:"fixed",left:-k.width+"px",border:Je,width:k.width/S+"px",height:k.height/S+"px"}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{k.remove()},Bn(t.target||this.target.hiddenTextarea).body.appendChild(k),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(k,b.x,b.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,i=this.isActive();if(i&&t.dataTransfer){const o=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},a=e._text.slice(o.selectionStart,o.selectionEnd).join(""),l={text:e.text,value:a,...o};t.dataTransfer.setData("text/plain",a),t.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:e.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,l)}return e.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return e<i.selectionStart||e>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const i=this.targetCanDrop(e);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,i=this.targetCanDrop(e);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:i}=t,o=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let a=(e=i.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(a&&!o){const l=this.target,c=l.canvas;let h=l.getSelectionStartFromPointer(i);const{styles:f}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},p=a[Math.max(0,a.length-1)],v=0;if(this.__dragStartSelection){const S=this.__dragStartSelection.selectionStart,_=this.__dragStartSelection.selectionEnd;h>S&&h<=_?h=S:h>_&&(h-=_-S),l.removeChars(S,_),delete this.__dragStartSelection}l._reNewline.test(p)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(a=a.trimEnd()),t.didDrop=!0,t.dropTarget=l,l.insertChars(a,f,h),c.setActiveObject(l),l.enterEditing(i),l.selectionStart=Math.min(h+v,l._text.length),l.selectionEnd=Math.min(l.selectionStart+a.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(mc,{index:h+v,action:"drop"}),c.fire("text:changed",{target:l}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const o=this.target,a=this.target.canvas,{selectionStart:l,selectionEnd:c}=this.__dragStartSelection,h=((i=e.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||Je;h===Je?(o.selectionStart=l,o.selectionEnd=c,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),h==="move"&&(o.removeChars(l,c),o.selectionStart=o.selectionEnd=l,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(mc,{index:l,action:"dragend"}),a.fire("text:changed",{target:o}),a.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const E_=/[ \n\.,;!\?\-]/;class uU extends we{constructor(){super(...arguments),P(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:i,delay:o,onComplete:a}=t;return mE({startValue:this._currentCursorOpacity,endValue:e,duration:i,delay:o,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findWordBoundaryRight(t){let e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}findLineBoundaryLeft(t){let e=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findLineBoundaryRight(t){let e=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}searchWordBoundary(t,e){const i=this._text;let o=t>0&&this._reSpace.test(i[t])&&(e===-1||!hg.test(i[t-1]))?t-1:t,a=i[o];for(;o>0&&o<i.length&&!E_.test(a);)o+=e,a=i[o];return e===-1&&E_.test(a)&&o++,o}selectWord(t){t=t??this.selectionStart;const e=this.searchWordBoundary(t,-1),i=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t??this.selectionStart;const e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Bn(e).activeElement!==e&&e.focus();const i=this.getSelectionStartFromPointer(t),o=this.selectionStart,a=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&o!==a||o!==i&&a!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,i){const o=i.slice(0,t),a=this.graphemeSplit(o).length;if(t===e)return{selectionStart:a,selectionEnd:a};const l=i.slice(t,e);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(t,e,i){const o=i.slice(0,t).join("").length;return t===e?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+i.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){const{hiddenTextarea:t,direction:e,textAlign:i,inCompositionMode:o}=this;if(!t)return;const a=i!==Zn?i.replace("justify-",""):e===zs?Lt:ie,l=this.getPositionByOrigin(a,"top");this.cursorOffsetCache={},this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setPositionByOrigin(l,a,"top"),this.setCoords();const c=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=c.selectionEnd,o||(this.selectionStart=c.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),o=i.lineIndex,a=i.charIndex,l=this.getValueOfPropertyAt(o,a,"fontSize")*this.lineHeight,c=e.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,p=f.width/h,v=f.height/h,S=p-l,_=v-l,x=new q(e.left+c,e.top+e.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new q(f.clientWidth/p,f.clientHeight/v));return x.x<0&&(x.x=0),x.x>S&&(x.x=S),x.y<0&&(x.y=0),x.y>_&&(x.y=_),x.x+=this.canvas._offset.left,x.y+=this.canvas._offset.top,{left:`${x.x}px`,top:`${x.y}px`,fontSize:`${l}px`,charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}exitEditingImpl(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(yc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0),{lineIndex:a,charIndex:l}=this.get2DCursorLocation(e,!0);if(i!==a){if(this.styles[i])for(let c=o;c<this._unwrappedTextLines[i].length;c++)delete this.styles[i][c];if(this.styles[a])for(let c=l;c<this._unwrappedTextLines[a].length;c++){const h=this.styles[a][c];h&&(this.styles[i]||(this.styles[i]={}),this.styles[i][o+c-l]=h)}for(let c=i+1;c<=a;c++)delete this.styles[c];this.shiftLineStyles(a,i-a)}else if(this.styles[i]){const c=this.styles[i],h=l-o;for(let f=o;f<l;f++)delete c[f];for(const f in this.styles[i]){const p=parseInt(f,10);p>=l&&(c[p-h]=c[f],delete c[f])}}}shiftLineStyles(t,e){const i=Object.assign({},this.styles);for(const o in this.styles){const a=parseInt(o,10);a>t&&(this.styles[a+e]=i[a],i[a-e]||delete this.styles[a])}}insertNewlineStyleObject(t,e,i,o){const a={},l=this._unwrappedTextLines[t].length,c=l===e;let h=!1;i||(i=1),this.shiftLineStyles(t,i);const f=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const v in this.styles[t]){const S=parseInt(v,10);S>=e&&(h=!0,a[S-e]=this.styles[t][v],c&&e===0||delete this.styles[t][v])}let p=!1;for(h&&!c&&(this.styles[t+i]=a,p=!0),(p||l>e)&&i--;i>0;)o&&o[i-1]?this.styles[t+i]={0:{...o[i-1]}}:f?this.styles[t+i]={0:{...f}}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,e,i,o){this.styles||(this.styles={});const a=this.styles[t],l=a?{...a}:{};i||(i=1);for(const h in l){const f=parseInt(h,10);f>=e&&(a[f+i]=l[f],l[f-i]||delete a[f])}if(this._forceClearCache=!0,o){for(;i--;)Object.keys(o[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]={...o[i]});return}if(!a)return;const c=a[e?e-1:1];for(;c&&i--;)this.styles[t][e+i]={...c}}insertNewStyleBlock(t,e,i){const o=this.get2DCursorLocation(e,!0),a=[0];let l,c=0;for(let h=0;h<t.length;h++)t[h]===`
`?(c++,a[c]=0):a[c]++;for(a[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,a[0],i),i=i&&i.slice(a[0]+1)),c&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+a[0],c),l=1;l<c;l++)a[l]>0?this.insertCharStyleObject(o.lineIndex+l,0,a[l],i):i&&this.styles[o.lineIndex+l]&&i[0]&&(this.styles[o.lineIndex+l][0]=i[0]),i=i&&i.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(o.lineIndex+l,0,a[l],i)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;o>i&&this.removeStyleFromTo(i,o);const a=this.graphemeSplit(t);this.insertNewStyleBlock(a,i,e),this._text=[...this._text.slice(0,i),...a,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,i){i<=t?(e===t?this._selectionDirection=Lt:this._selectionDirection===ie&&(this._selectionDirection=Lt,this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?this._selectionDirection===ie?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=ie:this._selectionDirection===Lt&&(this._selectionDirection=ie,this.selectionStart=e),this.selectionEnd=i)}}class cU extends uU{initHiddenTextarea(){const t=this.canvas&&Bn(this.canvas.getElement())||mr(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(l=>{let[c,h]=l;return e.setAttribute(c,h)});const{top:i,left:o,fontSize:a}=this._calcTextareaPosition();e.style.cssText=`position: absolute; top: ${i}; left: ${o}; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ${a};`,(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(l=>{let[c,h]=l;return e.addEventListener(c,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:i,selectionStart:o,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(mc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const c=this._splitTextIntoLines(i).graphemeText,h=this._text.length,f=c.length,p=this.selectionStart,v=this.selectionEnd,S=p!==v;let _,x,E,b,w=f-h;const D=this.fromStringToGraphemeSelection(o,a,i),R=p>D.selectionStart;S?(x=this._text.slice(p,v),w+=v-p):f<h&&(x=R?this._text.slice(v+w,v):this._text.slice(p,p-w));const k=c.slice(D.selectionEnd-w,D.selectionEnd);if(x&&x.length&&(k.length&&(_=this.getSelectionStyles(p,p+1,!1),_=k.map(()=>_[0])),S?(E=p,b=v):R?(E=v-x.length,b=v):(E=v,b=v+x.length),this.removeStyleFromTo(E,b)),k.length){const{copyPasteData:L}=ii();e&&k.join("")===L.copiedText&&!Nt.disableStyleCopyPaste&&(_=L.copiedTextStyle),this.insertNewStyleBlock(k,p,_)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:i,selectionEnd:o}=e;this.compositionStart=i,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=ii();t.copiedText=this.getSelectedText(),Nt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let i,o=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],o+=i.left+i.width),o}getDownCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),o=this.get2DCursorLocation(i),a=o.lineIndex;if(a===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const l=o.charIndex,c=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a+1,c);return this._textLines[a].slice(l).length+h+1+this.missingNewlineOffset(a)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),o=this.get2DCursorLocation(i),a=o.lineIndex;if(a===0||t.metaKey||t.keyCode===33)return-i;const l=o.charIndex,c=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a-1,c),f=this._textLines[a].slice(0,l),p=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+h-f.length+(1-p)}_getIndexOnLine(t,e){const i=this._textLines[t];let o,a,l=this._getLineLeftOffset(t),c=0;for(let h=0,f=i.length;h<f;h++)if(o=this.__charBounds[t][h].width,l+=o,l>e){a=!0;const p=l-o,v=l,S=Math.abs(p-e);c=Math.abs(v-e)<S?h:h-1;break}return a||(c=i.length-1),c}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const i=this[`get${t}CursorOffset`](e,this._selectionDirection===ie);if(e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const o=this.text.length;this.selectionStart=cr(0,this.selectionStart,o),this.selectionEnd=cr(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Lt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,i){let o;if(t.altKey)o=this[`findWordBoundary${i}`](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=i==="Left"?-1:1,!0;o=this[`findLineBoundary${i}`](this[e])}return o!==void 0&&this[e]!==o&&(this[e]=o,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Lt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===ie&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Lt,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const i=`moveCursor${t}${e.shiftKey?"WithShift":"WithoutShift"}`;this._currentCursorOpacity=1,this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===Lt&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ie,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=ie,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const b_=n=>!!n.button;class hU extends cU{constructor(){super(...arguments),P(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new lU(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:i}=t;this.canvas&&this.editable&&!b_(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),i&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=i||this.isEditing)))}mouseUpHandler(t){let{e,transform:i}=t;const o=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||b_(e)||o||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),i=this.selectionStart,o=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,o,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(Gn(this.calcTransformMatrix())).add(new q(-this._getLeftOffset(),-this._getTopOffset()));let i=0,o=0,a=0;for(let f=0;f<this._textLines.length&&i<=e.y;f++)i+=this.getHeightOfLine(f),a=f,f>0&&(o+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let l=Math.abs(this._getLineLeftOffset(a));const c=this._textLines[a].length,h=this.__charBounds[a];for(let f=0;f<c;f++){const p=l+h[f].kernedWidth;if(e.x<=p){Math.abs(e.x-p)<=Math.abs(e.x-l)&&o++;break}l=p,o++}return Math.min(this.flipX?c-o:o,this._text.length)}}const Mu="moveCursorUp",Du="moveCursorDown",Ru="moveCursorLeft",Nu="moveCursorRight",Iu="exitEditing",A_=(n,t)=>{const e=t.getRetinaScaling();n.setTransform(e,0,0,e,0,0);const i=t.viewportTransform;n.transform(i[0],i[1],i[2],i[3],i[4],i[5])},fU={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Iu,27:Iu,33:Mu,34:Du,35:Nu,36:Ru,37:Ru,38:Mu,39:Nu,40:Du},keysMapRtl:{9:Iu,27:Iu,33:Mu,34:Du,35:Ru,36:Nu,37:Nu,38:Mu,39:Ru,40:Du},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"},_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1};class bn extends hU{static getDefaults(){return{...super.getDefaults(),...bn.ownDefaults}}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,{...bn.ownDefaults,...e}),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof wp&&this.canvas.textEditingManager.remove(this),e instanceof wp&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,i)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=e,i}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),i=this.findAncestorsWithClipPath(),o=i.length>0;let a,l=t;if(o){a=Nn(t.canvas),l=a.getContext("2d"),A_(l,this.canvas);const c=this.calcTransformMatrix();l.transform(c[0],c[1],c[2],c[3],c[4],c[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,e):this.renderCursor(l,e),o)for(const c of i){const h=c.clipPath,f=Nn(t.canvas),p=f.getContext("2d");if(A_(p,this.canvas),!h.absolutePositioned){const v=c.calcTransformMatrix();p.transform(v[0],v[1],v[2],v[3],v[4],v[5])}h.transform(p),h.drawObject(p,!0,{}),this.drawClipPathOnCache(l,h,f)}o&&(t.setTransform(1,0,0,1,0,0),t.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),o=this._getTopOffset(),a=this._getCursorBoundariesOffsets(t,e);return{left:i,top:o,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,i=0;const{charIndex:o,lineIndex:a}=this.get2DCursorLocation(t),{textAlign:l,direction:c}=this;for(let v=0;v<a;v++)e+=this.getHeightOfLine(v);const h=this._getLineLeftOffset(a),f=this.__charBounds[a][o];f&&(i=f.left),this.charSpacing!==0&&o===this._textLines[a].length&&(i-=this._getWidthOfCharSpacing());let p=h+(i>0?i:0);return c===xi&&(l===ie||l===Zn||l===Na?p*=-1:l===Lt||l===Ec?p=h-(i>0?i:0):l!==xt&&l!==Ia||(p=h-(i>0?i:0))),{top:e,left:p}}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const i=this.get2DCursorLocation(t),o=i.lineIndex,a=i.charIndex>0?i.charIndex-1:0,l=this.getValueOfPropertyAt(o,a,"fontSize"),c=this.getObjectScaling().x*this.canvas.getZoom(),h=this.cursorWidth/c,f=this.getValueOfPropertyAt(o,a,"deltaY"),p=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,a,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-h/2,top:p+e.top+f,width:h,height:l}}_renderCursor(t,e,i){const{color:o,opacity:a,left:l,top:c,width:h,height:f}=this.getCursorRenderingData(i,e);t.fillStyle=o,t.globalAlpha=a,t.fillRect(l,c,h,f)}renderSelection(t,e){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,i){const{textAlign:o,direction:a}=this,l=e.selectionStart,c=e.selectionEnd,h=o.includes(Zn),f=this.get2DCursorLocation(l),p=this.get2DCursorLocation(c),v=f.lineIndex,S=p.lineIndex,_=f.charIndex<0?0:f.charIndex,x=p.charIndex<0?0:p.charIndex;for(let E=v;E<=S;E++){const b=this._getLineLeftOffset(E)||0;let w=this.getHeightOfLine(E),D=0,R=0,k=0;if(E===v&&(R=this.__charBounds[v][_].left),E>=v&&E<S)k=h&&!this.isEndOfWrapping(E)?this.width:this.getLineWidth(E)||5;else if(E===S)if(x===0)k=this.__charBounds[S][x].left;else{const $=this._getWidthOfCharSpacing();k=this.__charBounds[S][x-1].left+this.__charBounds[S][x-1].width-$}D=w,(this.lineHeight<1||E===S&&this.lineHeight>1)&&(w/=this.lineHeight);let L=i.left+b+R,Y=w,G=0;const V=k-R;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",Y=1,G=w):t.fillStyle=this.selectionColor,a===xi&&(o===ie||o===Zn||o===Na?L=this.width-L-V:o===Lt||o===Ec?L=i.left+b-k:o!==xt&&o!==Ia||(L=i.left+b-k)),t.fillRect(L,i.top+i.topOffset+G,V,Y),i.topOffset+=D}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,me)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}P(bn,"ownDefaults",fU),P(bn,"type","IText"),lt.setClass(bn),lt.setClass(bn,"i-text");class Ws extends bn{static getDefaults(){return{...super.getDefaults(),...Ws.ownDefaults}}constructor(t,e){super(t,{...Ws.ownDefaults,...e})}static createControls(){return{controls:oL()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Zn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,i=0,o=0;const a={};for(let l=0;l<t.graphemeLines.length;l++)t.graphemeText[o]===`
`&&l>0?(i=0,o++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[o])&&l>0&&(i++,o++),a[l]={line:e,offset:i},o+=t.graphemeLines[l].length,i+=t.graphemeLines[l].length;return a}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[e];i&&(e=i.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,i=0,o=t+1,a=!1;const l=this._styleMap[t],c=this._styleMap[t+1];l&&(t=l.line,i=l.offset),c&&(o=c.line,a=o===t,e=c.offset);const h=t===void 0?this.styles:{line:this.styles[t]};for(const f in h)for(const p in h[f]){const v=parseInt(p,10);if(v>=i&&(!a||v<e))for(const S in h[f][p])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,e=i.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,i){const o=this._styleMap[t];super._setStyleDeclaration(o.line,o.offset+e,i)}_deleteStyleDeclaration(t,e){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),o=[];for(let a=0;a<i.wordsData.length;a++)o.push(...this._wrapLine(a,e,i));return this.isWrapping=!1,o}getGraphemeDataForRender(t){const e=this.splitByGrapheme,i=e?"":" ";let o=0;return{wordsData:t.map((a,l)=>{let c=0;const h=e?this.graphemeSplit(a):this.wordSplit(a);return h.length===0?[{word:[],width:0}]:h.map(f=>{const p=e?[f]:this.graphemeSplit(f),v=this._measureWord(p,l,c);return o=Math.max(v,o),c+=p.length+i.length,{word:p,width:v}})}),largestWordWidth:o}}_measureWord(t,e){let i,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let l=0,c=t.length;l<c;l++)a+=this._getGraphemeBox(t[l],e,l+o,i,!0).kernedWidth,i=t[l];return a}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,i){let{largestWordWidth:o,wordsData:a}=i,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],p=h?"":" ";let v=0,S=[],_=0,x=0,E=!0;e-=l;const b=Math.max(e,o,this.dynamicMinWidth),w=a[t];let D;for(_=0,D=0;D<w.length;D++){const{word:R,width:k}=w[D];_+=R.length,v+=x+k-c,v>b&&!E?(f.push(S),S=[],v=k,E=!0):v+=c,E||h||S.push(p),S=S.concat(R),x=h?0:this._measureWord([p],t,_),_++,E=!1}return D&&f.push(S),o+l>this.dynamicMinWidth&&(this.dynamicMinWidth=o-c+l),f}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),i=this._wrapText(e.lines,this.width),o=new Array(i.length);for(let a=0;a<i.length;a++)o[a]=i[a].join("");return e.lines=o,e.graphemeLines=i,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const i=parseInt(e,10);if(this._textLines[i]){const o=this._styleMap[e].line;t.set(`${o}`,!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}P(Ws,"type","Textbox"),P(Ws,"textLayoutProperties",[...bn.textLayoutProperties,"width"]),P(Ws,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),lt.setClass(Ws);class w_ extends Jc{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:i}=t,{clipPath:o,group:a}=i;if(!o||!this.shouldPerformLayout(t))return;const{width:l,height:c}=wi(bE(i,o)),h=new q(l,c);if(o.absolutePositioned)return{center:ur(o.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:h};{const f=o.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:p=new q,correction:v=new q}=this.calcBoundingBox(e,t)||{};return{center:p.add(f),correction:v.subtract(f),size:h}}return{center:i.getRelativeCenterPoint().add(f),size:h}}}}P(w_,"type","clip-path"),lt.setClass(w_);class M_ extends Jc{getInitialSize(t,e){let{target:i}=t,{size:o}=e;return new q(i.width||o.x,i.height||o.y)}}P(M_,"type","fixed"),lt.setClass(M_);class dU extends Ha{subscribeTargets(t){const e=t.target;t.targets.reduce((i,o)=>(o.parent&&i.add(o.parent),i),new Set).forEach(i=>{i.layoutManager.subscribeTargets({target:i,targets:[e]})})}unsubscribeTargets(t){const e=t.target,i=e.getObjects();t.targets.reduce((o,a)=>(a.parent&&o.add(a.parent),o),new Set).forEach(o=>{!i.some(a=>a.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[e]})})}}class Js extends Qs{static getDefaults(){return{...super.getDefaults(),...Js.ownDefaults}}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Js.ownDefaults),this.setOptions(e);const{left:i,top:o,layoutManager:a}=e;this.groupInit(t,{left:i,top:o,layoutManager:a??new dU})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(o=>{const a=this._objects.findIndex(c=>c.isInFrontOf(o)),l=a===-1?this.size():a;this.insertAt(l,o)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(fs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const i=new Set;e.forEach(o=>{const{parent:a}=o;a&&i.add(a)}),t===Ag?i.forEach(o=>{o._onAfterObjectsChange(bc,e)}):i.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return`#<ActiveSelection: (${this.complexity()})>`}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o={hasControls:!1,...i,forActiveSelection:!0};for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(t,o);super._renderControls(t,e),t.restore()}}P(Js,"type","ActiveSelection"),P(Js,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),lt.setClass(Js),lt.setClass(Js,"activeSelection");class pU{constructor(){P(this,"resources",{})}applyFilters(t,e,i,o,a){const l=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0});if(!l)return;l.drawImage(e,0,0,i,o);const c={sourceWidth:i,sourceHeight:o,imageData:l.getImageData(0,0,i,o),originalEl:e,originalImageData:l.getImageData(0,0,i,o),canvasEl:a,ctx:l,filterBackend:this};t.forEach(f=>{f.applyTo(c)});const{imageData:h}=c;return h.width===i&&h.height===o||(a.width=h.width,a.height=h.height),l.putImageData(h,0,0),c}}class GE{constructor(){let{tileSize:t=Nt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),P(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const i=Nn({width:t,height:e}),o=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=i,this.gl=o)}applyFilters(t,e,i,o,a,l){const c=this.gl,h=a.getContext("2d");if(!c||!h)return;let f;l&&(f=this.getCachedTexture(l,e));const p={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:i,sourceHeight:o,destinationWidth:i,destinationHeight:o,context:c,sourceTexture:this.createTexture(c,i,o,f?void 0:e),targetTexture:this.createTexture(c,i,o),originalTexture:f||this.createTexture(c,i,o,f?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},v=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,v),t.forEach(S=>{S&&S.applyTo(p)}),(function(S){const _=S.targetCanvas,x=_.width,E=_.height,b=S.destinationWidth,w=S.destinationHeight;x===b&&E===w||(_.width=b,_.height=w)})(p),this.copyGLTo2D(c,p),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(p.sourceTexture),c.deleteTexture(p.targetTexture),c.deleteFramebuffer(v),h.setTransform(1,0,0,1,0,0),p}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,i,o,a){const{NEAREST:l,TEXTURE_2D:c,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:p,TEXTURE_MAG_FILTER:v,TEXTURE_MIN_FILTER:S,TEXTURE_WRAP_S:_,TEXTURE_WRAP_T:x}=t,E=t.createTexture();return t.bindTexture(c,E),t.texParameteri(c,v,a||l),t.texParameteri(c,S,a||l),t.texParameteri(c,_,p),t.texParameteri(c,x,p),o?t.texImage2D(c,0,h,h,f,o):t.texImage2D(c,0,h,e,i,0,h,f,null),E}getCachedTexture(t,e,i){const{textureCache:o}=this;if(o[t])return o[t];{const a=this.createTexture(this.gl,e.width,e.height,e,i);return a&&(o[t]=a),a}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const i=t.canvas,o=e.targetCanvas,a=o.getContext("2d");if(!a)return;a.translate(0,o.height),a.scale(1,-1);const l=i.height-o.height;a.drawImage(i,0,l,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(t,e){const i=e.targetCanvas.getContext("2d"),o=e.destinationWidth,a=e.destinationHeight,l=o*a*4;if(!i)return;const c=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);t.readPixels(0,0,o,a,t.RGBA,t.UNSIGNED_BYTE,c);const f=new ImageData(h,o,a);i.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const o=t.getParameter(i.UNMASKED_RENDERER_WEBGL),a=t.getParameter(i.UNMASKED_VENDOR_WEBGL);o&&(e.renderer=o.toLowerCase()),a&&(e.vendor=a.toLowerCase())}return this.gpuInfo=e,e}}let Vd;function gU(){const{WebGLProbe:n}=ii();return n.queryWebGL(Ni()),Nt.enableGLFiltering&&n.isSupported(Nt.textureSize)?new GE({tileSize:Nt.textureSize}):new pU}function Fd(){return!Vd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Vd=gU()),Vd}const HE=["cropX","cropY"];class Cn extends Re{static getDefaults(){return{...super.getDefaults(),...Cn.ownDefaults}}constructor(t,e){super(),P(this,"_lastScaleX",1),P(this,"_lastScaleY",1),P(this,"_filterScalingX",1),P(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Cn.ownDefaults),this.setOptions(e),this.cacheKey=`texture${ds()}`,this.setElement(typeof t=="string"?(this.canvas&&Bn(this.canvas.getElement())||mr()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._element=t,this._originalElement=t,this._setWidthHeight(e),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Fd(!1);e instanceof GE&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&ii().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),{...super.toObject([...HE,...t]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,i=-this.width/2,o=-this.height/2;let a=[],l=[],c="",h="";if(!e)return[];if(this.hasCrop()){const f=ds();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+i+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",`xlink:href="${this.getSvgSrc(!0)}" x="${i-this.cropX}" y="${o-this.cropY}" width="${e.width||e.naturalWidth}" height="${e.height||e.naturalHeight}"${h}${c}></image>
`),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=[`	<rect x="${i}" y="${o}" width="${this.width}" height="${this.height}" style="${this.getSvgStyles()}" />
`],this.fill=f}return a=this.paintFirst!==me?a.concat(l,t):a.concat(t,l),a}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sc(t,{crossOrigin:e,signal:i}).then(o=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(o)})}toString(){return`#<Image: { src: "${this.getSrc()}" }>`}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),o=i.x,a=i.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||o>e&&a>e)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=a);const c=Nn(l),{width:h,height:f}=l;this._element=c,this._lastScaleX=t.scaleX=o,this._lastScaleY=t.scaleY=a,Fd().applyFilters([t],l,h,f,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture(`${this.cacheKey}_filtered`),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,i=e.naturalWidth||e.width,o=e.naturalHeight||e.height;if(this._element===this._originalElement){const a=Nn({width:i,height:o});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,o),this._lastScaleX=1,this._lastScaleY=1);Fd().applyFilters(t,this._originalElement,i,o,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const i=this._filterScalingX,o=this._filterScalingY,a=this.width,l=this.height,c=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=e.naturalWidth||e.width,p=e.naturalHeight||e.height,v=c*i,S=h*o,_=Math.min(a*i,f-v),x=Math.min(l*o,p-S),E=-a/2,b=-l/2,w=Math.min(a,f/i-c),D=Math.min(l,p/o-h);e&&t.drawImage(e,v,S,_,x,E,b,w,D)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=e||i.height}parsePreserveAspectRatioAttribute(){const t=RO(this.preserveAspectRatio||""),e=this.width,i=this.height,o={width:e,height:i};let a,l=this._element.width,c=this._element.height,h=1,f=1,p=0,v=0,S=0,_=0;return!t||t.alignX===Je&&t.alignY===Je?(h=e/l,f=i/c):(t.meetOrSlice==="meet"&&(h=f=PL(this._element,o),a=(e-l*h)/2,t.alignX==="Min"&&(p=-a),t.alignX==="Max"&&(p=a),a=(i-c*f)/2,t.alignY==="Min"&&(v=-a),t.alignY==="Max"&&(v=a)),t.meetOrSlice==="slice"&&(h=f=kL(this._element,o),a=l-e/h,t.alignX==="Mid"&&(S=a/2),t.alignX==="Max"&&(S=a),a=c-i/f,t.alignY==="Mid"&&(_=a/2),t.alignY==="Max"&&(_=a),l=e/h,c=i/f)),{width:l,height:c,scaleX:h,scaleY:f,offsetLeft:p,offsetTop:v,cropX:S,cropY:_}}static fromObject(t,e){let{filters:i,resizeFilter:o,src:a,crossOrigin:l,type:c,...h}=t;return Promise.all([sc(a,{...e,crossOrigin:l}),i&&Va(i,e),o?Va([o],e):[],Yc(h,e)]).then(f=>{let[p,v=[],[S],_={}]=f;return new this(p,{...h,src:a,filters:v,resizeFilter:S,..._})})}static fromURL(t){let{crossOrigin:e=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return sc(t,{crossOrigin:e,signal:i}).then(a=>new this(a,o))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const o=Ui(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(o["xlink:href"]||o.href,e,o).catch(a=>(fs("log","Unable to parse Image",a),null))}}P(Cn,"type","Image"),P(Cn,"cacheProperties",[...Li,...HE]),P(Cn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),P(Cn,"ATTRIBUTE_NAMES",[...vs,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),lt.setClass(Cn),lt.setSVGClass(Cn);$c(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const jc=n=>n.webgl!==void 0,wg="precision highp float",mU=`
    ${wg};
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`,yU=new RegExp(wg,"g");class fe{get type(){return this.constructor.type}constructor(){let{type:t,...e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return mU}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=ii();o!=="highp"&&(e=e.replace(yU,wg.replace("highp",o)));const a=t.createShader(t.VERTEX_SHADER),l=t.createShader(t.FRAGMENT_SHADER),c=t.createProgram();if(!a||!l||!c)throw new Qn("Vertex, fragment shader or program creation error");if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Qn(`Vertex shader compile error for ${this.type}: ${t.getShaderInfoLog(a)}`);if(t.shaderSource(l,e),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS))throw new Qn(`Fragment shader compile error for ${this.type}: ${t.getShaderInfoLog(l)}`);if(t.attachShader(c,a),t.attachShader(c,l),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS))throw new Qn(`Shader link error for "${this.type}" ${t.getProgramInfoLog(c)}`);const h=this.getUniformLocations(t,c)||{};return h.uStepW=t.getUniformLocation(c,"uStepW"),h.uStepH=t.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(t,c),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const i=this.constructor.uniformLocations,o={};for(let a=0;a<i.length;a++)o[i[a]]=t.getUniformLocation(e,i[a]);return o}sendAttributeData(t,e,i){const o=e.aPosition,a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const i=t.destinationWidth,o=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===o||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,i,o)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){jc(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:i}=t,o=Nn({width:e,height:i});t.helpLayer=o}}toObject(){const t=Object.keys(this.constructor.defaults||{});return{type:this.type,...t.reduce((e,i)=>(e[i]=this[i],e),{})}}toJSON(){return this.toObject()}static async fromObject(t,e){let{type:i,...o}=t;return new this(o)}}P(fe,"type","BaseFilter"),P(fe,"uniformLocations",[]);const vU={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Pu extends fe{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          ${vU[this.mode]}
        }
      }
      `}applyTo2d(t){let{imageData:{data:e}}=t;const i=new zt(this.color).getSource(),o=this.alpha,a=i[0]*o,l=i[1]*o,c=i[2]*o,h=1-o;for(let f=0;f<e.length;f+=4){const p=e[f],v=e[f+1],S=e[f+2];let _,x,E;switch(this.mode){case"multiply":_=p*a/255,x=v*l/255,E=S*c/255;break;case"screen":_=255-(255-p)*(255-a)/255,x=255-(255-v)*(255-l)/255,E=255-(255-S)*(255-c)/255;break;case"add":_=p+a,x=v+l,E=S+c;break;case"difference":_=Math.abs(p-a),x=Math.abs(v-l),E=Math.abs(S-c);break;case"subtract":_=p-a,x=v-l,E=S-c;break;case"darken":_=Math.min(p,a),x=Math.min(v,l),E=Math.min(S,c);break;case"lighten":_=Math.max(p,a),x=Math.max(v,l),E=Math.max(S,c);break;case"overlay":_=a<128?2*p*a/255:255-2*(255-p)*(255-a)/255,x=l<128?2*v*l/255:255-2*(255-v)*(255-l)/255,E=c<128?2*S*c/255:255-2*(255-S)*(255-c)/255;break;case"exclusion":_=a+p-2*a*p/255,x=l+v-2*l*v/255,E=c+S-2*c*S/255;break;case"tint":_=a+p*h,x=l+v*h,E=c+S*h}e[f]=_,e[f+1]=x,e[f+2]=E}}sendUniformData(t,e){const i=new zt(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)}}P(Pu,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),P(Pu,"type","BlendColor"),P(Pu,"uniformLocations",["uColor"]),lt.setClass(Pu);const SU={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `};class ku extends fe{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return SU[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]}applyTo2d(t){let{imageData:{data:e,width:i,height:o},filterBackend:{resources:a}}=t;const l=this.image;a.blendImage||(a.blendImage=Ni());const c=a.blendImage,h=c.getContext("2d");c.width!==i||c.height!==o?(c.width=i,c.height=o):h.clearRect(0,0,i,o),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,i,o);const f=h.getImageData(0,0,i,o).data;for(let p=0;p<e.length;p+=4){const v=e[p],S=e[p+1],_=e[p+2],x=e[p+3],E=f[p],b=f[p+1],w=f[p+2],D=f[p+3];switch(this.mode){case"multiply":e[p]=v*E/255,e[p+1]=S*b/255,e[p+2]=_*w/255,e[p+3]=x*D/255;break;case"mask":e[p+3]=D}}}sendUniformData(t,e){const i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)}toObject(){return{...super.toObject(),image:this.image&&this.image.toObject()}}static async fromObject(t,e){let{type:i,image:o,...a}=t;return Cn.fromObject(o,e).then(l=>new this({...a,image:l}))}}P(ku,"type","BlendImage"),P(ku,"defaults",{mode:"multiply",alpha:1}),P(ku,"uniformLocations",["uTransformMatrix","uImage"]),lt.setClass(ku);class Ou extends fe{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){jc(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:i,height:o}}=t;this.aspectRatio=i/o,this.horizontal=!0;let a=this.getBlurValue()*i;const l=new Uint8ClampedArray(e),c=15,h=4*i;for(let f=0;f<e.length;f+=4){let p=0,v=0,S=0,_=0,x=0;const E=f-f%h,b=E+h;for(let w=-14;w<c;w++){const D=w/c,R=4*Math.floor(a*D),k=1-Math.abs(D);let L=f+R;L<E?L=E:L>b&&(L=b);const Y=e[L+3]*k;p+=e[L]*Y,v+=e[L+1]*Y,S+=e[L+2]*Y,_+=Y,x+=k}l[f]=p/_,l[f+1]=v/_,l[f+2]=S/_,l[f+3]=_/x}this.horizontal=!1,a=this.getBlurValue()*o;for(let f=0;f<l.length;f+=4){let p=0,v=0,S=0,_=0,x=0;const E=f%h,b=l.length-h+E;for(let w=-14;w<c;w++){const D=w/c,R=Math.floor(a*D)*h,k=1-Math.abs(D);let L=f+R;L<E?L=E:L>b&&(L=b);const Y=l[L+3]*k;p+=l[L]*Y,v+=l[L+1]*Y,S+=l[L+2]*Y,_+=Y,x+=k}e[f]=p/_,e[f+1]=v/_,e[f+2]=S/_,e[f+3]=_/x}}sendUniformData(t,e){const i=this.chooseRightDelta();t.uniform2fv(e.uDelta,i)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:i}=this;return e?i>1&&(t=1/i):i<1&&(t=i),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}P(Ou,"type","Blur"),P(Ou,"defaults",{blur:0}),P(Ou,"uniformLocations",["uDelta"]),lt.setClass(Ou);class Lu extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.round(255*this.brightness);for(let o=0;o<e.length;o+=4)e[o]+=i,e[o+1]+=i,e[o+2]+=i}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}P(Lu,"type","Brightness"),P(Lu,"defaults",{brightness:0}),P(Lu,"uniformLocations",["uBrightness"]),lt.setClass(Lu);const zE={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class jo extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,i=this.matrix,o=this.colorsOnly;for(let a=0;a<e.length;a+=4){const l=e[a],c=e[a+1],h=e[a+2];if(e[a]=l*i[0]+c*i[1]+h*i[2]+255*i[4],e[a+1]=l*i[5]+c*i[6]+h*i[7]+255*i[9],e[a+2]=l*i[10]+c*i[11]+h*i[12]+255*i[14],!o){const f=e[a+3];e[a]+=f*i[3],e[a+1]+=f*i[8],e[a+2]+=f*i[13],e[a+3]=l*i[15]+c*i[16]+h*i[17]+f*i[18]+255*i[19]}}}sendUniformData(t,e){const i=this.matrix,o=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],a=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,o),t.uniform4fv(e.uConstants,a)}toObject(){return{...super.toObject(),matrix:[...this.matrix]}}}function so(n,t){var e;const i=(P(e=class extends jo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),P(e,"defaults",{colorsOnly:!1,matrix:t}),e);return lt.setClass(i,n),i}P(jo,"type","ColorMatrix"),P(jo,"defaults",zE),P(jo,"uniformLocations",["uColorMatrix","uConstants"]),lt.setClass(jo);so("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);so("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);so("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);so("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);so("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);so("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);so("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class D_ extends fe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){jc(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(i=>lt.getClass(i.type).fromObject(i,e))).then(i=>new this({subFilters:i}))}}P(D_,"type","Composed"),lt.setClass(D_);class Uu extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.floor(255*this.contrast),o=259*(i+255)/(255*(259-i));for(let a=0;a<e.length;a+=4)e[a]=o*(e[a]-128)+128,e[a+1]=o*(e[a+1]-128)+128,e[a+2]=o*(e[a+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}P(Uu,"type","Contrast"),P(Uu,"defaults",{contrast:0}),P(Uu,"uniformLocations",["uContrast"]),lt.setClass(Uu);const TU={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Vu extends fe{getCacheKey(){return`${this.type}_${Math.sqrt(this.matrix.length)}_${this.opaque?1:0}`}getFragmentSource(){return TU[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,i=e.data,o=this.matrix,a=Math.round(Math.sqrt(o.length)),l=Math.floor(a/2),c=e.width,h=e.height,f=t.ctx.createImageData(c,h),p=f.data,v=this.opaque?1:0;let S,_,x,E,b,w,D,R,k,L,Y,G,V;for(Y=0;Y<h;Y++)for(L=0;L<c;L++){for(b=4*(Y*c+L),S=0,_=0,x=0,E=0,V=0;V<a;V++)for(G=0;G<a;G++)D=Y+V-l,w=L+G-l,D<0||D>=h||w<0||w>=c||(R=4*(D*c+w),k=o[V*a+G],S+=i[R]*k,_+=i[R+1]*k,x+=i[R+2]*k,v||(E+=i[R+3]*k));p[b]=S,p[b+1]=_,p[b+2]=x,p[b+3]=v?i[b+3]:E}t.imageData=f}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return{...super.toObject(),opaque:this.opaque,matrix:[...this.matrix]}}}P(Vu,"type","Convolute"),P(Vu,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),P(Vu,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),lt.setClass(Vu);const qE="Gamma";class Fu extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.gamma,o=1/i[0],a=1/i[1],l=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let h=0;h<256;h++)c.r[h]=255*Math.pow(h/255,o),c.g[h]=255*Math.pow(h/255,a),c.b[h]=255*Math.pow(h/255,l);for(let h=0;h<e.length;h+=4)e[h]=c.r[e[h]],e[h+1]=c.g[e[h+1]],e[h+2]=c.b[e[h+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:qE,gamma:this.gamma.concat()}}}P(Fu,"type",qE),P(Fu,"defaults",{gamma:[1,1,1]}),P(Fu,"uniformLocations",["uGamma"]),lt.setClass(Fu);const _U={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Bu extends fe{applyTo2d(t){let{imageData:{data:e}}=t;for(let i,o=0;o<e.length;o+=4){const a=e[o],l=e[o+1],c=e[o+2];switch(this.mode){case"average":i=(a+l+c)/3;break;case"lightness":i=(Math.min(a,l,c)+Math.max(a,l,c))/2;break;case"luminosity":i=.21*a+.72*l+.07*c}e[o+2]=e[o+1]=e[o]=i}}getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return _U[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}P(Bu,"type","Grayscale"),P(Bu,"defaults",{mode:"average"}),P(Bu,"uniformLocations",["uMode"]),lt.setClass(Bu);const CU={...zE,rotation:0};class Bd extends jo{calculateMatrix(){const t=this.rotation*Math.PI,e=Di(t),i=Ri(t),o=1/3,a=Math.sqrt(o)*i,l=1-e;this.matrix=[e+l/3,o*l-a,o*l+a,0,0,o*l+a,e+o*l,o*l-a,0,0,o*l-a,o*l+a,e+o*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}P(Bd,"type","HueRotation"),P(Bd,"defaults",CU),lt.setClass(Bd);class Gu extends fe{applyTo2d(t){let{imageData:{data:e}}=t;for(let i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2],this.alpha&&(e[i+3]=255-e[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}P(Gu,"type","Invert"),P(Gu,"defaults",{alpha:!1,invert:!0}),P(Gu,"uniformLocations",["uInvert","uAlpha"]),lt.setClass(Gu);class Hu extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.noise;for(let o=0;o<e.length;o+=4){const a=(.5-Math.random())*i;e[o]+=a,e[o+1]+=a,e[o+2]+=a}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}P(Hu,"type","Noise"),P(Hu,"defaults",{noise:0}),P(Hu,"uniformLocations",["uNoise","uSeed"]),lt.setClass(Hu);class zu extends fe{applyTo2d(t){let{imageData:{data:e,width:i,height:o}}=t;for(let a=0;a<o;a+=this.blocksize)for(let l=0;l<i;l+=this.blocksize){const c=4*a*i+4*l,h=e[c],f=e[c+1],p=e[c+2],v=e[c+3];for(let S=a;S<Math.min(a+this.blocksize,o);S++)for(let _=l;_<Math.min(l+this.blocksize,i);_++){const x=4*S*i+4*_;e[x]=h,e[x+1]=f,e[x+2]=p,e[x+3]=v}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}P(zu,"type","Pixelate"),P(zu,"defaults",{blocksize:4}),P(zu,"uniformLocations",["uBlocksize"]),lt.setClass(zu);class qu extends fe{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=255*this.distance,o=new zt(this.color).getSource(),a=[o[0]-i,o[1]-i,o[2]-i],l=[o[0]+i,o[1]+i,o[2]+i];for(let c=0;c<e.length;c+=4){const h=e[c],f=e[c+1],p=e[c+2];h>a[0]&&f>a[1]&&p>a[2]&&h<l[0]&&f<l[1]&&p<l[2]&&(e[c+3]=0)}}sendUniformData(t,e){const i=new zt(this.color).getSource(),o=this.distance,a=[0+i[0]/255-o,0+i[1]/255-o,0+i[2]/255-o,1],l=[i[0]/255+o,i[1]/255+o,i[2]/255+o,1];t.uniform4fv(e.uLow,a),t.uniform4fv(e.uHigh,l)}}P(qu,"type","RemoveColor"),P(qu,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),P(qu,"uniformLocations",["uLow","uHigh"]),lt.setClass(qu);class Yu extends fe{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return`${this.type}_${t}`}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),o=new Array(i);for(let a=1;a<=i;a++)o[a-1]=t(a*e);return o}generateShader(t){const e=new Array(t);for(let i=1;i<=t;i++)e[i-1]=`${i}.0 * uDelta`;return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[${t}];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        ${e.map((i,o)=>`
              color += texture2D(uTexture, vTexCoord + ${i}) * uTaps[${o}] + texture2D(uTexture, vTexCoord - ${i}) * uTaps[${o}];
              sum += 2.0 * uTaps[${o}];
            `).join(`
`)}
        gl_FragColor = color / sum;
      }
    `}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){jc(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const i=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(i)/i}}applyTo2d(t){const e=t.imageData,i=this.scaleX,o=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/o;const a=e.width,l=e.height,c=Math.round(a*i),h=Math.round(l*o);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(t,a,l,c,h):this.resizeType==="hermite"?this.hermiteFastResize(t,a,l,c,h):this.resizeType==="bilinear"?this.bilinearFiltering(t,a,l,c,h):this.resizeType==="lanczos"?this.lanczosResize(t,a,l,c,h):new ImageData(c,h),t.imageData=f}sliceByTwo(t,e,i,o,a){const l=t.imageData,c=.5;let h=!1,f=!1,p=e*c,v=i*c;const S=t.filterBackend.resources;let _=0,x=0;const E=e;let b=0;S.sliceByTwo||(S.sliceByTwo=Ni());const w=S.sliceByTwo;(w.width<1.5*e||w.height<i)&&(w.width=1.5*e,w.height=i);const D=w.getContext("2d");for(D.clearRect(0,0,1.5*e,i),D.putImageData(l,0,0),o=Math.floor(o),a=Math.floor(a);!h||!f;)e=p,i=v,o<Math.floor(p*c)?p=Math.floor(p*c):(p=o,h=!0),a<Math.floor(v*c)?v=Math.floor(v*c):(v=a,f=!0),D.drawImage(w,_,x,e,i,E,b,p,v),_=E,x=b,b+=v;return D.getImageData(_,x,o,a)}lanczosResize(t,e,i,o,a){const l=t.imageData.data,c=t.ctx.createImageData(o,a),h=c.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,v=this.rcpScaleY,S=2/this.rcpScaleX,_=2/this.rcpScaleY,x=Math.ceil(p*this.lanczosLobes/2),E=Math.ceil(v*this.lanczosLobes/2),b={},w={x:0,y:0},D={x:0,y:0};return(function R(k){let L,Y,G,V,$,et,st,at,it,ct,Et;for(w.x=(k+.5)*p,D.x=Math.floor(w.x),L=0;L<a;L++){for(w.y=(L+.5)*v,D.y=Math.floor(w.y),$=0,et=0,st=0,at=0,it=0,Y=D.x-x;Y<=D.x+x;Y++)if(!(Y<0||Y>=e)){ct=Math.floor(1e3*Math.abs(Y-w.x)),b[ct]||(b[ct]={});for(let H=D.y-E;H<=D.y+E;H++)H<0||H>=i||(Et=Math.floor(1e3*Math.abs(H-w.y)),b[ct][Et]||(b[ct][Et]=f(Math.sqrt(Math.pow(ct*S,2)+Math.pow(Et*_,2))/1e3)),G=b[ct][Et],G>0&&(V=4*(H*e+Y),$+=G,et+=G*l[V],st+=G*l[V+1],at+=G*l[V+2],it+=G*l[V+3]))}V=4*(L*o+k),h[V]=et/$,h[V+1]=st/$,h[V+2]=at/$,h[V+3]=it/$}return++k<o?R(k):c})(0)}bilinearFiltering(t,e,i,o,a){let l,c,h,f,p,v,S,_,x,E,b,w,D,R=0;const k=this.rcpScaleX,L=this.rcpScaleY,Y=4*(e-1),G=t.imageData.data,V=t.ctx.createImageData(o,a),$=V.data;for(S=0;S<a;S++)for(_=0;_<o;_++)for(p=Math.floor(k*_),v=Math.floor(L*S),x=k*_-p,E=L*S-v,D=4*(v*e+p),b=0;b<4;b++)l=G[D+b],c=G[D+4+b],h=G[D+Y+b],f=G[D+Y+4+b],w=l*(1-x)*(1-E)+c*x*(1-E)+h*E*(1-x)+f*x*E,$[R++]=w;return V}hermiteFastResize(t,e,i,o,a){const l=this.rcpScaleX,c=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(c/2),p=t.imageData.data,v=t.ctx.createImageData(o,a),S=v.data;for(let _=0;_<a;_++)for(let x=0;x<o;x++){const E=4*(x+_*o);let b=0,w=0,D=0,R=0,k=0,L=0,Y=0;const G=(_+.5)*c;for(let V=Math.floor(_*c);V<(_+1)*c;V++){const $=Math.abs(G-(V+.5))/f,et=(x+.5)*l,st=$*$;for(let at=Math.floor(x*l);at<(x+1)*l;at++){let it=Math.abs(et-(at+.5))/h;const ct=Math.sqrt(st+it*it);ct>1&&ct<-1||(b=2*ct*ct*ct-3*ct*ct+1,b>0&&(it=4*(at+V*e),Y+=b*p[it+3],D+=b,p[it+3]<255&&(b=b*p[it+3]/250),R+=b*p[it],k+=b*p[it+1],L+=b*p[it+2],w+=b))}}S[E]=R/w,S[E+1]=k/w,S[E+2]=L/w,S[E+3]=Y/D}return v}}P(Yu,"type","Resize"),P(Yu,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),P(Yu,"uniformLocations",["uDelta","uTaps"]),lt.setClass(Yu);class Xu extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.saturation;for(let o=0;o<e.length;o+=4){const a=e[o],l=e[o+1],c=e[o+2],h=Math.max(a,l,c);e[o]+=h!==a?(h-a)*i:0,e[o+1]+=h!==l?(h-l)*i:0,e[o+2]+=h!==c?(h-c)*i:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}P(Xu,"type","Saturation"),P(Xu,"defaults",{saturation:0}),P(Xu,"uniformLocations",["uSaturation"]),lt.setClass(Xu);class $u extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.vibrance;for(let o=0;o<e.length;o+=4){const a=e[o],l=e[o+1],c=e[o+2],h=Math.max(a,l,c),f=(a+l+c)/3,p=2*Math.abs(h-f)/255*i;e[o]+=h!==a?(h-a)*p:0,e[o+1]+=h!==l?(h-l)*p:0,e[o+2]+=h!==c?(h-c)*p:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}P($u,"type","Vibrance"),P($u,"defaults",{vibrance:0}),P($u,"uniformLocations",["uVibrance"]),lt.setClass($u);const Mg=Z.createContext({});function Dg(n){const t=Z.useRef(null);return t.current===null&&(t.current=n()),t.current}const Rg=typeof window<"u",YE=Rg?Z.useLayoutEffect:Z.useEffect,Qc=Z.createContext(null);function Ng(n,t){n.indexOf(t)===-1&&n.push(t)}function Ig(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Ii=(n,t,e)=>e>t?t:e<n?n:e;let Pg=()=>{};const Pi={},XE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function $E(n){return typeof n=="object"&&n!==null}const WE=n=>/^0[^.\s]+$/u.test(n);function kg(n){let t;return()=>(t===void 0&&(t=n()),t)}const Mn=n=>n,xU=(n,t)=>e=>t(n(e)),ja=(...n)=>n.reduce(xU),za=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class Og{constructor(){this.subscriptions=[]}add(t){return Ng(this.subscriptions,t),()=>Ig(this.subscriptions,t)}notify(t,e,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,e,i);else for(let a=0;a<o;a++){const l=this.subscriptions[a];l&&l(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ei=n=>n*1e3,An=n=>n/1e3;function JE(n,t){return t?n*(1e3/t):0}const KE=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,EU=1e-7,bU=12;function AU(n,t,e,i,o){let a,l,c=0;do l=t+(e-t)/2,a=KE(l,i,o)-n,a>0?e=l:t=l;while(Math.abs(a)>EU&&++c<bU);return l}function Qa(n,t,e,i){if(n===t&&e===i)return Mn;const o=a=>AU(a,0,1,n,e);return a=>a===0||a===1?a:KE(o(a),t,i)}const jE=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,QE=n=>t=>1-n(1-t),ZE=Qa(.33,1.53,.69,.99),Lg=QE(ZE),tb=jE(Lg),eb=n=>(n*=2)<1?.5*Lg(n):.5*(2-Math.pow(2,-10*(n-1))),Ug=n=>1-Math.sin(Math.acos(n)),nb=QE(Ug),ib=jE(Ug),wU=Qa(.42,0,1,1),MU=Qa(0,0,.58,1),sb=Qa(.42,0,.58,1),DU=n=>Array.isArray(n)&&typeof n[0]!="number",ob=n=>Array.isArray(n)&&typeof n[0]=="number",RU={linear:Mn,easeIn:wU,easeInOut:sb,easeOut:MU,circIn:Ug,circInOut:ib,circOut:nb,backIn:Lg,backInOut:tb,backOut:ZE,anticipate:eb},NU=n=>typeof n=="string",R_=n=>{if(ob(n)){Pg(n.length===4);const[t,e,i,o]=n;return Qa(t,e,i,o)}else if(NU(n))return RU[n];return n},Wu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function IU(n,t){let e=new Set,i=new Set,o=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(f.schedule(p),n()),p(c)}const f={schedule:(p,v=!1,S=!1)=>{const x=S&&o?e:i;return v&&l.add(p),x.has(p)||x.add(p),p},cancel:p=>{i.delete(p),l.delete(p)},process:p=>{if(c=p,o){a=!0;return}o=!0,[e,i]=[i,e],e.forEach(h),e.clear(),o=!1,a&&(a=!1,f.process(p))}};return f}const PU=40;function rb(n,t){let e=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=Wu.reduce((R,k)=>(R[k]=IU(a),R),{}),{setup:c,read:h,resolveKeyframes:f,preUpdate:p,update:v,preRender:S,render:_,postRender:x}=l,E=()=>{const R=Pi.useManualTiming?o.timestamp:performance.now();e=!1,Pi.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(R-o.timestamp,PU),1)),o.timestamp=R,o.isProcessing=!0,c.process(o),h.process(o),f.process(o),p.process(o),v.process(o),S.process(o),_.process(o),x.process(o),o.isProcessing=!1,e&&t&&(i=!1,n(E))},b=()=>{e=!0,i=!0,o.isProcessing||n(E)};return{schedule:Wu.reduce((R,k)=>{const L=l[k];return R[k]=(Y,G=!1,V=!1)=>(e||b(),L.schedule(Y,G,V)),R},{}),cancel:R=>{for(let k=0;k<Wu.length;k++)l[Wu[k]].cancel(R)},state:o,steps:l}}const{schedule:Jt,cancel:gs,state:Ee,steps:Gd}=rb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mn,!0);let rc;function kU(){rc=void 0}const $e={now:()=>(rc===void 0&&$e.set(Ee.isProcessing||Pi.useManualTiming?Ee.timestamp:performance.now()),rc),set:n=>{rc=n,queueMicrotask(kU)}},ab=n=>t=>typeof t=="string"&&t.startsWith(n),lb=ab("--"),OU=ab("var(--"),Vg=n=>OU(n)?LU.test(n.split("/*")[0].trim()):!1,LU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xr={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},qa={...xr,transform:n=>Ii(0,1,n)},Ju={...xr,default:1},Pa=n=>Math.round(n*1e5)/1e5,Fg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UU(n){return n==null}const VU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bg=(n,t)=>e=>!!(typeof e=="string"&&VU.test(e)&&e.startsWith(n)||t&&!UU(e)&&Object.prototype.hasOwnProperty.call(e,t)),ub=(n,t,e)=>i=>{if(typeof i!="string")return i;const[o,a,l,c]=i.match(Fg);return{[n]:parseFloat(o),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},FU=n=>Ii(0,255,n),Hd={...xr,transform:n=>Math.round(FU(n))},Ks={test:Bg("rgb","red"),parse:ub("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+Hd.transform(n)+", "+Hd.transform(t)+", "+Hd.transform(e)+", "+Pa(qa.transform(i))+")"};function BU(n){let t="",e="",i="",o="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),o=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),o=n.substring(4,5),t+=t,e+=e,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Dp={test:Bg("#"),parse:BU,transform:Ks.transform},Za=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),hs=Za("deg"),ni=Za("%"),pt=Za("px"),GU=Za("vh"),HU=Za("vw"),N_={...ni,parse:n=>ni.parse(n)/100,transform:n=>ni.transform(n*100)},Qo={test:Bg("hsl","hue"),parse:ub("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+ni.transform(Pa(t))+", "+ni.transform(Pa(e))+", "+Pa(qa.transform(i))+")"},ue={test:n=>Ks.test(n)||Dp.test(n)||Qo.test(n),parse:n=>Ks.test(n)?Ks.parse(n):Qo.test(n)?Qo.parse(n):Dp.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ks.transform(n):Qo.transform(n),getAnimatableNone:n=>{const t=ue.parse(n);return t.alpha=0,ue.transform(t)}},zU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qU(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(Fg))==null?void 0:t.length)||0)+(((e=n.match(zU))==null?void 0:e.length)||0)>0}const cb="number",hb="color",YU="var",XU="var(",I_="${}",$U=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ya(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},o=[];let a=0;const c=t.replace($U,h=>(ue.test(h)?(i.color.push(a),o.push(hb),e.push(ue.parse(h))):h.startsWith(XU)?(i.var.push(a),o.push(YU),e.push(h)):(i.number.push(a),o.push(cb),e.push(parseFloat(h))),++a,I_)).split(I_);return{values:e,split:c,indexes:i,types:o}}function fb(n){return Ya(n).values}function db(n){const{split:t,types:e}=Ya(n),i=t.length;return o=>{let a="";for(let l=0;l<i;l++)if(a+=t[l],o[l]!==void 0){const c=e[l];c===cb?a+=Pa(o[l]):c===hb?a+=ue.transform(o[l]):a+=o[l]}return a}}const WU=n=>typeof n=="number"?0:ue.test(n)?ue.getAnimatableNone(n):n;function JU(n){const t=fb(n);return db(n)(t.map(WU))}const ms={test:qU,parse:fb,createTransformer:db,getAnimatableNone:JU};function zd(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function KU({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let o=0,a=0,l=0;if(!t)o=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;o=zd(h,c,n+1/3),a=zd(h,c,n),l=zd(h,c,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Mc(n,t){return e=>e>0?t:n}const jt=(n,t,e)=>n+(t-n)*e,qd=(n,t,e)=>{const i=n*n,o=e*(t*t-i)+i;return o<0?0:Math.sqrt(o)},jU=[Dp,Ks,Qo],QU=n=>jU.find(t=>t.test(n));function P_(n){const t=QU(n);if(!t)return!1;let e=t.parse(n);return t===Qo&&(e=KU(e)),e}const k_=(n,t)=>{const e=P_(n),i=P_(t);if(!e||!i)return Mc(n,t);const o={...e};return a=>(o.red=qd(e.red,i.red,a),o.green=qd(e.green,i.green,a),o.blue=qd(e.blue,i.blue,a),o.alpha=jt(e.alpha,i.alpha,a),Ks.transform(o))},Rp=new Set(["none","hidden"]);function ZU(n,t){return Rp.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function tV(n,t){return e=>jt(n,t,e)}function Gg(n){return typeof n=="number"?tV:typeof n=="string"?Vg(n)?Mc:ue.test(n)?k_:iV:Array.isArray(n)?pb:typeof n=="object"?ue.test(n)?k_:eV:Mc}function pb(n,t){const e=[...n],i=e.length,o=n.map((a,l)=>Gg(a)(a,t[l]));return a=>{for(let l=0;l<i;l++)e[l]=o[l](a);return e}}function eV(n,t){const e={...n,...t},i={};for(const o in e)n[o]!==void 0&&t[o]!==void 0&&(i[o]=Gg(n[o])(n[o],t[o]));return o=>{for(const a in i)e[a]=i[a](o);return e}}function nV(n,t){const e=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const a=t.types[o],l=n.indexes[a][i[a]],c=n.values[l]??0;e[o]=c,i[a]++}return e}const iV=(n,t)=>{const e=ms.createTransformer(t),i=Ya(n),o=Ya(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Rp.has(n)&&!o.values.length||Rp.has(t)&&!i.values.length?ZU(n,t):ja(pb(nV(i,o),o.values),e):Mc(n,t)};function gb(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?jt(n,t,e):Gg(n)(n,t)}const sV=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Jt.update(t,e),stop:()=>gs(t),now:()=>Ee.isProcessing?Ee.timestamp:$e.now()}},mb=(n,t,e=10)=>{let i="";const o=Math.max(Math.round(t/e),2);for(let a=0;a<o;a++)i+=Math.round(n(a/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Dc=2e4;function Hg(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<Dc;)t+=e,i=n.next(t);return t>=Dc?1/0:t}function oV(n,t=100,e){const i=e({...n,keyframes:[0,t]}),o=Math.min(Hg(i),Dc);return{type:"keyframes",ease:a=>i.next(o*a).value/t,duration:An(o)}}const rV=5;function yb(n,t,e){const i=Math.max(t-rV,0);return JE(e-n(i),t-i)}const te={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yd=.001;function aV({duration:n=te.duration,bounce:t=te.bounce,velocity:e=te.velocity,mass:i=te.mass}){let o,a,l=1-t;l=Ii(te.minDamping,te.maxDamping,l),n=Ii(te.minDuration,te.maxDuration,An(n)),l<1?(o=f=>{const p=f*l,v=p*n,S=p-e,_=Np(f,l),x=Math.exp(-v);return Yd-S/_*x},a=f=>{const v=f*l*n,S=v*e+e,_=Math.pow(l,2)*Math.pow(f,2)*n,x=Math.exp(-v),E=Np(Math.pow(f,2),l);return(-o(f)+Yd>0?-1:1)*((S-_)*x)/E}):(o=f=>{const p=Math.exp(-f*n),v=(f-e)*n+1;return-Yd+p*v},a=f=>{const p=Math.exp(-f*n),v=(e-f)*(n*n);return p*v});const c=5/n,h=uV(o,a,c);if(n=ei(n),isNaN(h))return{stiffness:te.stiffness,damping:te.damping,duration:n};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const lV=12;function uV(n,t,e){let i=e;for(let o=1;o<lV;o++)i=i-n(i)/t(i);return i}function Np(n,t){return n*Math.sqrt(1-t*t)}const cV=["duration","bounce"],hV=["stiffness","damping","mass"];function O_(n,t){return t.some(e=>n[e]!==void 0)}function fV(n){let t={velocity:te.velocity,stiffness:te.stiffness,damping:te.damping,mass:te.mass,isResolvedFromDuration:!1,...n};if(!O_(n,hV)&&O_(n,cV))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),o=i*i,a=2*Ii(.05,1,1-(n.bounce||0))*Math.sqrt(o);t={...t,mass:te.mass,stiffness:o,damping:a}}else{const e=aV(n);t={...t,...e,mass:te.mass},t.isResolvedFromDuration=!0}return t}function Rc(n=te.visualDuration,t=te.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:o}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:f,mass:p,duration:v,velocity:S,isResolvedFromDuration:_}=fV({...e,velocity:-An(e.velocity||0)}),x=S||0,E=f/(2*Math.sqrt(h*p)),b=l-a,w=An(Math.sqrt(h/p)),D=Math.abs(b)<5;i||(i=D?te.restSpeed.granular:te.restSpeed.default),o||(o=D?te.restDelta.granular:te.restDelta.default);let R;if(E<1){const L=Np(w,E);R=Y=>{const G=Math.exp(-E*w*Y);return l-G*((x+E*w*b)/L*Math.sin(L*Y)+b*Math.cos(L*Y))}}else if(E===1)R=L=>l-Math.exp(-w*L)*(b+(x+w*b)*L);else{const L=w*Math.sqrt(E*E-1);R=Y=>{const G=Math.exp(-E*w*Y),V=Math.min(L*Y,300);return l-G*((x+E*w*b)*Math.sinh(V)+L*b*Math.cosh(V))/L}}const k={calculatedDuration:_&&v||null,next:L=>{const Y=R(L);if(_)c.done=L>=v;else{let G=L===0?x:0;E<1&&(G=L===0?ei(x):yb(R,L,Y));const V=Math.abs(G)<=i,$=Math.abs(l-Y)<=o;c.done=V&&$}return c.value=c.done?l:Y,c},toString:()=>{const L=Math.min(Hg(k),Dc),Y=mb(G=>k.next(L*G).value,L,30);return L+"ms "+Y},toTransition:()=>{}};return k}Rc.applyToOptions=n=>{const t=oV(n,100,Rc);return n.ease=t.ease,n.duration=ei(t.duration),n.type="keyframes",n};function Ip({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:f=.5,restSpeed:p}){const v=n[0],S={done:!1,value:v},_=V=>c!==void 0&&V<c||h!==void 0&&V>h,x=V=>c===void 0?h:h===void 0||Math.abs(c-V)<Math.abs(h-V)?c:h;let E=e*t;const b=v+E,w=l===void 0?b:l(b);w!==b&&(E=w-v);const D=V=>-E*Math.exp(-V/i),R=V=>w+D(V),k=V=>{const $=D(V),et=R(V);S.done=Math.abs($)<=f,S.value=S.done?w:et};let L,Y;const G=V=>{_(S.value)&&(L=V,Y=Rc({keyframes:[S.value,x(S.value)],velocity:yb(R,V,S.value),damping:o,stiffness:a,restDelta:f,restSpeed:p}))};return G(0),{calculatedDuration:null,next:V=>{let $=!1;return!Y&&L===void 0&&($=!0,k(V),G(V)),L!==void 0&&V>=L?Y.next(V-L):(!$&&k(V),S)}}}function dV(n,t,e){const i=[],o=e||Pi.mix||gb,a=n.length-1;for(let l=0;l<a;l++){let c=o(n[l],n[l+1]);if(t){const h=Array.isArray(t)?t[l]||Mn:t;c=ja(h,c)}i.push(c)}return i}function pV(n,t,{clamp:e=!0,ease:i,mixer:o}={}){const a=n.length;if(Pg(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),t=[...t].reverse());const c=dV(t,i,o),h=c.length,f=p=>{if(l&&p<n[0])return t[0];let v=0;if(h>1)for(;v<n.length-2&&!(p<n[v+1]);v++);const S=za(n[v],n[v+1],p);return c[v](S)};return e?p=>f(Ii(n[0],n[a-1],p)):f}function gV(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const o=za(0,t,i);n.push(jt(e,1,o))}}function mV(n){const t=[0];return gV(t,n.length-1),t}function yV(n,t){return n.map(e=>e*t)}function vV(n,t){return n.map(()=>t||sb).splice(0,n.length-1)}function ka({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const o=DU(i)?i.map(R_):R_(i),a={done:!1,value:t[0]},l=yV(e&&e.length===t.length?e:mV(t),n),c=pV(l,t,{ease:Array.isArray(o)?o:vV(t,o)});return{calculatedDuration:n,next:h=>(a.value=c(h),a.done=h>=n,a)}}const SV=n=>n!==null;function zg(n,{repeat:t,repeatType:e="loop"},i,o=1){const a=n.filter(SV),c=o<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||i===void 0?a[c]:i}const TV={decay:Ip,inertia:Ip,tween:ka,keyframes:ka,spring:Rc};function vb(n){typeof n.type=="string"&&(n.type=TV[n.type])}class qg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const _V=n=>n/100;class Yg extends qg{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:e}=this.options;e&&e.updatedAt!==$e.now()&&this.tick($e.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;vb(t);const{type:e=ka,repeat:i=0,repeatDelay:o=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||ka;h!==ka&&typeof c[0]!="number"&&(this.mixKeyframes=ja(_V,gb(c[0],c[1])),c=[0,100]);const f=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Hg(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:o,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:v,repeatType:S,repeatDelay:_,type:x,onUpdate:E,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const w=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?w<0:w>o;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let R=this.currentTime,k=i;if(v){const V=Math.min(this.currentTime,o)/c;let $=Math.floor(V),et=V%1;!et&&V>=1&&(et=1),et===1&&$--,$=Math.min($,v+1),!!($%2)&&(S==="reverse"?(et=1-et,_&&(et-=_/c)):S==="mirror"&&(k=l)),R=Ii(0,1,et)*c}const L=D?{done:!1,value:p[0]}:k.next(R);a&&(L.value=a(L.value));let{done:Y}=L;!D&&h!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return G&&x!==Ip&&(L.value=zg(p,this.options,b,this.speed)),E&&E(L.value),G&&this.finish(),L}then(t,e){return this.finished.then(t,e)}get duration(){return An(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+An(t)}get time(){return An(this.currentTime)}set time(t){var e;t=ei(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime($e.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=An(this.currentTime))}play(){var o,a;if(this.isStopped)return;const{driver:t=sV,startTime:e}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(a=(o=this.options).onPlay)==null||a.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($e.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function CV(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const js=n=>n*180/Math.PI,Pp=n=>{const t=js(Math.atan2(n[1],n[0]));return kp(t)},xV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Pp,rotateZ:Pp,skewX:n=>js(Math.atan(n[1])),skewY:n=>js(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},kp=n=>(n=n%360,n<0&&(n+=360),n),L_=Pp,U_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),V_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),EV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:U_,scaleY:V_,scale:n=>(U_(n)+V_(n))/2,rotateX:n=>kp(js(Math.atan2(n[6],n[5]))),rotateY:n=>kp(js(Math.atan2(-n[2],n[0]))),rotateZ:L_,rotate:L_,skewX:n=>js(Math.atan(n[4])),skewY:n=>js(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Op(n){return n.includes("scale")?1:0}function Lp(n,t){if(!n||n==="none")return Op(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(e)i=EV,o=e;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=xV,o=c}if(!o)return Op(t);const a=i[t],l=o[1].split(",").map(AV);return typeof a=="function"?a(l):l[a]}const bV=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Lp(e,t)};function AV(n){return parseFloat(n.trim())}const Er=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],br=new Set(Er),F_=n=>n===xr||n===pt,wV=new Set(["x","y","z"]),MV=Er.filter(n=>!wV.has(n));function DV(n){const t=[];return MV.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Zs={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Lp(t,"x"),y:(n,{transform:t})=>Lp(t,"y")};Zs.translateX=Zs.x;Zs.translateY=Zs.y;const to=new Set;let Up=!1,Vp=!1,Fp=!1;function Sb(){if(Vp){const n=Array.from(to).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const o=DV(i);o.length&&(e.set(i,o),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=e.get(i);o&&o.forEach(([a,l])=>{var c;(c=i.getValue(a))==null||c.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Vp=!1,Up=!1,to.forEach(n=>n.complete(Fp)),to.clear()}function Tb(){to.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Vp=!0)})}function RV(){Fp=!0,Tb(),Sb(),Fp=!1}class Xg{constructor(t,e,i,o,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=o,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(to.add(this),Up||(Up=!0,Jt.read(Tb),Jt.resolveKeyframes(Sb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:o}=this;if(t[0]===null){const a=o==null?void 0:o.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(i&&e){const c=i.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),o&&a===void 0&&o.set(t[0])}CV(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),to.delete(this)}cancel(){this.state==="scheduled"&&(to.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NV=n=>n.startsWith("--");function IV(n,t,e){NV(t)?n.style.setProperty(t,e):n.style[t]=e}const PV=kg(()=>window.ScrollTimeline!==void 0),kV={};function OV(n,t){const e=kg(n);return()=>kV[t]??e()}const _b=OV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ma=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,B_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ma([0,.65,.55,1]),circOut:Ma([.55,0,1,.45]),backIn:Ma([.31,.01,.66,-.59]),backOut:Ma([.33,1.53,.69,.99])};function Cb(n,t){if(n)return typeof n=="function"?_b()?mb(n,t):"ease-out":ob(n)?Ma(n):Array.isArray(n)?n.map(e=>Cb(e,t)||B_.easeOut):B_[n]}function LV(n,t,e,{delay:i=0,duration:o=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},f=void 0){const p={[t]:e};h&&(p.offset=h);const v=Cb(c,o);Array.isArray(v)&&(p.easing=v);const S={delay:i,duration:o,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(S.pseudoElement=f),n.animate(p,S)}function xb(n){return typeof n=="function"&&"applyToOptions"in n}function UV({type:n,...t}){return xb(n)&&_b()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class VV extends qg{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:o,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,Pg(typeof t.type!="string");const f=UV(t);this.animation=LV(e,i,o,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=zg(o,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):IV(e,i,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return An(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+An(t)}get time(){return An(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ei(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&PV()?(this.animation.timeline=t,Mn):e(this)}}const Eb={anticipate:eb,backInOut:tb,circInOut:ib};function FV(n){return n in Eb}function BV(n){typeof n.ease=="string"&&FV(n.ease)&&(n.ease=Eb[n.ease])}const G_=10;class GV extends VV{constructor(t){BV(t),vb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:o,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new Yg({...l,autoplay:!1}),h=ei(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-G_).value,c.sample(h).value,G_),c.stop()}}const H_=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ms.test(n)||n==="0")&&!n.startsWith("url("));function HV(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function zV(n,t,e,i){const o=n[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const a=n[n.length-1],l=H_(o,t),c=H_(a,t);return!l||!c?!1:HV(n)||(e==="spring"||xb(e))&&i}function Bp(n){n.duration=0,n.type="keyframes"}const qV=new Set(["opacity","clipPath","filter","transform"]),YV=kg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XV(n){var p;const{motionValue:t,name:e,repeatDelay:i,repeatType:o,damping:a,type:l}=n;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return YV()&&e&&qV.has(e)&&(e!=="transform"||!f)&&!h&&!i&&o!=="mirror"&&a!==0&&l!=="inertia"}const $V=40;class WV extends qg{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:f,element:p,...v}){var x;super(),this.stop=()=>{var E,b;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=$e.now();const S={autoplay:t,delay:e,type:i,repeat:o,repeatDelay:a,repeatType:l,name:h,motionValue:f,element:p,...v},_=(p==null?void 0:p.KeyframeResolver)||Xg;this.keyframeResolver=new _(c,(E,b,w)=>this.onKeyframesResolved(E,b,S,!w),h,f,p),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,e,i,o){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:f,onUpdate:p}=i;this.resolvedAt=$e.now(),zV(t,a,l,c)||((Pi.instantAnimations||!h)&&(p==null||p(zg(t,i,e))),t[0]=t[t.length-1],Bp(i),i.repeat=0);const S={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>$V?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},_=!f&&XV(S)?new GV({...S,element:S.motionValue.owner.current}):new Yg(S);_.finished.then(()=>this.notifyFinished()).catch(Mn),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),RV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const JV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KV(n){const t=JV.exec(n);if(!t)return[,];const[,e,i,o]=t;return[`--${e??i}`,o]}function bb(n,t,e=1){const[i,o]=KV(n);if(!i)return;const a=window.getComputedStyle(t).getPropertyValue(i);if(a){const l=a.trim();return XE(l)?parseFloat(l):l}return Vg(o)?bb(o,t,e+1):o}function $g(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const Ab=new Set(["width","height","top","left","right","bottom",...Er]),jV={test:n=>n==="auto",parse:n=>n},wb=n=>t=>t.test(n),Mb=[xr,pt,ni,hs,HU,GU,jV],z_=n=>Mb.find(wb(n));function QV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||WE(n):!0}const ZV=new Set(["brightness","contrast","saturate","opacity"]);function tF(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(Fg)||[];if(!i)return n;const o=e.replace(i,"");let a=ZV.has(t)?1:0;return i!==e&&(a*=100),t+"("+a+o+")"}const eF=/\b([a-z-]*)\(.*?\)/gu,Gp={...ms,getAnimatableNone:n=>{const t=n.match(eF);return t?t.map(tF).join(" "):n}},q_={...xr,transform:Math.round},nF={rotate:hs,rotateX:hs,rotateY:hs,rotateZ:hs,scale:Ju,scaleX:Ju,scaleY:Ju,scaleZ:Ju,skew:hs,skewX:hs,skewY:hs,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:qa,originX:N_,originY:N_,originZ:pt},Wg={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...nF,zIndex:q_,fillOpacity:qa,strokeOpacity:qa,numOctaves:q_},iF={...Wg,color:ue,backgroundColor:ue,outlineColor:ue,fill:ue,stroke:ue,borderColor:ue,borderTopColor:ue,borderRightColor:ue,borderBottomColor:ue,borderLeftColor:ue,filter:Gp,WebkitFilter:Gp},Db=n=>iF[n];function Rb(n,t){let e=Db(n);return e!==Gp&&(e=ms),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const sF=new Set(["auto","none","0"]);function oF(n,t,e){let i=0,o;for(;i<n.length&&!o;){const a=n[i];typeof a=="string"&&!sF.has(a)&&Ya(a).values.length&&(o=n[i]),i++}if(o&&e)for(const a of t)n[a]=Rb(e,o)}class rF extends Xg{constructor(t,e,i,o,a){super(t,e,i,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let f=t[h];if(typeof f=="string"&&(f=f.trim(),Vg(f))){const p=bb(f,e.current);p!==void 0&&(t[h]=p),h===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Ab.has(i)||t.length!==2)return;const[o,a]=t,l=z_(o),c=z_(a);if(l!==c)if(F_(l)&&F_(c))for(let h=0;h<t.length;h++){const f=t[h];typeof f=="string"&&(t[h]=parseFloat(f))}else Zs[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||QV(t[o]))&&i.push(o);i.length&&oF(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zs[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const o=e[e.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){var c;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(e);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=Zs[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,f])=>{t.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function aF(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const o=(e==null?void 0:e[n])??i.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}const Nb=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Ib(n){return $E(n)&&"offsetHeight"in n}const Y_=30,lF=n=>!isNaN(parseFloat(n));class uF{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var a;const o=$e.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=$e.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lF(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Og);const i=this.events[t].add(e);return t==="change"?()=>{i(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$e.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Y_)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Y_);return JE(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hr(n,t){return new uF(n,t)}const{schedule:Jg}=rb(queueMicrotask,!1),Vn={x:!1,y:!1};function Pb(){return Vn.x||Vn.y}function cF(n){return n==="x"||n==="y"?Vn[n]?null:(Vn[n]=!0,()=>{Vn[n]=!1}):Vn.x||Vn.y?null:(Vn.x=Vn.y=!0,()=>{Vn.x=Vn.y=!1})}function kb(n,t){const e=aF(n),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[e,o,()=>i.abort()]}function X_(n){return!(n.pointerType==="touch"||Pb())}function hF(n,t,e={}){const[i,o,a]=kb(n,e),l=c=>{if(!X_(c))return;const{target:h}=c,f=t(h,c);if(typeof f!="function"||!h)return;const p=v=>{X_(v)&&(f(v),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,o)};return i.forEach(c=>{c.addEventListener("pointerenter",l,o)}),a}const Ob=(n,t)=>t?n===t?!0:Ob(n,t.parentElement):!1,Kg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,fF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dF(n){return fF.has(n.tagName)||n.tabIndex!==-1}const ac=new WeakSet;function $_(n){return t=>{t.key==="Enter"&&n(t)}}function Xd(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const pF=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=$_(()=>{if(ac.has(e))return;Xd(e,"down");const o=$_(()=>{Xd(e,"up")}),a=()=>Xd(e,"cancel");e.addEventListener("keyup",o,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function W_(n){return Kg(n)&&!Pb()}function gF(n,t,e={}){const[i,o,a]=kb(n,e),l=c=>{const h=c.currentTarget;if(!W_(c))return;ac.add(h);const f=t(h,c),p=(_,x)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",S),ac.has(h)&&ac.delete(h),W_(_)&&typeof f=="function"&&f(_,{success:x})},v=_=>{p(_,h===window||h===document||e.useGlobalTarget||Ob(h,_.target))},S=_=>{p(_,!1)};window.addEventListener("pointerup",v,o),window.addEventListener("pointercancel",S,o)};return i.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,o),Ib(c)&&(c.addEventListener("focus",f=>pF(f,o)),!dF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function Lb(n){return $E(n)&&"ownerSVGElement"in n}function mF(n){return Lb(n)&&n.tagName==="svg"}const De=n=>!!(n&&n.getVelocity),yF=[...Mb,ue,ms],vF=n=>yF.find(wb(n)),jg=Z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function J_(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function SF(...n){return t=>{let e=!1;const i=n.map(o=>{const a=J_(o,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let o=0;o<i.length;o++){const a=i[o];typeof a=="function"?a():J_(n[o],null)}}}}function TF(...n){return Z.useCallback(SF(...n),n)}class _F extends Z.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,o=Ib(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CF({children:n,isPresent:t,anchorX:e,root:i}){const o=Z.useId(),a=Z.useRef(null),l=Z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=Z.useContext(jg),h=TF(a,n==null?void 0:n.ref);return Z.useInsertionEffect(()=>{const{width:f,height:p,top:v,left:S,right:_}=l.current;if(t||!a.current||!f||!p)return;const x=e==="left"?`left: ${S}`:`right: ${_}`;a.current.dataset.motionPopId=o;const E=document.createElement("style");c&&(E.nonce=c);const b=i??document.head;return b.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${x}px !important;
            top: ${v}px !important;
          }
        `),()=>{b.contains(E)&&b.removeChild(E)}},[t]),O.jsx(_F,{isPresent:t,childRef:a,sizeRef:l,children:Z.cloneElement(n,{ref:h})})}const xF=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:o,presenceAffectsLayout:a,mode:l,anchorX:c,root:h})=>{const f=Dg(EF),p=Z.useId();let v=!0,S=Z.useMemo(()=>(v=!1,{id:p,initial:t,isPresent:e,custom:o,onExitComplete:_=>{f.set(_,!0);for(const x of f.values())if(!x)return;i&&i()},register:_=>(f.set(_,!1),()=>f.delete(_))}),[e,f,i]);return a&&v&&(S={...S}),Z.useMemo(()=>{f.forEach((_,x)=>f.set(x,!1))},[e]),Z.useEffect(()=>{!e&&!f.size&&i&&i()},[e]),l==="popLayout"&&(n=O.jsx(CF,{isPresent:e,anchorX:c,root:h,children:n})),O.jsx(Qc.Provider,{value:S,children:n})};function EF(){return new Map}function Ub(n=!0){const t=Z.useContext(Qc);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:o}=t,a=Z.useId();Z.useEffect(()=>{if(n)return o(a)},[n]);const l=Z.useCallback(()=>n&&i&&i(a),[a,i,n]);return!e&&i?[!1,l]:[!0]}const Ku=n=>n.key||"";function K_(n){const t=[];return Z.Children.forEach(n,e=>{Z.isValidElement(e)&&t.push(e)}),t}const Vb=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:h})=>{const[f,p]=Ub(l),v=Z.useMemo(()=>K_(n),[n]),S=l&&!f?[]:v.map(Ku),_=Z.useRef(!0),x=Z.useRef(v),E=Dg(()=>new Map),[b,w]=Z.useState(v),[D,R]=Z.useState(v);YE(()=>{_.current=!1,x.current=v;for(let Y=0;Y<D.length;Y++){const G=Ku(D[Y]);S.includes(G)?E.delete(G):E.get(G)!==!0&&E.set(G,!1)}},[D,S.length,S.join("-")]);const k=[];if(v!==b){let Y=[...v];for(let G=0;G<D.length;G++){const V=D[G],$=Ku(V);S.includes($)||(Y.splice(G,0,V),k.push(V))}return a==="wait"&&k.length&&(Y=k),R(K_(Y)),w(v),null}const{forceRender:L}=Z.useContext(Mg);return O.jsx(O.Fragment,{children:D.map(Y=>{const G=Ku(Y),V=l&&!f?!1:v===D||S.includes(G),$=()=>{if(E.has(G))E.set(G,!0);else return;let et=!0;E.forEach(st=>{st||(et=!1)}),et&&(L==null||L(),R(x.current),l&&(p==null||p()),i&&i())};return O.jsx(xF,{isPresent:V,initial:!_.current||e?void 0:!1,custom:t,presenceAffectsLayout:o,mode:a,root:h,onExitComplete:V?void 0:$,anchorX:c,children:Y},G)})})},Fb=Z.createContext({strict:!1}),j_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fr={};for(const n in j_)fr[n]={isEnabled:t=>j_[n].some(e=>!!t[e])};function bF(n){for(const t in n)fr[t]={...fr[t],...n[t]}}const AF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nc(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||AF.has(n)}let Bb=n=>!Nc(n);function wF(n){typeof n=="function"&&(Bb=t=>t.startsWith("on")?!Nc(t):n(t))}try{wF(require("@emotion/is-prop-valid").default)}catch{}function MF(n,t,e){const i={};for(const o in n)o==="values"&&typeof n.values=="object"||(Bb(o)||e===!0&&Nc(o)||!t&&!Nc(o)||n.draggable&&o.startsWith("onDrag"))&&(i[o]=n[o]);return i}const Zc=Z.createContext({});function th(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Xa(n){return typeof n=="string"||Array.isArray(n)}const Qg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zg=["initial",...Qg];function eh(n){return th(n.animate)||Zg.some(t=>Xa(n[t]))}function Gb(n){return!!(eh(n)||n.variants)}function DF(n,t){if(eh(n)){const{initial:e,animate:i}=n;return{initial:e===!1||Xa(e)?e:void 0,animate:Xa(i)?i:void 0}}return n.inherit!==!1?t:{}}function RF(n){const{initial:t,animate:e}=DF(n,Z.useContext(Zc));return Z.useMemo(()=>({initial:t,animate:e}),[Q_(t),Q_(e)])}function Q_(n){return Array.isArray(n)?n.join(" "):n}function Z_(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ea={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(pt.test(n))n=parseFloat(n);else return n;const e=Z_(n,t.target.x),i=Z_(n,t.target.y);return`${e}% ${i}%`}},NF={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,o=ms.parse(n);if(o.length>5)return i;const a=ms.createTransformer(n),l=typeof o[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;o[0+l]/=c,o[1+l]/=h;const f=jt(c,h,.5);return typeof o[2+l]=="number"&&(o[2+l]/=f),typeof o[3+l]=="number"&&(o[3+l]/=f),a(o)}},Hp={borderRadius:{...Ea,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ea,borderTopRightRadius:Ea,borderBottomLeftRadius:Ea,borderBottomRightRadius:Ea,boxShadow:NF};function Hb(n,{layout:t,layoutId:e}){return br.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!Hp[n]||n==="opacity")}const IF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PF=Er.length;function kF(n,t,e){let i="",o=!0;for(let a=0;a<PF;a++){const l=Er[a],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const f=Nb(c,Wg[l]);if(!h){o=!1;const p=IF[l]||l;i+=`${p}(${f}) `}e&&(t[l]=f)}}return i=i.trim(),e?i=e(t,o?"":i):o&&(i="none"),i}function tm(n,t,e){const{style:i,vars:o,transformOrigin:a}=n;let l=!1,c=!1;for(const h in t){const f=t[h];if(br.has(h)){l=!0;continue}else if(lb(h)){o[h]=f;continue}else{const p=Nb(f,Wg[h]);h.startsWith("origin")?(c=!0,a[h]=p):i[h]=p}}if(t.transform||(l||e?i.transform=kF(t,n.transform,e):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${h} ${f} ${p}`}}const em=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zb(n,t,e){for(const i in t)!De(t[i])&&!Hb(i,e)&&(n[i]=t[i])}function OF({transformTemplate:n},t){return Z.useMemo(()=>{const e=em();return tm(e,t,n),Object.assign({},e.vars,e.style)},[t])}function LF(n,t){const e=n.style||{},i={};return zb(i,e,n),Object.assign(i,OF(n,t)),i}function UF(n,t){const e={},i=LF(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const VF={offset:"stroke-dashoffset",array:"stroke-dasharray"},FF={offset:"strokeDashoffset",array:"strokeDasharray"};function BF(n,t,e=1,i=0,o=!0){n.pathLength=1;const a=o?VF:FF;n[a.offset]=pt.transform(-i);const l=pt.transform(t),c=pt.transform(e);n[a.array]=`${l} ${c}`}function qb(n,{attrX:t,attrY:e,attrScale:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f,p){if(tm(n,c,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:S}=n;v.transform&&(S.transform=v.transform,delete v.transform),(S.transform||v.transformOrigin)&&(S.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),S.transform&&(S.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),i!==void 0&&(v.scale=i),o!==void 0&&BF(v,o,a,l,!1)}const Yb=()=>({...em(),attrs:{}}),Xb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function GF(n,t,e,i){const o=Z.useMemo(()=>{const a=Yb();return qb(a,t,Xb(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[t]);if(n.style){const a={};zb(a,n.style,n),o.style={...a,...o.style}}return o}const HF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nm(n){return typeof n!="string"||n.includes("-")?!1:!!(HF.indexOf(n)>-1||/[A-Z]/u.test(n))}function zF(n,t,e,{latestValues:i},o,a=!1){const c=(nm(n)?GF:UF)(t,i,o,n),h=MF(t,typeof n=="string",a),f=n!==Z.Fragment?{...h,...c,ref:e}:{},{children:p}=t,v=Z.useMemo(()=>De(p)?p.get():p,[p]);return Z.createElement(n,{...f,children:v})}function tC(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function im(n,t,e,i){if(typeof t=="function"){const[o,a]=tC(i);t=t(e!==void 0?e:n.custom,o,a)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[o,a]=tC(i);t=t(e!==void 0?e:n.custom,o,a)}return t}function lc(n){return De(n)?n.get():n}function qF({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,o){return{latestValues:YF(e,i,o,n),renderState:t()}}function YF(n,t,e,i){const o={},a=i(n,{});for(const S in a)o[S]=lc(a[S]);let{initial:l,animate:c}=n;const h=eh(n),f=Gb(n);t&&f&&!h&&n.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!th(v)){const S=Array.isArray(v)?v:[v];for(let _=0;_<S.length;_++){const x=im(n,S[_]);if(x){const{transitionEnd:E,transition:b,...w}=x;for(const D in w){let R=w[D];if(Array.isArray(R)){const k=p?R.length-1:0;R=R[k]}R!==null&&(o[D]=R)}for(const D in E)o[D]=E[D]}}}return o}const $b=n=>(t,e)=>{const i=Z.useContext(Zc),o=Z.useContext(Qc),a=()=>qF(n,t,i,o);return e?a():Dg(a)};function sm(n,t,e){var a;const{style:i}=n,o={};for(const l in i)(De(i[l])||t.style&&De(t.style[l])||Hb(l,n)||((a=e==null?void 0:e.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(o[l]=i[l]);return o}const XF=$b({scrapeMotionValuesFromProps:sm,createRenderState:em});function Wb(n,t,e){const i=sm(n,t,e);for(const o in n)if(De(n[o])||De(t[o])){const a=Er.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[a]=n[o]}return i}const $F=$b({scrapeMotionValuesFromProps:Wb,createRenderState:Yb}),WF=Symbol.for("motionComponentSymbol");function Zo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function JF(n,t,e){return Z.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Zo(e)&&(e.current=i))},[t])}const om=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),KF="framerAppearId",Jb="data-"+om(KF),Kb=Z.createContext({});function jF(n,t,e,i,o){var E,b;const{visualElement:a}=Z.useContext(Zc),l=Z.useContext(Fb),c=Z.useContext(Qc),h=Z.useContext(jg).reducedMotion,f=Z.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,v=Z.useContext(Kb);p&&!p.projection&&o&&(p.type==="html"||p.type==="svg")&&QF(f.current,e,o,v);const S=Z.useRef(!1);Z.useInsertionEffect(()=>{p&&S.current&&p.update(e,c)});const _=e[Jb],x=Z.useRef(!!_&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,_))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,_)));return YE(()=>{p&&(S.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),x.current&&p.animationState&&p.animationState.animateChanges())}),Z.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,_)}),x.current=!1),p.enteringChildren=void 0)}),p}function QF(n,t,e,i){const{layoutId:o,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:jb(n.parent)),n.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!l||c&&Zo(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:h,layoutRoot:f})}function jb(n){if(n)return n.options.allowProjection!==!1?n.projection:jb(n.parent)}function $d(n,{forwardMotionProps:t=!1}={},e,i){e&&bF(e);const o=nm(n)?$F:XF;function a(c,h){let f;const p={...Z.useContext(jg),...c,layoutId:ZF(c)},{isStatic:v}=p,S=RF(c),_=o(c,v);if(!v&&Rg){t5();const x=e5(p);f=x.MeasureLayout,S.visualElement=jF(n,_,p,i,x.ProjectionNode)}return O.jsxs(Zc.Provider,{value:S,children:[f&&S.visualElement?O.jsx(f,{visualElement:S.visualElement,...p}):null,zF(n,c,JF(_,S.visualElement,h),_,v,t)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=Z.forwardRef(a);return l[WF]=n,l}function ZF({layoutId:n}){const t=Z.useContext(Mg).id;return t&&n!==void 0?t+"-"+n:n}function t5(n,t){Z.useContext(Fb).strict}function e5(n){const{drag:t,layout:e}=fr;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function n5(n,t){if(typeof Proxy>"u")return $d;const e=new Map,i=(a,l)=>$d(a,l,n,t),o=(a,l)=>i(a,l);return new Proxy(o,{get:(a,l)=>l==="create"?i:(e.has(l)||e.set(l,$d(l,void 0,n,t)),e.get(l))})}function Qb({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function i5({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function s5(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Wd(n){return n===void 0||n===1}function zp({scale:n,scaleX:t,scaleY:e}){return!Wd(n)||!Wd(t)||!Wd(e)}function Hs(n){return zp(n)||Zb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Zb(n){return eC(n.x)||eC(n.y)}function eC(n){return n&&n!=="0%"}function Ic(n,t,e){const i=n-e,o=t*i;return e+o}function nC(n,t,e,i,o){return o!==void 0&&(n=Ic(n,o,i)),Ic(n,e,i)+t}function qp(n,t=0,e=1,i,o){n.min=nC(n.min,t,e,i,o),n.max=nC(n.max,t,e,i,o)}function tA(n,{x:t,y:e}){qp(n.x,t.translate,t.scale,t.originPoint),qp(n.y,e.translate,e.scale,e.originPoint)}const iC=.999999999999,sC=1.0000000000001;function o5(n,t,e,i=!1){const o=e.length;if(!o)return;t.x=t.y=1;let a,l;for(let c=0;c<o;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&er(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,tA(n,l)),i&&Hs(a.latestValues)&&er(n,a.latestValues))}t.x<sC&&t.x>iC&&(t.x=1),t.y<sC&&t.y>iC&&(t.y=1)}function tr(n,t){n.min=n.min+t,n.max=n.max+t}function oC(n,t,e,i,o=.5){const a=jt(n.min,n.max,o);qp(n,t,e,a,i)}function er(n,t){oC(n.x,t.x,t.scaleX,t.scale,t.originX),oC(n.y,t.y,t.scaleY,t.scale,t.originY)}function eA(n,t){return Qb(s5(n.getBoundingClientRect(),t))}function r5(n,t,e){const i=eA(n,e),{scroll:o}=t;return o&&(tr(i.x,o.offset.x),tr(i.y,o.offset.y)),i}const rC=()=>({translate:0,scale:1,origin:0,originPoint:0}),nr=()=>({x:rC(),y:rC()}),aC=()=>({min:0,max:0}),he=()=>({x:aC(),y:aC()}),Yp={current:null},nA={current:!1};function a5(){if(nA.current=!0,!!Rg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Yp.current=n.matches;n.addEventListener("change",t),t()}else Yp.current=!1}const l5=new WeakMap;function u5(n,t,e){for(const i in t){const o=t[i],a=e[i];if(De(o))n.addValue(i,o);else if(De(a))n.addValue(i,hr(o,{owner:n}));else if(a!==o)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(o):l.hasAnimated||l.set(o)}else{const l=n.getStaticValue(i);n.addValue(i,hr(l!==void 0?l:o,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const lC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c5{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=$e.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Jt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=eh(e),this.isVariantNode=Gb(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const S in v){const _=v[S];h[S]!==void 0&&De(_)&&_.set(h[S])}}mount(t){var e;this.current=t,l5.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),nA.current||a5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yp.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),gs(this.notifyUpdate),gs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=br.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{o(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in fr){const e=fr[t];if(!e)continue;const{isEnabled:i,Feature:o}=e;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):he()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<lC.length;i++){const o=lC[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,l=t[a];l&&(this.propEventSubscriptions[o]=this.on(o,l))}this.prevMotionValues=u5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=hr(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(XE(i)||WE(i))?i=parseFloat(i):!vF(i)&&ms.test(e)&&(i=Rb(t,e)),this.setBaseTarget(t,De(i)?i.get():i)),De(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var a;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const l=im(this.props,e,(a=this.presenceContext)==null?void 0:a.custom);l&&(i=l[t])}if(e&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!De(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Og),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Jg.render(this.render)}}class iA extends c5{constructor(){super(...arguments),this.KeyframeResolver=rF}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;De(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function sA(n,{style:t,vars:e},i,o){const a=n.style;let l;for(l in t)a[l]=t[l];o==null||o.applyProjectionStyles(a,i);for(l in e)a.setProperty(l,e[l])}function h5(n){return window.getComputedStyle(n)}class f5 extends iA{constructor(){super(...arguments),this.type="html",this.renderInstance=sA}readValueFromInstance(t,e){var i;if(br.has(e))return(i=this.projection)!=null&&i.isProjecting?Op(e):bV(t,e);{const o=h5(t),a=(lb(e)?o.getPropertyValue(e):o[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return eA(t,e)}build(t,e,i){tm(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return sm(t,e,i)}}const oA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function d5(n,t,e,i){sA(n,t,void 0,i);for(const o in t.attrs)n.setAttribute(oA.has(o)?o:om(o),t.attrs[o])}class p5 extends iA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=he}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(br.has(e)){const i=Db(e);return i&&i.default||0}return e=oA.has(e)?e:om(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return Wb(t,e,i)}build(t,e,i){qb(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,o){d5(t,e,i,o)}mount(t){this.isSVGTag=Xb(t.tagName),super.mount(t)}}const g5=(n,t)=>nm(n)?new p5(t):new f5(t,{allowProjection:n!==Z.Fragment});function ar(n,t,e){const i=n.getProps();return im(i,t,e!==void 0?e:i.custom,n)}const Xp=n=>Array.isArray(n);function m5(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,hr(e))}function y5(n){return Xp(n)?n[n.length-1]||0:n}function v5(n,t){const e=ar(n,t);let{transitionEnd:i={},transition:o={},...a}=e||{};a={...a,...i};for(const l in a){const c=y5(a[l]);m5(n,l,c)}}function S5(n){return!!(De(n)&&n.add)}function $p(n,t){const e=n.getValue("willChange");if(S5(e))return e.add(t);if(!e&&Pi.WillChange){const i=new Pi.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function rA(n){return n.props[Jb]}const T5=n=>n!==null;function _5(n,{repeat:t,repeatType:e="loop"},i){const o=n.filter(T5),a=t&&e!=="loop"&&t%2===1?0:o.length-1;return o[a]}const C5={type:"spring",stiffness:500,damping:25,restSpeed:10},x5=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),E5={type:"keyframes",duration:.8},b5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A5=(n,{keyframes:t})=>t.length>2?E5:br.has(n)?n.startsWith("scale")?x5(t[1]):C5:b5;function w5({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const rm=(n,t,e,i={},o,a)=>l=>{const c=$g(i,n)||{},h=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-ei(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:S=>{t.set(S),c.onUpdate&&c.onUpdate(S)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:t,element:a?void 0:o};w5(c)||Object.assign(p,A5(n,p)),p.duration&&(p.duration=ei(p.duration)),p.repeatDelay&&(p.repeatDelay=ei(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Bp(p),p.delay===0&&(v=!0)),(Pi.instantAnimations||Pi.skipAnimations)&&(v=!0,Bp(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,v&&!a&&t.get()!==void 0){const S=_5(p.keyframes,c);if(S!==void 0){Jt.update(()=>{p.onUpdate(S),p.onComplete()});return}}return c.isSync?new Yg(p):new WV(p)};function M5({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function aA(n,t,{delay:e=0,transitionOverride:i,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...c}=t;i&&(a=i);const h=[],f=o&&n.animationState&&n.animationState.getState()[o];for(const p in c){const v=n.getValue(p,n.latestValues[p]??null),S=c[p];if(S===void 0||f&&M5(f,p))continue;const _={delay:e,...$g(a||{},p)},x=v.get();if(x!==void 0&&!v.isAnimating&&!Array.isArray(S)&&S===x&&!_.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const w=rA(n);if(w){const D=window.MotionHandoffAnimation(w,p,Jt);D!==null&&(_.startTime=D,E=!0)}}$p(n,p),v.start(rm(p,v,S,n.shouldReduceMotion&&Ab.has(p)?{type:!1}:_,n,E));const b=v.animation;b&&h.push(b)}return l&&Promise.all(h).then(()=>{Jt.update(()=>{l&&v5(n,l)})}),h}function lA(n,t,e,i=0,o=1){const a=Array.from(n).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),l=n.size,c=(l-1)*i;return typeof e=="function"?e(a,l):o===1?a*i:c-a*i}function Wp(n,t,e={}){var h;const i=ar(n,t,e.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(o=e.transitionOverride);const a=i?()=>Promise.all(aA(n,i,e)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:S}=o;return D5(n,t,f,p,v,S,e)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,p]=c==="beforeChildren"?[a,l]:[l,a];return f().then(()=>p())}else return Promise.all([a(),l(e.delay)])}function D5(n,t,e=0,i=0,o=0,a=1,l){const c=[];for(const h of n.variantChildren)h.notify("AnimationStart",t),c.push(Wp(h,t,{...l,delay:e+(typeof i=="function"?0:i)+lA(n.variantChildren,h,i,o,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(c)}function R5(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(a=>Wp(n,a,e));i=Promise.all(o)}else if(typeof t=="string")i=Wp(n,t,e);else{const o=typeof t=="function"?ar(n,t,e.custom):t;i=Promise.all(aA(n,o,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function uA(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const N5=Zg.length;function cA(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?cA(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<N5;e++){const i=Zg[e],o=n.props[i];(Xa(o)||o===!1)&&(t[i]=o)}return t}const I5=[...Qg].reverse(),P5=Qg.length;function k5(n){return t=>Promise.all(t.map(({animation:e,options:i})=>R5(n,e,i)))}function O5(n){let t=k5(n),e=uC(),i=!0;const o=h=>(f,p)=>{var S;const v=ar(n,p,h==="exit"?(S=n.presenceContext)==null?void 0:S.custom:void 0);if(v){const{transition:_,transitionEnd:x,...E}=v;f={...f,...E,...x}}return f};function a(h){t=h(n)}function l(h){const{props:f}=n,p=cA(n.parent)||{},v=[],S=new Set;let _={},x=1/0;for(let b=0;b<P5;b++){const w=I5[b],D=e[w],R=f[w]!==void 0?f[w]:p[w],k=Xa(R),L=w===h?D.isActive:null;L===!1&&(x=b);let Y=R===p[w]&&R!==f[w]&&k;if(Y&&i&&n.manuallyAnimateOnMount&&(Y=!1),D.protectedKeys={..._},!D.isActive&&L===null||!R&&!D.prevProp||th(R)||typeof R=="boolean")continue;const G=L5(D.prevProp,R);let V=G||w===h&&D.isActive&&!Y&&k||b>x&&k,$=!1;const et=Array.isArray(R)?R:[R];let st=et.reduce(o(w),{});L===!1&&(st={});const{prevResolvedValues:at={}}=D,it={...at,...st},ct=Q=>{V=!0,S.has(Q)&&($=!0,S.delete(Q)),D.needsAnimating[Q]=!0;const tt=n.getValue(Q);tt&&(tt.liveStyle=!1)};for(const Q in it){const tt=st[Q],gt=at[Q];if(_.hasOwnProperty(Q))continue;let St=!1;Xp(tt)&&Xp(gt)?St=!uA(tt,gt):St=tt!==gt,St?tt!=null?ct(Q):S.add(Q):tt!==void 0&&S.has(Q)?ct(Q):D.protectedKeys[Q]=!0}D.prevProp=R,D.prevResolvedValues=st,D.isActive&&(_={..._,...st}),i&&n.blockInitialAnimation&&(V=!1);const Et=Y&&G;V&&(!Et||$)&&v.push(...et.map(Q=>{const tt={type:w};if(typeof Q=="string"&&i&&!Et&&n.manuallyAnimateOnMount&&n.parent){const{parent:gt}=n,St=ar(gt,Q);if(gt.enteringChildren&&St){const{delayChildren:I}=St.transition||{};tt.delay=lA(gt.enteringChildren,n,I)}}return{animation:Q,options:tt}}))}if(S.size){const b={};if(typeof f.initial!="boolean"){const w=ar(n,Array.isArray(f.initial)?f.initial[0]:f.initial);w&&w.transition&&(b.transition=w.transition)}S.forEach(w=>{const D=n.getBaseTarget(w),R=n.getValue(w);R&&(R.liveStyle=!0),b[w]=D??null}),v.push({animation:b})}let E=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),i=!1,E?t(v):Promise.resolve()}function c(h,f){var v;if(e[h].isActive===f)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(S=>{var _;return(_=S.animationState)==null?void 0:_.setActive(h,f)}),e[h].isActive=f;const p=l(h);for(const S in e)e[S].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=uC()}}}function L5(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!uA(t,n):!1}function Bs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uC(){return{animate:Bs(!0),whileInView:Bs(),whileHover:Bs(),whileTap:Bs(),whileDrag:Bs(),whileFocus:Bs(),exit:Bs()}}class Ss{constructor(t){this.isMounted=!1,this.node=t}update(){}}class U5 extends Ss{constructor(t){super(t),t.animationState||(t.animationState=O5(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();th(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let V5=0;class F5 extends Ss{constructor(){super(...arguments),this.id=V5++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);e&&!t&&o.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const B5={animation:{Feature:U5},exit:{Feature:F5}};function $a(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function tl(n){return{point:{x:n.pageX,y:n.pageY}}}const G5=n=>t=>Kg(t)&&n(t,tl(t));function Oa(n,t,e,i){return $a(n,t,G5(e),i)}const hA=1e-4,H5=1-hA,z5=1+hA,fA=.01,q5=0-fA,Y5=0+fA;function Oe(n){return n.max-n.min}function X5(n,t,e){return Math.abs(n-t)<=e}function cC(n,t,e,i=.5){n.origin=i,n.originPoint=jt(t.min,t.max,n.origin),n.scale=Oe(e)/Oe(t),n.translate=jt(e.min,e.max,n.origin)-n.originPoint,(n.scale>=H5&&n.scale<=z5||isNaN(n.scale))&&(n.scale=1),(n.translate>=q5&&n.translate<=Y5||isNaN(n.translate))&&(n.translate=0)}function La(n,t,e,i){cC(n.x,t.x,e.x,i?i.originX:void 0),cC(n.y,t.y,e.y,i?i.originY:void 0)}function hC(n,t,e){n.min=e.min+t.min,n.max=n.min+Oe(t)}function $5(n,t,e){hC(n.x,t.x,e.x),hC(n.y,t.y,e.y)}function fC(n,t,e){n.min=t.min-e.min,n.max=n.min+Oe(t)}function Pc(n,t,e){fC(n.x,t.x,e.x),fC(n.y,t.y,e.y)}function _n(n){return[n("x"),n("y")]}const dA=({current:n})=>n?n.ownerDocument.defaultView:null,dC=(n,t)=>Math.abs(n-t);function W5(n,t){const e=dC(n.x,t.x),i=dC(n.y,t.y);return Math.sqrt(e**2+i**2)}class pA{constructor(t,e,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Kd(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,x=W5(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!x)return;const{point:E}=S,{timestamp:b}=Ee;this.history.push({...E,timestamp:b});const{onStart:w,onMove:D}=this.handlers;_||(w&&w(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,S)},this.handlePointerMove=(S,_)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Jd(_,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(S,_)=>{this.end();const{onEnd:x,onSessionEnd:E,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Kd(S.type==="pointercancel"?this.lastMoveEventInfo:Jd(_,this.transformPagePoint),this.history);this.startEvent&&x&&x(S,w),E&&E(S,w)},!Kg(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=o||window;const c=tl(t),h=Jd(c,this.transformPagePoint),{point:f}=h,{timestamp:p}=Ee;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=e;v&&v(t,Kd(h,this.history)),this.removeListeners=ja(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),gs(this.updatePoint)}}function Jd(n,t){return t?{point:t(n.point)}:n}function pC(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Kd({point:n},t){return{point:n,delta:pC(n,gA(t)),offset:pC(n,J5(t)),velocity:K5(t,.1)}}function J5(n){return n[0]}function gA(n){return n[n.length-1]}function K5(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const o=gA(n);for(;e>=0&&(i=n[e],!(o.timestamp-i.timestamp>ei(t)));)e--;if(!i)return{x:0,y:0};const a=An(o.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(o.x-i.x)/a,y:(o.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function j5(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?jt(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?jt(e,n,i.max):Math.min(n,e)),n}function gC(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function Q5(n,{top:t,left:e,bottom:i,right:o}){return{x:gC(n.x,e,o),y:gC(n.y,t,i)}}function mC(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function Z5(n,t){return{x:mC(n.x,t.x),y:mC(n.y,t.y)}}function tB(n,t){let e=.5;const i=Oe(n),o=Oe(t);return o>i?e=za(t.min,t.max-i,n.min):i>o&&(e=za(n.min,n.max-o,t.min)),Ii(0,1,e)}function eB(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Jp=.35;function nB(n=Jp){return n===!1?n=0:n===!0&&(n=Jp),{x:yC(n,"left","right"),y:yC(n,"top","bottom")}}function yC(n,t,e){return{min:vC(n,t),max:vC(n,e)}}function vC(n,t){return typeof n=="number"?n:n[t]||0}const iB=new WeakMap;class sB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=he(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(tl(v).point)},l=(v,S)=>{const{drag:_,dragPropagation:x,onDragStart:E}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cF(_),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_n(w=>{let D=this.getAxisMotionValue(w).get()||0;if(ni.test(D)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[w];k&&(D=Oe(k)*(parseFloat(D)/100))}}this.originPoint[w]=D}),E&&Jt.postRender(()=>E(v,S)),$p(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S;const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:E,onDrag:b}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:w}=S;if(x&&this.currentDirection===null){this.currentDirection=oB(w),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",S.point,w),this.updateAxis("y",S.point,w),this.visualElement.render(),b&&b(v,S)},h=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S,this.stop(v,S),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>_n(v=>{var S;return this.getAnimationState(v)==="paused"&&((S=this.getAxisMotionValue(v).animation)==null?void 0:S.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new pA(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:dA(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,o=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!o||!i)return;const{velocity:l}=o;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Jt.postRender(()=>c(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:o}=this.getProps();if(!i||!ju(t,o,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(l=j5(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,o=this.constraints;t&&Zo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Q5(i.layoutBox,t):this.constraints=!1,this.elastic=nB(e),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&_n(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=eB(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Zo(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=r5(i,o.root,this.visualElement.getTransformPagePoint());let l=Z5(o.layout.layoutBox,a);if(e){const c=e(i5(l));this.hasMutatedConstraints=!!c,c&&(l=Qb(c))}return l}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:o,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},f=_n(p=>{if(!ju(p,e,this.currentDirection))return;let v=h&&h[p]||{};l&&(v={min:0,max:0});const S=o?200:1e6,_=o?40:1e7,x={type:"inertia",velocity:i?t[p]:0,bounceStiffness:S,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(p,x)});return Promise.all(f).then(c)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return $p(this.visualElement,t),i.start(rm(t,i,0,e,this.visualElement,!1))}stopAnimation(){_n(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_n(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[e];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){_n(e=>{const{drag:i}=this.getProps();if(!ju(e,i,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(e);if(o&&o.layout){const{min:l,max:c}=o.layout.layoutBox[e];a.set(t[e]-jt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Zo(e)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};_n(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();o[l]=tB({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),_n(l=>{if(!ju(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];c.set(jt(h,f,o[l]))})}addListeners(){if(!this.visualElement.current)return;iB.set(this.visualElement,this);const t=this.visualElement.current,e=Oa(t,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Zo(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Jt.read(i);const l=$a(window,"resize",()=>this.scalePositionWithinConstraints()),c=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(_n(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=h[p].translate,v.set(v.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:l=Jp,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:o,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function ju(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function oB(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class rB extends Ss{constructor(t){super(t),this.removeGroupControls=Mn,this.removeListeners=Mn,this.controls=new sB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const SC=n=>(t,e)=>{n&&Jt.postRender(()=>n(t,e))};class aB extends Ss{constructor(){super(...arguments),this.removePointerDownListener=Mn}onPointerDown(t){this.session=new pA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:SC(t),onStart:SC(e),onMove:i,onEnd:(a,l)=>{delete this.session,o&&Jt.postRender(()=>o(a,l))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let jd=!1;class lB extends Z.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:o}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),i&&i.register&&o&&i.register(a),jd&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),uc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:o,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,jd=!0,o||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Jt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Jg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:o}=t;jd=!0,o&&(o.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mA(n){const[t,e]=Ub(),i=Z.useContext(Mg);return O.jsx(lB,{...n,layoutGroup:i,switchLayoutGroup:Z.useContext(Kb),isPresent:t,safeToRemove:e})}function uB(n,t,e){const i=De(n)?n:hr(n);return i.start(rm("",i,t,e)),i.animation}const cB=(n,t)=>n.depth-t.depth;class hB{constructor(){this.children=[],this.isDirty=!1}add(t){Ng(this.children,t),this.isDirty=!0}remove(t){Ig(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(cB),this.isDirty=!1,this.children.forEach(t)}}function fB(n,t){const e=$e.now(),i=({timestamp:o})=>{const a=o-e;a>=t&&(gs(i),n(a-t))};return Jt.setup(i,!0),()=>gs(i)}const yA=["TopLeft","TopRight","BottomLeft","BottomRight"],dB=yA.length,TC=n=>typeof n=="string"?parseFloat(n):n,_C=n=>typeof n=="number"||pt.test(n);function pB(n,t,e,i,o,a){o?(n.opacity=jt(0,e.opacity??1,gB(i)),n.opacityExit=jt(t.opacity??1,0,mB(i))):a&&(n.opacity=jt(t.opacity??1,e.opacity??1,i));for(let l=0;l<dB;l++){const c=`border${yA[l]}Radius`;let h=CC(t,c),f=CC(e,c);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||_C(h)===_C(f)?(n[c]=Math.max(jt(TC(h),TC(f),i),0),(ni.test(f)||ni.test(h))&&(n[c]+="%")):n[c]=f}(t.rotate||e.rotate)&&(n.rotate=jt(t.rotate||0,e.rotate||0,i))}function CC(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const gB=vA(0,.5,nb),mB=vA(.5,.95,Mn);function vA(n,t,e){return i=>i<n?0:i>t?1:e(za(n,t,i))}function xC(n,t){n.min=t.min,n.max=t.max}function Ln(n,t){xC(n.x,t.x),xC(n.y,t.y)}function EC(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function bC(n,t,e,i,o){return n-=t,n=Ic(n,1/e,i),o!==void 0&&(n=Ic(n,1/o,i)),n}function yB(n,t=0,e=1,i=.5,o,a=n,l=n){if(ni.test(t)&&(t=parseFloat(t),t=jt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=jt(a.min,a.max,i);n===a&&(c-=t),n.min=bC(n.min,t,e,c,o),n.max=bC(n.max,t,e,c,o)}function AC(n,t,[e,i,o],a,l){yB(n,t[e],t[i],t[o],t.scale,a,l)}const vB=["x","scaleX","originX"],SB=["y","scaleY","originY"];function wC(n,t,e,i){AC(n.x,t,vB,e?e.x:void 0,i?i.x:void 0),AC(n.y,t,SB,e?e.y:void 0,i?i.y:void 0)}function MC(n){return n.translate===0&&n.scale===1}function SA(n){return MC(n.x)&&MC(n.y)}function DC(n,t){return n.min===t.min&&n.max===t.max}function TB(n,t){return DC(n.x,t.x)&&DC(n.y,t.y)}function RC(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function TA(n,t){return RC(n.x,t.x)&&RC(n.y,t.y)}function NC(n){return Oe(n.x)/Oe(n.y)}function IC(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class _B{constructor(){this.members=[]}add(t){Ng(this.members,t),t.scheduleRender()}remove(t){if(Ig(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(o=>t===o);if(e===0)return!1;let i;for(let o=e;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CB(n,t,e){let i="";const o=n.x.translate/t.x,a=n.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((o||a||l)&&(i=`translate3d(${o}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:S,skewX:_,skewY:x}=e;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),S&&(i+=`rotateY(${S}deg) `),_&&(i+=`skewX(${_}deg) `),x&&(i+=`skewY(${x}deg) `)}const c=n.x.scale*t.x,h=n.y.scale*t.y;return(c!==1||h!==1)&&(i+=`scale(${c}, ${h})`),i||"none"}const Qd=["","X","Y","Z"],xB=1e3;let EB=0;function Zd(n,t,e,i){const{latestValues:o}=t;o[n]&&(e[n]=o[n],t.setStaticValue(n,0),i&&(i[n]=0))}function _A(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=rA(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:o,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Jt,!(o||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&_A(i)}function CA({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(l={},c=t==null?void 0:t()){this.id=EB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wB),this.nodes.forEach(NB),this.nodes.forEach(IB),this.nodes.forEach(MB)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new hB)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Og),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Lb(l)&&!mF(l),this.instance=l;const{layoutId:c,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let p,v=0;const S=()=>this.root.updateBlockedByResize=!1;Jt.read(()=>{v=window.innerWidth}),n(l,()=>{const _=window.innerWidth;_!==v&&(v=_,this.root.updateBlockedByResize=!0,p&&p(),p=fB(S,250),uc.hasAnimatedSinceResize&&(uc.hasAnimatedSinceResize=!1,this.nodes.forEach(OC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:S,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||UB,{onLayoutAnimationStart:E,onLayoutAnimationComplete:b}=f.getProps(),w=!this.targetLayout||!TA(this.targetLayout,_),D=!v&&S;if(this.options.layoutRoot||this.resumeFrom||D||v&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...$g(x,"layout"),onPlay:E,onComplete:b};(f.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(p,D)}else v||OC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PB),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_A(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(RB),this.nodes.forEach(bB),this.nodes.forEach(AB)):this.nodes.forEach(kC),this.clearAllSnapshots();const c=$e.now();Ee.delta=Ii(0,1e3/60,c-Ee.timestamp),Ee.timestamp=c,Ee.isProcessing=!0,Gd.update.process(Ee),Gd.preRender.process(Ee),Gd.render.process(Ee),Ee.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DB),this.sharedNodes.forEach(kB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Oe(this.snapshot.measuredBox.x)&&!Oe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=he(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!SA(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(c||Hs(this.latestValues)||p)&&(o(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),VB(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return he();const c=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(FB))){const{scroll:p}=this.root;p&&(tr(c.x,p.offset.x),tr(c.y,p.offset.y))}return c}removeElementScroll(l){var h;const c=he();if(Ln(c,l),(h=this.scroll)!=null&&h.wasRoot)return c;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:S}=p;p!==this.root&&v&&S.layoutScroll&&(v.wasRoot&&Ln(c,l),tr(c.x,v.offset.x),tr(c.y,v.offset.y))}return c}applyTransform(l,c=!1){const h=he();Ln(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&er(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Hs(p.latestValues)&&er(h,p.latestValues)}return Hs(this.latestValues)&&er(h,this.latestValues),h}removeTransform(l){const c=he();Ln(c,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Hs(f.latestValues))continue;zp(f.latestValues)&&f.updateSnapshot();const p=he(),v=f.measurePageBox();Ln(p,v),wC(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Hs(this.latestValues)&&wC(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ee.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var _;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!this.layout||!(p||v))return;this.resolvedRelativeTargetAt=Ee.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=he(),this.targetWithTransforms=he()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ln(this.target,this.layout.layoutBox),tA(this.target,this.targetDelta)):Ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||zp(this.parent.latestValues)||Zb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),Pc(this.relativeTargetOrigin,c,h),Ln(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ee.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Ln(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,S=this.treeScale.y;o5(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=he());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EC(this.prevProjectionDelta.x,this.projectionDelta.x),EC(this.prevProjectionDelta.y,this.projectionDelta.y)),La(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==S||!IC(this.projectionDelta.x,this.prevProjectionDelta.x)||!IC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nr(),this.projectionDelta=nr(),this.projectionDeltaWithTransform=nr()}setAnimationOrigin(l,c=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},v=nr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const S=he(),_=h?h.source:void 0,x=this.layout?this.layout.source:void 0,E=_!==x,b=this.getStack(),w=!b||b.members.length<=1,D=!!(E&&!w&&this.options.crossfade===!0&&!this.path.some(LB));this.animationProgress=0;let R;this.mixTargetDelta=k=>{const L=k/1e3;LC(v.x,l.x,L),LC(v.y,l.y,L),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pc(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OB(this.relativeTarget,this.relativeTargetOrigin,S,L),R&&TB(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=he()),Ln(R,this.relativeTarget)),E&&(this.animationValues=p,pB(p,f,this.latestValues,L,D,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,h,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{uc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hr(0)),this.currentAnimation=uB(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:f,latestValues:p}=l;if(!(!c||!h||!f)){if(this!==l&&this.layout&&f&&xA(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||he();const v=Oe(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+v;const S=Oe(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+S}Ln(c,h),er(c,p),La(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new _B),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const f={};h.z&&Zd("z",l,f,this.animationValues);for(let p=0;p<Qd.length;p++)Zd(`rotate${Qd[p]}`,l,f,this.animationValues),Zd(`skew${Qd[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=lc(c==null?void 0:c.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=lc(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Hs(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=CB(this.projectionDeltaWithTransform,this.treeScale,p);h&&(v=h(p,v)),l.transform=v;const{x:S,y:_}=this.projectionDelta;l.transformOrigin=`${S.origin*100}% ${_.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Hp){if(p[x]===void 0)continue;const{correct:E,applyTo:b,isCSSVariable:w}=Hp[x],D=v==="none"?p[x]:E(p[x],f);if(b){const R=b.length;for(let k=0;k<R;k++)l[b[k]]=D}else w?this.options.visualElement.renderState.vars[x]=D:l[x]=D}this.options.layoutId&&(l.pointerEvents=f===this?lc(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(PC),this.root.sharedNodes.clear()}}}function bB(n){n.updateLayout()}function AB(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=n.layout,{animationType:a}=n.options,l=t.source!==n.layout.source;a==="size"?_n(v=>{const S=l?t.measuredBox[v]:t.layoutBox[v],_=Oe(S);S.min=i[v].min,S.max=S.min+_}):xA(a,t.layoutBox,i)&&_n(v=>{const S=l?t.measuredBox[v]:t.layoutBox[v],_=Oe(i[v]);S.max=S.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+_)});const c=nr();La(c,i,t.layoutBox);const h=nr();l?La(h,n.applyTransform(o,!0),t.measuredBox):La(h,i,t.layoutBox);const f=!SA(c);let p=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:S,layout:_}=v;if(S&&_){const x=he();Pc(x,t.layoutBox,S.layoutBox);const E=he();Pc(E,i,_.layoutBox),TA(x,E)||(p=!0),v.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=x,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:h,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function wB(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function MB(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function DB(n){n.clearSnapshot()}function PC(n){n.clearMeasurements()}function kC(n){n.isLayoutDirty=!1}function RB(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function OC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function NB(n){n.resolveTargetDelta()}function IB(n){n.calcProjection()}function PB(n){n.resetSkewAndRotation()}function kB(n){n.removeLeadSnapshot()}function LC(n,t,e){n.translate=jt(t.translate,0,e),n.scale=jt(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function UC(n,t,e,i){n.min=jt(t.min,e.min,i),n.max=jt(t.max,e.max,i)}function OB(n,t,e,i){UC(n.x,t.x,e.x,i),UC(n.y,t.y,e.y,i)}function LB(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const UB={duration:.45,ease:[.4,0,.1,1]},VC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),FC=VC("applewebkit/")&&!VC("chrome/")?Math.round:Mn;function BC(n){n.min=FC(n.min),n.max=FC(n.max)}function VB(n){BC(n.x),BC(n.y)}function xA(n,t,e){return n==="position"||n==="preserve-aspect"&&!X5(NC(t),NC(e),.2)}function FB(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const BB=CA({attachResizeListener:(n,t)=>$a(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tp={current:void 0},EA=CA({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!tp.current){const n=new BB({});n.mount(window),n.setOptions({layoutScroll:!0}),tp.current=n}return tp.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),GB={pan:{Feature:aB},drag:{Feature:rB,ProjectionNode:EA,MeasureLayout:mA}};function GC(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const o="onHover"+e,a=i[o];a&&Jt.postRender(()=>a(t,tl(t)))}class HB extends Ss{mount(){const{current:t}=this.node;t&&(this.unmount=hF(t,(e,i)=>(GC(this.node,i,"Start"),o=>GC(this.node,o,"End"))))}unmount(){}}class zB extends Ss{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ja($a(this.node.current,"focus",()=>this.onFocus()),$a(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function HC(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const o="onTap"+(e==="End"?"":e),a=i[o];a&&Jt.postRender(()=>a(t,tl(t)))}class qB extends Ss{mount(){const{current:t}=this.node;t&&(this.unmount=gF(t,(e,i)=>(HC(this.node,i,"Start"),(o,{success:a})=>HC(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kp=new WeakMap,ep=new WeakMap,YB=n=>{const t=Kp.get(n.target);t&&t(n)},XB=n=>{n.forEach(YB)};function $B({root:n,...t}){const e=n||document;ep.has(e)||ep.set(e,{});const i=ep.get(e),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(XB,{root:n,...t})),i[o]}function WB(n,t,e){const i=$B(t);return Kp.set(n,e),i.observe(n),()=>{Kp.delete(n),i.unobserve(n)}}const JB={some:0,all:1};class KB extends Ss{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:o="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:JB[o]},c=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),S=f?p:v;S&&S(h)};return WB(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(jB(t,e))&&this.startObserver()}unmount(){}}function jB({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const QB={inView:{Feature:KB},tap:{Feature:qB},focus:{Feature:zB},hover:{Feature:HB}},ZB={layout:{ProjectionNode:EA,MeasureLayout:mA}},t3={...B5,...QB,...GB,...ZB},Kn=n5(t3,g5),zC=({isOpen:n,onClose:t,title:e,children:i})=>O.jsx(Vb,{children:n&&O.jsxs(O.Fragment,{children:[O.jsx(Kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 z-[60] backdrop-blur-sm"}),O.jsxs(Kn.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-[70] glass border-t border-white/20 rounded-t-[32px] max-h-[85vh] overflow-hidden shadow-[0_-20px_50px_rgba(0,0,0,0.5)]",children:[O.jsx("div",{className:"flex justify-center pt-3 pb-1",children:O.jsx("div",{className:"w-12 h-1.5 bg-white/20 rounded-full"})}),O.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[O.jsx("h2",{className:"text-xl font-black",children:e}),O.jsx("button",{onClick:t,className:"p-2 glass rounded-full text-slate-400 hover:text-white transition-colors",children:O.jsx($C,{className:"w-5 h-5"})})]}),O.jsx("div",{className:"px-6 pb-12 overflow-y-auto max-h-[calc(85vh-80px)]",children:i})]})]})}),e3=({template:n,onBack:t,rotResult:e})=>{const i=Z.useRef(null),o=Z.useRef(null),a=Z.useRef(null),[l,c]=Z.useState(null),[h,f]=Z.useState(null),[p,v]=Z.useState(null),[S,_]=Z.useState([]),[x,E]=Z.useState(!1),[b,w]=Z.useState(null);Z.useEffect(()=>{WC().then(_)},[]),Z.useEffect(()=>{if(!i.current||!o.current)return;const V=o.current.clientWidth-32,$=Math.min(V,800),et=n.width&&n.height?n.height/n.width:1,st=$*et,at=new wp(i.current,{width:$,height:st,backgroundColor:"#0f172a",preserveObjectStacking:!0});return Cn.fromURL(n.url,{crossOrigin:"anonymous"}).then(it=>{const ct=$/it.width,Et=st/it.height;it.set({selectable:!1,evented:!1,originX:"left",originY:"top"}),it.scaleX=ct,it.scaleY=Et,at.add(it),at.sendObjectToBack(it),at.renderAll()}),at.on("selection:created",it=>{var ct;return v(((ct=it.selected)==null?void 0:ct[0])||null)}),at.on("selection:updated",it=>{var ct;return v(((ct=it.selected)==null?void 0:ct[0])||null)}),at.on("selection:cleared",()=>v(null)),c(at),()=>at.dispose()},[n]);const D=()=>{if(!l)return;const V=new bn("YOUR TEXT",{left:l.getWidth()/2,top:l.getHeight()/4,fontFamily:"Impact, Arial, sans-serif",fontSize:50,fill:"#ffffff",stroke:"#000000",strokeWidth:2,fontWeight:"bold",originX:"center",textAlign:"center",shadow:new ti({color:"rgba(0,0,0,0.9)",blur:8,offsetX:2,offsetY:2})});l.add(V),l.setActiveObject(V),f("style")},R=V=>{l&&Cn.fromURL(V,{crossOrigin:"anonymous"}).then($=>{const st=Math.min(l.getWidth(),l.getHeight())/2/Math.max($.width,$.height);$.set({left:l.getWidth()/2,top:l.getHeight()/2,originX:"center",originY:"center",scaleX:st,scaleY:st}),l.add($),l.setActiveObject($),f(null)})},k=V=>{var et;const $=(et=V.target.files)==null?void 0:et[0];if($){const st=new FileReader;st.onload=at=>{var it;return R((it=at.target)==null?void 0:it.result)},st.readAsDataURL($)}},L=()=>{!l||!p||(l.remove(p),l.discardActiveObject(),l.requestRenderAll())},Y=async()=>{if(!l)return;E(!0);const V=new wa({type:"linear",gradientUnits:"pixels",coords:{x1:0,y1:0,x2:150,y2:0},colorStops:[{offset:0,color:"#3b82f6"},{offset:.5,color:"#a855f7"},{offset:1,color:"#ec4899"}]}),$=new we("MEMEFORGE",{fontSize:14,fontFamily:"Inter, sans-serif",fontWeight:"bold",fill:V,opacity:.7,left:12,top:l.getHeight()-28,selectable:!1,evented:!1,charSpacing:100,stroke:"rgba(0,0,0,0.5)",strokeWidth:1});l.add($),l.renderAll();const et=l.toDataURL({format:"png",quality:1,multiplier:2});if(w(et),navigator.share)try{const at=await(await fetch(et)).blob(),it=new File([at],`meme-${Date.now()}.png`,{type:"image/png"});await navigator.share({files:[it],title:"Forged with MemeForge",text:"Check out this meme I forged!"})}catch(st){console.warn("Share failed or cancelled",st)}else{const st=document.createElement("a");st.download=`meme-${Date.now()}.png`,st.href=et,st.click()}l.remove($),l.renderAll(),E(!1)},G=(V,$)=>{!l||!p||(p.set(V,$),l.requestRenderAll())};return O.jsxs("div",{ref:o,className:"flex flex-col items-center px-4 pt-4 animate-in fade-in zoom-in-95 duration-500 pb-12",children:[e&&!b&&O.jsx("div",{className:`w-full max-w-lg mb-4 p-4 glass rounded-3xl border-2 transition-all flex flex-col gap-3 ${e.isRot?"border-orange-500/50 bg-orange-500/10":"border-emerald-500/50 bg-emerald-500/10"}`,children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:`p-2 rounded-xl ${e.isRot?"bg-orange-500/20":"bg-emerald-500/20"}`,children:e.isRot?O.jsx(OM,{className:"w-5 h-5 text-orange-500"}):O.jsx(SS,{className:"w-5 h-5 text-emerald-500"})}),O.jsxs("div",{children:[O.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest leading-none mb-1",children:"Intelligence Scan"}),O.jsxs("p",{className:`text-sm font-black ${e.isRot?"text-orange-400":"text-emerald-400"}`,children:[e.isRot?"BRAIN ROT DETECTED":"ASSET IS CLEAN"," (",e.score,"%)"]})]})]}),O.jsx("div",{className:"flex gap-1 h-2 w-20 bg-slate-800 rounded-full overflow-hidden",children:O.jsx("div",{className:`h-full transition-all duration-1000 ${e.isRot?"bg-orange-500":"bg-emerald-500"}`,style:{width:`${e.score}%`}})})]})}),!b&&O.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-6 bg-white/5 p-3 rounded-2xl border border-white/10 shadow-2xl",children:[O.jsx("div",{className:"flex gap-1",children:O.jsx("button",{onClick:t,className:"px-4 py-2 hover:bg-white/10 rounded-xl transition-all text-xs font-bold uppercase tracking-widest text-slate-400",children:"Back"})}),O.jsxs("div",{className:"flex gap-2",children:[p&&O.jsx("button",{onClick:L,className:"p-2 bg-red-500/10 text-red-500 rounded-xl border border-red-500/20 active:scale-90 transition-all",children:O.jsx(UM,{className:"w-5 h-5"})}),O.jsxs("button",{id:"download-btn",onClick:Y,disabled:x,className:`flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-500 rounded-xl font-black text-sm transition-all active:scale-95 shadow-xl shadow-blue-500/30 uppercase tracking-tighter ${x?"opacity-50":""}`,children:[x?O.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):O.jsx(RM,{className:"w-4 h-4"}),O.jsx("span",{children:x?"Forging...":"Finish"})]})]})]}),b&&O.jsxs("div",{className:"fixed inset-0 z-[100] glass flex flex-col items-center justify-center p-6 animate-in fade-in slide-in-from-bottom-10 duration-500",children:[O.jsx("button",{onClick:()=>w(null),className:"absolute top-6 right-6 p-4 glass rounded-full text-white",children:O.jsx($C,{size:24})}),O.jsxs("div",{className:"text-center mb-8",children:[O.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-500/40",children:O.jsx(SS,{className:"text-emerald-500 w-8 h-8"})}),O.jsx("h2",{className:"text-3xl font-black mb-2 tracking-tighter",children:"Meme Forged!"}),O.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Long press the image below to save it to your phone."})]}),O.jsx("div",{className:"relative group max-w-full rounded-2xl overflow-hidden shadow-2xl border-4 border-white/10 mb-8",children:O.jsx("img",{src:b,alt:"Final Meme",className:"max-h-[60vh] object-contain"})}),O.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs",children:[O.jsxs("button",{onClick:()=>{const V=document.createElement("a");V.download=`meme-${Date.now()}.png`,V.href=b,V.click()},className:"flex items-center justify-center gap-3 w-full py-4 bg-white text-black rounded-2xl font-black uppercase tracking-tight active:scale-95 transition-all shadow-xl",children:[O.jsx(XC,{size:20}),"Save to Device"]}),navigator.share&&O.jsxs("button",{onClick:()=>{fetch(b).then(V=>V.blob()).then(V=>{const $=new File([V],"meme.png",{type:"image/png"});navigator.share({files:[$]})})},className:"flex items-center justify-center gap-3 w-full py-4 glass border-white/20 rounded-2xl font-black uppercase tracking-tight active:scale-95 transition-all",children:[O.jsx(PM,{size:20}),"Share Meme"]})]})]}),O.jsx("div",{className:`relative group ring-1 ring-white/10 shadow-[0_0_100px_rgba(0,0,0,0.5)] rounded-2xl overflow-hidden bg-slate-900 ${b?"hidden":""}`,children:O.jsx("canvas",{ref:i})}),!b&&O.jsxs("div",{className:"mt-8 grid grid-cols-4 gap-3 w-full max-w-lg px-2",children:[O.jsxs("button",{onClick:D,className:"flex flex-col items-center gap-2 p-4 glass rounded-3xl hover:bg-white/10 transition-all group",children:[O.jsx("div",{className:"p-3 bg-purple-500/20 rounded-2xl group-hover:scale-110 transition-transform",children:O.jsx(FM,{className:"w-6 h-6 text-purple-400"})}),O.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-tighter",children:"Text"})]}),O.jsxs("button",{onClick:()=>f("overlay"),className:"flex flex-col items-center gap-2 p-4 glass rounded-3xl hover:bg-white/10 transition-all group",children:[O.jsx("div",{className:"p-3 bg-blue-500/20 rounded-2xl group-hover:scale-110 transition-transform",children:O.jsx(TM,{className:"w-6 h-6 text-blue-400"})}),O.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-tighter",children:"Add Pic"})]}),O.jsxs("button",{onClick:()=>f("style"),className:`flex flex-col items-center gap-2 p-4 glass rounded-3xl hover:bg-white/10 transition-all group ${p?"":"opacity-30"}`,disabled:!p,children:[O.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-2xl group-hover:scale-110 transition-transform",children:O.jsx(EM,{className:"w-6 h-6 text-emerald-400"})}),O.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-tighter",children:"Style"})]}),O.jsxs("button",{className:"flex flex-col items-center gap-2 p-4 glass rounded-3xl hover:bg-white/10 transition-all group opacity-50 cursor-not-allowed",children:[O.jsx("div",{className:"p-3 bg-slate-500/20 rounded-2xl",children:O.jsx(CM,{className:"w-6 h-6 text-slate-400"})}),O.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-tighter",children:"Layers"})]})]}),O.jsx(zC,{isOpen:h==="overlay",onClose:()=>f(null),title:"Add Asset Overlay",children:O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("button",{onClick:()=>{var V;return(V=a.current)==null?void 0:V.click()},className:"flex items-center justify-center gap-2 py-6 bg-blue-600/20 border-2 border-dashed border-blue-500/40 rounded-3xl font-bold text-blue-400 hover:bg-blue-600/30 transition-all",children:[O.jsx(MM,{className:"w-5 h-5"})," Upload File"]}),O.jsx("input",{ref:a,type:"file",className:"hidden",accept:"image/*",onChange:k}),O.jsxs("div",{className:"flex flex-col justify-center px-4 bg-white/5 rounded-3xl",children:[O.jsx("span",{className:"text-xs font-black uppercase text-slate-500 mb-1",children:"Search"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(Qp,{className:"w-4 h-4 text-slate-500"}),O.jsx("input",{type:"text",placeholder:"Find meme...",className:"bg-transparent text-sm font-bold outline-none w-full"})]})]})]}),O.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3 max-h-[400px] overflow-y-auto pr-2",children:S.map(V=>O.jsx("button",{onClick:()=>R(V.url),className:"aspect-square glass rounded-xl overflow-hidden active:scale-90 transition-transform border-white/5 hover:border-blue-500/50",children:O.jsx("img",{src:V.url,className:"w-full h-full object-cover",loading:"lazy"})},V.id))})]})}),O.jsx(zC,{isOpen:h==="style",onClose:()=>f(null),title:"Layer Stylist",children:p?O.jsxs("div",{className:"space-y-8",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-4 block",children:"Transformation"}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{className:"p-4 glass rounded-2xl",children:[O.jsx("span",{className:"text-[10px] font-bold text-slate-400 block mb-2 uppercase",children:"Opacity"}),O.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:p.opacity,onChange:V=>G("opacity",parseFloat(V.target.value)),className:"w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),p instanceof bn&&O.jsxs("div",{className:"p-4 glass rounded-2xl",children:[O.jsx("span",{className:"text-[10px] font-bold text-slate-400 block mb-2 uppercase",children:"Size"}),O.jsx("input",{type:"range",min:"10",max:"200",value:p.fontSize,onChange:V=>G("fontSize",parseInt(V.target.value)),className:"w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-purple-500"})]})]})]}),p instanceof bn&&O.jsxs("div",{children:[O.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-4 block",children:"Palette"}),O.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-2 px-2 scrollbar-hide",children:["#ffffff","#000000","#ff0000","#00ff00","#0088ff","#ffcc00","#ff00ff","#00ffff"].map(V=>O.jsx("button",{onClick:()=>G("fill",V),className:"w-12 h-12 rounded-2xl flex-shrink-0 border-4 border-white/10 hover:border-white/40 transition-all shadow-xl",style:{backgroundColor:V}},V))})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsx("button",{onClick:()=>{p.set("flipX",!p.flipX),l==null||l.renderAll()},className:"py-4 glass rounded-2xl font-black uppercase text-xs text-slate-400 hover:text-white transition-colors",children:"Flip Horizontal"}),O.jsx("button",{onClick:()=>{l==null||l.bringObjectToFront(p),l==null||l.renderAll()},className:"py-4 glass rounded-2xl font-black uppercase text-xs text-slate-400 hover:text-white transition-colors",children:"Bring to Front"})]})]}):O.jsx("div",{className:"py-20 text-center text-slate-500 font-bold uppercase tracking-widest",children:"Select a layer to style"})})]})},n3=({onComplete:n})=>{const[t,e]=Z.useState(!0),[i,o]=Z.useState(!1);return Z.useEffect(()=>{const a=setTimeout(()=>{o(!0)},2200),l=setTimeout(()=>{e(!1),setTimeout(n,800)},4e3);return()=>{clearTimeout(a),clearTimeout(l)}},[n]),O.jsx(Vb,{children:t&&O.jsxs(Kn.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col items-center justify-center p-6 text-center overflow-hidden",children:[O.jsxs("div",{className:"mb-10 relative h-32 w-32 flex items-center justify-center",children:[O.jsx(Kn.div,{animate:{scale:i?1.2:[1.1,1.6,1.2,1.8,1.4],opacity:i?.3:[.4,.8,.4,.9,.5]},transition:{duration:i?2:.3,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 bg-blue-600/40 blur-[60px] rounded-full"}),!i&&[0,1,2].map(a=>O.jsx(Kn.div,{initial:{opacity:0,y:0,scale:.8},animate:{opacity:[0,.6,0],y:-120-a*30,scale:[.8,1.4,.4],x:[0,a%2===0?30:-30,0]},transition:{duration:1.2,repeat:1/0,delay:a*.3,ease:"easeOut"},className:"absolute text-blue-400/40 filter blur-md",children:O.jsx(Qu,{size:56,fill:"currentColor"})},a)),O.jsxs(Kn.div,{initial:{scale:0,rotate:-45,opacity:0},animate:{scale:i?1:[.92,1.08,.95,1.05,1],rotate:i?0:[0,3,-2,4,0],opacity:1,filter:i?"blur(0px)":["blur(0px)","blur(1.5px)","blur(0px)"]},transition:{scale:i?{type:"spring",stiffness:200,damping:20}:{duration:.1,repeat:1/0},rotate:{duration:.08,repeat:i?0:1/0},filter:{duration:.15,repeat:i?0:1/0},opacity:{duration:.5}},className:"relative z-10",children:[O.jsx(Qu,{className:`w-24 h-24 transition-all duration-1000 ${i?"text-blue-500 fire-glow":"text-blue-300"}`,fill:"currentColor"}),!i&&O.jsx(Kn.div,{animate:{opacity:[.3,1,.3],scale:[1,1.1,1]},transition:{duration:.05,repeat:1/0},className:"absolute inset-0 flex items-center justify-center mix-blend-overlay",children:O.jsx(Qu,{className:"w-24 h-24 text-white",fill:"currentColor"})})]})]}),O.jsxs(Kn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.8},className:"z-20",children:[O.jsx("h1",{className:"text-5xl font-black gradient-text tracking-tighter mb-4 select-none",children:"MemeForge"}),O.jsx(Kn.p,{initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:1.5},className:"text-slate-400 font-bold uppercase tracking-[0.4em] text-[10px] italic h-4",children:'"brain rot is not cool"'})]}),O.jsx("div",{className:"w-48 h-0.5 bg-slate-900 rounded-full mt-12 overflow-hidden relative",children:O.jsx(Kn.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:3.5,ease:"linear"},className:"absolute inset-y-0 left-0 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500"})})]})})},i3=()=>{const[n,t]=Z.useState("home"),[e,i]=Z.useState([]),[o,a]=Z.useState(null),[l,c]=Z.useState(),[h,f]=Z.useState(!0),[p,v]=Z.useState(!0);Z.useEffect(()=>{(async()=>{const E=await WC();i(E),f(!1)})()},[]);const S=(x,E)=>{a(x),c(E),t("editor")},_=()=>{t("home"),a(null),c(void 0)};return O.jsxs("div",{className:"flex flex-col min-h-screen bg-slate-950 text-white selection:bg-purple-500/30",children:[p&&O.jsx(n3,{onComplete:()=>v(!1)}),O.jsxs("header",{className:"sticky top-0 z-40 w-full glass px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:_,children:[O.jsx(Qu,{className:"w-8 h-8 text-blue-500 fire-glow",fill:"currentColor"}),O.jsx("span",{className:"text-xl font-extrabold tracking-tight gradient-text",children:"MemeForge"})]}),O.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:O.jsx(Qp,{className:"w-5 h-5 text-slate-400"})})]}),O.jsx("main",{className:"flex-1 pb-24 overflow-y-auto",children:h?O.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),O.jsx("p",{className:"text-slate-400 animate-pulse font-medium",children:"Forging Templates..."})]}):O.jsxs(O.Fragment,{children:[n==="home"&&O.jsx(rO,{templates:e,onSelect:S}),n==="editor"&&o&&O.jsx(e3,{template:o,onBack:_,rotResult:l})]})}),O.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 glass border-t border-white/10 pb-safe shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.5)]",children:O.jsxs("div",{className:"flex justify-around items-center h-16 max-w-lg mx-auto",children:[O.jsxs("button",{onClick:()=>t("home"),className:`flex flex-col items-center gap-1 transition-all ${n==="home"?"text-blue-500 scale-110":"text-slate-400"}`,children:[O.jsx(vM,{className:"w-6 h-6"}),O.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Home"})]}),O.jsxs("button",{disabled:!o,onClick:()=>t("editor"),className:`flex flex-col items-center gap-1 transition-all ${n==="editor"?"text-purple-500 scale-110":"text-slate-400"} ${o?"":"opacity-30 cursor-not-allowed"}`,children:[O.jsx(AM,{className:"w-6 h-6"}),O.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Editor"})]}),O.jsxs("button",{onClick:()=>{var x;return n==="editor"&&((x=document.getElementById("download-btn"))==null?void 0:x.click())},className:`flex flex-col items-center gap-1 transition-all text-slate-400 active:scale-95 ${n!=="editor"?"opacity-30 cursor-not-allowed":""}`,children:[O.jsx(XC,{className:"w-6 h-6"}),O.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Save"})]})]})})]})},bA=document.getElementById("root");if(!bA)throw new Error("Could not find root element to mount to");const s3=rM.createRoot(bA);s3.render(O.jsx(Q1.StrictMode,{children:O.jsx(i3,{})}));
